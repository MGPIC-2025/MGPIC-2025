# Mobile分支 - 虚拟摇杆控制说明

## 概述

Mobile分支专为移动设备设计，使用虚拟摇杆控制系统，完全移除了鼠标和触控板控制模式。

## 控制方式

### 左侧摇杆 - 移动控制
- **位置**: 屏幕左下角
- **功能**: 控制相机在场景中的水平移动
  - 向前推：向前移动
  - 向后拉：向后移动
  - 向左推：向左移动
  - 向右推：向右移动

### 右侧摇杆 - 视角控制
- **位置**: 屏幕右下角
- **功能**: 控制相机视角旋转
  - 左右推：左右旋转视角（水平旋转）
  - 上下推：上下旋转视角（俯仰角度）

### 垂直移动按钮
- **位置**: 屏幕右下角，视角摇杆左侧
- **功能**: 控制相机垂直升降
  - ▲ 按钮：向上移动
  - ▼ 按钮：向下移动

## 技术实现

### 核心组件

1. **VirtualControls.vue**
   - 虚拟摇杆和按钮的UI组件
   - 处理触摸事件并转换为归一化输入值
   - 响应式设计，适配各种屏幕尺寸

2. **GameScene.vue**
   - 集成虚拟控制组件
   - 在动画循环中处理虚拟输入
   - 将虚拟输入映射到相机移动和旋转

### 设置默认值

- `gameSettings.js`: 默认控制模式设置为 `'mobile'`
- `App.vue`: 移除了控制模式选择界面
- `GameScene.vue`: 固定使用mobile控制模式

## 响应式设计

虚拟控制组件包含多个断点以适配不同屏幕尺寸：

- **默认** (>768px): 完整尺寸的摇杆和按钮
- **中等屏幕** (≤768px): 稍小的控制元素
- **小屏幕** (≤480px): 最小化的控制元素，优化触摸区域

## 兼容性

- ✅ 移动设备浏览器（iOS Safari, Chrome Mobile等）
- ✅ 平板设备
- ✅ 桌面浏览器（通过触摸模拟或键盘仍可使用）

## 注意事项

1. 虚拟控制仅在游戏场景（GameScene）中显示
2. 在大厅（Hall）、仓库（Warehouse）等界面不会显示虚拟控制
3. 键盘控制（WASD、Shift、Space）仍然可用，作为备用控制方式
4. 虚拟摇杆使用触摸事件，不会与点击场景中的游戏对象冲突

## 与主分支的区别

**Mobile分支特点**:
- 固定使用虚拟摇杆控制
- 移除了控制模式选择UI
- 默认配置针对移动设备优化

**主分支特点**:
- 支持多种控制模式（触控板、鼠标）
- 包含控制模式切换界面
- 主要针对桌面设备

## 未来改进方向

- [ ] 添加摇杆灵敏度调节
- [ ] 支持自定义摇杆位置
- [ ] 添加haptic反馈（震动）
- [ ] 优化触摸响应延迟
- [ ] 添加摇杆外观主题

