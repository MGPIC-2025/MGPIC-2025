# TODO 清单

## 功能（Features）

- [ ] 场景系统
  - [ ] 场景切换与地图加载
  - [ ] 为场景添加地形和边界（可选）
  - [x] 缩小初始地图，随等级扩大
- [ ] 战斗系统（基础）
  - [ ] 添加暴击率和暴击倍率参数，初始暴击率为 5% ，倍率为 200%（可选）
  - [x] 移动力调整
    - [x] 添加 `speed` 参数，决定铜偶和怪物的移动距离
  - [ ] 伤害计算公式和类型
    1. 判定闪避：若 rand < defender.dodge => 命中失败。
    2. 计算有效攻击/防御（考虑穿甲与百分比增益）
    3. 比率转换为命中伤害比例：ratio = atk\_eff / (atk\_eff + k \* def\_eff)，推荐 k = 1.0（中性，atk == def 时伤害保留约 50%）。
    4. raw = base\_damage \* ratio
    5. 应用暴击：若 rand < crit\_chance => raw \*= crit\_multiplier
    6. 应用抗性/减伤：raw \*= (1 - resist)
    7. 最终伤害：final = max(min\_damage, floor(raw - flat\_reduction))
  - [ ] 技能与装备系统
  - [ ] 调整资源为全局，不再把资源放在铜偶身上
  - [ ] 添加 level 3/4 的敌人
  - [ ] 优化敌人的生成逻辑（别生成在脸上）
- [ ] UI
  - [ ] 选中敌人UI
    - [ ] 查看敌人攻击范围和攻击目标
    - [ ] 查看敌人移动范围
    - [ ] 查看敌人名称和描述
    - [ ] 查看敌人下一步行动、攻击目标
  - [ ] 选中铜偶UI
    - [ ] 查看铜偶移动范围
    - [ ] 查看铜偶攻击范围
    - [ ] 查看铜偶是否会被攻击
  - [ ] 其他选中UI
    - [ ] 添加资源点选中UI
  - [ ] 菜单/背包界面
  - [ ] 控制UI
    - [ ] 当选中第三个铜偶时点击“下一个”理应跳转到第一个，但实际上会跳转到第二个

## 资源（Assets）

- [ ] 美术素材
  - [ ] 场景
    - [ ] 添加地块美术
  - [ ] 人物
    - [ ] 优化血条显示（添加边框）
- [ ] 音效与音乐
  - [ ] 背景音乐（主场景/战斗）
    - 目前只有一首 BGM ，考虑加入多首 BGM 且根据楼层切换
  - [ ] 关键交互音效
    - [ ] 铜偶受伤音效
    - [ ] 敌人攻击音效
    - [ ] 敌人生成音效

## 数值（Data）

- [ ] 铜偶数值
  - [ ] 调整建筑师的资源结构
    - [ ] 让建筑师落地就能建造资源获取型建筑
    - [ ] 在怪物掉落添加足量的资源
    - [ ] 减少建筑的资源消耗
  - [ ] 增强铜偶移动力
  - [ ] 优化铜偶成长曲线
- [ ] 敌人数值
  - 建议的数值原则
    - 普通敌人 HP 随等级线性或小幅指数增长（每级 +20% 或 +1.15^level）；攻击力每级 +10%~+20%。
    - 定义“期望战斗轮数”（针对普通怪）：2–5 回合。用该期望和玩家平均伤害倒推敌人HP。
    - 刺客/玻璃型：HP 低（能被 1–2 次攻击击倒），但 dodge/attack 高；确保不随意交互导致无脑一击必杀玩家。
    - 坦克型：HP 高、防高、攻击低，造成推进缓慢但稳固威胁。
    - Boss：HP/掉落/技能应明显高于普通怪，确保战斗是多阶段的（非仅数值堆砌）。
  - [x] 优化敌人数量
  - [x] 优化敌人血量
  - [ ] 优化敌人掉落物
    - [ ] 调整掉落数量为随机
    - [ ] 资源掉落后直接进入背包不需要拾取
