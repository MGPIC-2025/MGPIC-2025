const Pi={$tag:0},o_={$tag:1},$_={$tag:2};function An(t,e){this._0=t,this._1=e}An.prototype.$tag=3;function z(t){this._0=t}z.prototype.$tag=4;function jt(t){this._0=t}jt.prototype.$tag=5;function E(t){this._0=t}E.prototype.$tag=6;const ds=new DataView(new ArrayBuffer(8));function x$(t){return ds.setInt32(0,t,!0),ds.getFloat32(0,!0)}const Ct={hi:0,lo:1},it={hi:0,lo:0},vi={hi:232830643,lo:-1486618624},kt={hi:0,lo:10},Gi={hi:0,lo:100},xi={hi:0,lo:1e3},ji={hi:0,lo:1e4},Oi={hi:0,lo:1e5},Ai={hi:0,lo:1e6},Ei={hi:0,lo:1e7},Ri={hi:0,lo:1e8},zi={hi:0,lo:1e9},Ji={hi:2,lo:1410065408},Ti={hi:23,lo:1215752192},qi={hi:232,lo:-727379968},Bi={hi:2328,lo:1316134912},Fi={hi:23283,lo:276447232},Hi={hi:232830,lo:-1530494976},Ni={hi:0,lo:22},Di={hi:0,lo:37},Ui={hi:-1,lo:-22},s_={hi:-1,lo:-1},Vi={hi:-1048576,lo:0},Wi={hi:2146435072,lo:0},Xi={hi:2146959360,lo:1},__={hi:0,lo:2};class Yi extends Error{}function S(){throw new Yi}function d(t,e){if(e<0||e>=t.length)throw new Error("Index out of bounds")}const Ki=()=>{var t;if((t=globalThis.crypto)!=null&&t.getRandomValues){const e=new Uint32Array(1);return globalThis.crypto.getRandomValues(e),e[0]|0}else return Math.floor(Math.random()*4294967296)|0},Qi=(t,e)=>t.toString(e);function Zi(t,e){return new Uint8Array(t)}function tt(t,e){const n=new Array(t);return n.fill(e),n}const tr=t=>(t.hi>>>0)*4294967296+(t.lo>>>0),er=function t(e){let n=t._view;return n===void 0&&(n=t._view=new DataView(new ArrayBuffer(8))),n.setUint32(0,e.hi),n.setUint32(4,e.lo),n.getFloat64(0)},It=(t,e)=>{t.push(e)},j$=function t(){return t._exports?t._exports:t._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},nr=(t,e)=>{const n=t.hi,$=e.hi;if(n<$)return-1;if(n>$)return 1;const o=t.lo>>>0,s=e.lo>>>0;return o<s?-1:o>s?1:0},or=(t,e)=>{const n=t.hi>>>0,$=e.hi>>>0;if(n<$)return-1;if(n>$)return 1;const o=t.lo>>>0,s=e.lo>>>0;return o<s?-1:o>s?1:0},$r=t=>t.hi*4294967296+(t.lo>>>0),sr=t=>t.pop(),_r=(t,e,n)=>t.splice(e,n),cr=t=>t.slice(0);function jo(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}function ir(t){return t>>>=0,t===0?32:(t&=-t,31-Math.clz32(t))}const t$={hi:0,lo:-1};function Je(t,e,n){this._0=t,this._1=e,this._2=n}Je.prototype.$tag=0;function we(t,e,n){this._0=t,this._1=e,this._2=n}we.prototype.$tag=1;function en(t){this._0=t}en.prototype.$tag=2;const Ze={$tag:0};function wn(t,e){this._0=t,this._1=e}wn.prototype.$tag=1;function Oo(t){this._0=t}Oo.prototype.$tag=0;function Qt(t){this._0=t}Qt.prototype.$tag=1;function ae(t){this._0=t}ae.prototype.$tag=6;function T(t){this._0=t}T.prototype.$tag=5;function En(t,e){this._0=t,this._1=e}En.prototype.$tag=4;const Ot={$tag:3},c_={$tag:0};function Ao(t){this._0=t}Ao.prototype.$tag=0;function O$(t){this._0=t}O$.prototype.$tag=1;function Rn(t){this._0=t}Rn.prototype.$tag=0;function Rt(t){this._0=t}Rt.prototype.$tag=1;function Ce(t){this._0=t}Ce.prototype.$tag=0;function dt(t){this._0=t}dt.prototype.$tag=1;function i_(t){this._0=t}i_.prototype.$tag=0;function r_(t){this._0=t}r_.prototype.$tag=1;function a_(t){this._0=t}a_.prototype.$tag=0;function l_(t){this._0=t}l_.prototype.$tag=0;function ln(t){this._0=t}ln.prototype.$tag=1;function u_(t){this._0=t}u_.prototype.$tag=0;function l$(t){this._0=t}l$.prototype.$tag=1;function p_(t){this._0=t}p_.prototype.$tag=0;function m_(t){this._0=t}m_.prototype.$tag=1;function Eo(t){this._0=t}Eo.prototype.$tag=0;function A$(t){this._0=t}A$.prototype.$tag=1;const rr={hi:2097151,lo:-1},ar={hi:-2097152,lo:1};function E$(t){this._0=t}E$.prototype.$tag=0;function ye(t){this._0=t}ye.prototype.$tag=1;function d_(t){this._0=t}d_.prototype.$tag=0;function f_(t){this._0=t}f_.prototype.$tag=1;function u$(t){this._0=t}u$.prototype.$tag=0;function b_(t){this._0=t}b_.prototype.$tag=1;const lr={$tag:0},ur={$tag:1},pr={$tag:2};function un(t,e){this._0=t,this._1=e}un.prototype.$tag=3;function Ro(t){this._0=t}Ro.prototype.$tag=4;const mr={$tag:5},g_={$tag:6},dr={$tag:7},h_={$tag:8},k_={$tag:9};function w_(t,e){this._0=t,this._1=e}w_.prototype.$tag=0;function y_(t,e){this._0=t,this._1=e}y_.prototype.$tag=1;const M_={$tag:0};function X(t,e){this._0=t,this._1=e}X.prototype.$tag=1;const ao={$tag:0};function R$(t){this._0=t}R$.prototype.$tag=1;const fr={$tag:0};function S_(t){this._0=t}S_.prototype.$tag=1;const br=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]);function pn(t){this._0=t}pn.prototype.$tag=1;function C_(t){this._0=t}C_.prototype.$tag=0;function I_(t){this._0=t}I_.prototype.$tag=0;function L_(t){this._0=t}L_.prototype.$tag=1;function P_(t){this._0=t}P_.prototype.$tag=0;function ve(t){this._0=t}ve.prototype.$tag=1;function v_(t){this._0=t}v_.prototype.$tag=0;function G_(t){this._0=t}G_.prototype.$tag=0;function x_(t){this._0=t}x_.prototype.$tag=1;const e$={hi:2147483647,lo:-1},fs={hi:0,lo:16},n$={hi:-2147483648,lo:0},gr={hi:0,lo:65536},to={$tag:0};function mn(t){this._0=t}mn.prototype.$tag=1;function Ge(t){this._0=t}Ge.prototype.$tag=0;function j_(t){this._0=t}j_.prototype.$tag=1;function lo(t){this._0=t}lo.prototype.$tag=0;function O_(t){this._0=t}O_.prototype.$tag=1;function Xe(t){this._0=t}Xe.prototype.$tag=0;function A_(t){this._0=t}A_.prototype.$tag=1;function Yt(t){this._0=t}Yt.prototype.$tag=0;function E_(t){this._0=t}E_.prototype.$tag=1;function dn(t){this._0=t}dn.prototype.$tag=0;function Ye(t){this._0=t}Ye.prototype.$tag=1;const bs={$tag:0};function p$(t){this._0=t}p$.prototype.$tag=1;function m$(t){this._0=t}m$.prototype.$tag=0;function R_(t){this._0=t}R_.prototype.$tag=1;const hr={$tag:0};function z_(t){this._0=t}z_.prototype.$tag=1;const J_={$tag:0};function z$(t){this._0=t}z$.prototype.$tag=1;function xe(t){this._0=t}xe.prototype.$tag=0;function T_(t){this._0=t}T_.prototype.$tag=1;function fn(t){this._0=t}fn.prototype.$tag=0;function q_(t){this._0=t}q_.prototype.$tag=1;function Te(t){this._0=t}Te.prototype.$tag=0;function nn(t){this._0=t}nn.prototype.$tag=1;function qe(t){this._0=t}qe.prototype.$tag=2;function Me(t){this._0=t}Me.prototype.$tag=0;function tn(t){this._0=t}tn.prototype.$tag=1;function d$(t){this._0=t}d$.prototype.$tag=2;function J$(t){this._0=t}J$.prototype.$tag=3;const yn={$tag:4};function B_(t){this._0=t}B_.prototype.$tag=0;const kr=Pi,wr=x$(2143289344),yr=x$(2139095040),Mr=x$(-8388608),Sr={_0:160,_1:160},Cr={_0:5760,_1:5760},Ir={_0:8192,_1:8202},Lr={_0:8232,_1:8233},Pr={_0:8239,_1:8239},vr={_0:8287,_1:8287},Gr={_0:12288,_1:12288},xr={_0:65279,_1:65279},gs=".",hs="e",ks="E",F_="value out of range",on="invalid syntax",ws="",H_=vi,jr=it,Or=it,ht={mantissa_bits:52,exponent_bits:11,bias:-1023},eo=[1,3,6,9,13,16,19,23,26,29,33,36,39,43,46,49,53,56,59],Ar={_0:0,_1:""},Er={_0:1,_1:"5"},Rr={_0:1,_1:"25"},zr={_0:1,_1:"125"},Jr={_0:2,_1:"625"},Tr={_0:2,_1:"3125"},qr={_0:2,_1:"15625"},Br={_0:3,_1:"78125"},Fr={_0:3,_1:"390625"},Hr={_0:3,_1:"1953125"},Nr={_0:4,_1:"9765625"},Dr={_0:4,_1:"48828125"},Ur={_0:4,_1:"244140625"},Vr={_0:4,_1:"1220703125"},Wr={_0:5,_1:"6103515625"},Xr={_0:5,_1:"30517578125"},Yr={_0:5,_1:"152587890625"},Kr={_0:6,_1:"762939453125"},Qr={_0:6,_1:"3814697265625"},Zr={_0:6,_1:"19073486328125"},ta={_0:7,_1:"95367431640625"},ea={_0:7,_1:"476837158203125"},na={_0:7,_1:"2384185791015625"},oa={_0:7,_1:"11920928955078125"},$a={_0:8,_1:"59604644775390625"},sa={_0:8,_1:"298023223876953125"},_a={_0:8,_1:"1490116119384765625"},ca={_0:9,_1:"7450580596923828125"},ia={_0:9,_1:"37252902984619140625"},ra={_0:9,_1:"186264514923095703125"},aa={_0:10,_1:"931322574615478515625"},la={_0:10,_1:"4656612873077392578125"},ua={_0:10,_1:"23283064365386962890625"},pa={_0:10,_1:"116415321826934814453125"},ma={_0:11,_1:"582076609134674072265625"},da={_0:11,_1:"2910383045673370361328125"},fa={_0:11,_1:"14551915228366851806640625"},ba={_0:12,_1:"72759576141834259033203125"},ga={_0:12,_1:"363797880709171295166015625"},ha={_0:12,_1:"1818989403545856475830078125"},ka={_0:13,_1:"9094947017729282379150390625"},wa={_0:13,_1:"45474735088646411895751953125"},ya={_0:13,_1:"227373675443232059478759765625"},Ma={_0:13,_1:"1136868377216160297393798828125"},Sa={_0:14,_1:"5684341886080801486968994140625"},Ca={_0:14,_1:"28421709430404007434844970703125"},Ia={_0:14,_1:"142108547152020037174224853515625"},La={_0:15,_1:"710542735760100185871124267578125"},Pa={_0:15,_1:"3552713678800500929355621337890625"},va={_0:15,_1:"17763568394002504646778106689453125"},Ga={_0:16,_1:"88817841970012523233890533447265625"},xa={_0:16,_1:"444089209850062616169452667236328125"},ja={_0:16,_1:"2220446049250313080847263336181640625"},Oa={_0:16,_1:"11102230246251565404236316680908203125"},Aa={_0:17,_1:"55511151231257827021181583404541015625"},Ea={_0:17,_1:"277555756156289135105907917022705078125"},Ra={_0:17,_1:"1387778780781445675529539585113525390625"},za={_0:18,_1:"6938893903907228377647697925567626953125"},Ja={_0:18,_1:"34694469519536141888238489627838134765625"},Ta={_0:18,_1:"173472347597680709441192448139190673828125"},qa={_0:19,_1:"867361737988403547205962240695953369140625"},no=[Ar,Er,Rr,zr,Jr,Tr,qr,Br,Fr,Hr,Nr,Dr,Ur,Vr,Wr,Xr,Yr,Kr,Qr,Zr,ta,ea,na,oa,$a,sa,_a,ca,ia,ra,aa,la,ua,pa,ma,da,fa,ba,ga,ha,ka,wa,ya,Ma,Sa,Ca,Ia,La,Pa,va,Ga,xa,ja,Oa,Aa,Ea,Ra,za,Ja,Ta,qa],ys=[Ct,kt,Gi,xi,ji,Oi,Ai,Ei,Ri,zi,Ji,Ti,qi,Bi,Fi,Hi],o$=Ni,Ms=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,0,0,0,0,0,0,0,0,0],Ba=Di,Fa=Ui,Ha=it,Na=0,Da=0,Ua=s_,Va="阿磐",Wa="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Xa="/assets/copper/iron_wall/rocky/rocky.webp",Ya="/assets/copper/iron_wall/rocky/rocky.glb",Ka="卫斯理",Qa="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",Za="/assets/copper/iron_wall/wesley/wesley.webp",tl="/assets/copper/iron_wall/wesley/wesley.glb",el="大贝尔",nl="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",ol="/assets/copper/iron_wall/bell/bell.webp",$l="/assets/copper/iron_wall/bell/bell.glb",sl="团团",_l="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",cl="/assets/copper/iron_wall/tumble/tumble.webp",il="/assets/copper/iron_wall/tumble/tumble.glb",rl="铿铿",al="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",ll="/assets/copper/iron_wall/chief/chief.webp",ul="/assets/copper/iron_wall/chief/chief.glb",pl="咝咝",ml="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",dl="/assets/copper/arcanist/spark/spark.webp",fl="/assets/copper/arcanist/spark/spark.glb",bl="拉斐尔",gl="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",hl="/assets/copper/arcanist/syrup/syrup.webp",kl="/assets/copper/arcanist/syrup/syrup.glb",wl="波普尔",yl="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",Ml="/assets/copper/arcanist/bubble/bubble.webp",Sl="/assets/copper/arcanist/bubble/bubble.glb",Cl="菲尼",Il="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",Ll="/assets/copper/arcanist/glimmer/glimmer.webp",Pl="/assets/copper/arcanist/glimmer/glimmer.glb",vl="卷卷",Gl="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",xl="/assets/copper/arcanist/turner/turner.webp",jl="/assets/copper/arcanist/turner/turner.glb",Ol="絮絮",Al="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",El="/assets/copper/resonator/murmur/murmur.webp",Rl="/assets/copper/resonator/murmur/murmur.glb",zl="啾啾",Jl="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",Tl="/assets/copper/resonator/melody/melody.webp",ql="/assets/copper/resonator/melody/melody.glb",Bl="库克",Fl="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",Hl="/assets/copper/resonator/clawster/clawster.webp",Nl="/assets/copper/resonator/clawster/clawster.glb",Dl="鼹鼠的地洞",Ul="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",Vl="/assets/copper/resonator/diggs/diggs.webp",Wl="/assets/copper/resonator/diggs/diggs.glb",Xl="蜜拉",Yl="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",Kl="/assets/copper/resonator/hive/hive.webp",Ql="/assets/copper/resonator/hive/hive.glb",Zl="米洛",tu="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",eu="/assets/copper/mechanic/gyro/gyro.webp",nu="/assets/copper/mechanic/gyro/gyro.glb",ou="杰克",$u="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",su="/assets/copper/mechanic/tricky/tricky.webp",_u="/assets/copper/mechanic/tricky/tricky.glb",cu="格洛克",iu="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",ru="/assets/copper/mechanic/pendulum/pendulum.webp",au="/assets/copper/mechanic/pendulum/pendulum.glb",lu="溜溜",uu="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",pu="/assets/copper/mechanic/yoyo/yoyo.webp",mu="/assets/copper/mechanic/yoyo/yoyo.glb",du="卡琳",fu="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",bu="/assets/copper/mechanic/karin/karin.webp",gu="/assets/copper/mechanic/karin/karin.glb",hu="波波",ku="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",wu="/assets/copper/craftsman/wrench/wrench.webp",yu="/assets/copper/craftsman/wrench/wrench.glb",Mu="特斯拉",Su="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",Cu="/assets/copper/craftsman/coil/coil.webp",Iu="/assets/copper/craftsman/coil/coil.glb",Lu="公输",Pu="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",vu="/assets/copper/craftsman/artifex/artifex.webp",Gu="/assets/copper/craftsman/artifex/artifex.glb",xu="丁格",ju="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",Ou="/assets/copper/craftsman/drillbit/drillbit.webp",Au="/assets/copper/craftsman/drillbit/drillbit.glb",Eu="小卯",Ru="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",zu="/assets/copper/craftsman/quickhand/quickhand.webp",Ju="/assets/copper/craftsman/quickhand/quickhand.glb",Tu=10,qu={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:Tu},Bu=qu,Fu=10,Hu={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:Fu},Nu=Hu,Du=20,Uu={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:Du},Vu=Uu,Wu=10,Xu={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:Wu},Yu=Xu,Ku=5,Qu={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:Ku},Zu=Qu,tp=10,ep={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:tp},np=ep,op=10,$p={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:op},sp=$p,_p=5,cp={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:_p},ip=cp,rp=3,ap={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:rp},lp=ap,up={type_msg:"upgrade_cost_error",content:"升级等级错误"},pp={_0:2,_1:100},mp={_0:1,_1:0},dp={_0:4,_1:0},fp={_0:3,_1:0},bp={_0:0,_1:0},gp={_0:2,_1:0},hp={_0:1,_1:0},kp={_0:4,_1:0},wp={_0:3,_1:0},yp={_0:0,_1:0},Mp={type_msg:"resource_not_enough",content:"资源不足"},Sp={type_msg:"resource_not_enough",content:"资源不足"},Cp={_0:3,_1:8},Ip={_0:1,_1:2},Lp={_0:3,_1:6},Pp={_0:1,_1:3},vp={_0:3,_1:10},Gp={_0:1,_1:4},xp={_0:0,_1:5},jp={_0:3,_1:20},Op={_0:1,_1:6},Ap={_0:4,_1:10},Ep={_0:3,_1:8},Rp={_0:1,_1:3},zp={_0:0,_1:3},Jp={_0:3,_1:30},Tp={_0:4,_1:20},qp={_0:0,_1:10},Bp={_0:2,_1:8},Fp={_0:3,_1:15},Hp={_0:1,_1:5},Np={_0:4,_1:8},Dp={_0:3,_1:25},Up={_0:4,_1:15},Vp={_0:2,_1:5},Wp=[0,2,3,4,6,6,8],Xp={_0:0,_1:1},Yp={_0:1,_1:Xp},Kp={_0:1,_1:1},Qp={_0:3,_1:Kp},Zp={_0:3,_1:2},tm={_0:1,_1:1},em={_0:0,_1:1},nm={_0:4,_1:em},om={_0:1,_1:1},$m={_0:0,_1:om},sm={_0:3,_1:1},_m={_0:0,_1:2},cm={_0:1,_1:2},im={_0:1,_1:cm},rm={_0:0,_1:1},am={_0:3,_1:rm},lm={_0:3,_1:3},um={_0:1,_1:2},pm={_0:0,_1:1},mm={_0:1,_1:2},dm={_0:4,_1:mm},fm={_0:0,_1:1},bm={_0:0,_1:fm},gm={_0:1,_1:2},hm={_0:4,_1:3},km={_0:2,_1:1},wm={_0:1,_1:3},ym={_0:1,_1:wm},Mm={_0:1,_1:2},Sm={_0:4,_1:Mm},Cm={_0:0,_1:1},Im={_0:3,_1:Cm},Lm={_0:1,_1:4},Pm={_0:4,_1:2},vm={_0:3,_1:8},Gm={_0:2,_1:3},xm={_0:1,_1:2},jm={_0:1,_1:xm},Om={_0:0,_1:1},Am={_0:4,_1:Om},Em={_0:1,_1:2},Rm={_0:0,_1:6},zm={_0:3,_1:6},Jm={_0:2,_1:1},Tm={_0:2,_1:4},qm={_0:1,_1:Tm},Bm={_0:1,_1:3},Fm={_0:4,_1:Bm},Hm={_0:1,_1:2},Nm={_0:3,_1:Hm},Dm={_0:1,_1:6},Um={_0:4,_1:4},Vm={_0:3,_1:12},Wm={_0:2,_1:3},Xm={_0:1,_1:2},Ym={_0:1,_1:Xm},Km={_0:2,_1:3},Qm={_0:4,_1:Km},Zm={_0:1,_1:2},td={_0:0,_1:Zm},ed={_0:1,_1:10},nd={_0:4,_1:10},od={_0:0,_1:10},$d={_0:2,_1:3},sd={_0:2,_1:4},_d={_0:1,_1:sd},cd={_0:2,_1:4},id={_0:4,_1:cd},rd={_0:1,_1:2},ad={_0:3,_1:rd},ld={_0:1,_1:10},ud={_0:4,_1:10},pd={_0:3,_1:15},md={_0:2,_1:5},dd={_0:3,_1:5},fd={_0:1,_1:dd},bd={_0:2,_1:3},gd={_0:4,_1:bd},hd={_0:1,_1:2},kd={_0:0,_1:hd},wd={_0:1,_1:10},yd={_0:4,_1:15},Md={_0:3,_1:10},Sd={_0:2,_1:5},Cd={_0:2,_1:3},Id={_0:1,_1:Cd},Ld={_0:3,_1:5},Pd={_0:4,_1:Ld},vd={_0:1,_1:2},Gd={_0:3,_1:vd},xd={_0:1,_1:15},jd={_0:4,_1:15},Od={_0:0,_1:20},Ad={_0:3,_1:20},Ed={_0:2,_1:8},Rd={_0:4,_1:6},zd={_0:1,_1:Rd},Jd={_0:4,_1:6},Td={_0:4,_1:Jd},qd={_0:2,_1:3},Bd={_0:3,_1:qd},Fd={_0:2,_1:3},Hd={_0:0,_1:Fd},Nd={_0:1,_1:30},Dd={_0:4,_1:30},Ud={_0:0,_1:30},Vd={_0:3,_1:30},Wd={_0:2,_1:10},Xd={_0:5,_1:7},Yd={_0:1,_1:Xd},Kd={_0:5,_1:7},Qd={_0:4,_1:Kd},Zd={_0:3,_1:4},t0={_0:3,_1:Zd},e0={_0:3,_1:4},n0={_0:0,_1:e0},o0={_0:1,_1:40},$0={_0:4,_1:40},s0={_0:0,_1:40},_0={_0:3,_1:40},c0={_0:2,_1:15},i0={name:"精炼铜锭",resource_type:3,model_url:"/assets/resource/refined_copper_ingot/refined_copper_ingot.glb"},r0={name:"共鸣星晶",resource_type:4,model_url:"/assets/resource/resonant_star_crystal/resonant_star_crystal.glb"},a0={_0:4,_1:4},l0={_0:0,_1:0},u0={_0:0,_1:3},p0={_0:0,_1:4},m0={_0:0,_1:5},d0=[u0,p0,m0],f0={_0:0,_1:3},b0={_0:0,_1:4},g0={_0:0,_1:5},h0={_0:-1,_1:0},k0={_0:1,_1:0},w0={_0:0,_1:-1},y0={_0:0,_1:1},M0={_0:-1,_1:0},S0={_0:1,_1:0},C0={_0:0,_1:-1},I0={_0:0,_1:1},L0=void 0,P0={name:Va,copper_type:0,description:Wa,icon_url:Xa,model_url:Ya,skill:Bu,attack_range:L0},v0=void 0,G0={name:Ka,copper_type:0,description:Qa,icon_url:Za,model_url:tl,skill:Nu,attack_range:v0},x0={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},j0=void 0,O0={name:el,copper_type:0,description:nl,icon_url:ol,model_url:$l,skill:x0,attack_range:j0},A0={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},E0=void 0,R0={name:sl,copper_type:0,description:_l,icon_url:cl,model_url:il,skill:A0,attack_range:E0},z0={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},J0=void 0,T0={name:rl,copper_type:0,description:al,icon_url:ll,model_url:ul,skill:z0,attack_range:J0},q0=void 0,B0={name:pl,copper_type:1,description:ml,icon_url:dl,model_url:fl,skill:Vu,attack_range:q0},F0={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},H0=void 0,N0={name:bl,copper_type:1,description:gl,icon_url:hl,model_url:kl,skill:F0,attack_range:H0},D0=void 0,U0={name:wl,copper_type:1,description:yl,icon_url:Ml,model_url:Sl,skill:Yu,attack_range:D0},V0={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},W0=void 0,X0={name:Cl,copper_type:1,description:Il,icon_url:Ll,model_url:Pl,skill:V0,attack_range:W0},Y0=void 0,K0={name:vl,copper_type:1,description:Gl,icon_url:xl,model_url:jl,skill:Zu,attack_range:Y0},Q0={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},Z0=void 0,t2={name:Ol,copper_type:4,description:Al,icon_url:El,model_url:Rl,skill:Q0,attack_range:Z0},e2={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},n2=void 0,o2={name:zl,copper_type:4,description:Jl,icon_url:Tl,model_url:ql,skill:e2,attack_range:n2},$2={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawster_skill.webp",cool_down:void 0},s2=void 0,_2={name:Bl,copper_type:4,description:Fl,icon_url:Hl,model_url:Nl,skill:$2,attack_range:s2},c2={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},i2=void 0,r2={name:Dl,copper_type:4,description:Ul,icon_url:Vl,model_url:Wl,skill:c2,attack_range:i2},a2={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},l2=void 0,u2={name:Xl,copper_type:4,description:Yl,icon_url:Kl,model_url:Ql,skill:a2,attack_range:l2},p2=void 0,m2={name:Zl,copper_type:3,description:tu,icon_url:eu,model_url:nu,skill:np,attack_range:p2},d2=void 0,f2={name:ou,copper_type:3,description:$u,icon_url:su,model_url:_u,skill:sp,attack_range:d2},b2=void 0,g2={name:cu,copper_type:3,description:iu,icon_url:ru,model_url:au,skill:ip,attack_range:b2},h2=void 0,k2={name:lu,copper_type:3,description:uu,icon_url:pu,model_url:mu,skill:lp,attack_range:h2},w2={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},y2=void 0,M2={name:du,copper_type:3,description:fu,icon_url:bu,model_url:gu,skill:w2,attack_range:y2},S2=void 0,C2=void 0,I2={name:hu,copper_type:2,description:ku,icon_url:wu,model_url:yu,skill:S2,attack_range:C2},L2=void 0,P2=void 0,v2={name:Mu,copper_type:2,description:Su,icon_url:Cu,model_url:Iu,skill:L2,attack_range:P2},G2=void 0,x2=void 0,j2={name:Lu,copper_type:2,description:Pu,icon_url:vu,model_url:Gu,skill:G2,attack_range:x2},O2=void 0,A2=void 0,E2={name:xu,copper_type:2,description:ju,icon_url:Ou,model_url:Au,skill:O2,attack_range:A2},R2=void 0,z2=void 0,bn=[P0,G0,O0,R0,T0,B0,N0,U0,X0,K0,t2,o2,_2,r2,u2,m2,f2,g2,k2,M2,I2,v2,j2,E2,{name:Eu,copper_type:2,description:Ru,icon_url:zu,model_url:Ju,skill:R2,attack_range:z2}],J2=Ki(),T2=X1(t=>{const e=bn.length;let n=0;for(;;){const $=n;if($<e){const o=bn[$];if(t({_0:o.name,_1:o})===1){n=$+1|0;continue}else return 0}else return 1}}),$n=ni(),pt=ig(Wg()),q2=ni(),N_=E4(),U=Ig(),Mn=vn(Vi),Sn=vn(Wi),D_=[Sr,Cr,Ir,Lr,Pr,vr,Gr,xr],B2=vn(Xi),U_=xn(__,52),ne=Tn(8),gn=Tn(8),ft=Tn(8),At=Tn(8),Ie=jf(8),ut=rg(void 0),Tt=y1([]),f$=[{name:"铆接壁垒",health:Math.fround(400),can_move:!1,can_attack:!1,attack_range:0,description:" 一段坚固的、由巨大黄铜板铆接而成的城墙，板上有蒸汽管道加固。墙头有齿轮驱动的可动挡板，墙体内嵌有发出稳定黄光的观察灯。",asset_url:"assets/structure/riveted_barrier/riveted_barrier.webp",model_url:"assets/structure/riveted_barrier/riveted_barrier.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([Cp,Ip])},{name:"齿轮箭塔",health:Math.fround(180),can_move:!1,can_attack:!0,attack_range:3,description:"一座细高的塔楼，顶部是一个开放式齿轮组平台，通过传送带将铜质弩箭自动上弦并连续发射。塔身有蒸汽泄压阀，每次齐射都伴随“嘶嘶”声。",asset_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.webp",model_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(30),Math.fround(0),Math.fround(0)),cost:lt([Lp,Pp])},{name:"心源矿钻",health:Math.fround(300),can_move:!1,can_attack:!1,attack_range:0,description:"一台顶部装有巨大钻头的大型钻井装置，由复杂的齿轮组和活塞驱动。钻头高速旋转，闪烁着蓝光，从地底带出发光的矿石。",asset_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.webp",model_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([vp,Gp,xp])},{name:"充能线圈",health:Math.fround(200),can_move:!1,can_attack:!1,attack_range:0,description:"一个由巨大铜线圈缠绕而成的塔状建筑，线圈中央有电弧在不断跳跃。它能够为周围一定范围内的友方建筑提供能量，使其运作更快。",asset_url:"assets/structure/charging_coil/charging_coil.webp",model_url:"assets/structure/charging_coil/charging_coil.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([jp,Op,Ap])},{name:"维修工坊",health:Math.fround(200),can_move:!1,can_attack:!0,attack_range:3,description:"一个带有可开合顶棚的圆形工坊，内部有多个机械臂。友方铜偶经过时，机械臂会自动为其进行修复和保养，发出叮叮当当的敲打声。",asset_url:"assets/structure/repair_workshop/repair_workshop.webp",model_url:"assets/structure/repair_workshop/repair_workshop.glb",attribute:bt(Math.fround(0),0,Math.fround(25),Math.fround(0),Math.fround(0)),cost:lt([Ep,Rp,zp])},{name:"镜光折射塔",health:Math.fround(1200),can_move:!1,can_attack:!0,attack_range:5,description:"一座顶部镶嵌着巨大、可转动水晶镜片的塔。它能聚集环境中的心源能量，发射出一道灼热的折射光束，对直线上的敌人造成伤害。",asset_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.webp",model_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(120),Math.fround(0),Math.fround(0)),cost:lt([Jp,Tp,qp,Bp])},{name:"共鸣警钟",health:Math.fround(500),can_move:!1,can_attack:!0,attack_range:4,description:"一个悬挂在精致黄铜钟楼里的大钟，钟体刻有共鸣符文。当敌人靠近时，它会自动鸣响，发出可见的声波涟漪。",asset_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.webp",model_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.glb",attribute:bt(Math.fround(0),0,Math.fround(60),Math.fround(0),Math.fround(0)),cost:lt([Fp,Hp,Np])},{name:"风暴铁砧",health:Math.fround(800),can_move:!1,can_attack:!0,attack_range:4,description:"一个被闪电线圈环绕的巨大铁砧。它会定期引动空气中的能量，召唤一道小范围的闪电风暴，轰击区域内的所有敌人。",asset_url:"assets/structure/storm_iron_anvil/storm_anvil.webp",model_url:"assets/structure/storm_iron_anvil/storm_anvil.glb",attribute:bt(Math.fround(0),0,Math.fround(100),Math.fround(0),Math.fround(0)),cost:lt([Dp,Up,Vp])}],V_=W1(t=>{const e=f$.length;let n=0;for(;;){const $=n;if($<e){const o=f$[$];if(t({_0:o.name,_1:o})===1){n=$+1|0;continue}else return 0}else return 1}}),le=M1([]),bo=[{level:1,health:Math.fround(25),attack:Math.fround(8),defense:Math.fround(3),dodge:Math.fround(0),attack_range:1,speed:2,name:"哥布林",enemy_type:"goblin",description:"哥布林并非铜曜王朝的原生种族，而是一群在王朝崩溃后，趁机潜入地牢的'拾荒者'。它们对心源科技一知半解，但天生对机械有着诡异的亲和力，擅长拆解、偷窃和利用废墟中的一切。它们不是最强大的敌人，但非常狡猾，会设置陷阱、偷走玩家的临时增益，或是呼叫同伴。击败它们有时能获得一些意想不到的小玩意和零件。",asset_url:"/assets/enemy/goblin/goblin.webp",model_url:"/assets/enemy/goblin/goblin.glb",drop_items:[Yp,Qp],summon_cost:lt([Zp,tm])},{level:1,health:Math.fround(30),attack:Math.fround(7),defense:Math.fround(5),dodge:Math.fround(0),attack_range:1,speed:1,name:"锈蚀巡游者",enemy_type:"cruiser",description:"曾是王城负责除锈保养的工役，核心程序错乱后，反而开始传播锈蚀。它们是地牢中最常见的退化力量。",asset_url:"/assets/enemy/cruiser/cruiser.webp",model_url:"/assets/enemy/cruiser/cruiser.glb",drop_items:[nm,$m],summon_cost:lt([sm,_m])},{level:2,health:Math.fround(35),attack:Math.fround(12),defense:Math.fround(5),dodge:Math.fround(10),attack_range:1,speed:4,name:"齿轮斥候",enemy_type:"scout",description:"朝军队用来巡逻和送信的自动机械犬。失控后，它们依然在漫无目的地'巡逻'，并将任何移动单位视为入侵者。",asset_url:"/assets/enemy/scout/scout.webp",model_url:"/assets/enemy/scout/scout.glb",drop_items:[im,am],summon_cost:lt([lm,um,pm])},{level:2,health:Math.fround(40),attack:Math.fround(16),defense:Math.fround(8),dodge:Math.fround(5),attack_range:3,speed:2,name:"管风琴号手",enemy_type:"horn",description:"皇家乐团的自动乐器成员之一，原本奏响庄严乐章。如今，它的乐曲变成了撕裂耳膜、扰乱心智的噪音攻击。",asset_url:"/assets/enemy/horn/horn.webp",model_url:"/assets/enemy/horn/horn.glb",drop_items:[dm,bm],summon_cost:lt([gm,hm,km])},{level:3,health:Math.fround(70),attack:Math.fround(22),defense:Math.fround(15),dodge:Math.fround(0),attack_range:1,speed:1,name:"蒸汽拳手",enemy_type:"boxer",description:" 矿区使用的重型劳工铜偶，拥有惊人的力量。现在，它们只会重复最简单的指令：用蒸汽动力重拳粉碎眼前的障碍。",asset_url:"/assets/enemy/boxer/boxer.webp",model_url:"/assets/enemy/boxer/boxer.glb",drop_items:[ym,Sm,Im],summon_cost:lt([Lm,Pm,vm,Gm])},{level:3,health:Math.fround(55),attack:Math.fround(30),defense:Math.fround(4),dodge:Math.fround(20),attack_range:1,speed:3,name:"发条刺客",enemy_type:"assassin",description:"阴影中的守护者，负责处理见不得光的威胁。程序失控后，它们的刺杀名单上写满了所有活物。",asset_url:"/assets/enemy/assassin/assassin.webp",model_url:"/assets/enemy/assassin/assassin.glb",drop_items:[jm,Am],summon_cost:lt([Em,Rm,zm,Jm])},{level:4,health:Math.fround(110),attack:Math.fround(30),defense:Math.fround(20),dodge:Math.fround(0),attack_range:1,speed:2,name:"锅炉吞噬者",enemy_type:"devourer",description:"地牢的能量回收单元，负责将废弃物转化为蒸汽动力。如今它变得无比贪婪，会主动吞噬任何金属物体，包括掉队的铜偶。",asset_url:"/assets/enemy/devourer/devourer.glb",model_url:"/assets/enemy/devourer/devourer.glb",drop_items:[qm,Fm,Nm],summon_cost:lt([Dm,Um,Vm,Wm])},{level:4,health:Math.fround(50),attack:Math.fround(32),defense:Math.fround(10),dodge:Math.fround(70),attack_range:2,speed:3,name:"镜面编织者",enemy_type:"mirror",description:"用于宫廷娱乐和谜题守护的精密造物。它能创造以假乱真的幻象来迷惑入侵者，本身十分脆弱，但极难被真正触及。",asset_url:"/assets/enemy/mirror/mirror.webp",model_url:"/assets/enemy/mirror/mirror.glb",drop_items:[Ym,Qm,td],summon_cost:lt([ed,nd,od,$d])},{level:5,health:Math.fround(250),attack:Math.fround(45),defense:Math.fround(35),dodge:Math.fround(5),attack_range:2,speed:1,name:"巨锤守卫",enemy_type:"guard",description:"王城宝库和重要大门的守卫者。即使失控，它们依然固守着生前的位置，用最纯粹的力量碾碎一切未经许可的靠近者。",asset_url:"/assets/enemy/guard/guard.webp",model_url:"/assets/enemy/guard/guard.glb",drop_items:[_d,id,ad],summon_cost:lt([ld,ud,pd,md])},{level:5,health:Math.fround(100),attack:Math.fround(50),defense:Math.fround(10),dodge:Math.fround(25),attack_range:2,speed:5,name:"差分机妖",enemy_type:"demon",description:"王朝计算中心的智能核心碎片，拥有强大的逻辑运算能力。它将战斗视为一场需要'计算'和'优化'的数学问题，是极其难缠的精英敌人。",asset_url:"/assets/enemy/demon/demon.webp",model_url:"/assets/enemy/demon/demon.glb",drop_items:[fd,gd,kd],summon_cost:lt([wd,yd,Md,Sd])},{level:5,health:Math.fround(160),attack:Math.fround(55),defense:Math.fround(15),dodge:Math.fround(0),attack_range:2,speed:2,name:"心源畸变体",enemy_type:"variant",description:"它曾是王朝庆典的中央娱乐单元——'欢宴主脑'。大休眠时，过量的心源能量没有摧毁它，反而让它陷入了永久的、失控的狂喜状态。它将地牢变成了它个人的派对现场，并'热情'地邀请（或者说强迫）所有闯入者加入它混乱的欢宴。它会用五彩的声光、抛洒的零件和看似可爱实则威力巨大的玩具进行攻击。击败它，就是终结这场永无止境的噪音派对。",asset_url:"/assets/enemy/variant/variant.webp",model_url:"/assets/enemy/variant/variant.glb",drop_items:[Id,Pd,Gd],summon_cost:lt([xd,jd,Od,Ad,Ed])},{level:6,health:Math.fround(300),attack:Math.fround(60),defense:Math.fround(20),dodge:Math.fround(30),attack_range:3,speed:3,name:"（BOSS）织网夫人·夏特拉",enemy_type:"shatra",description:"夏特拉曾是王朝的'信息架构师'，负责维护整个王城的心源能量网络。大休眠发生时，她为了稳定网络，选择将自己的核心与主控终端永久连接。数百年的孤独守护和能量侵蚀让她变得偏执，她认为任何外来者都是不稳定的'病毒'，会破坏她精心维持的、死寂的'平衡'。她会操纵整个地牢的机关和能量流来攻击玩家，将玩家视为需要清除的系统威胁。",asset_url:"/assets/enemy/shatra/shatra.webp",model_url:"/assets/enemy/shatra/shatra.glb",drop_items:[zd,Td,Bd,Hd],summon_cost:lt([Nd,Dd,Ud,Vd,Wd])},{level:6,health:Math.fround(500),attack:Math.fround(40),defense:Math.fround(40),dodge:Math.fround(0),attack_range:1,speed:2,name:"（BOSS）废械吞噬者·饕餮",enemy_type:"glutton",description:"它不是被制造的，而是'生长'出来的。在王朝崩溃的废墟中，一个简单的'垃圾处理'核心程序发生了可怕的变异，它开始主动吞噬遇到的一切机械体，并将它们的功能和结构粗暴地整合到自己身上。它代表着纯粹的、无意识的毁灭与贪婪，是地牢中会移动的天灾。击败它需要攻击其身上不断变化的弱点核心。",asset_url:"/assets/enemy/glutton/glutton.webp",model_url:"/assets/enemy/glutton/glutton.glb",drop_items:[Yd,Qd,t0,n0],summon_cost:lt([o0,$0,s0,_0,c0])}],F2=xf(bo),b$=V1(t=>F2(e=>t({_0:e.name,_1:e}))),Cn=W$(!1),In=W$(!1),Ln=W$(!1);function ue(t){S()}function H2(t){return S()}function go(t){return S()}function N2(t){return S()}function D2(t){return S()}function U2(t){return S()}function V2(t){return S()}function W2(t){return S()}function g$(t,e){return kf(t,e)}function X2(t,e){return wf(t,e)}function Pn(t,e){return gf(t,e)}function Y2(t,e){return hf(t,e)}function zo(t,e){return mf(t,e)}function h$(t,e){return df(t,e)}function K2(t,e,n,$,o){if(t===n&&e<$){let s=0;for(;;){const c=s;if(c<o){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c+1|0;continue}else return}}else{let s=o-1|0;for(;;){const c=s;if(c>=0){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c-1|0;continue}else return}}}function Q2(t,e,n,$,o){if(t===n&&e<$){let s=0;for(;;){const c=s;if(c<o){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c+1|0;continue}else return}}else{let s=o-1|0;for(;;){const c=s;if(c>=0){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c-1|0;continue}else return}}}function He(t){return{val:""}}function nt(t,e){const n=t;n.val=`${n.val}${String.fromCodePoint(e)}`}function W_(t,e){return ff(t,e)}function ho(t,e){return bf(t,e)}function Z2(t,e){return(((Math.imul(t-55296|0,1024)|0)+e|0)-56320|0)+65536|0}function j(t,e){const n=t.charCodeAt(e);if(55296<=n&&n<=56319){const $=e+1|0,o=t.charCodeAt($);return Z2(n,o)}else return n}function tf(t,e){return!dg(t,e)}function ef(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function st(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function _t(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function ie(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function nf(t,e){const n=t.length;return e<n?(d(t,e),t[e]):S()}function of(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function $f(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function sf(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function _f(t,e){const n=t.length;return e<n?(d(t,e),t[e]):S()}function pe(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function ot(t,e){const n=t;n.val=`${n.val}${e}`}function Lt(t){const e=t._0,n=t._1,$=[J(e),J(n)];return new jt($)}function cf(t){const e=t._0,n=t._1,$=[Wo(e),Lt(n)];return new jt($)}function rf(t){const e=t._0,n=t._1,$=[Wo(e),J(n)];return new jt($)}function af(t,e){Rb(e,t)}function lf(t,e){yg(e,t)}function uf(t,e){pf(e,t)}function k$(t,e){zb(e,t)}function pf(t,e){const n=t._0,$=t._1;k$(e,n),k$(e,$)}function mf(t,e){return Ho(t,e)<0}function df(t,e){return No(t,e)<0}function ff(t,e){return Ho(t,e)>0}function bf(t,e){return No(t,e)>0}function gf(t,e){return Ho(t,e)<=0}function hf(t,e){return No(t,e)<=0}function kf(t,e){return Ho(t,e)>=0}function wf(t,e){return No(t,e)>=0}function yf(t){let e=t.acc;return e=e^(e>>>15|0),e=Math.imul(e,-2048144777)|0,e=e^(e>>>13|0),e=Math.imul(e,-1028477379)|0,e=e^(e>>>16|0),e}function Jo(t){return yf(t)}function Mf(t){return{acc:(t>>>0)+374761393|0}}function To(t){let e;return e=J2,Mf(e)}function Wt(t){const e=To();return af(e,t),Jo(e)}function X_(t){const e=To();return lf(e,t),Jo(e)}function Ne(t){const e=To();return uf(e,t),Jo(e)}function $e(t){const e=To();return k$(e,t),Jo(e)}function Sf(t){const e=He();return nh(t,{self:e,method_0:ot,method_1:zn,method_2:nt}),e.val}function Cf(t){const e=He();return wg(t,{self:e,method_0:ot,method_1:zn,method_2:nt}),e.val}function qo(t){const e=He(),n={self:e,method_0:ot,method_1:zn,method_2:nt};return t?n.method_0(n.self,"true"):n.method_0(n.self,"false"),e.val}function If(t){return{hi:t>>31&-1,lo:t|0}}function zt(t){return If(t)}function Oe(t){return t.lo}function Lf(t,e){return Qi(t,e)}function vt(t){return Lf(t,10)}function Y_(t){return t.lo}function Pf(t,e,n){const $=t.length;let o;return n===void 0?o=$:o=n,e>=0&&e<=o&&o<=$?t.substring(e,o):S()}function zn(t,e,n,$){const o=t;o.val=`${o.val}${Pf(e,n,n+$|0)}`}function vf(t,e){Ub(e,{self:t,method_0:ot,method_1:zn,method_2:nt})}function Ss(t){return t<10?(t+48|0)&255:(((t+97|0)&255)-10|0)&255}function Gf(t){const e=He();return nt(e,Ss((t/16|0)&255)),nt(e,Ss((t%16|0)&255)),e.val}function xf(t){return n=>{const $=t.length;let o=0;for(;;){const s=o;if(s<$){const c=t[s];if(n(c)!==1)return 0;o=s+1|0;continue}else return 1}}}function K_(t){return t.$tag===0?S():t._0}function cn(t){return t.$tag===0?S():t._0}function rt(t){return t>=0?t<=1?1:t>1073741824?1073741824:(2147483647>>(Math.clz32(t-1|0)-1|0))+1|0:S()}function Q_(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function jf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Of(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Af(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Ef(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Rf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function zf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Jf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Tf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function qf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Bf(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function Ff(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Hf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Nf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Df(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Uf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Vf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Wf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Xf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Yf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Kf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Qf(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Cs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function w$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function y$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function M$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Is(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Ls(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Ps(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function vs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Gs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function xs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function js(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Zf(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Cs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Cs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function t1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Is(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Is(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function e1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,M$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,M$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function n1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,w$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,w$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function o1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,y$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,y$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function $1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Ls(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Ls(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function s1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Ps(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Ps(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function _1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,vs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,vs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function c1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Gs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Gs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function i1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,xs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,xs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function r1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,js(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,js(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Z_(t,e,n,$){t.size>=t.grow_at&&a1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){Zf(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Ff(t,_,l)}function tc(t,e,n,$){t.size>=t.grow_at&&l1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&$i(f.key,e)){f.value=n;return}if(u>f.psl){t1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Hf(t,_,l)}function ec(t,e,n,$){t.size>=t.grow_at&&u1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){e1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Nf(t,_,l)}function nc(t,e,n,$){t.size>=t.grow_at&&p1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){n1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Df(t,_,l)}function oc(t,e,n,$){t.size>=t.grow_at&&m1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){o1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Uf(t,_,l)}function $c(t,e,n,$){t.size>=t.grow_at&&d1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){$1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Vf(t,_,l)}function sc(t,e,n,$){t.size>=t.grow_at&&f1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){s1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Wf(t,_,l)}function _c(t,e,n,$){t.size>=t.grow_at&&b1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){_1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Xf(t,_,l)}function cc(t,e,n,$){t.size>=t.grow_at&&g1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){c1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Yf(t,_,l)}function ic(t,e,n,$){t.size>=t.grow_at&&h1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){i1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Kf(t,_,l)}function rc(t,e,n,$){t.size>=t.grow_at&&k1(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){r1(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Qf(t,_,l)}function a1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Z_(t,r,a,l),o=i;continue}}}function l1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;tc(t,r,a,l),o=i;continue}}}function u1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;ec(t,r,a,l),o=i;continue}}}function p1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;nc(t,r,a,l),o=i;continue}}}function m1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;oc(t,r,a,l),o=i;continue}}}function d1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;$c(t,r,a,l),o=i;continue}}}function f1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;sc(t,r,a,l),o=i;continue}}}function b1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;_c(t,r,a,l),o=i;continue}}}function g1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;cc(t,r,a,l),o=i;continue}}}function h1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;ic(t,r,a,l),o=i;continue}}}function k1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;rc(t,r,a,l),o=i;continue}}}function v(t,e,n){Z_(t,e,n,Wt(e))}function T$(t,e,n){tc(t,e,n,X_(e))}function w1(t,e,n){ec(t,e,n,$e(e))}function ac(t,e,n){nc(t,e,n,$e(e))}function lc(t,e,n){oc(t,e,n,$e(e))}function uc(t,e,n){$c(t,e,n,Wt(e))}function pc(t,e,n){sc(t,e,n,Wt(e))}function ko(t,e,n){_c(t,e,n,Ne(e))}function S$(t,e,n){cc(t,e,n,Ne(e))}function mc(t,e,n){ic(t,e,n,Wt(e))}function dc(t,e,n){rc(t,e,n,Ne(e))}function R(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Q_(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];v(o,i._0,i._1),c=_+1|0;continue}else break}return o}function y1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Of(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];ac(o,i._0,i._1),c=_+1|0;continue}else break}return o}function M1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Af(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];lc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function fc(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Ef(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];T$(o,i._0,i._1),c=_+1|0;continue}else break}return o}function S1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Rf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];uc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function C1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=zf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];pc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function bc(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Jf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];ko(o,i._0,i._1),c=_+1|0;continue}else break}return o}function I1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Tf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];S$(o,i._0,i._1),c=_+1|0;continue}else break}return o}function L1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=qf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];mc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function P1(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Bf(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];dc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function P(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function gc(t,e){const n=X_(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&$i(a.key,e))return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function Jn(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function v1(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function G1(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function x1(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function j1(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function O1(t,e){const n=Ne(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function hc(t,e){const n=Ne(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return-1;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return a.value;if(s>a.psl)return-1;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function wo(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function Os(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function A1(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function E1(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function R1(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function z1(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function J1(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function T1(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,w$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function q1(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,y$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function B1(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,M$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function F1(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){R1(t,a),T1(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function H1(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){z1(t,a),q1(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function N1(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){J1(t,a),B1(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function Bo(t,e){F1(t,e,$e(e))}function Fo(t,e){H1(t,e,$e(e))}function kc(t,e){N1(t,e,$e(e))}function D1(t,e,n,$){const o=t.length;if(o>0)if(n<o){let s;s=o-n|0,t.fill(e,n,n+s);return}else{S();return}else return}function wc(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.value,i=s.next;return e.val=i,{_0:c,_1:_}}}}function U1(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.value,i=s.next;return e.val=i,{_0:c,_1:_}}}}function yc(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function q$(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function B$(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function V1(t){const e=S1([]);return t(n=>(uc(e,n._0,n._1),1)),e}function W1(t){const e=C1([]);return t(n=>(pc(e,n._0,n._1),1)),e}function X1(t){const e=L1([]);return t(n=>(mc(e,n._0,n._1),1)),e}function Mc(t){return t()}function wt(t){return t()}function Y1(t){return t()}function K1(t){return t()}function Gt(t){return t?o_:$_}function J(t){const e=t+0,n=void 0;return new An(e,n)}function Q1(t){return{hi:0,lo:t}}function F$(t){return Q1(t)}function C$(t){return F$(t)}function yo(t){return tr(t)}function vn(t){return er(t)}function xt(t){const e=t,n=void 0;return new An(e,n)}function Z1(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=Yo(s),$=o+1|0;continue}else break}return new jt(e)}function tb(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=P$(s),$=o+1|0;continue}else break}return new jt(e)}function eb(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=s,$=o+1|0;continue}else break}return new jt(e)}function nb(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=mi(s),$=o+1|0;continue}else break}return new jt(e)}function ob(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=cf(s),$=o+1|0;continue}else break}return new jt(e)}function $b(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=rf(s),$=o+1|0;continue}else break}return new jt(e)}function sb(t){if(t.length===0){const s=[];return new jt(s)}const n=new Array(t.length),$=t.length;let o=0;for(;;){const s=o;if(s<$){const c=t[s];n[s]=di(c),o=s+1|0;continue}else break}return new jt(n)}function As(t,e){It(t,e)}function _b(t,e){It(t,e)}function cb(t,e){It(t,e)}function Pt(t,e){It(t,e)}function ib(t,e){It(t,e)}function rb(t,e){It(t,e)}function Le(t,e){It(t,e)}function ab(t,e){It(t,e)}function lb(t,e){It(t,e)}function Sc(t,e){It(t,e)}function ub(t,e){It(t,e)}function pb(t,e){It(t,e)}function $$(t,e){It(t,e)}function mb(t,e){It(t,e)}function db(t,e){It(t,e)}function fb(){return t=>1}function Es(t){return e=>e(t)}function bb(t,e){return n=>t(n)===1&&e(n)===1?1:0}function gb(t){const e=[];return t(n=>(_b(e,n),1)),e}function hb(t){const e=[];return t(n=>(db(e,n),1)),e}function Rs(t){return Y_(t)&255}function Mo(t){return zt(t)}function kb(t){return t.lo===0?{hi:~t.hi+1|0,lo:0}:{hi:~t.hi,lo:~t.lo+1|0}}function Cc(t,e,n){const $=t.hi,o=t.lo,s=o+n|0,c=s>>31,_=o>>31,i=n>>31,r=(_&i|~c&(_^i))&1;return{hi:($+e|0)+r|0,lo:s}}function Ic(t,e){return Cc(t,e.hi,e.lo)}function Lc(t,e){return e.lo===0?{hi:t.hi-e.hi|0,lo:t.lo}:Cc(t,~e.hi,~e.lo+1|0)}function Pc(t,e){const n=t.hi,$=t.lo,o=e.hi,s=e.lo,c=n,_=$,i=o,r=s,a=c>>>16|0,l=c&65535,u=_>>>16|0,p=_&65535,m=i>>>16|0,b=i&65535,g=r>>>16|0,f=r&65535,k=Math.imul(p,f)|0,w=k>>>16|0,I=k&65535,y=(w>>>0)+((Math.imul(u,f)|0)>>>0)|0,L=y>>>16|0,G=((y&65535)>>>0)+((Math.imul(p,g)|0)>>>0)|0,C=(L>>>0)+((G>>>16|0)>>>0)|0,O=G&65535,x=(C>>>0)+((Math.imul(l,f)|0)>>>0)|0,A=x>>>16|0,H=((x&65535)>>>0)+((Math.imul(u,g)|0)>>>0)|0,B=(A>>>0)+((H>>>16|0)>>>0)|0,K=((H&65535)>>>0)+((Math.imul(p,b)|0)>>>0)|0,Z=(B>>>0)+((K>>>16|0)>>>0)|0,F=K&65535;return{hi:(((((((((Z>>>0)+((Math.imul(a,f)|0)>>>0)|0)>>>0)+((Math.imul(l,g)|0)>>>0)|0)>>>0)+((Math.imul(u,b)|0)>>>0)|0)>>>0)+((Math.imul(p,m)|0)>>>0)|0)&65535)<<16|F,lo:O<<16|I}}function wb(t,e){if(e.hi===0&&e.lo===0)return S();{const n=j$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.div_s,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function yb(t,e){if(e.hi===0&&e.lo===0)return S();{const n=j$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.div_u,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function Mb(t,e){if(e.hi===0&&e.lo===0)return S();{const n=j$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.rem_u,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function Sb(t){return{hi:~t.hi,lo:~t.lo}}function vc(t,e){return{hi:t.hi&e.hi,lo:t.lo&e.lo}}function Gc(t,e){return{hi:t.hi|e.hi,lo:t.lo|e.lo}}function xc(t,e){const n=e&63;if(n===0)return t;if(n<32){const $=t.hi,o=t.lo,s=$,c=o,_=s<<n|(c>>>(32-n|0)|0),i=c<<n;return{hi:_,lo:i}}else return{hi:t.lo<<(n-32|0),lo:0}}function Cb(t,e){const n=e&63;return n===0?t:n<32?{hi:t.hi>>>n|0,lo:t.lo>>>n|t.hi<<(32-n|0)}:{hi:0,lo:t.hi>>>(n-32|0)|0}}function Ib(t,e){const n=e&63;return n===0?t:n<32?{hi:t.hi>>n,lo:t.lo>>>n|t.hi<<(32-n|0)}:{hi:t.hi>>31,lo:t.hi>>(n-32|0)}}function jc(t){return kb(t)}function te(t,e){return Ic(t,e)}function Gn(t,e){return Lc(t,e)}function Be(t,e){return Pc(t,e)}function de(t,e){return wb(t,e)}function Oc(t,e){return vc(t,e)}function zs(t,e){return Gc(t,e)}function Lb(t,e){return Ib(t,e)}function Ae(t,e){return xc(t,e)}function Js(t,e){const n=t,$=e;return n.hi===$.hi&&n.lo===$.lo}function Ho(t,e){return nr(t,e)}function Pb(t){return $r(t)}function vb(t){return Pb(t)}function be(t,e){return Ic(t,e)}function I$(t,e){return Lc(t,e)}function Bt(t,e){return Pc(t,e)}function Gb(t,e){return yb(t,e)}function xb(t,e){return Mb(t,e)}function Ts(t){return t.lo}function No(t,e){return or(t,e)}function ge(t,e){const n=t,$=e;return n.hi===$.hi&&n.lo===$.lo}function Ee(t,e){return vc(t,e)}function jb(t,e){return Gc(t,e)}function Ob(t){return Sb(t)}function xn(t,e){return xc(t,e)}function Dt(t,e){return Cb(t,e)}function qs(t){const e=t;return e.hi!==0?Math.clz32(e.hi):32+Math.clz32(e.lo)|0}function Ab(t,e){const n=(t.acc>>>0)+((Math.imul(e,-1028477379)|0)>>>0)|0,$=17;t.acc=Math.imul(n<<$|(n>>>(32-$|0)|0),668265263)|0}function Ac(t,e){t.acc=(t.acc>>>0)+4|0,Ab(t,e)}function Ke(t,e){Ac(t,e)}function Eb(t,e){const n=e.length;let $=0;for(;;){const o=$;if(o<n){Ac(t,e.charCodeAt(o)),$=o+1|0;continue}else return}}function Rb(t,e){Eb(e,t)}function zb(t,e){Ke(e,t)}function So(t,e,n,$,o){if(o>=0&&$>=0&&(o+n|0)<=e.length&&($+n|0)<=t.length){K2(e,o,t,$,n);return}else{ue(`bounds check failed: dst_offset = ${vt(o)}, src_offset = ${vt($)}, len = ${vt(n)}, dst.length = ${vt(e.length)}, self.length = ${vt(t.length)}`);return}}function Jb(t,e,n,$,o){if((o+n|0)<=e.length&&($+n|0)<=t.length){Q2(e,o,t,$,n);return}else{ue(`bounds check failed: dst_offset = ${vt(o)}, src_offset = ${vt($)}, len = ${vt(n)}, dst.length = ${vt(e.length)}, self.length = ${vt(t.length)}`);return}}function Qe(t){return t!==t?0:t>=2147483647?2147483647:t<=-2147483648?-2147483648:t|0}function Tb(t){console.log(t)}function qb(t){return sr(t)}function Bs(t){if(t.length!==0)return qb(t)}function Bb(t,e){if(e>=0&&e<t.length){d(t,e);const n=t[e];return _r(t,e,1),n}else return U2(`index out of bounds: the len is from 0 to ${vt(t.length)} but the index is ${vt(e)}`)}function Fb(t,e){const n=t.length;return e<n?t[e]:void 0}function Hb(t,e){{const n=tt(t,e(0));let $=1;for(;;){const o=$;if(o<t){d(n,o),n[o]=e(o),$=o+1|0;continue}else break}return n}}function Nb(t){return cr(t)}function Db(t){return Math.round(t)}function Ub(t,e){e.method_0(e.self,String(t))}function oo(t,e){if(e>=0&&e<(t.end-t.start|0)){const n=t.bytes,$=t.start+e|0;return d(n,$),n[$]}else return W2(`index out of bounds: the len is from 0 to ${vt(t.end-t.start|0)} but the index is ${vt(e)}`)}function Vb(t,e,n){const $=t.length;let o;if(n===void 0)o=$;else{const _=n;o=_<0?$+_|0:_}const s=e<0?$+e|0:e;return s>=0&&s<=o&&o<=$?{bytes:t,start:s,end:o}:V2()}function Wb(t){const e=oo(t,0),n=oo(t,1),$=(e>>>0)+(n<<8>>>0)|0,o=oo(t,2),s=($>>>0)+(o<<16>>>0)|0,c=oo(t,3);return(s>>>0)+(c<<24>>>0)|0}function Xb(t,e){return{elem_info:0|1<<t,data:[e]}}function H$(t,e){if(t.elem_info&1<<e){const $=t.data,o=t.elem_info,s=jo(o&((1<<e>>>0)-1|0));return d($,s),$[s]}else return}function Yb(t,e,n,$){return{elem_info:0|1<<t|1<<n,data:t<n?[e,$]:[$,e]}}function Kb(t,e,n){const $=t.data,o=$.length,s=o+1|0,c=t.elem_info,_=jo(c&((1<<e>>>0)-1|0)),i=tt(s,n);return So($,i,_,0,0),So($,i,o-_|0,_,_+1|0),{elem_info:t.elem_info|1<<e,data:i}}function Qb(t,e){const n=t.data,$=n.length,o=t.elem_info,s=jo(o&((1<<e>>>0)-1|0)),c=tt($-1|0,n[0]);return So(n,c,s,0,0),So(n,c,($-s|0)-1|0,s+1|0,s),{elem_info:t.elem_info^1<<e,data:c}}function Ec(t,e,n){const $=Nb(t.data),o=t.elem_info,s=jo(o&((1<<e>>>0)-1|0));return d($,s),$[s]=n,{elem_info:t.elem_info,data:$}}function Zb(t,e,n){d(e,0),e[0]=1634760805,d(e,1),e[1]=1634760805,d(e,2),e[2]=1634760805,d(e,3),e[3]=1634760805,d(e,4),e[4]=857760878,d(e,5),e[5]=857760878,d(e,6),e[6]=857760878,d(e,7),e[7]=857760878,d(e,8),e[8]=2036477234,d(e,9),e[9]=2036477234,d(e,10),e[10]=2036477234,d(e,11),e[11]=2036477234,d(e,12),e[12]=1797285236,d(e,13),e[13]=1797285236,d(e,14),e[14]=1797285236,d(e,15),e[15]=1797285236,d(t,0),d(e,16),e[16]=t[0],d(t,0),d(e,17),e[17]=t[0],d(t,0),d(e,18),e[18]=t[0],d(t,0),d(e,19),e[19]=t[0],d(t,1),d(e,20),e[20]=t[1],d(t,1),d(e,21),e[21]=t[1],d(t,1),d(e,22),e[22]=t[1],d(t,1),d(e,23),e[23]=t[1],d(t,2),d(e,24),e[24]=t[2],d(t,2),d(e,25),e[25]=t[2],d(t,2),d(e,26),e[26]=t[2],d(t,2),d(e,27),e[27]=t[2],d(t,3),d(e,28),e[28]=t[3],d(t,3),d(e,29),e[29]=t[3],d(t,3),d(e,30),e[30]=t[3],d(t,3),d(e,31),e[31]=t[3],d(t,4),d(e,32),e[32]=t[4],d(t,4),d(e,33),e[33]=t[4],d(t,4),d(e,34),e[34]=t[4],d(t,4),d(e,35),e[35]=t[4],d(t,5),d(e,36),e[36]=t[5],d(t,5),d(e,37),e[37]=t[5],d(t,5),d(e,38),e[38]=t[5],d(t,5),d(e,39),e[39]=t[5],d(t,6),d(e,40),e[40]=t[6],d(t,6),d(e,41),e[41]=t[6],d(t,6),d(e,42),e[42]=t[6],d(t,6),d(e,43),e[43]=t[6],d(t,7),d(e,44),e[44]=t[7],d(t,7),d(e,45),e[45]=t[7],d(t,7),d(e,46),e[46]=t[7],d(t,7),d(e,47),e[47]=t[7],d(e,48),e[48]=n,d(e,49),e[49]=(n>>>0)+1|0,d(e,50),e[50]=(n>>>0)+2|0,d(e,51),e[51]=(n>>>0)+3|0,d(e,52),e[52]=0,d(e,53),e[53]=0,d(e,54),e[54]=0,d(e,55),e[55]=0,d(e,56),e[56]=0,d(e,57),e[57]=0,d(e,58),e[58]=0,d(e,59),e[59]=0,d(e,60),e[60]=0,d(e,61),e[61]=0,d(e,62),e[62]=0,d(e,63),e[63]=0}function me(t){const e=t._0,n=t._1,$=t._2,o=t._3,s=(e>>>0)+(n>>>0)|0,c=o^s,_=c<<16|(c>>>16|0),i=($>>>0)+(_>>>0)|0,r=n^i,a=r<<12|(r>>>20|0),l=(s>>>0)+(a>>>0)|0,u=_^l,p=u<<8|(u>>>24|0),m=(i>>>0)+(p>>>0)|0,b=a^m,g=b<<7|(b>>>25|0);return{_0:l,_1:g,_2:m,_3:p}}function Rc(t,e,n){Zb(t,e,n);let $=0;for(;;){const o=$;if(o<4){d(e,o);let s=e[o];const c=4+o|0;d(e,c);let _=e[c];const i=8+o|0;d(e,i);let r=e[i];const a=12+o|0;d(e,a);let l=e[a];const u=16+o|0;d(e,u);let p=e[u];const m=20+o|0;d(e,m);let b=e[m];const g=24+o|0;d(e,g);let f=e[g];const k=28+o|0;d(e,k);let w=e[k];const I=32+o|0;d(e,I);let y=e[I];const L=36+o|0;d(e,L);let M=e[L];const G=40+o|0;d(e,G);let C=e[G];const O=44+o|0;d(e,O);let x=e[O];const A=48+o|0;d(e,A);let q=e[A];const H=52+o|0;d(e,H);let B=e[H];const ct=56+o|0;d(e,ct);let K=e[ct];const Z=60+o|0;d(e,Z);let F=e[Z],N=0;for(;;){const ms=N;if(ms<4){const Un=me({_0:s,_1:p,_2:y,_3:q});s=Un._0,p=Un._1,y=Un._2,q=Un._3;const Vn=me({_0:_,_1:b,_2:M,_3:B});_=Vn._0,b=Vn._1,M=Vn._2,B=Vn._3;const Wn=me({_0:r,_1:f,_2:C,_3:K});r=Wn._0,f=Wn._1,C=Wn._2,K=Wn._3;const Xn=me({_0:l,_1:w,_2:x,_3:F});l=Xn._0,w=Xn._1,x=Xn._2,F=Xn._3;const Yn=me({_0:s,_1:b,_2:C,_3:F});s=Yn._0,b=Yn._1,C=Yn._2,F=Yn._3;const Kn=me({_0:_,_1:f,_2:x,_3:q});_=Kn._0,f=Kn._1,x=Kn._2,q=Kn._3;const Qn=me({_0:r,_1:w,_2:y,_3:B});r=Qn._0,w=Qn._1,y=Qn._2,B=Qn._3;const Zn=me({_0:l,_1:p,_2:M,_3:K});l=Zn._0,p=Zn._1,M=Zn._2,K=Zn._3,N=ms+1|0;continue}else break}d(e,o),e[o]=s;const V=4+o|0;d(e,V),e[V]=_;const at=8+o|0;d(e,at),e[at]=r;const W=12+o|0;d(e,W),e[W]=l;const et=16+o|0;d(e,et),d(e,et),e[et]=(e[et]>>>0)+(p>>>0)|0;const qt=20+o|0;d(e,qt),d(e,qt),e[qt]=(e[qt]>>>0)+(b>>>0)|0;const qn=24+o|0;d(e,qn),d(e,qn),e[qn]=(e[qn]>>>0)+(f>>>0)|0;const Bn=28+o|0;d(e,Bn),d(e,Bn),e[Bn]=(e[Bn]>>>0)+(w>>>0)|0;const Fn=32+o|0;d(e,Fn),d(e,Fn),e[Fn]=(e[Fn]>>>0)+(y>>>0)|0;const Hn=36+o|0;d(e,Hn),d(e,Hn),e[Hn]=(e[Hn]>>>0)+(M>>>0)|0;const Nn=40+o|0;d(e,Nn),d(e,Nn),e[Nn]=(e[Nn]>>>0)+(C>>>0)|0;const Dn=44+o|0;d(e,Dn),d(e,Dn),e[Dn]=(e[Dn]>>>0)+(x>>>0)|0;const as=48+o|0;d(e,as),e[as]=q;const ls=52+o|0;d(e,ls),e[ls]=B;const us=56+o|0;d(e,us),e[us]=K;const ps=60+o|0;d(e,ps),e[ps]=F,$=o+1|0;continue}else return}}function t4(t){const e=Hb(8,o=>Wb(Vb(t,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),n=tt(64,0);return Rc(e,n,0),{buffer:n,seed:e,i:0,n:32,counter:0}}function e4(t){const e=t.i;if(e>>>0>=t.n>>>0)return;t.i=(e>>>0)+1|0;const n=e&31,$=t.buffer,o=Math.imul(n,2)|0;d($,o);const s=C$($[o]),c=t.buffer,_=(Math.imul(n,2)|0)+1|0;d(c,_);const i=C$(c[_]);return jb(xn(i,32),s)}function n4(t){t.counter=(t.counter>>>0)+4|0,t.counter===16&&(Jb(t.buffer,t.seed,8,56,0),t.counter=0),Rc(t.seed,t.buffer,t.counter),t.i=0,t.n=t.counter===12?28:32}function o4(t,e,n){let $=t,o=n;t:for(;;){const s=$,c=o;switch(s.$tag){case 1:{const _=s,i=_._0,r=_._1,a=_._2;return e===i?r:x4(a,e)}case 0:{const _=s,i=_._0,r=_._1,a=_._2;return c===a&&e===i?r:void 0}default:{const i=s._0,a=c&31,l=H$(i,a);if(l!==void 0){$=l,o=c>>>5|0;continue t}return}}}}function $4(t,e){const n=t;if(n!==void 0)return o4(n,e,Co(e))}function zc(t,e,n,$,o,s){const _=n&31,r=s&31;if(_===r){let a;if(n>>>0<=127){const u={_0:t,_1:e};a=new we($,o,new wn(u,Ze))}else{const p=n>>>5|0;a=zc(t,e,p,$,o,s>>>5|0)}return new en(Xb(_,a))}else{let a,l;t:if(n>>>0<=127){const p=new we(t,e,Ze),m=new we($,o,Ze);a=p,l=m;break t}else{const p=n,m=new Je(t,e,p>>>5|0),b=s,g=new Je($,o,b>>>5|0);a=m,l=g;break t}return new en(Yb(_,a,r,l))}}function Jc(t,e,n,$){switch(t.$tag){case 1:{const o=t,s=o._0,c=o._1,_=o._2;if(e===s)return new we(e,n,_);{const i=Xc(_,l=>l._0===e);let r;i===void 0?r=_:r=Yc(_,i);const a={_0:s,_1:c};return new we(e,n,new wn(a,r))}}case 0:{const o=t,s=o._0,c=o._1,_=o._2;return $===_&&e===s?new Je(s,n,_):zc(s,c,_,e,n,$)}default:{const s=t._0,_=$&31,i=H$(s,_);if(i===void 0){const r=$,a=new Je(e,n,r>>>5|0);return new en(Kb(s,_,a))}else{const u=Jc(i,e,n,$>>>5|0);return new en(Ec(s,_,u))}}}}function uo(t,e,n){const $=t;return $===void 0?new Je(e,n,Co(e)):Jc($,e,n,Co(e))}function Tc(t,e,n){switch(t.$tag){case 1:{const $=t,o=$._0,s=$._1,c=$._2;if(o===e){if(c.$tag===0)return;{const _=c,i=_._0,r=i._0,a=i._1,l=_._1;return new we(r,a,l)}}else{const _=Xc(c,i=>i._0===e);if(_===void 0)return t;{const r=_;return new we(o,s,Yc(c,r))}}}case 0:{const $=t,o=$._0,s=$._2;return n===s&&e===o?void 0:t}default:{const o=t._0,c=n&31,_=H$(o,c);if(_===void 0)return t;{const l=Tc(_,e,n>>>5|0);let u,p;t:{e:{if(o.data.length===1){if(l===void 0)return;p=l;break e}else if(l===void 0)u=Qb(o,c);else{p=l;break e}break t}u=Ec(o,c,p)}t:{const m=u.data;if(m.length===1){const b=m[0];if(b.$tag===0){const g=b,f=g._0,k=g._1,w=g._2,I=u.elem_info,y=ir(I),L=w;return new Je(f,k,L<<5|y)}else break t}else break t}return new en(u)}}}}function s4(t,e){const n=t;if(n!==void 0)return Tc(n,e,Co(e))}function qc(t){switch(t.$tag){case 1:{const e=t,n=e._0,$=e._1,o=e._2;return bb(Es({_0:n,_1:$}),G4(o))}case 0:{const e=t,n=e._0,$=e._1;return Es({_0:n,_1:$})}default:{const $=t._0.data;return o=>{const s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_];if(qc(i)(o)===1){c=_+1|0;continue}else return 0}else return 1}}}}}function _4(t){const e=t;return e===void 0?fb():qc(e)}function c4(t){const e=_4(t);return n=>e($=>n($._1))}function Co(t){return $e(t)|-1073741824}function Do(t,e){let n=1,$=0,o=0;for(;;){const s=o;if(s<e){const c=t.str,_=t.start+s|0;c.charCodeAt(_)===10?(n=n+1|0,$=0):$=$+1|0,o=s+1|0;continue}else break}return{line:n,column:$}}function i4(t,e){const n=t.offset+e|0,$=Vo(t.input,n),o=65533;return new Oo(new En(Do(t.input,n),$===-1?o:$))}function Ht(t,e){const n=t.offset+e|0,$=Vo(t.input,n),o=65533;return new Ao(new En(Do(t.input,n),$===-1?o:$))}function N$(t,e){const n=t.offset+e|0,$=Vo(t.input,n),o=65533;return new Rn(new En(Do(t.input,n),$===-1?o:$))}function Uo(t,e){const n=t.offset+e|0,$=Vo(t.input,n),o=65533;return new Ce(new En(Do(t.input,n),$===-1?o:$))}function r4(t,e){return new i_(new T({_0:t,_1:e}))}function a4(t,e){return new a_(new T({_0:t,_1:e}))}function l4(t,e){return new l_(new T({_0:t,_1:e}))}function u4(t,e){return new u_(new T({_0:t,_1:e}))}function p4(t,e){return new p_(new T({_0:t,_1:e}))}function Bc(t,e){const n=t;let $=0,o=n.length;for(;;){const s=$,c=o;if(s<c){const _=(s+c|0)/2|0,i=$f(n,_),r=i._0,a=i._1;if(e<r){o=_;continue}else if(e>a){$=_+1|0;continue}else return!0}else return!1}}function gt(t){if(t.offset<t.end_offset){const e=t.input,n=t.offset,$=e.str,o=e.start+n|0,s=$.charCodeAt(o);if(t.offset=t.offset+1|0,s>=55296&&s<=56319&&t.offset<t.end_offset){const c=t.input,_=t.offset,i=c.str,r=c.start+_|0,a=i.charCodeAt(r);if(a>=56320&&a<=57343)return t.offset=t.offset+1|0,((s<<10)+a|0)-56613888|0}return s}else return-1}function sn(t){t:for(;;)e:{n:{const e=gt(t);if(e===-1)break;{const $=e;switch($){case 9:break n;case 32:break n;case 10:break n;case 13:break n;default:{if($>127&&Bc(D_,$))break e;t.offset=t.offset-1|0;break t}}}}break e}}function m4(t,e){return{offset:0,input:t,end_offset:t.end-t.start|0,remaining_available_depth:e}}function Xt(t,e){if(t.offset<t.end_offset){const n=t.input,$=t.offset,o=n.str,s=n.start+$|0,c=o.charCodeAt(s);return t.offset=t.offset+1|0,e!==c?Ht(t,-1):new O$(void 0)}else return new Ao(Ot)}function Pe(t,e,n){const $=ti(t.input,e,n);if(!_$($,{str:gs,start:0,end:gs.length})&&!_$($,{str:hs,start:0,end:hs.length})&&!_$($,{str:ks,start:0,end:ks.length})){let o,s;t:{e:{const c=Kc($);let _;if(c.$tag===1)_=c._0;else{s=c._0;break e}o=new A$(_);break t}o=new Eo(s)}t:if(o.$tag===1){const _=o._0;if(Pn(_,rr)&&g$(_,ar))return{_0:vb(_),_1:void 0};break t}else break t;t:if($t($.str,1,$.start,$.end)){if(j($.str,h($.str,0,$.start,$.end))===45)return{_0:Mn,_1:$};break t}else break t;return{_0:Sn,_1:$}}else{let o,s;t:{e:{const c=cg($);let _;if(c.$tag===1)_=c._0;else{s=c._0;break e}o=new ye(_);break t}o=new E$(s)}if(o.$tag===1)return{_0:o._0,_1:void 0};t:if($t($.str,1,$.start,$.end)){if(j($.str,h($.str,0,$.start,$.end))===45)return{_0:Mn,_1:$};break t}else break t;return{_0:Sn,_1:$}}}function Fc(t,e){for(;;)t:{const n=gt(t);if(n===-1)return Pe(t,e,t.offset);{const o=n;if(o>=48&&o<=57)break t;return t.offset=t.offset-1|0,Pe(t,e,t.offset)}}}function d4(t,e){const n=gt(t);if(n===-1)return new Rn(Ot);{const o=n;return o>=48&&o<=57?new Rt(Fc(t,e)):(t.offset=t.offset-1|0,N$(t,0))}}function D$(t,e){t:{const o=gt(t);if(o===-1)return new Rn(Ot);{const c=o;switch(c){case 43:break t;case 45:break t;default:return c>=48&&c<=57?new Rt(Fc(t,e)):(t.offset=t.offset-1|0,N$(t,0))}}}const n=d4(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}function f4(t,e){for(;;)t:{e:{const o=gt(t);if(o===-1)return new Rt(Pe(t,e,t.offset));{const c=o;switch(c){case 101:break e;case 69:break e;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Rt(Pe(t,e,t.offset))}}}}const n=D$(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}}function Hc(t,e){const n=gt(t);if(n===-1)return new Rn(Ot);{const o=n;return o>=48&&o<=57?f4(t,e):N$(t,-1)}}function Fs(t,e){for(;;)t:{e:{const o=gt(t);if(o===-1)return new Rt(Pe(t,e,t.offset));{const c=o;switch(c){case 46:{const _=Hc(t,e);let i;if(_.$tag===1)i=_._0;else return _;return new Rt(i)}case 101:break e;case 69:break e;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Rt(Pe(t,e,t.offset))}}}}const n=D$(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}}function b4(t,e){let n=0,$=0;for(;;){const o=$;if(o<e){const s=gt(t);if(s===-1)return new d_(Ot);{const _=s;if(_>=65){const i=((_&-33)-65|0)+10|0;if(i>15){const r=Ht(t,-1);if(r.$tag===1)r._0;else return r}n=n<<4|i}else if(_>=48){const i=_-48|0;if(i>9){const r=Ht(t,-1);if(r.$tag===1)r._0;else return r}n=n<<4|i}else{const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}}$=o+1|0;continue}else break}return new f_(n)}function Hs(t,e){const n=t._2,$=t._1,o=t._0;if(o.val>0&&e>o.val){const c=$.input.str,i=$.input.start;zn(n,c,i+o.val|0,e-o.val|0);return}else return}function U$(t){const e=He(),n={val:t.offset},$={_0:n,_1:t,_2:e};t:for(;;)e:{n:{o:{const s=gt(t);if(s===-1)return new u$(Ot);{const _=s;switch(_){case 34:{Hs($,t.offset-1|0);break t}case 10:break o;case 13:break o;case 92:{Hs($,t.offset-1|0);const i=gt(t);if(i===-1)return new u$(Ot);switch(i){case 98:{nt(e,8);break}case 102:{nt(e,12);break}case 110:{nt(e,10);break}case 114:{nt(e,13);break}case 116:{nt(e,9);break}case 34:{nt(e,34);break}case 92:{nt(e,92);break}case 47:{nt(e,47);break}case 117:{const l=b4(t,4);let u;if(l.$tag===1)u=l._0;else return l;nt(e,u);break}default:{const l=Ht(t,-1);if(l.$tag===1)l._0;else return l}}n.val=t.offset;break}default:if(_<32){const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}else break e}}break n}const o=Ht(t,-1);if(o.$tag===1)o._0;else return o}break e}return new b_(e.val)}function Ns(t,e){t:{const n=gt(t);if(n===-1)return new Rt(Pe(t,e,t.offset));{const o=n;switch(o){case 46:return Hc(t,e);case 101:break t;case 69:break t;default:{if(o>=48&&o<=57){t.offset=t.offset-1|0;const s=Ht(t,0);if(s.$tag===1)s._0;else return s}return t.offset=t.offset-1|0,new Rt(Pe(t,e,t.offset))}}}}return D$(t,e)}function L$(t,e){for(;;)t:{e:{n:{const n=gt(t);if(n===-1)return new Ce(Ot);{const o=n;if(o===9)break n;if(o===32)break n;if(o===10)break n;if(o===13)break n;if(o===123)return new dt(mr);if(o===91)return new dt(dr);if(o===93){if(e)return new dt(h_);{const s=Ht(t,-1);if(s.$tag===1)s._0;else return s}}else if(o===110){const s=Xt(t,117);if(s.$tag===1)s._0;else return s;const c=Xt(t,108);if(c.$tag===1)c._0;else return c;const _=Xt(t,108);if(_.$tag===1)_._0;else return _;return new dt(lr)}else if(o===116){const s=Xt(t,114);if(s.$tag===1)s._0;else return s;const c=Xt(t,117);if(c.$tag===1)c._0;else return c;const _=Xt(t,101);if(_.$tag===1)_._0;else return _;return new dt(ur)}else if(o===102){const s=Xt(t,97);if(s.$tag===1)s._0;else return s;const c=Xt(t,108);if(c.$tag===1)c._0;else return c;const _=Xt(t,115);if(_.$tag===1)_._0;else return _;const i=Xt(t,101);if(i.$tag===1)i._0;else return i;return new dt(pr)}else if(o===45){const s=gt(t);if(s===-1)return new Ce(Ot);{const _=s;if(_===48){const i=Ns(t,t.offset-2|0);let r;if(i.$tag===1)r=i._0;else return i;const a=r._0,l=r._1;return new dt(new un(a,so(l,u=>io(u))))}else{if(_>=49&&_<=57){const r=Fs(t,t.offset-2|0);let a;if(r.$tag===1)a=r._0;else return r;const l=a._0,u=a._1;return new dt(new un(l,so(u,p=>io(p))))}const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}}}else if(o===48){const s=Ns(t,t.offset-1|0);let c;if(s.$tag===1)c=s._0;else return s;const _=c._0,i=c._1;return new dt(new un(_,so(i,r=>io(r))))}else if(o>=49&&o<=57){const s=Fs(t,t.offset-1|0);let c;if(s.$tag===1)c=s._0;else return s;const _=c._0,i=c._1;return new dt(new un(_,so(i,r=>io(r))))}else if(o===34){const s=U$(t);let c;if(s.$tag===1)c=s._0;else return s;return new dt(new Ro(c))}else{if(o>127&&Bc(D_,o))break t;const c=-(o<=65535?1:2)|0,_=Ht(t,c);if(_.$tag===1)_._0;else return _}}break e}break t}break t}}function g4(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 93:return new dt(h_);case 44:return new dt(k_);default:return Uo(t,-1)}}function h4(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 125:return new dt(g_);case 44:return new dt(k_);default:return Uo(t,-1)}}function k4(t){sn(t);const e=gt(t);return e===-1?new Ao(Ot):e===58?new O$(void 0):Ht(t,-1)}function w4(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 125:return new dt(g_);case 34:{const o=U$(t);let s;if(o.$tag===1)s=o._0;else return o;return new dt(new Ro(s))}default:return Uo(t,-1)}}function y4(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);if(e===34){const o=U$(t);let s;if(o.$tag===1)s=o._0;else return o;return new dt(new Ro(s))}else return Uo(t,-1)}function Nc(t){const e=L$(t,!1);let n;if(e.$tag===1)n=e._0;else return e;return Dc(t,n)}function Dc(t,e){t:switch(e.$tag){case 0:return new Qt(kr);case 1:return new Qt(o_);case 2:return new Qt($_);case 3:{const n=e,$=n._0,o=n._1;return new Qt(new An($,o))}case 4:{const $=e._0;return new Qt(new z($))}case 5:return S4(t);case 7:return M4(t);case 8:break t;case 6:break t;default:break t}return new Qt(go())}function M4(t){if(t.remaining_available_depth<=0)return new Oo(c_);t.remaining_available_depth=t.remaining_available_depth-1|0;const e=[];let n;const $=L$(t,!0);let o;if($.$tag===1)o=$._0;else return $;let s=o;t:for(;;){const c=s;if(c.$tag===8){t.remaining_available_depth=t.remaining_available_depth+1|0,n=new jt(e);break}else{const _=Dc(t,c);let i;if(_.$tag===1)i=_._0;else return _;ub(e,i);const r=g4(t);let a;if(r.$tag===1)a=r._0;else return r;switch(a.$tag){case 9:{const l=L$(t,!1);if(l.$tag===1)s=l._0;else return l;continue t}case 8:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new jt(e);break t}default:{n=go();break t}}}}return new Qt(n)}function S4(t){if(t.remaining_available_depth<=0)return new Oo(c_);t.remaining_available_depth=t.remaining_available_depth-1|0;const e=Q_(8);let n;const $=w4(t);let o;if($.$tag===1)o=$._0;else return $;let s=o;t:for(;;){const c=s;switch(c.$tag){case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new E(e);break t}case 4:{const i=c._0,r=k4(t);if(r.$tag===1)r._0;else return r;const a=Nc(t);let l;if(a.$tag===1)l=a._0;else return a;v(e,i,l);const u=h4(t);let p;if(u.$tag===1)p=u._0;else return u;switch(p.$tag){case 9:{const m=y4(t);if(m.$tag===1)s=m._0;else return m;continue t}case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new E(e);break t}default:{n=go();break t}}}default:{n=go();break t}}}return new Qt(n)}function Uc(t,e){const n=m4(t,e),$=Nc(n);let o;if($.$tag===1)o=$._0;else return $;return sn(n),n.offset>=n.end_offset?new Qt(o):i4(n,0)}function Ds(t,e){const n=He(t.length),$=fg(t);for(;;){const o=Y1($);if(o===-1)break;{const c=o;switch(c){case 34:{ot(n,'\\"');break}case 92:{ot(n,"\\\\");break}case 47:{nt(n,c);break}case 10:{ot(n,"\\n");break}case 13:{ot(n,"\\r");break}case 8:{ot(n,"\\b");break}case 9:{ot(n,"\\t");break}default:{const _=c;_===12?ot(n,"\\f"):_<32?(ot(n,"\\u00"),ot(n,Gf(_&255))):nt(n,c)}}continue}}return n.val}function We(t,e){return""}function D(t,e,n,$){const o=He(),s=[];let c=t;for(;;){const _=c;if(_===void 0){if(s.length===0)break;{const i=s[s.length-1|0];if(i.$tag===0){const r=i,a=r._0,l=r._1;if(l<a.length){const u=ef(a,l);r._1=l+1|0,l>0&&(nt(o,44),ot(o,We())),c=u;continue}else{Bs(s),ot(o,We()),nt(o,93),c=void 0;continue}}else{const r=i,a=r._0,l=r._1,u=Mc(a);if(u===void 0){Bs(s),ot(o,We()),nt(o,125),c=void 0;continue}else{const m=u,b=m._0;let f=m._1;l||(nt(o,44),ot(o,We())),nt(o,34),ot(o,Ds(b)),nt(o,34),nt(o,58),r._1=!1,c=f;continue}}}}else{const r=_;switch(r.$tag){case 6:{const l=r._0;l.size===0?ot(o,"{}"):(nt(o,123),ot(o,We()),As(s,new y_(wc(l),!0)));break}case 5:{const l=r._0;l.length===0?ot(o,"[]"):(nt(o,91),ot(o,We()),As(s,new w_(l,0)));break}case 4:{const l=r._0;nt(o,34),ot(o,Ds(l)),nt(o,34);break}case 3:{const a=r,l=a._0,u=a._1;u===void 0?vf(o,l):ot(o,u);break}case 1:{ot(o,"true");break}case 2:{ot(o,"false");break}default:ot(o,"null")}c=void 0;continue}}return o.val}function rn(t){if(t.$tag===3){const n=t._0;return new R$(n)}else return ao}function po(t){if(t.$tag===4)return t._0}function Vc(t){if(t.$tag===5){const n=t._0;return new S_(n)}else return fr}function Wc(t){if(t.$tag===6)return t._0}function C4(t,e){return Pg(t,e)}function I4(t,e){return v$(t,e)}function L4(t,e){let n;return n=M_,C4(t,n)}function P4(t,e){let n;return n=M_,I4(t,n)}function v4(t,e){switch(t.$tag){case 1:return new l$(!0);case 2:return new l$(!1);default:return u4(e,"Bool::from_json: expected boolean")}}function he(t,e){t:if(t.$tag===3){const $=t._0;if($!==Sn)if($!==Mn){if($>2147483647||$<-2147483648){const o=a4(e,"Int::from_json: overflow");if(o.$tag===1)o._0;else return o}return new r_(Qe($))}else break t;else break t}else break t;return r4(e,"Int::from_json: expected number")}function $o(t,e){t:switch(t.$tag){case 4:switch(t._0){case"NaN":return new ln(wr);case"Infinity":return new ln(yr);case"-Infinity":return new ln(Mr);default:break t}case 3:{const $=t._0;if($!==Sn&&$!==Mn)return new ln(Math.fround($));break t}default:break t}return l4(e,"Float::from_json: expected number")}function Zt(t,e){if(t.$tag===4){const $=t._0;return new m_($)}else return p4(e,"String::from_json: expected string")}function G4(t){return n=>{let $=t;for(;;){const o=$;if(o.$tag===0)return 1;{const s=o,c=s._0,_=s._1;if(n(c)===0)return 0;$=_;continue}}}}function x4(t,e){let n=t;for(;;){const $=n;if($.$tag===0)return;{const o=$,s=o._0,c=s._0,_=s._1,i=o._1;if(c===e)return _;n=i;continue}}}function Xc(t,e){let n=t,$=0;for(;;){const o=n,s=$;if(o.$tag===0)return;{const c=o,_=c._0,i=c._1;if(e(_))return s;n=i,$=s+1|0;continue}}}function Yc(t,e){if(t.$tag===0)return Ze;if(e<0)return t;if(e===0)return t._1;{const n=t,$=n._0,o=n._1,s=new wn($,Ze);let c=s,_=o,i=e-1|0;for(;;){const r=c,a=_,l=i;if(a.$tag===0)break;if(r.$tag===1){const u=r,p=a,m=p._0,b=p._1;if(l===0){u._1=b;break}else{u._1=new wn(m,Ze),c=u._1,_=b,i=l-1|0;continue}}else{S();break}}return s}}function j4(t,e){return Math.pow(t,e)}function so(t,e){if(t!==void 0)return e(t)}function O4(t){for(;;){const e=e4(t);if(e!==void 0)return e;n4(t)}}function A4(t){return{self:t4(t),method_0:O4}}function E4(t){return A4(br)}function Us(t,e){const n=Ee(t,t$),$=Dt(t,32),o=Ee(e,t$),s=Dt(e,32),c=Bt(n,o),_=be(Bt($,o),Dt(c,32)),i=be(Bt(n,s),Ee(_,t$));return{hi:be(be(Bt($,s),Dt(_,32)),Dt(i,32)),lo:Bt(t,e)}}function R4(t,e){if(ge(e,it)){const o=t;return o.method_0(o.self)}else if(ge(Ee(e,I$(e,Ct)),it)){const o=t;return Ee(o.method_0(o.self),I$(e,Ct))}const n=t;let $=Us(n.method_0(n.self),e);if(h$($.lo,e)){const o=xb(Ob(e),e);for(;h$($.lo,o);){const s=t;$=Us(s.method_0(s.self),e);continue}}return $.hi}function z4(t,e){if(e===0){const n=t;return Ts(n.method_0(n.self))}return Ts(R4(t,C$(e)))}function J4(t,e){if(e===0){const n=t;return Y_(Dt(n.method_0(n.self),33))}else return z4(t,e)}function T4(t){const e=t;return yo(Dt(xn(e.method_0(e.self),11),11))/yo(xn(Ct,53))}function q4(t,e){{t:{let n;e:{let $;n:{let o;o:if($t(t.str,2,t.start,t.end))if(j(t.str,h(t.str,0,t.start,t.end))===48)switch(j(t.str,h(t.str,1,t.start,t.end))){case 120:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 88:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 111:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,$={str:_,start:r,end:t.end};break n}case 79:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,$={str:_,start:r,end:t.end};break n}case 98:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,n={str:_,start:r,end:t.end};break e}case 66:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,n={str:_,start:r,end:t.end};break e}default:break t}else break t;else break t;return new pn({_0:16,_1:o,_2:!0})}return new pn({_0:8,_1:$,_2:!0})}return new pn({_0:2,_1:n,_2:!0})}return new pn({_0:10,_1:t,_2:!1})}}function mo(){return new C_(new ae(F_))}function _o(){return new Eo(new ae(F_))}function B4(){return new I_(new ae(on))}function an(){return new Eo(new ae(on))}function Io(){return new E$(new ae(on))}function F4(){return new P_(new ae(on))}function Vs(){return new v_(new ae(on))}function Ws(){return new G_(new ae(on))}function H4(t,e){return e?t===10?de(n$,kt):t===16?de(n$,fs):de(n$,zt(t)):te(t===10?de(e$,kt):t===16?de(e$,fs):de(e$,zt(t)),Ct)}function Kc(t,e){if(tf(t,{str:ws,start:0,end:ws.length})){let n,$;t:{e:{const p=ti(t,0,void 0);if($t(p.str,1,p.start,p.end))switch(j(p.str,h(p.str,0,p.start,p.end))){case 43:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,n={_0:!1,_1:{str:b,start:f,end:p.end}};break}case 45:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,n={_0:!0,_1:{str:b,start:f,end:p.end}};break}default:{$=p;break e}}else{$=p;break e}break t}n={_0:!1,_1:$}}const o=n._0,s=n._1,c=q4(s);let _;if(c.$tag===1)_=c._0;else return c;const i=_._0,r=_._1,a=_._2,l=H4(i,o);let u;if($t(r.str,1,r.start,r.end)){const p=j(r.str,h(r.str,0,r.start,r.end));if(p>=48&&p<=57)u=!0;else if(p>=97&&p<=122)u=!0;else if(p>=65&&p<=90)u=!0;else if($t(r.str,2,r.start,r.end))if(p===95){const m=j(r.str,h(r.str,1,r.start,r.end));u=m>=48&&m<=57||m>=97&&m<=122?!0:m>=65&&m<=90}else u=!1;else u=!1}else u=!1;if(u){let p,m=r,b=it,g=a;for(;;){const f=m,k=b,w=g;let I,y,L;t:if(Se(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95){const O=an();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x;const H={str:O,start:A,end:f.end};I=k,y=H,L=C;break t}}else if($t(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95)if(w===!1){const O=an();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x,m={str:O,start:A,end:f.end},g=!1;continue}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x;const H={str:O,start:A,end:f.end};I=k,y=H,L=C;break t}}else{p=k;break}const M=L;let G;if(M>=48&&M<=57)G=M-48|0;else if(M>=97&&M<=122)G=M+-87|0;else if(M>=65&&M<=90)G=M+-55|0;else{const C=B4();if(C.$tag===1)G=C._0;else return C}if(G<i)if(o)if(g$(I,l)){const C=Gn(Be(I,zt(i)),zt(G));if(Pn(C,I)){m=y,b=C,g=!0;continue}else{const O=_o();if(O.$tag===1){p=O._0;break}else return O}}else{const C=_o();if(C.$tag===1){p=C._0;break}else return C}else if(zo(I,l)){const C=te(Be(I,zt(i)),zt(G));if(g$(C,I)){m=y,b=C,g=!0;continue}else{const O=_o();if(O.$tag===1){p=O._0;break}else return O}}else{const C=_o();if(C.$tag===1){p=C._0;break}else return C}else{const C=an();if(C.$tag===1){p=C._0;break}else return C}}return new A$(p)}else return an()}else return an()}function N4(t,e){const n=Kc(t);let $;if(n.$tag===1)$=n._0;else return n;if(zo($,zt(-2147483648))||W_($,zt(2147483647))){const o=mo();if(o.$tag===1)o._0;else return o}return new L_(Oe($))}function D4(t){let e;if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 43:{const l=t.str,u=h(t.str,1,t.start,t.end);let p;u===void 0?p=t.end:p=u,e={str:l,start:p,end:t.end};break}case 45:{const l=t.str,u=h(t.str,1,t.start,t.end);let p;u===void 0?p=t.end:p=u,e={str:l,start:p,end:t.end};break}default:e=t}else e=t;let n,$;t:{e:{let a;n:{o:{let l;_:{$:{let u;s:if($t(e.str,2,e.start,e.end))if(j(e.str,h(e.str,0,e.start,e.end))===48)switch(j(e.str,h(e.str,1,e.start,e.end))){case 120:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,u={str:b,start:f,end:e.end};break s}case 88:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,u={str:b,start:f,end:e.end};break s}case 111:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,l={str:b,start:f,end:e.end};break $}case 79:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,l={str:b,start:f,end:e.end};break $}case 98:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,a={str:b,start:f,end:e.end};break o}case 66:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,a={str:b,start:f,end:e.end};break o}default:{$=e;break e}}else{$=e;break e}else{$=e;break e}n={_0:u,_1:!0,_2:!0};break _}n={_0:l,_1:!0,_2:!1}}break n}n={_0:a,_1:!0,_2:!1}}break t}n={_0:$,_1:!1,_2:!1}}const o=n._0,s=n._1,c=n._2;let _=o,i=s,r=!1;for(;;){const a=_,l=i,u=r;let p,m,b;t:{if(Se(a.str,0,a.start,a.end))return!0;if(Se(a.str,1,a.start,a.end)){const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=u;break t}}else{const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95){if(l===!1)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,_={str:f,start:w,end:a.end},i=!1,r=!0;continue}}else{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=u;break t}}}if(m>=48&&m<=57||c&&(m>=97&&m<=102||m>=65&&m<=70)){_=p,i=!0,r=!1;continue}else{if(b)return!1;_=p,i=!1,r=!1;continue}}}function U4(){return{digits:Zi(800),digits_num:0,decimal_point:0,negative:!1,truncated:!1}}function V$(t){for(;;){let e;if(t.digits_num>0){const n=t.digits,$=t.digits_num-1|0;d(n,$),e=n[$]===0}else e=!1;if(e){t.digits_num=t.digits_num-1|0;continue}else break}if(t.digits_num===0){t.decimal_point=0;return}else return}function V4(t){const e=U4();let n=!1,$=!1,o;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r;const u={str:i,start:a,end:t.end};e.negative=!0,o=u;break}case 43:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r,o={str:i,start:a,end:t.end};break}default:break e}else break e;break t}o=t}let s,c=o;for(;;){const _=c;if($t(_.str,1,_.start,_.end)){const i=j(_.str,h(_.str,0,_.start,_.end));if(i===95){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a,c={str:r,start:l,end:_.end};continue}else if(i===46){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a;const p={str:r,start:l,end:_.end};if(n){const m=Vs();if(m.$tag===1){s=m._0;break}else return m}else{n=!0,e.decimal_point=e.digits_num,c=p;continue}}else if(i>=48&&i<=57){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a;const p={str:r,start:l,end:_.end};if($=!0,i===48&&e.digits_num===0){e.decimal_point=e.decimal_point-1|0,c=p;continue}if(e.digits_num<e.digits.length){const m=e.digits,b=e.digits_num;d(m,b),m[b]=(i-48|0)&255,e.digits_num=e.digits_num+1|0}else i!==48&&(e.truncated=!0);c=p;continue}else{s=_;break}}else{s=_;break}}if($){n||(e.decimal_point=e.digits_num);let _,i;t:{e:{if($t(s.str,1,s.start,s.end))switch(j(s.str,h(s.str,0,s.start,s.end))){case 101:{const u=s.str,p=h(s.str,1,s.start,s.end);let m;p===void 0?m=s.end:m=p,i={str:u,start:m,end:s.end};break e}case 69:{const u=s.str,p=h(s.str,1,s.start,s.end);let m;p===void 0?m=s.end:m=p,i={str:u,start:m,end:s.end};break e}default:_=s}else _=s;break t}let r=1,a;if($t(i.str,1,i.start,i.end))switch(j(i.str,h(i.str,0,i.start,i.end))){case 43:{const u=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p,a={str:u,start:m,end:i.end};break}case 45:{const u=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p;const g={str:u,start:m,end:i.end};r=-1,a=g;break}default:a=i}else a=i;e:{n:{if($t(a.str,1,a.start,a.end)){const u=j(a.str,h(a.str,0,a.start,a.end));if(u>=48&&u<=57){let p=0,m,b=a;for(;;){const g=b;if($t(g.str,1,g.start,g.end)){const f=j(g.str,h(g.str,0,g.start,g.end));if(f===95){const k=g.str,w=h(g.str,1,g.start,g.end);let I;w===void 0?I=g.end:I=w,b={str:k,start:I,end:g.end};continue}else if(f>=48&&f<=57){const k=g.str,w=h(g.str,1,g.start,g.end);let I;w===void 0?I=g.end:I=w;const L={str:k,start:I,end:g.end};p=(Math.imul(p,10)|0)+(f-48|0)|0,b=L;continue}else{m=g;break}}else{m=g;break}}e.decimal_point=e.decimal_point+(Math.imul(r,p)|0)|0,_=m}else break n}else break n;break e}const l=Vs();if(l.$tag===1)_=l._0;else return l}}return Se(_.str,0,_.start,_.end)?(V$(e),new x_(e)):Ws()}else return Ws()}function W4(t){return V4(t)}function X4(t){let e,n;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,e={_0:!1,_1:{str:c,start:i,end:t.end}};break}case 43:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,n={str:c,start:i,end:t.end};break e}default:{n=t;break e}}else{n=t;break e}break t}e={_0:!0,_1:n}}const $=e._0,o=e._1;t:{let s;e:{n:if(Se(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 110:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}default:break t}case 78:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}default:break t}case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}default:break t}else if($t(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}default:break t}else break t;return new ye(B2)}e:{n:{if(Se(s.str,0,s.start,s.end))break n;if(Se(s.str,5,s.start,s.end))switch(j(s.str,h(s.str,0,s.start,s.end))){case 105:switch(j(s.str,h(s.str,1,s.start,s.end))){case 110:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}case 78:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}default:break e}case 73:switch(j(s.str,h(s.str,1,s.start,s.end))){case 110:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}case 78:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}default:break e}default:break e}else break e}return $?new ye(Sn):new ye(Mn)}return Io()}return Io()}function Y4(t,e,n){let $=e,o=0,s=t;for(;;){const c=s;if($t(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const u={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,$=n(_-48|0,$);else if(_!==95)break;s=u;continue}else break}return{_0:s,_1:$,_2:o}}function K4(t,e,n){let $=e,o=0,s=t;for(;;){const c=s;if($t(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const u={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,$=n(_-48|0,$);else if(_!==95)break;s=u;continue}else break}return{_0:s,_1:$,_2:o}}function Xs(t,e){return Y4(t,e,(n,$)=>be(Bt($,kt),F$(n)))}function Q4(t){let e=t,n=!1,$,o;t:{e:{const s=e;if($t(s.str,1,s.start,s.end)){const c=j(s.str,h(s.str,0,s.start,s.end));switch(c){case 43:{const _=s.str,i=h(s.str,1,s.start,s.end);let r;i===void 0?r=s.end:r=i,$={str:_,start:r,end:s.end},o=c;break e}case 45:{const _=s.str,i=h(s.str,1,s.start,s.end);let r;i===void 0?r=s.end:r=i,$={str:_,start:r,end:s.end},o=c;break e}}}break t}n=o===45,e=$}t:{const s=e;if($t(s.str,1,s.start,s.end)){const c=j(s.str,h(s.str,0,s.start,s.end));if(c>=48&&c<=57){const _=K4(e,jr,(a,l)=>zo(l,gr)?te(Be(kt,l),zt(a)):l),i=_._0,r=_._1;return n?{_0:i,_1:jc(r)}:{_0:i,_1:r}}else break t}else break t}}function Ys(t,e){let n=e,$=0,o=t;for(;;){const s=o;let c;t:if($t(s.str,1,s.start,s.end)){const _=j(s.str,h(s.str,0,s.start,s.end));if(_>=48&&_<=57){const i=s.str,r=h(s.str,1,s.start,s.end);let a;r===void 0?a=s.end:a=r;const u={str:i,start:a,end:s.end};if(h$(n,H_)){$=$+1|0,n=be(Bt(n,kt),F$(_-48|0)),o=u;continue}else{c=s;break t}}else if(_===95){const i=s.str,r=h(s.str,1,s.start,s.end);let a;r===void 0?a=s.end:a=r,o={str:i,start:a,end:s.end};continue}else{c=s;break t}}else{c=s;break t}return{_0:c,_1:n,_2:$}}}function Z4(t){let e,n;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const k=t.str,w=h(t.str,1,t.start,t.end);let I;w===void 0?I=t.end:I=w,e={_0:{str:k,start:I,end:t.end},_1:!0};break}case 43:{const k=t.str,w=h(t.str,1,t.start,t.end);let I;w===void 0?I=t.end:I=w,n={str:k,start:I,end:t.end};break e}default:{n=t;break e}}else{n=t;break e}break t}e={_0:n,_1:!1}}const $=e._0,o=e._1;if(kg($))return new ve(void 0);const s=Xs($,it),c=s._0,_=s._1,i=s._2;let r=_,a=c,l=i,u=0,p=it;const m=a;if($t(m.str,1,m.start,m.end)&&j(m.str,h(m.str,0,m.start,m.end))===46){const k=m.str,w=h(m.str,1,m.start,m.end);let I;w===void 0?I=m.end:I=w,a={str:k,start:I,end:m.end};const M=Xs(a,r),G=M._0,C=M._1,O=M._2;a=G,r=C,u=O,p=jc(zt(u))}if(l=l+u|0,l===0)return new ve(void 0);let b;t:{e:{const y=a;if($t(y.str,1,y.start,y.end))switch(j(y.str,h(y.str,0,y.start,y.end))){case 101:{const M=y.str,G=h(y.str,1,y.start,y.end);let C;G===void 0?C=y.end:C=G,b={str:M,start:C,end:y.end};break e}case 69:{const M=y.str,G=h(y.str,1,y.start,y.end);let C;G===void 0?C=y.end:C=G,b={str:M,start:C,end:y.end};break e}}break t}const f=Q4(b);let k;if(f===void 0)return new ve(void 0);k=f;const w=k._0,I=k._1;a=w,p=te(p,I)}const g=a;if(Se(g.str,0,g.start,g.end)){if(l<=19)return new ve({exponent:p,mantissa:r,negative:o,many_digits:!1});l=l-19|0;let f=!1,k=t.str,w=t.start,I=t.end;t:for(;;){const L=k,M=w,G=I;let C,O;e:if($t(L,1,M,G)){const x=j(L,h(L,0,M,G));switch(x){case 48:{const A=h(L,1,M,G);let q;A===void 0?q=G:q=A,C={str:L,start:q,end:G},O=x;break e}case 46:{const A=h(L,1,M,G);let q;A===void 0?q=G:q=A,C={str:L,start:q,end:G},O=x;break e}default:break t}}else break;l=l-((O-46|0)/2|0)|0,k=C.str,w=C.start,I=C.end}let y=r;if(l>0){f=!0,y=it;const L=Ys(t,y),M=L._0,G=L._1,C=L._2;y=G;let O;if(X2(y,H_))O=C;else if($t(M.str,1,M.start,M.end)){const x=M.str,A=h(M.str,1,M.start,M.end);let q;A===void 0?q=M.end:q=A;const B={str:x,start:q,end:M.end},ct=Ys(B,y),K=ct._1,Z=ct._2;y=K,O=Z}else return new ve(void 0);p=zt(O),p=te(p,Or)}return new ve({exponent:p,mantissa:y,negative:o,many_digits:f})}else return F4()}function Ks(t,e,n){const $=e-ht.bias|0;let o=Oc(t,Gn(Ae(Ct,ht.mantissa_bits),Ct));const s=zt($&((1<<ht.exponent_bits)-1|0));return o=zs(o,Ae(s,ht.mantissa_bits)),n&&(o=zs(o,Ae(Ae(Ct,ht.mantissa_bits),ht.exponent_bits))),o}function tg(t,e){if(e<0||e>=t.digits_num)return!1;let n;const $=t.digits;if(d($,e),$[e]===5?n=(e+1|0)===t.digits_num:n=!1,n){if(t.truncated)return!0;let s;if(e>0){const c=t.digits,_=e-1|0;d(c,_),s=(c[_]%2|0)!==0}else s=!1;return s}const o=t.digits;return d(o,e),o[e]>=5}function eg(t){if(t.decimal_point>20)return s_;let e=it,n=0;for(;n<t.decimal_point&&n<t.digits_num;){const $=Be(e,kt),o=t.digits,s=n;d(o,s),e=te($,Mo(o[s])),n=n+1|0;continue}for(;n<t.decimal_point;){e=Be(e,kt),n=n+1|0;continue}return tg(t,t.decimal_point)&&(e=te(e,Ct)),e}function ng(t,e){d(no,e);const n=no[e]._0;d(no,e);const $=no[e]._1;let o=!1;const s=$.length;let c=0;for(;;){const _=c;if(_<s){if(_>=t.digits_num){o=!0;break}const i=$.charCodeAt(_)-48|0,r=t.digits;if(d(r,_),r[_]!==i){const a=t.digits;d(a,_),o=a[_]<i;break}c=_+1|0;continue}else break}return o?n-1|0:n}function Qs(t,e){const n=ng(t,e);let $=t.digits_num,o=t.digits_num+n|0,s=it;for($=$-1|0;$>=0;){const c=t.digits,_=$;d(c,_);const i=Mo(c[_]);s=te(s,Ae(i,e));const r=de(s,kt),a=Oe(Gn(s,Be(r,kt)));if(o=o-1|0,o<t.digits.length){const l=t.digits,u=o;d(l,u),l[u]=a&255}else a!==0&&(t.truncated=!0);s=r,$=$-1|0;continue}for(;W_(s,it);){const c=de(s,kt),_=Oe(Gn(s,Be(kt,c)));if(o=o-1|0,o<t.digits.length){const i=t.digits,r=o;d(i,r),i[r]=_&255}else _!==0&&(t.truncated=!0);s=c;continue}t.digits_num=t.digits_num+n|0,t.digits_num>t.digits.length&&(t.digits_num=t.digits.length),t.decimal_point=t.decimal_point+n|0,V$(t)}function Zs(t,e){let n=0,$=0,o=it;for(;ge(Dt(o,e),it);){if(n>=t.digits_num){for(;ge(Dt(o,e),it);){o=Bt(o,kt),n=n+1|0;continue}break}const c=t.digits,_=n;d(c,_);const i=c[_];o=be(Bt(o,kt),Mo(i)),n=n+1|0;continue}t.decimal_point=t.decimal_point-(n-1|0)|0;const s=I$(xn(Ct,e),Ct);for(;n<t.digits_num;){const c=Dt(o,e),_=t.digits,i=$;d(_,i),_[i]=Rs(c),$=$+1|0,o=Ee(o,s);const r=t.digits,a=n;d(r,a);const l=r[a];o=be(Bt(o,kt),Mo(l)),n=n+1|0;continue}for(;ho(o,it);){const c=Dt(o,e);if($<t.digits.length){const _=t.digits,i=$;d(_,i),_[i]=Rs(c),$=$+1|0}else ho(c,it)&&(t.truncated=!0);o=Ee(o,s),o=Bt(o,kt);continue}t.digits_num=$,V$(t)}function co(t,e){if(t.digits_num===0)return;let n=e;if(n>0){for(;n>59;){Qs(t,59),n=n-59|0;continue}Qs(t,n)}if(n<0){for(;n<-59;){Zs(t,59),n=n+59|0;continue}Zs(t,-n|0);return}else return}function og(t){let e=0,n=it;if(t.digits_num===0||t.decimal_point<-330){n=it,e=ht.bias;const o=Ks(n,e,t.negative);return new ye(vn(o))}if(t.decimal_point>310){const o=mo();if(o.$tag===1)o._0;else return o}for(;t.decimal_point>0;){let o=0;t.decimal_point>=eo.length?o=60:o=ie(eo,t.decimal_point),co(t,-o|0),e=e+o|0;continue}for(;;){let o;if(t.decimal_point<0)o=!0;else{let s;if(t.decimal_point===0){const c=t.digits;d(c,0),s=c[0]<5}else s=!1;o=s}if(o){let s=0;(-t.decimal_point|0)>=eo.length?s=60:s=ie(eo,-t.decimal_point|0),co(t,s),e=e-s|0;continue}else break}if(e=e-1|0,e<(ht.bias+1|0)){const o=(ht.bias+1|0)-e|0;co(t,-o|0),e=e+o|0}if((e-ht.bias|0)>=((1<<ht.exponent_bits)-1|0)){const o=mo();if(o.$tag===1)o._0;else return o}if(co(t,ht.mantissa_bits+1|0),n=eg(t),Js(n,Ae(__,ht.mantissa_bits))&&(n=Lb(n,1),e=e+1|0,(e-ht.bias|0)>=((1<<ht.exponent_bits)-1|0))){const o=mo();if(o.$tag===1)o._0;else return o}Js(Oc(n,Ae(Ct,ht.mantissa_bits)),it)&&(e=ht.bias);const $=Ks(n,e,t.negative);return new ye(vn($))}function $g(t,e){if(ge(t,it)||ge(e,it))return Ha;if(ge(t,Ct))return e;if(ge(e,Ct))return t;if(qs(e)===0||qs(t)===0)return;const n=Gb(Ua,e);if(!ho(t,n))return Bt(t,e)}function s$(t){const e=t&31;return d(Ms,e),Ms[e]}function sg(t){return Pn(Fa,t.exponent)&&Pn(t.exponent,Ba)&&Y2(t.mantissa,U_)&&!t.many_digits}function _g(t){if(sg(t)){let e;if(Pn(t.exponent,o$)){const n=yo(t.mantissa);e=zo(t.exponent,it)?n/s$(-Oe(t.exponent)|0):n*s$(Oe(t.exponent))}else{const n=Gn(t.exponent,o$),$=t.mantissa,o=Oe(n);d(ys,o);const s=$g($,ys[o]);let c;if(s===void 0||(c=s,ho(c,U_)))return ao;e=yo(c)*s$(Oe(o$))}return t.negative&&(e=-e),new R$(e)}else return ao}function cg(t){if((t.end-t.start|0)>0)if(D4(t)){const e=Z4(t);let n;if(e.$tag===1)n=e._0;else return e;if(n===void 0)return X4(t);{const s=_g(n);if(s.$tag===1){const _=s._0;return new ye(_)}else{const c=W4(t);let _;if(c.$tag===1)_=c._0;else return c;return og(_)}}}else return Io();else return Io()}function ig(t){return{val:t}}function rg(t){return{val:t}}function W$(t){return{val:t}}function Tn(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function ag(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function t_(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function lg(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,t_(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,t_(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Qc(t,e,n){t.size>=t.grow_at&&ug(t);let $,o=0,s=n&t.capacity_mask;for(;;){const l=o,u=s,p=t.entries;d(p,u);const m=p[u];if(m===void 0){$={_0:u,_1:l};break}else{const g=m;let f;if(g.hash===n){const k=g.key;f=k._0===e._0&&k._1===e._1}else f=!1;if(f)return;if(l>g.psl){lg(t,u,g),$={_0:u,_1:l};break}o=l+1|0,s=u+1&t.capacity_mask;continue}}const c=$._0,_=$._1,a={prev:t.tail,next:void 0,psl:_,hash:n,key:e};ag(t,c,a)}function ug(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.hash;Qc(t,r,a),o=i;continue}}}function Ut(t,e){Qc(t,e,Ne(e))}function Zc(t){const e=t.end-t.start|0;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=Tn(n),s=t.end-t.start|0;let c=0;for(;;){const _=c;if(_<s){const i=t.buf[t.start+_|0];Ut(o,i),c=_+1|0;continue}else break}return o}function Kt(t,e){const n=Ne(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return!1;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return!0;if(s>a.psl)return!1;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function yt(t){D1(t.entries,void 0,0),t.size=0,t.head=void 0,t.tail=-1}function Mt(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.next;return e.val=_,c}}}function ti(t,e,n){let $;return n===void 0?$=t.end-t.start|0:$=n,e>=0&&e<=$&&$<=(t.end-t.start|0)?{str:t.str,start:t.start+e|0,end:t.start+$|0}:N2()}function pg(t,e,n,$){let o=0,s=$;for(;(s-1|0)>=n&&o<e;){const c=s-1|0,_=t.charCodeAt(c);56320<=_&&_<=57343?s=s-2|0:s=s-1|0,o=o+1|0;continue}return o<e||s<n?void 0:s}function mg(t,e,n,$){if(n>=0&&n<=$){let o=n,s=0;for(;o<$&&s<e;){const c=o,_=t.charCodeAt(c);55296<=_&&_<=56319?o=o+2|0:o=o+1|0,s=s+1|0;continue}return s<e||o>=$?void 0:o}else return D2()}function h(t,e,n,$){let o;return $===void 0?o=t.length:o=$,e>=0?mg(t,e,n,o):pg(t,-e|0,n,o)}function Se(t,e,n,$){let o;$===void 0?o=t.length:o=$;let s=n,c=0;for(;;){const _=s,i=c;if(_<o&&i<e){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,l=t.charCodeAt(a);if(56320<=l&&l<=57343){s=_+2|0,c=i+1|0;continue}else ue()}s=_+1|0,c=i+1|0;continue}else return i===e&&_===o}}function $t(t,e,n,$){let o;$===void 0?o=t.length:o=$;let s=n,c=0;for(;;){const _=s,i=c;if(_<o&&i<e){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,l=t.charCodeAt(a);if(56320<=l&&l<=57343){s=_+2|0,c=i+1|0;continue}else ue()}s=_+1|0,c=i+1|0;continue}else return i>=e}}function io(t){return t.str.substring(t.start,t.end)}function ei(t,e){return(((Math.imul(t-55296|0,1024)|0)+e|0)-56320|0)+65536|0}function dg(t,e){const n=t.end-t.start|0;if(n===(e.end-e.start|0)){if(t.str===e.str&&t.start===e.start)return!0;let $=0;for(;;){const o=$;if(o<n){const s=t.str,c=t.start+o|0,_=s.charCodeAt(c),i=e.str,r=e.start+o|0;if(_!==i.charCodeAt(r))return!1;$=o+1|0;continue}else break}return!0}else return!1}function fg(t){const e=t.length,n={val:0};return()=>{if(n.val<e){const o=n.val,s=t.charCodeAt(o);if(55296<=s&&s<=56319&&(n.val+1|0)<e){const c=n.val+1|0,_=t.charCodeAt(c);if(56320<=_&&_<=57343){const i=ei(s,_);return n.val=n.val+2|0,i}}return n.val=n.val+1|0,s}else return-1}}function bg(t,e){const n=t.end-t.start|0,$=e.end-e.start|0;if($>0)if(n>=$){const o=tt(256,$),s=$-1|0;let c=0;for(;;){const i=c;if(i<s){const r=e.str,a=e.start+i|0,l=r.charCodeAt(a)&255;d(o,l),o[l]=($-1|0)-i|0,c=i+1|0;continue}else break}let _=0;for(;;){const i=_;if(i<=(n-$|0)){const r=$-1|0;let a=0;for(;;){const b=a;if(b<=r){const g=i+b|0,f=t.str,k=t.start+g|0,w=f.charCodeAt(k),I=e.str,y=e.start+b|0;if(w!==I.charCodeAt(y))break;a=b+1|0;continue}else return i}const l=(i+$|0)-1|0,u=t.str,p=t.start+l|0,m=u.charCodeAt(p)&255;d(o,m),_=i+o[m]|0;continue}else break}return}else return;else return Na}function gg(t,e){const n=t.end-t.start|0,$=e.end-e.start|0;if($>0)if(n>=$){const s=e.str,c=e.start+0|0,_=s.charCodeAt(c),i=n-$|0;let r=0;for(;r<=i;){for(;;){let a;if(r<=i){const l=r,u=t.str,p=t.start+l|0;a=u.charCodeAt(p)!==_}else a=!1;if(a){r=r+1|0;continue}else break}if(r<=i){let a=1;for(;;){const l=a;if(l<$){const u=r+l|0,p=t.str,m=t.start+u|0,b=p.charCodeAt(m),g=e.str,f=e.start+l|0;if(b!==g.charCodeAt(f))break;a=l+1|0;continue}else return r}r=r+1|0}continue}return}else return;else return Da}function hg(t,e){return(e.end-e.start|0)<=4?gg(t,e):bg(t,e)}function _$(t,e){return hg(t,e)!==void 0}function kg(t){return(t.end-t.start|0)===0}function Vo(t,e){if(e>=0&&e<(t.end-t.start|0)){const n=t.str,$=t.start+e|0,o=n.charCodeAt($);if(55296<=o&&o<=56319)if((e+1|0)<(t.end-t.start|0)){const s=e+1|0,c=t.str,_=t.start+s|0,i=c.charCodeAt(_);return 56320<=i&&i<=57343?ei(o,i):-1}else return-1;else return 56320<=o&&o<=57343?-1:o}else return-1}function ni(){return{now:0}}function De(t){return t.now=t.now+1|0,t.now}function oi(t){const e=R([]);return v(e,"cost",$b(t.cost)),new E(e)}function wg(t,e){switch(t){case 0:{e.method_0(e.self,"HeartCrystalDust");return}case 1:{e.method_0(e.self,"RecallGear");return}case 2:{e.method_0(e.self,"SpiritalSpark");return}case 3:{e.method_0(e.self,"RefinedCopper");return}default:{e.method_0(e.self,"ResonantCrystal");return}}}function $i(t,e){switch(t){case 0:return e===0;case 1:return e===1;case 2:return e===2;case 3:return e===3;default:return e===4}}function yg(t,e){switch(t){case 0:{Ke(e,0);return}case 1:{Ke(e,1);return}case 2:{Ke(e,2);return}case 3:{Ke(e,3);return}default:{Ke(e,4);return}}}function Wo(t){switch(t){case 0:{const e="HeartCrystalDust";return new z(e)}case 1:{const e="RecallGear";return new z(e)}case 2:{const e="SpiritalSpark";return new z(e)}case 3:{const e="RefinedCopper";return new z(e)}default:{const e="ResonantCrystal";return new z(e)}}}function lt(t){return{cost:t}}function Xo(t){const e=R([]);return v(e,"health",xt(t.health)),v(e,"speed",J(t.speed)),v(e,"attack",xt(t.attack)),v(e,"defense",xt(t.defense)),v(e,"dodge",xt(t.dodge)),new E(e)}function si(t,e){let n,$=to,o=to,s=to,c=to;if(t.$tag===6){const k=t._0,w=P(k,"health");if(w!==void 0){const C=w,O="health",x=$o(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;$=new mn(A)}const I=P(k,"speed");if(I!==void 0){const C=I,O="speed",x=he(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;n=A}const y=P(k,"attack");if(y!==void 0){const C=y,O="attack",x=$o(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;c=new mn(A)}const L=P(k,"defense");if(L!==void 0){const C=L,O="defense",x=$o(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;s=new mn(A)}const M=P(k,"dodge");if(M!==void 0){const C=M,O="dodge",x=$o(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;o=new mn(A)}}else return new Ge(new T({_0:e,_1:"Expected object to deserialize Attribute"}));const _=n;let i;if(_===void 0)return new Ge(new T({_0:e,_1:"Missing field speed"}));i=_;const r=$;let a;if(r.$tag===1)a=r._0;else return new Ge(new T({_0:e,_1:"Missing field health"}));const l=o;let u;if(l.$tag===1)u=l._0;else return new Ge(new T({_0:e,_1:"Missing field dodge"}));const p=s;let m;if(p.$tag===1)m=p._0;else return new Ge(new T({_0:e,_1:"Missing field defense"}));const b=c;let g;if(b.$tag===1)g=b._0;else return new Ge(new T({_0:e,_1:"Missing field attack"}));return new j_({health:a,speed:i,attack:g,defense:m,dodge:u})}function bt(t,e,n,$,o){return{health:t,speed:e,attack:n,defense:$,dodge:o}}function P$(t){const e=R([]);return v(e,"equipment_base",Mg(t.equipment_base)),v(e,"id",J(t.id)),new E(e)}function v$(t,e){let n,$;if(t.$tag===6){const r=t._0,a=P(r,"equipment_base");if(a!==void 0){const p=a,m="equipment_base",b=Sg(p,new X(e,m));let g;if(b.$tag===1)g=b._0;else return b;$=g}const l=P(r,"id");if(l!==void 0){const p=l,m="id",b=he(p,new X(e,m));let g;if(b.$tag===1)g=b._0;else return b;n=g}}else return new lo(new T({_0:e,_1:"Expected object to deserialize Equipment"}));const o=n;let s;if(o===void 0)return new lo(new T({_0:e,_1:"Missing field id"}));s=o;const c=$;let _;return c===void 0?new lo(new T({_0:e,_1:"Missing field equipment_base"})):(_=c,new O_({equipment_base:_,id:s}))}function Mg(t){const e=R([]),n=t.name;v(e,"name",new z(n));const $=t.description;v(e,"description",new z($));const o=t.resource_url;return v(e,"resource_url",new z(o)),v(e,"attribute",Xo(t.attribute)),new E(e)}function Sg(t,e){let n,$,o,s;if(t.$tag===6){const b=t._0,g=P(b,"name");if(g!==void 0){const y=g,L="name",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;$=G}const f=P(b,"description");if(f!==void 0){const y=f,L="description",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;o=G}const k=P(b,"resource_url");if(k!==void 0){const y=k,L="resource_url",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;n=G}const w=P(b,"attribute");if(w!==void 0){const y=w,L="attribute",M=si(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;s=G}}else return new Xe(new T({_0:e,_1:"Expected object to deserialize EquipmentBase"}));const c=n;let _;if(c===void 0)return new Xe(new T({_0:e,_1:"Missing field resource_url"}));_=c;const i=$;let r;if(i===void 0)return new Xe(new T({_0:e,_1:"Missing field name"}));r=i;const a=o;let l;if(a===void 0)return new Xe(new T({_0:e,_1:"Missing field description"}));l=a;const u=s;let p;return u===void 0?new Xe(new T({_0:e,_1:"Missing field attribute"})):(p=u,new A_({name:r,description:l,resource_url:_,attribute:p}))}function Cg(t){const e=R([]);v(e,"id",J(t.id));const n=t.type_msg;v(e,"type_msg",new z(n));const $=t.content;return v(e,"content",new z($)),new E(e)}function Ig(){return{history:[],callback:t=>{}}}function Lg(t,e){t.callback=e}function Y(t,e){const n={id:De(q2),type_msg:e.type_msg,content:e.content};cb(t.history,n);const $=t.callback;$(D(Cg(n)))}function Yo(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"level",J(t.level)),v(e,"suffix",J(t.suffix)),v(e,"live_left",J(t.live_left)),v(e,"attribute",Xo(t.attribute)),v(e,"copper_type",_i(t.copper_type)),v(e,"equipment_slot",vg(t.equipment_slot)),v(e,"copper_info",xg(t.copper_info)),new E(e)}function Pg(t,e){let n,$,o,s,c,_,i,r;if(t.$tag===6){const x=t._0,A=P(x,"id");if(A!==void 0){const V=A,at="id",W=he(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;s=et}const q=P(x,"level");if(q!==void 0){const V=q,at="level",W=he(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;o=et}const H=P(x,"suffix");if(H!==void 0){const V=H,at="suffix",W=he(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;n=et}const B=P(x,"live_left");if(B!==void 0){const V=B,at="live_left",W=he(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;$=et}const ct=P(x,"attribute");if(ct!==void 0){const V=ct,at="attribute",W=si(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;r=et}const K=P(x,"copper_type");if(K!==void 0){const V=K,at="copper_type",W=ci(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;_=et}const Z=P(x,"equipment_slot");if(Z!==void 0){const V=Z,at="equipment_slot",W=Gg(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;c=et}const F=P(x,"copper_info");if(F!==void 0){const V=F,at="copper_info",W=jg(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;i=et}}else return new Yt(new T({_0:e,_1:"Expected object to deserialize Copper"}));const a=n;let l;if(a===void 0)return new Yt(new T({_0:e,_1:"Missing field suffix"}));l=a;const u=$;let p;if(u===void 0)return new Yt(new T({_0:e,_1:"Missing field live_left"}));p=u;const m=o;let b;if(m===void 0)return new Yt(new T({_0:e,_1:"Missing field level"}));b=m;const g=s;let f;if(g===void 0)return new Yt(new T({_0:e,_1:"Missing field id"}));f=g;const k=c;let w;if(k===void 0)return new Yt(new T({_0:e,_1:"Missing field equipment_slot"}));w=k;const I=_;let y;if(I===void 0)return new Yt(new T({_0:e,_1:"Missing field copper_type"}));y=I;const L=i;let M;if(L===void 0)return new Yt(new T({_0:e,_1:"Missing field copper_info"}));M=L;const G=r;let C;return G===void 0?new Yt(new T({_0:e,_1:"Missing field attribute"})):(C=G,new E_({id:f,level:b,suffix:l,live_left:p,attribute:C,copper_type:y,equipment_slot:w,copper_info:M}))}function _i(t){switch(t){case 0:{const e="IronWall";return new z(e)}case 1:{const e="Arcanist";return new z(e)}case 2:{const e="CraftsMan";return new z(e)}case 3:{const e="Mechanic";return new z(e)}default:{const e="Resonator";return new z(e)}}}function ci(t,e){let n;switch(t.$tag){case 4:{n=t._0;break}case 5:{const o=t._0,s=Fb(o,0);if(s===void 0)return new dn(new T({_0:e,_1:"Missing tag in array[0] when derserializing CopperType"}));{const _=s;if(_.$tag===4)n=_._0;else return new dn(new T({_0:e,_1:"Expected string tag at array[0] when derserializing CopperType"}))}break}default:return new dn(new T({_0:e,_1:"Expected string or array for tag in enum when derserializing CopperType"}))}switch(n){case"IronWall":return new Ye(0);case"Arcanist":return new Ye(1);case"CraftsMan":return new Ye(2);case"Mechanic":return new Ye(3);case"Resonator":return new Ye(4);default:return new dn(new T({_0:e,_1:`Unknown enum constructor ${n} when deserializing CopperType`}))}}function vg(t){const e=R([]),n=t.slot1;n===void 0||v(e,"slot1",P$(n));const $=t.slot2;return $===void 0||v(e,"slot2",P$($)),v(e,"is_slot2_locked",Gt(t.is_slot2_locked)),new E(e)}function Gg(t,e){let n=bs,$=bs,o=-1;if(t.$tag===6){const u=t._0,p=P(u,"slot1");if(p!==void 0){const f=p,k="slot1",w=v$(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;$=new p$(I)}const m=P(u,"slot2");if(m!==void 0){const f=m,k="slot2",w=v$(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;n=new p$(I)}const b=P(u,"is_slot2_locked");if(b!==void 0){const f=b,k="is_slot2_locked",w=v4(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;o=I}}else return new m$(new T({_0:e,_1:"Expected object to deserialize EquipmentSlot"}));const s=n;let c;s.$tag===1?c=s._0:c=void 0;const _=$;let i;_.$tag===1?i=_._0:i=void 0;const r=o;let a;return r===-1?new m$(new T({_0:e,_1:"Missing field is_slot2_locked"})):(a=r,new R_({slot1:i,slot2:c,is_slot2_locked:a}))}function xg(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"copper_type",_i(t.copper_type));const $=t.description;v(e,"description",new z($));const o=t.icon_url;v(e,"icon_url",new z(o));const s=t.model_url;v(e,"model_url",new z(s));const c=t.skill;c===void 0||v(e,"skill",Og(c));const _=t.attack_range;return _===void 0||v(e,"attack_range",J(_)),new E(e)}function jg(t,e){let n=hr,$,o,s,c,_,i=J_;if(t.$tag===6){const G=t._0,C=P(G,"name");if(C!==void 0){const K=C,Z="name",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;$=N}const O=P(G,"copper_type");if(O!==void 0){const K=O,Z="copper_type",F=ci(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;_=N}const x=P(G,"description");if(x!==void 0){const K=x,Z="description",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;c=N}const A=P(G,"icon_url");if(A!==void 0){const K=A,Z="icon_url",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;s=N}const q=P(G,"model_url");if(q!==void 0){const K=q,Z="model_url",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;o=N}const H=P(G,"skill");if(H!==void 0){const K=H,Z="skill",F=Ag(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;n=new z_(N)}const B=P(G,"attack_range");if(B!==void 0){const K=B,Z="attack_range",F=he(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;i=new z$(N)}}else return new xe(new T({_0:e,_1:"Expected object to deserialize CopperInfo"}));const r=n;let a;r.$tag===1?a=r._0:a=void 0;const l=$;let u;if(l===void 0)return new xe(new T({_0:e,_1:"Missing field name"}));u=l;const p=o;let m;if(p===void 0)return new xe(new T({_0:e,_1:"Missing field model_url"}));m=p;const b=s;let g;if(b===void 0)return new xe(new T({_0:e,_1:"Missing field icon_url"}));g=b;const f=c;let k;if(f===void 0)return new xe(new T({_0:e,_1:"Missing field description"}));k=f;const w=_;let I;if(w===void 0)return new xe(new T({_0:e,_1:"Missing field copper_type"}));I=w;const y=i;let L;return y.$tag===1?L=y._0:L=void 0,new T_({name:u,copper_type:I,description:k,icon_url:g,model_url:m,skill:a,attack_range:L})}function Og(t){const e=R([]),n=t.name;v(e,"name",new z(n));const $=t.description;v(e,"description",new z($));const o=t.resource_url;v(e,"resource_url",new z(o));const s=t.cool_down;return s===void 0||v(e,"cool_down",J(s)),new E(e)}function Ag(t,e){let n,$,o,s=J_;if(t.$tag===6){const b=t._0,g=P(b,"name");if(g!==void 0){const y=g,L="name",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;$=G}const f=P(b,"description");if(f!==void 0){const y=f,L="description",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;o=G}const k=P(b,"resource_url");if(k!==void 0){const y=k,L="resource_url",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;n=G}const w=P(b,"cool_down");if(w!==void 0){const y=w,L="cool_down",M=he(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;s=new z$(G)}}else return new fn(new T({_0:e,_1:"Expected object to deserialize Skill"}));const c=n;let _;if(c===void 0)return new fn(new T({_0:e,_1:"Missing field resource_url"}));_=c;const i=$;let r;if(i===void 0)return new fn(new T({_0:e,_1:"Missing field name"}));r=i;const a=o;let l;if(a===void 0)return new fn(new T({_0:e,_1:"Missing field description"}));l=a;const u=s;let p;return u.$tag===1?p=u._0:p=void 0,new q_({name:r,description:l,resource_url:_,cool_down:p})}function mt(t,e,n){return Db(Math.fround(t*Math.fround(j4(n,(e-1|0)+0))))}function X$(t){switch(t){case 0:return bt(Math.fround(150),2,Math.fround(15),Math.fround(20),Math.fround(10));case 1:return bt(Math.fround(50),3,Math.fround(20),Math.fround(5),Math.fround(10));case 4:return bt(Math.fround(100),3,Math.fround(10),Math.fround(10),Math.fround(10));case 3:return bt(Math.fround(80),3,Math.fround(5),Math.fround(8),Math.fround(10));default:return bt(Math.fround(80),4,Math.fround(0),Math.fround(8),Math.fround(10))}}function e_(t){const e=t.level+1|0,n=X$(t.copper_type),$=t.attribute.speed;switch(t.copper_type){case 0:return bt(mt(n.health,e,Math.fround(1.35)),$,mt(n.attack,e,Math.fround(1.28)),mt(n.defense,e,Math.fround(1.37)),mt(n.dodge,e,Math.fround(1.19)));case 1:return bt(mt(n.health,e,Math.fround(1.22)),$,mt(n.attack,e,Math.fround(1.4)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));case 4:return bt(mt(n.health,e,Math.fround(1.38)),$,mt(n.attack,e,Math.fround(1.16)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));case 3:return bt(mt(n.health,e,Math.fround(1.3)),$,mt(n.attack,e,Math.fround(1.2)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));default:return bt(mt(n.health,e,Math.fround(1.3)),$,mt(n.attack,e,Math.fround(1.27)),mt(n.defense,e,Math.fround(1.16)),mt(n.dodge,e,Math.fround(1.19)))}}function Eg(t){return{slot1:t.slot1,slot2:t.slot2,is_slot2_locked:!1}}function Rg(t){return t.level===4?{...t,attribute:e_(t),level:t.level+1|0,equipment_slot:Eg(t.equipment_slot)}:{...t,attribute:e_(t),level:t.level+1|0}}function zg(t){let e;switch(t){case 1:{e=5;break}case 2:{e=10;break}case 3:{e=20;break}case 4:{e=30;break}default:Y(U,up),e=0}return lt([{_0:2,_1:e}])}function ii(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function c$(t){const e=E1(T2,t),n=De($n);return{id:n,level:1,suffix:n,live_left:5,attribute:X$(e.copper_type),copper_type:e.copper_type,equipment_slot:ii(),copper_info:e}}function ke(t,e){return t+J4(N_,(e-t|0)+1|0)|0}function jn(t){const e=T4(N_);return Tb(`12121:${String(e)}`),e<=t}function Jg(){return fc([pp,mp,dp,fp,bp])}function Tg(){return fc([gp,hp,kp,wp,yp])}function Et(t,e){const n=gc(t,e);return n===void 0?S():n}function ri(t,e,n){const $=gc(t,e);let o;if($===void 0?o=S():o=$,o<n){Y(U,Mp);return}else{T$(t,e,o-n|0);return}}function Y$(t,e){const n=e.cost,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c._0,i=c._1;if(Et(t,_)<i)return!1;o=s+1|0;continue}else break}return!0}function K$(t,e){const n=e.cost,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c._0,i=c._1;ri(t,_,i),o=s+1|0;continue}else return}}function je(t,e,n){T$(t,e,Et(t,e)+n|0)}function qg(){return{resources:Jg(),equipments:[]}}function Bg(t,e){return{resources:t,equipments:e}}function Q$(t,e){const n=e.length;let $=0;for(;;){const o=$;if(o<n){const s=e[o],c=s.item_type;if(c.$tag===0){const i=c._0;je(t.resources,i,s.count)}else{const i=c._0;ib(t.equipments,i)}$=o+1|0;continue}else return}}function Fg(t,e){return{item_type:t,count:e}}function Hg(){const t=c$("阿磐"),e=c$("咝咝"),n=c$("波波");return{coppers:uo(uo(uo(void 0,t.id,t),e.id,e),n.id,n)}}function Ng(){return{coppers:void 0}}function Z$(t,e){return{coppers:uo(t.coppers,e.id,e)}}function fo(t,e){const n=$4(t.coppers,e);return n===void 0?S():n}function ai(t){return gb(c4(t.coppers))}function Dg(t,e){return{coppers:s4(t.coppers,e)}}function Ug(){const t=De($n),e=ke(0,bn.length-1|0);d(bn,e);const n=bn[e],$=X$(n.copper_type);return{id:t,level:1,suffix:t,live_left:5,attribute:$,copper_type:n.copper_type,equipment_slot:ii(),copper_info:n}}function Vg(t){if(Et(t,2)>=10)return ri(t,2,10),Ug();Y(U,Sp)}function Wg(){const t=qg();return{warehouse:Hg(),bag:t}}function Xg(t,e){return{warehouse:t,bag:e}}function Yg(t){const e=t.bag.resources,n=R([{_0:"SpiritalSpark",_1:J(Et(e,2))},{_0:"RecallGear",_1:J(Et(e,1))},{_0:"ResonantCrystal",_1:J(Et(e,4))},{_0:"RefinedCopper",_1:J(Et(e,3))},{_0:"HeartCrystalDust",_1:J(Et(e,0))}]);return D(new E(n))}function Kg(t){const e=t.warehouse,n=R([{_0:"coppers",_1:Z1(ai(e))}]);return D(new E(n))}function Qg(t){const e=Vg(t.bag.resources);let n;if(e===void 0){const $="error",o={_0:"type",_1:new z($)},s="资源不足",c=R([o,{_0:"content",_1:new z(s)}]);n=new E(c)}else{const o=e;t.warehouse=Z$(t.warehouse,o);const s="success",c=R([{_0:"type",_1:new z(s)},{_0:"copper",_1:Yo(o)}]);n=new E(c)}return D(n)}function Zg(t,e){const n=t.warehouse,$=fo(n,e),o=zg($.level);let s;if(Y$(t.bag.resources,o)){const c=Rg($);K$(t.bag.resources,o),t.warehouse=Dg(t.warehouse,e),t.warehouse=Z$(t.warehouse,c);const _="success",i=R([{_0:"type",_1:new z(_)}]);s=new E(i)}else{const c="error",_={_0:"type",_1:new z(c)},i="资源不足",r=R([_,{_0:"content",_1:new z(i)}]);s=new E(r)}return D(s)}function li(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"original_id",J(t.original_id)),v(e,"copper",Yo(t.copper)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"can_summon",Gt(t.can_summon)),v(e,"can_build",Gt(t.can_build)),v(e,"position",Lt(t.position)),v(e,"now_health",xt(t.now_health)),v(e,"attribute",Xo(t.attribute)),new E(e)}function ui(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"owned",Gt(t.owned)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"position",Lt(t.position)),v(e,"now_health",xt(t.now_health)),v(e,"enemy_base",mi(t.enemy_base)),new E(e)}function th(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"resource_type",Wo(t.resource_type));const $=t.model_url;return v(e,"model_url",new z($)),new E(e)}function pi(t){const e=R([]);v(e,"id",J(t.id)),v(e,"owned",Gt(t.owned)),v(e,"position",Lt(t.position)),v(e,"can_attack",Gt(t.can_attack));const n=t.resource_type;return n===void 0||v(e,"resource_type",Wo(n)),v(e,"now_health",xt(t.now_health)),v(e,"structure_base",di(t.structure_base)),new E(e)}function mi(t){const e=R([]);v(e,"level",J(t.level)),v(e,"health",xt(t.health)),v(e,"attack",xt(t.attack)),v(e,"defense",xt(t.defense)),v(e,"dodge",xt(t.dodge)),v(e,"attack_range",J(t.attack_range)),v(e,"speed",J(t.speed));const n=t.name;v(e,"name",new z(n));const $=t.enemy_type;v(e,"enemy_type",new z($));const o=t.description;v(e,"description",new z(o));const s=t.asset_url;v(e,"asset_url",new z(s));const c=t.model_url;return v(e,"model_url",new z(c)),v(e,"drop_items",ob(t.drop_items)),v(e,"summon_cost",oi(t.summon_cost)),new E(e)}function eh(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"material_base",th(t.material_base)),new E(e)}function di(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"health",xt(t.health)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"attack_range",J(t.attack_range));const $=t.description;v(e,"description",new z($));const o=t.asset_url;v(e,"asset_url",new z(o));const s=t.model_url;return v(e,"model_url",new z(s)),v(e,"attribute",Xo(t.attribute)),v(e,"cost",oi(t.cost)),new E(e)}function nh(t,e){switch(t){case 0:{e.method_0(e.self,"PositiveX");return}case 1:{e.method_0(e.self,"NegativeX");return}case 2:{e.method_0(e.self,"PositiveY");return}default:{e.method_0(e.self,"NegativeY");return}}}function fi(t,e,n,$){const o=De($n),s=t.can_attack,c=t.health,_={id:o,owned:e,position:$,can_attack:s,resource_type:n,now_health:c,structure_base:t};return lc(le,_.id,_),_}function ts(t){const e=j1(le,t);return e===void 0?S():e}function es(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"clear_state",content:D(new E(e))})}function ns(t,e){const n={_0:"id",_1:J(t)},$=qo(e),o=R([n,{_0:"can_attack",_1:new z($)}]);Y(U,{type_msg:"display_can_attack",content:D(new E(o))})}function hn(t){if(es(t.id),t.structure_base.can_attack){ns(t.id,!0);return}else return}function _n(t){const e=[];let $=-t|0;for(;;){const o=$;if(o<=t){let c=-t|0;for(;;){const _=c;if(_<=t){const i=(o<0?-o|0:o)+(_<0?-_|0:_)|0;i<=t&&i!==0&&Le(e,{_0:o,_1:_}),c=_+1|0;continue}else break}$=o+1|0;continue}else break}return e}function bi(t,e){const n=e._0,$=e._1,o=t.index_position,s=o._0,c=o._1;return n>=s&&n<(s+9|0)&&$>=c&&$<(c+9|0)}function Ue(t,e){const n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s];if(bi(c,e))return c;o=s+1|0;continue}else break}}function re(t,e){const n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s];if(bi(c,e)){const _=e._0-c.index_position._0|0,i=e._1-c.index_position._1|0;return{_0:c,_1:{_0:_,_1:i}}}o=s+1|0;continue}else break}}function os(t,e){const n=Ue(t,e);if(n===void 0)return S();{const o=n,s=re(t,e);if(s===void 0)return S();{const i=s._1;return{_0:o,_1:i}}}}function Ve(t,e){const n=os(t,e),$=n._0,o=n._1;return st(_t($.blocks,o._0),o._1).occupant}function Re(t,e){const n=Ue(t,e);if(n!==void 0){const o=n,s=re(t,e);if(s===void 0)S();else{const i=s._1,r=st(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!1}function oh(t,e){const n=t.structure_base.attack_range,$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Re(e,r)){const a=Ve(e,r);if(t.owned)switch(a.$tag){case 1:{const u=a._0;t.structure_base.name==="维修工坊"&&Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!1&&Pt(o,new Te(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}}else switch(a.$tag){case 1:{const u=a._0;Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!0&&Pt(o,new Te(u));break}case 3:{const u=a._0;u.owned===!0&&Pt(o,new qe(u));break}}}c=_+1|0;continue}else break}return o}function Ko(t,e){return t.now_health=Math.fround(t.now_health-e),Math.fround(t.now_health<=Math.fround(0))}function $h(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"copper",_1:li(t)}]);Y(U,{type_msg:"set_copper",content:D(new E($))})}function gi(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"enemy",_1:ui(t)}]);Y(U,{type_msg:"set_enemy",content:D(new E($))})}function hi(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"structure",_1:pi(t)}]);Y(U,{type_msg:"set_structure",content:D(new E($))})}function sh(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"material",_1:eh(t)}]);Y(U,{type_msg:"set_material",content:D(new E($))})}function Vt(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"remove_unit",content:D(new E(e))})}function ze(t,e){const n={_0:"id",_1:J(t)},$=Sf(e),o=R([n,{_0:"direction",_1:new z($)}]);Y(U,{type_msg:"change_direction",content:D(new E(o))})}function Lo(t,e){const n=R([{_0:"id",_1:J(t)},{_0:"to",_1:Lt(e)}]);Y(U,{type_msg:"move_to",content:D(new E(n))})}function ki(t,e){const n={_0:"id",_1:J(t)},$=qo(e),o=R([n,{_0:"can_move",_1:new z($)}]);Y(U,{type_msg:"display_can_move",content:D(new E(o))})}function _h(t,e){const n={_0:"id",_1:J(t)},$=qo(e),o=R([n,{_0:"can_summon",_1:new z($)}]);Y(U,{type_msg:"display_can_summon",content:D(new E(o))})}function ch(t,e){const n={_0:"id",_1:J(t)},$=qo(e),o=R([n,{_0:"can_build",_1:new z($)}]);Y(U,{type_msg:"display_can_build",content:D(new E(o))})}function Fe(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"animate_move",content:D(new E(e))})}function ih(){const t=R([]);Y(U,{type_msg:"animate_reset",content:D(new E(t))})}function rh(t,e){const n=R([{_0:"room_position",_1:Lt(t)},{_0:"size",_1:J(e)}]);Y(U,{type_msg:"put_room_blocks",content:D(new E(n))})}function Po(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_move_block",content:D(new E(e))})}function fe(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_attack_block",content:D(new E(e))})}function vo(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_can_summon_blocks",content:D(new E(e))})}function St(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"clear_block",content:D(new E(e))})}function $s(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"attack_complete",content:D(new E(e))})}function Jt(t,e,n){const $=R([{_0:"id",_1:J(t)},{_0:"now_health",_1:xt(e)},{_0:"max_health",_1:xt(n)}]);Y(U,{type_msg:"update_health",content:D(new E($))})}function wi(){const t=R([]);Y(U,{type_msg:"game_over",content:D(new E(t))})}function yi(){const t=R([]);Y(U,{type_msg:"success",content:D(new E(t))})}function Mi(t){const e=[],n=bo.length;let $=0;for(;;){const s=$;if(s<n){const c=bo[s];c.level<=t&&pb(e,c),$=s+1|0;continue}else break}const o=e;return sf(o,ke(0,o.length-1|0))}function i$(t){let e=ke(0,8),n=ke(0,8);for(;Kt(t,{_0:e,_1:n});){e=ke(0,8),n=ke(0,8);continue}return{_0:e,_1:n}}function kn(t,e,n){const $=!n,o=!n,s=De($n),c=t.health,_={id:s,owned:n,can_move:$,can_attack:o,position:e,now_health:c,enemy_base:t};return ac(Tt,_.id,_),_}function ah(){return{occupant:yn}}function n_(t){return{id:De($n),material_base:t}}function Si(t,e,n){let $=t;const o=[];let s=0;for(;;){const c=s;if(c<9){const _=[];let i=0;for(;;){const r=i;if(r<9){ab(_,ah()),i=r+1|0;continue}else break}lb(o,_),s=c+1|0;continue}else break}if($===6&&Cn.val===!1)st(_t(o,3),4).occupant=new Me(kn(Os(b$,"（BOSS）废械吞噬者·饕餮"),{_0:e._0+3|0,_1:e._1+4|0},!1)),st(_t(o,5),4).occupant=new Me(kn(Os(b$,"（BOSS）织网夫人·夏特拉"),{_0:e._0+5|0,_1:e._1+4|0},!1)),Cn.val=!0;else{$===6&&($=5),st(_t(o,4),4).occupant=new J$(fi(A1(V_,"充能线圈"),!1,void 0,a0));const c=ie(Wp,$);let _=0;for(;;){const i=_;if(i<c){const r=Mi($),a=i$(n);Ut(n,a);const l={_0:e._0+a._0|0,_1:e._1+a._1|0};st(_t(o,a._0),a._1).occupant=new Me(kn(r,l,!1)),_=i+1|0;continue}else break}if(jn(.4)){const i=i$(n);Ut(n,i),st(_t(o,i._0),i._1).occupant=new d$(n_(i0))}if(jn(.4)){const i=i$(n);Ut(n,i),st(_t(o,i._0),i._1).occupant=new d$(n_(r0))}}return{level:$,index_position:e,blocks:o}}function lh(t){const e=t.blocks,n=e.length;let $=0;for(;;){const o=$;if(o<n){const s=e[o],c=s.length;let _=0;for(;;){const i=_;if(i<c){if(s[i].occupant.$tag===4)return!1;_=i+1|0;continue}else break}$=o+1|0;continue}else break}return!0}function uh(t){const e=[];let n=0;for(;;){const $=n;if($<9){let o=0;for(;;){const s=o;if(s<9){st(_t(t.blocks,$),s).occupant.$tag===4&&Le(e,{_0:$,_1:s}),o=s+1|0;continue}else break}n=$+1|0;continue}else break}return e}function ph(t,e){const n=e._0,$=e._1,o=t.index_position,s=o._0,c=o._1,_=n-s|0,i=$-c|0;return _<0?i<0?{_0:5,_1:{_0:s-9|0,_1:c}}:i>=9?{_0:4,_1:{_0:s-9|0,_1:c+9|0}}:{_0:0,_1:{_0:s-9|0,_1:c}}:_>=9?i<0?{_0:7,_1:{_0:s+9|0,_1:c}}:i>=9?{_0:6,_1:{_0:s+9|0,_1:c+9|0}}:{_0:1,_1:{_0:s+9|0,_1:c}}:i<0?{_0:3,_1:{_0:s,_1:c-9|0}}:{_0:2,_1:{_0:s,_1:c+9|0}}}function mh(t){const e=P1([]),n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c.index_position,i=_._0,r=_._1;let a=0;for(;;){const l=a;if(l<9){let u=0;for(;;){const p=u;if(p<9){const m={_0:i+l|0,_1:r+p|0};dc(e,m,st(_t(c.blocks,l),p)),u=p+1|0;continue}else break}a=l+1|0;continue}else break}o=s+1|0;continue}else break}return e}function dh(t){const e=mh(t),n=bc([]),$={map:n},o=U1(e);for(;;){const s=K1(o);if(s===void 0)break;{const _=s,i=_._0;_._1.occupant.$tag===4?ko(n,i,!0):ko(n,i,!1);continue}}return $}function fh(t,e){const n=hc(t.map,e);return n===-1?!1:n}function bh(t,e,n){const $=_n(e),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:n._0+i._0|0,_1:n._1+i._1|0};fh(t,r)&&Le(o,r),c=_+1|0;continue}else break}return o}function ro(t,e){const n=t._0>e._0?t._0-e._0|0:e._0-t._0|0,$=t._1>e._1?t._1-e._1|0:e._1-t._1|0;return n+$|0}function gh(t,e,n,$,o){if(e._0===n._0&&e._1===n._1)return e;const s=[{position:e,g_cost:0,h_cost:ro(e,n),f_cost:ro(e,n)}],c=bc([]),_=I1([]);for(;s.length>0;){let i=0,r=pe(s,0);const a=s.length;let l=1;for(;;){const k=l;if(k<a){pe(s,k).f_cost<r.f_cost&&(r=pe(s,k),i=k),l=k+1|0;continue}else break}Bb(s,i),ko(c,r.position,!0);const u=ro(r.position,n);let p;const m=r.position;if(m._0===n._0&&m._1===n._1?p=!0:p=u<=o,p){let k=r.position,w=r.position;for(;;){const I=O1(_,k);if(I===void 0)break;{const L=I;w=k,k=L;const M=k;if(M._0===e._0&&M._1===e._1)break;continue}}return w}const b=bh(t,$,r.position),g=b.length;let f=0;for(;;){const k=f;if(k<g){t:{const w=b[k];if(hc(c,w)!==-1)break t;const y=r.g_cost+1|0;let L=!1,M=0;const G=s.length;let C=0;for(;;){const O=C;if(O<G){const x=pe(s,O).position;if(x._0===w._0&&x._1===w._1){L=!0,M=O;break}C=O+1|0;continue}else break}if(L)y<pe(s,M).g_cost&&(pe(s,M).g_cost=y,pe(s,M).f_cost=y+pe(s,M).h_cost|0,S$(_,w,r.position));else{const O=ro(w,n),x=y+O|0;mb(s,{position:w,g_cost:y,h_cost:O,f_cost:x}),S$(_,w,r.position)}break t}f=k+1|0;continue}else break}continue}}function hh(t,e){Sc(t.rooms,e)}function kh(t){const e=Si(1,l0,t),n={rooms:[]};return hh(n,e),n}function wh(t,e){const n=Ue(t,e);if(n===void 0)return S();{const o=n,s=re(t,e);if(s===void 0)return S();{const i=s._1;return st(_t(o.blocks,i._0),i._1)}}}function ss(t,e){const n=Ue(t,e);if(n!==void 0){const o=n,s=re(t,e);if(s===void 0)S();else{const i=s._1,r=st(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!0}function r$(t,e){if(Ue(t,e)!==void 0)return 0;let $=999999;const o=t.rooms,s=o.length;let c=0;for(;;){const _=c;if(_<s){const r=o[_].index_position,a=r._0,l=r._1,u=e._0,p=e._1,m=u<a?a-u|0:u>=(a+9|0)?(u-(a+9|0)|0)+1|0:0,b=p<l?l-p|0:p>=(l+9|0)?(p-(l+9|0)|0)+1|0:0,g=m>b?m:b;g<$&&($=g),c=_+1|0;continue}else break}return $}function Ft(t,e){const n=os(t,e),$=n._0,o=n._1;st(_t($.blocks,o._0),o._1).occupant=yn}function _s(t,e,n){const $=os(t,e),o=$._0,s=$._1;st(_t(o.blocks,s._0),s._1).occupant=n}function cs(t){const e=t.index_position,n=e._0,$=e._1;rh(t.index_position,9);let o=0;for(;;){const s=o;if(s<9){let c=0;for(;;){const _=c;if(_<9){const i={_0:n+s|0,_1:$+_|0},r=st(_t(t.blocks,s),_).occupant;switch(r.$tag){case 4:break;case 0:{const l=r._0;gi(l,l.id,i),Jt(l.id,l.now_health,l.enemy_base.health);break}case 1:{const l=r._0;$h(l,l.id,i),Jt(l.id,l.now_health,l.copper.attribute.health);break}case 3:{const l=r._0;hi(l,l.id,i);break}default:{const l=r._0;sh(l,l.id,i)}}c=_+1|0;continue}else break}o=s+1|0;continue}else return}}function yh(t,e){Sc(t.rooms,e),cs(e)}function Mh(t){return((t/4|0)+1|0)>=6?6:(t/4|0)+1|0}function Sh(){return{map:kh(Zc({buf:d0,start:0,end:3}))}}function Nt(t,e){if(e===0&&(Kt(At,t)?Po(t):Kt(gn,t)?fe(t):Kt(ne,t)&&vo(t)),e===1&&(Kt(ft,t)||Kt(gn,t)?fe(t):Kt(ne,t)&&vo(t)),e===2)if(Kt(ft,t)){fe(t);return}else if(Kt(gn,t)){fe(t);return}else if(Kt(At,t)){Po(t);return}else return;else return}function Ch(t){const e=ts(t),n=R([{_0:"structure",_1:pi(e)}]);Y(U,{type_msg:"handle_on_click_structure",content:D(new E(n))})}function se(){const t=Mt(ft);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}yt(ft)}function _e(){const t=Mt(At);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,1);continue}}yt(At)}function ce(){const t=Mt(ne);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,2);continue}}yt(ne)}function Qo(t){switch(t.$tag){case 0:return t._0.position;case 1:return t._0.position;default:return t._0.position}}function Ih(t,e){_e(),se(),ce();const n=ts(e),$=oh(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i=Qo(_);fe(i),Ut(ft,i),s=c+1|0;continue}else return}}function Lh(){const t=Mt(ft);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}yt(ft)}function Ci(t,e){if(jn(t.attribute.dodge/100))return!1;const n=t.attribute.defense,$=Math.fround(e/Math.fround(e+Math.fround(Math.fround(1)*n))),o=Math.fround(e*$);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function Ii(t,e){if(t.now_health=Math.fround(t.now_health+e),Math.fround(t.now_health>t.attribute.health)){t.now_health=t.attribute.health;return}else return}function Zo(t,e){if(jn(t.enemy_base.dodge/100))return!1;const n=t.enemy_base.defense,$=Math.fround(e/Math.fround(e+Math.fround(Math.fround(1)*n))),o=Math.fround(e*$);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function is(t){const e=[],n=t.enemy_base.drop_items,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=ke(c._1._0,c._1._1);rb(e,Fg(new B_(c._0),_)),o=s+1|0;continue}else break}return e}function Ph(t,e,n){Fe(t);const $=ts(t),o=Ve(n,e);switch(o.$tag){case 0:{const i=o._0;Zo(i,$.structure_base.attribute.attack)?(Q$(pt.val.bag,is(i)),Bo(Tt,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.enemy_base.health),$.can_attack=!1,hn($);break}case 1:{const i=o._0;$.owned?Ii(i,$.structure_base.attribute.attack):(Ci(i,$.structure_base.attribute.attack)&&(kc(Ie,i.id),Vt(i.id),Ft(n,i.position)),Ie.size===0&&wi()),Jt(i.id,i.now_health,i.copper.attribute.health),$.can_attack=!1,hn($);break}case 3:{const i=o._0;Ko(i,$.structure_base.attribute.attack)?(Fo(le,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.structure_base.health),$.can_attack=!1,hn($);break}case 4:break;default:ue()}const s=Mt(ft);for(;;){const _=wt(s);if(_===void 0)break;{const r=_;St(r),Nt(r,0);continue}}yt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){$s(t);return}}function a$(t,e,n){const $=t.copper_type;let o;switch($){case 2:{o=!1;break}case 4:{o=!1;break}default:o=!0}const s=De($n),c=t.copper_type;let _;c===4?_=!0:_=!1;const i=t.copper_type;let r;i===2?r=!0:r=!1;const a=t.attribute.health,l=t.attribute,u={id:s,original_id:e,copper:t,can_move:!0,can_attack:o,can_summon:_,can_build:r,position:n,now_health:a,attribute:l};return w1(Ie,u.id,u),u}function ee(t){es(t.id),ki(t.id,t.can_move),ns(t.id,t.can_attack),_h(t.id,t.can_summon),ch(t.id,t.can_build)}function vh(t){const e=pt.val.warehouse,n=a$(fo(e,ie(t,0)),ie(t,0),f0),$=a$(fo(e,ie(t,1)),ie(t,1),b0),o=a$(fo(e,ie(t,2)),ie(t,2),g0);ut.val=Sh();const s=ut.val;let c;s===void 0?c=S():c=s;const _=c.map,i=nf(_.rooms,0);st(_t(i.blocks,0),3).occupant=new tn(n),st(_t(i.blocks,0),4).occupant=new tn($),st(_t(i.blocks,0),5).occupant=new tn(o),cs(i),ze(n.id,2),ze($.id,2),ze(o.id,2),ee(n),ee($),ee(o)}function Go(t){t:switch(t){case 0:return 1;case 1:return 0;case 2:return 2;case 3:return 3;case 4:break t;case 5:break t;case 6:break t;default:break t}return H2()}function xo(t,e){const n=e._0-t._0|0,$=e._1-t._1|0;return n!==0?n>0?2:3:$>0?0:1}function Gh(){return hb(yc(Ie))}function xh(t){const e=[],n=t.position,$=n._0,o=n._1,s=Gh(),c=s.length;let _=0;for(;;){const m=_;if(m<c){const b=s[m];$$(e,{_0:b.position,_1:new nn(b)}),_=m+1|0;continue}else break}q$(Tt)(m=>(m.id!==t.id&&m.owned&&$$(e,{_0:m.position,_1:new Te(m)}),1)),B$(le)(m=>(m.owned===!0&&$$(e,{_0:m.position,_1:new qe(m)}),1));let a=1e9,l;const u=e.length;let p=0;for(;;){const m=p;if(m<u){const b=e[m],g=b._0,f=g._0,k=g._1,w=b._1,I=f-$|0,y=I<0?-I|0:I,L=k-o|0,M=y+(L<0?-L|0:L)|0;M<a&&(a=M,l=w),p=m+1|0;continue}else break}return l}function rs(t,e){const n=t.enemy_base.attack_range,$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Re(e,r)){const a=Ve(e,r);if(t.owned)switch(a.$tag){case 0:{const u=a._0;u.owned===!1&&Pt(o,new Te(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}}else switch(a.$tag){case 1:{const u=a._0;Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!0&&Pt(o,new Te(u));break}case 3:{const u=a._0;u.owned===!0&&Pt(o,new qe(u));break}}}c=_+1|0;continue}else break}return o}function jh(t,e){const n=rs(e,t);if(n.length>0){const $=_f(n,0);switch(Fe(e.id),$.$tag){case 0:{const s=$._0;Zo(s,e.enemy_base.attack)?(Bo(Tt,s.id),Vt(s.id),Ft(t,s.position)):Jt(s.id,s.now_health,s.enemy_base.health);break}case 1:{const s=$._0;if(Ci(s,e.enemy_base.attack)){const _=s.copper;_.live_left=_.live_left-1|0,kc(Ie,s.id),Vt(s.id),Ft(t,s.position),Ie.size===0&&wi()}else Jt(s.id,s.now_health,s.copper.attribute.health);break}default:{const s=$._0;Ko(s,e.enemy_base.attack)?(Fo(le,s.id),Vt(s.id),Ft(t,s.position)):Jt(s.id,s.now_health,s.structure_base.health)}}}else{const $=xh(e);if($!==void 0){const c=Qo($),_=dh(t),i=gh(_,e.position,c,e.enemy_base.speed,e.enemy_base.attack_range);if(i!==void 0){const a=i;Fe(e.id);const l=e.position;Ft(t,e.position),e.position=a,_s(t,e.position,new Me(e)),ze(e.id,Go(xo(l,a))),Lo(e.id,a)}}}return 1}function Oh(){const t=ut.val;let e;t===void 0?e=S():e=t;const n=e.map;q$(Tt)(o=>o.owned===!1?jh(n,o):1)}function Ah(){const t=Mt(ft);for(;;){const o=wt(t);if(o===void 0)break;St(o)}yt(ft);const e=Mt(At);for(;;){const o=wt(e);if(o===void 0)break;St(o)}yt(At);const n=Mt(gn);for(;;){const o=wt(n);if(o===void 0)break;St(o)}yt(gn);const $=Mt(ne);for(;;){const o=wt($);if(o===void 0)break;St(o)}yt(ne)}function On(t){if(es(t.id),t.can_move&&ki(t.id,!0),t.can_attack){ns(t.id,!0);return}else return}function Eh(){yc(Ie)($=>{$.can_move=!0;const o=$.copper.copper_type;let s;switch(o){case 2:{s=!1;break}case 4:{s=!1;break}default:s=!0}$.can_attack=s;const c=$.copper.copper_type;let _;c===4?_=!0:_=!1,$.can_summon=_;const i=$.copper.copper_type;let r;return i===2?r=!0:r=!1,$.can_build=r,ee($),1}),q$(Tt)($=>($.owned&&($.can_move=!0,$.can_attack=!0,On($)),1)),B$(le)($=>($.owned&&($.structure_base.can_attack&&($.can_attack=!0),hn($)),1))}function Rh(){B$(le)(e=>{if(e.structure_base.name==="心源矿钻"){const n=e.resource_type;if(n!==void 0){const o=n;je(pt.val.bag.resources,o,2);const s={_0:"position",_1:Lt(e.position)},c=Cf(o),_={_0:"resource_type",_1:new z(c)},i=2,r=void 0,a=R([s,_,{_0:"amount",_1:new An(i,r)}]);Y(U,{type_msg:"drill_resource_generate",content:D(new E(a))})}}return 1})}function zh(){if(jn(.2)){const t=ut.val;let e;t===void 0?e=S():e=t;const $=e.map.rooms,o=$.length;let s=0;for(;;){const c=s;if(c<o){t:{const _=$[c];if(lh(_))break t;const i=st(_t(_.blocks,4),4).occupant;if(i.$tag===3&&i._0.structure_base.name==="充能线圈"){const l=_.level,u=Mi(l),p=uh(_),m=of(p,ke(0,p.length-1|0)),b=kn(u,m,!1);st(_t(_.blocks,m._0),m._1).occupant=new Me(b)}break t}s=c+1|0;continue}else return}}else return}function Jh(){Ah(),Eh(),Oh(),ih(),zh(),Rh()}function Th(){ut.val=void 0,Cn.val=!1,In.val=!1,Ln.val=!1}function qh(t){_e(),se(),ce();const e=Jn(Tt,t);let n;e===void 0?n=S():n=e;const $=ut.val;let o;$===void 0?o=S():o=$;const s=o.map,_=rs(n,s).length!==0,i=R([{_0:"enemy",_1:ui(n)},{_0:"has_attack_targets",_1:Gt(_)}]);Y(U,{type_msg:"handle_on_click_enemy",content:D(new E(i))})}function Bh(t,e){_e(),se(),ce();const n=Jn(Tt,e);let $;n===void 0?$=S():$=n;const o=rs($,t),s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_],r=Qo(i);fe(r),Ut(ft,r),c=_+1|0;continue}else return}}function Fh(){const t=Mt(ft);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}yt(ft)}function Hh(t,e,n){Fe(t);const $=Jn(Tt,t);let o;$===void 0?o=S():o=$;const s=Ve(n,e);switch(s.$tag){case 0:{const r=s._0;Zo(r,o.enemy_base.attack)?(Q$(pt.val.bag,is(r)),Bo(Tt,r.id),Vt(r.id),Ft(n,r.position),Cn.val===!0&&(r.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?In.val=!0:r.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ln.val=!0),In.val===!0&&Ln.val===!0&&yi())):Jt(r.id,r.now_health,r.enemy_base.health),o.can_attack=!1,On(o);break}case 3:{const r=s._0;Ko(r,o.enemy_base.attack)?(Fo(le,r.id),Vt(r.id),Ft(n,r.position)):Jt(r.id,r.now_health,r.structure_base.health),o.can_attack=!1,On(o);break}case 4:break;default:ue()}const c=Mt(ft);for(;;){const i=wt(c);if(i===void 0)break;{const a=i;St(a),Nt(a,0);continue}}yt(ft);let _;if(s.$tag===4?_=!0:_=!1,!_){$s(t);return}}function Nh(t,e){const n=_n(t.enemy_base.speed),$=[],o=n.length;let s=0;for(;;){const c=s;if(c<o){const _=n[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};ss(e,i)||Le($,i),s=c+1|0;continue}else break}return $}function Dh(t,e){_e(),se(),ce();const n=Jn(Tt,e);let $;n===void 0?$=S():$=n;const o=Nh($,t),s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_];Po(i),Ut(At,i),c=_+1|0;continue}else return}}function Uh(){const t=Mt(At);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,1);continue}}yt(At)}function Vh(t,e,n){Fe(t);const $=Jn(Tt,t);let o;if($===void 0?o=S():o=$,Ue(n,e)===void 0)ue();else{const _=o.position,i=re(n,_);let r;i===void 0?r=S():r=i;const a=r._0,l=r._1,u=re(n,e);let p;u===void 0?p=S():p=u;const m=p._0,b=p._1;st(_t(a.blocks,l._0),l._1).occupant=yn,st(_t(m.blocks,b._0),b._1).occupant=new Me(o),o.position=e,ze(t,Go(xo(_,e))),Lo(t,e)}o.can_move=!1,On(o);const c=Mt(At);for(;;){const _=wt(c);if(_===void 0)break;{const r=_;St(r),Nt(r,1);continue}}yt(At)}function oe(t){const e=x1(Ie,t);return e===void 0?S():e}function Wh(t){const e=t.copper.copper_info.attack_range;if(e===void 0)switch(t.copper.copper_type){case 0:return 1;case 1:return 3;case 3:return 1;case 4:return 0;default:return 0}else return e}function Li(t,e){const n=Wh(t),$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Re(e,r)){const a=Ve(e,r);switch(a.$tag){case 1:{const u=a._0;u.copper.copper_type===3&&Pt(o,new nn(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}case 0:{const u=a._0;u.owned===!1&&Pt(o,new Te(u));break}}}c=_+1|0;continue}else break}return o}function Xh(t){_e(),se(),ce();const e=oe(t),n=ut.val;let $;n===void 0?$=S():$=n;const o=$.map,c=Li(e,o).length!==0,_=R([{_0:"copper",_1:li(oe(t))},{_0:"has_attack_targets",_1:Gt(c)}]);Y(U,{type_msg:"handle_on_click_copper",content:D(new E(_))}),ee(e)}function Yh(t,e){_e(),se(),ce();const n=oe(e),$=Li(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i=Qo(_);fe(i),Ut(ft,i),s=c+1|0;continue}else return}}function Kh(t,e,n){Fe(t);const $=oe(t),o=Ve(n,e);switch(o.$tag){case 0:{const i=o._0;Zo(i,$.attribute.attack)?(Q$(pt.val.bag,is(i)),Bo(Tt,i.id),Vt(i.id),Ft(n,i.position),Cn.val===!0&&(i.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?In.val=!0:i.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ln.val=!0),In.val===!0&&Ln.val===!0&&yi())):Jt(i.id,i.now_health,i.enemy_base.health),$.can_attack=!1,ee($);break}case 1:{const i=o._0;Ii(i,$.attribute.attack),Jt(i.id,i.now_health,i.copper.attribute.health),$.can_attack=!1,ee($);break}case 3:{const i=o._0;Ko(i,$.attribute.attack)?(Fo(le,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.structure_base.health),$.can_attack=!1,ee($);break}case 4:break;default:ue()}const s=Mt(ft);for(;;){const _=wt(s);if(_===void 0)break;{const r=_;St(r),Nt(r,0);continue}}yt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){$s(t);return}}function Qh(t,e){const n=_n(t.attribute.speed),$=[],o=n.length;let s=0;for(;;){const c=s;if(c<o){t:{const _=n[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};if(r$(e,i)>1||Re(e,i))break t;const a=_._0,l=_._1;if(a!==0&&l!==0){const u={_0:t.position._0+a|0,_1:t.position._1},p={_0:t.position._0,_1:t.position._1+l|0},m=r$(e,u),b=r$(e,p),g=m<=1&&!Re(e,u),f=b<=1&&!Re(e,p);if(!g&&!f)break t}Le($,i);break t}s=c+1|0;continue}else break}return $}function Zh(t,e){_e(),se(),ce();const n=oe(e),$=Qh(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c];Po(_),Ut(At,_),s=c+1|0;continue}else return}}function t5(t,e,n){Fe(t);const $=oe(t);if(Ue(n,e)===void 0){const c=$.position,_=re(n,c);let i;_===void 0?i=S():i=_;const r=i._0,a=i._1,u=ph(r,e)._1,p=e._0-u._0|0,m=e._1-u._1|0,b=Mh(n.rooms.length+1|0),f=Si(b,u,Zc({buf:[{_0:p,_1:m}],start:0,end:1}));yh(n,f),st(_t(r.blocks,a._0),a._1).occupant=yn,st(_t(f.blocks,p),m).occupant=new tn($),cs(f),ze(t,Go(xo(c,e))),$.position=e,Lo(t,e)}else{const c=$.position,_=re(n,c);let i;_===void 0?i=S():i=_;const r=i._0,a=i._1,l=re(n,e);let u;l===void 0?u=S():u=l;const p=u._0,m=u._1;st(_t(r.blocks,a._0),a._1).occupant=yn,st(_t(p.blocks,m._0),m._1).occupant=new tn($),$.position=e,ze(t,Go(xo(c,e))),Lo(t,e)}$.can_move=!1,ee($);const s=Mt(At);for(;;){const c=wt(s);if(c===void 0)break;{const i=c;St(i),Nt(i,1);continue}}yt(At)}function e5(t,e){const n=[],$=[h0,k0,w0,y0],o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};ss(e,i)||Le(n,i),s=c+1|0;continue}else break}return n}function n5(t){_e(),se(),ce();const e=oe(t),n=ut.val;let $;n===void 0?$=S():$=n;const o=$.map,s=e5(e,o),c=s.length;let _=0;for(;;){const i=_;if(i<c){const r=s[i];vo(r),Ut(ne,r),_=i+1|0;continue}else return}}function o5(t,e,n,$){const o=v1(b$,$);let s;o===void 0?s=S():s=o;const c=s.summon_cost,_=oe(t);if(Y$(pt.val.bag.resources,c)){K$(pt.val.bag.resources,c);const i=kn(s,e,!0);_s(n,e,new Me(i)),gi(i,i.id,e),On(i),_.can_summon=!1,ee(_);return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r))});return}}function $5(){const t=R([{_0:"contents",_1:nb(bo)}]);Y(U,{type_msg:"get_summon_menu",content:D(new E(t))})}function s5(){const t=R([{_0:"contents",_1:sb(f$)}]);Y(U,{type_msg:"get_structure_menu",content:D(new E(t))})}function _5(t,e,n){const $=[],o=[M0,S0,C0,I0],s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};n?Re(e,r)&&wh(e,r).occupant.$tag===2&&Le($,r):ss(e,r)||Le($,r),c=_+1|0;continue}else break}return $}function c5(t,e){_e(),se(),ce();const n=oe(t),$=ut.val;let o;$===void 0?o=S():o=$;const s=o.map,c=_5(n,s,e==="心源矿钻"),_=c.length;let i=0;for(;;){const r=i;if(r<_){const a=c[r];vo(a),Ut(ne,a),i=r+1|0;continue}else return}}function G$(){const t=Mt(ne);for(;;){const e=wt(t);if(e===void 0)break;{const $=e;St($),Nt($,2);continue}}yt(ne)}function i5(t,e,n,$){const o=G1(V_,$);let s;o===void 0?s=S():s=o;const c=s.cost,_=oe(t);if(Y$(pt.val.bag.resources,c)){K$(pt.val.bag.resources,c);let i;if($==="心源矿钻"){const a=Ve(n,e);if(a.$tag===2){const u=a._0;Ft(n,e),Vt(u.id),i=u.material_base.resource_type}else i=S()}else i=void 0;const r=fi(s,!0,i,e);_s(n,e,new J$(r)),hi(r,r.id,e),_.can_build=!1,hn(r),G$();return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r))}),G$();return}}function Q(t){t:{const e=po(t);let n;e===void 0?n=S():n=e;const $=N4({str:n,start:0,end:n.length});if($.$tag===1)return $._0;$._0;break t}return S()}function r5(t){let e;t:{e:{const n=Uc({str:t,start:0,end:t.length},1024);if(n.$tag===1)e=n._0;else{n._0;break e}break t}e=S()}t:if(e.$tag===6){const $=e._0,o=P($,"type");if(o===void 0)break t;{const c=o;if(c.$tag===4)switch(c._0){case"on_click_copper":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;Xh(Q(m));return}else break t}}case"on_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Yh(k.map,Q(g));return}}else break t}}case"on_attack_end":{se();return}case"on_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Kh(A,q,B.map);return}}}else break t}}}else break t}}case"on_move_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Zh(k.map,Q(g));return}}else break t}}case"on_move_end":{_e();return}case"on_move_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,t5(A,q,B.map);return}}}else break t}}}else break t}}case"on_game_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"ids");if(m===void 0)break t;{const f=K_(Vc(m)),k=new Array(f.length),w=f.length;let I=0;for(;;){const y=I;if(y<w){const L=f[y];k[y]=Q(L),I=y+1|0;continue}else break}vh(k);return}}else break t}}case"on_game_round_pass":{Jh();return}case"on_click_enemy":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;qh(Q(m));return}else break t}}case"on_enemy_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Bh(k.map,Q(g));return}}else break t}}case"on_enemy_attack_end":{Fh();return}case"on_enemy_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Hh(A,q,B.map);return}}}else break t}}}else break t}}case"on_enemy_move_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Dh(k.map,Q(g));return}}else break t}}case"on_enemy_move_end":{Uh();return}case"on_enemy_move_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Vh(A,q,B.map);return}}}else break t}}}else break t}}case"on_get_summon_menu":{$5();return}case"on_summon_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;n5(Q(m));return}else break t}}case"on_summon_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=P(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(G),_1:Q(x)},K=ut.val;let Z;K===void 0?Z=S():Z=K;const F=Z.map,N=po(H);let V;N===void 0?V=S():V=N,o5(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_summon_end":{ce();return}case"on_click_structure":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;Ch(Q(m));return}else break t}}case"on_get_structure_menu":{s5();return}case"on_structure_build_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"name");if(f===void 0)break t;{const w=f,I=Q(g),y=po(w);let L;y===void 0?L=S():L=y,c5(I,L);return}}}else break t}}case"on_structure_build_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=P(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(G),_1:Q(x)},K=ut.val;let Z;K===void 0?Z=S():Z=K;const F=Z.map,N=po(H);let V;N===void 0?V=S():V=N,i5(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_structure_build_end":{G$();return}case"on_structure_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Ih(k.map,Q(g));return}}else break t}}case"on_structure_attack_end":{Lh();return}case"on_structure_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Ph(A,q,B.map);return}}}else break t}}}else break t}}case"on_game_over":{Th();return}default:break t}else break t}}else break t;ue()}function a5(t){const e=ai(t),n=new Array(e.length),$=e.length;let o=0;for(;;){const s=o;if(s<$){const c=e[s];n[s]=Yo(c),o=s+1|0;continue}else break}return eb(n)}function l5(){const t={_0:"warehouse",_1:a5(pt.val.warehouse)},e=R([{_0:"SpiritalSpark",_1:J(Et(pt.val.bag.resources,2))},{_0:"RecallGear",_1:J(Et(pt.val.bag.resources,1))},{_0:"ResonantCrystal",_1:J(Et(pt.val.bag.resources,4))},{_0:"RefinedCopper",_1:J(Et(pt.val.bag.resources,3))},{_0:"HeartCrystalDust",_1:J(Et(pt.val.bag.resources,0))}]),n=R([{_0:"resources",_1:new E(e)},{_0:"equipments",_1:tb(pt.val.bag.equipments)}]),$=R([t,{_0:"bag",_1:new E(n)}]);return D(new E($))}function u5(t){let e=Ng();if(t.$tag===5){const $=t._0,o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c];let i;t:{e:{const r=L4(_);if(r.$tag===1)i=r._0;else{r._0;break e}break t}i=S()}e=Z$(e,i),s=c+1|0;continue}else break}return e}else return S()}function p5(t){const e=Wc(t);let n;e===void 0?n=S():n=e;const $=Tg(),o=wc(n);for(;;){const s=Mc(o);if(s===void 0)break;{const _=s,i=_._0,r=_._1;switch(i){case"SpiritalSpark":{je($,2,Qe(cn(rn(r))));break}case"RecallGear":{je($,1,Qe(cn(rn(r))));break}case"ResonantCrystal":{je($,4,Qe(cn(rn(r))));break}case"RefinedCopper":{je($,3,Qe(cn(rn(r))));break}case"HeartCrystalDust":{je($,0,Qe(cn(rn(r))));break}}continue}}return $}function m5(t){if(t.$tag===6){const n=t._0,$=p5(wo(n,"resources")),o=K_(Vc(wo(n,"equipments"))),s=new Array(o.length),c=o.length;let _=0;for(;;){const r=_;if(r<c){const a=o[r];let l;t:{e:{const u=P4(a);if(u.$tag===1)l=u._0;else{u._0;break e}break t}l=S()}s[r]=l,_=r+1|0;continue}else break}return Bg($,s)}else return S()}function d5(t){let e;t:{e:{const s=Uc({str:t,start:0,end:t.length},1024);let c;if(s.$tag===1)c=s._0;else{s._0;break e}const _=Wc(c);_===void 0?e=S():e=_;break t}e=S()}const n=u5(wo(e,"warehouse")),$=m5(wo(e,"bag")),o=Xg(n,$);pt.val=o}function f5(){return Yg(pt.val)}function b5(){return Kg(pt.val)}function g5(){return Qg(pt.val)}function h5(t){return Zg(pt.val,t)}function k5(t){Lg(U,t)}function w5(t){d5(t)}function y5(){return l5()}function M5(t){r5(t)}export{M5 as eventloop,y5 as global_export_save,g5 as global_gacha,b5 as global_get_copper_list,f5 as global_get_resource,w5 as global_import_save,k5 as global_info_subscribe,h5 as global_upgrade_copper};
