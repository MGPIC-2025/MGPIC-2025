const Mi={$tag:0},n_={$tag:1},e_={$tag:2};function Ee(t,n){this._0=t,this._1=n}Ee.prototype.$tag=3;function z(t){this._0=t}z.prototype.$tag=4;function Pt(t){this._0=t}Pt.prototype.$tag=5;function E(t){this._0=t}E.prototype.$tag=6;const Mt={hi:0,lo:1},it={hi:0,lo:0},m$=new DataView(new ArrayBuffer(8));function Ps(t){return m$.setInt32(0,t,!0),m$.getFloat32(0,!0)}const Ci={hi:232830643,lo:-1486618624},kt={hi:0,lo:10},vi={hi:0,lo:100},xi={hi:0,lo:1e3},Ii={hi:0,lo:1e4},Li={hi:0,lo:1e5},Pi={hi:0,lo:1e6},Gi={hi:0,lo:1e7},ji={hi:0,lo:1e8},Oi={hi:0,lo:1e9},Ai={hi:2,lo:1410065408},Ei={hi:23,lo:1215752192},Ri={hi:232,lo:-727379968},zi={hi:2328,lo:1316134912},Ji={hi:23283,lo:276447232},qi={hi:232830,lo:-1530494976},Ti={hi:0,lo:22},Bi={hi:0,lo:37},Fi={hi:-1,lo:-22},o_={hi:-1,lo:-1},Hi={hi:-1048576,lo:0},Ni={hi:2146435072,lo:0},Di={hi:2146959360,lo:1},s_={hi:0,lo:2};class Ui extends Error{}function M(){throw new Ui}function d(t,n){if(n<0||n>=t.length)throw new Error("Index out of bounds")}const Vi=()=>{var t;if((t=globalThis.crypto)!=null&&t.getRandomValues){const n=new Uint32Array(1);return globalThis.crypto.getRandomValues(n),n[0]|0}else return Math.floor(Math.random()*4294967296)|0};function Wi(t,n){return new Uint8Array(t)}function et(t,n){const e=new Array(t);return e.fill(n),e}const Xi=t=>(t.hi>>>0)*4294967296+(t.lo>>>0),Yi=function t(n){let e=t._view;return e===void 0&&(e=t._view=new DataView(new ArrayBuffer(8))),e.setUint32(0,n.hi),e.setUint32(4,n.lo),e.getFloat64(0)},Ot=(t,n)=>{t.push(n)},Gs=function t(){return t._exports?t._exports:t._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},Ki=(t,n)=>{const e=t.hi,s=n.hi;if(e<s)return-1;if(e>s)return 1;const o=t.lo>>>0,$=n.lo>>>0;return o<$?-1:o>$?1:0},Qi=(t,n)=>{const e=t.hi>>>0,s=n.hi>>>0;if(e<s)return-1;if(e>s)return 1;const o=t.lo>>>0,$=n.lo>>>0;return o<$?-1:o>$?1:0},Zi=t=>t.hi*4294967296+(t.lo>>>0),tr=(t,n,e)=>t.splice(n,e),nr=t=>t.slice(0);function Go(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}function er(t){return t>>>=0,t===0?32:(t&=-t,31-Math.clz32(t))}const Zo={hi:0,lo:-1};function Tn(t,n,e){this._0=t,this._1=n,this._2=e}Tn.prototype.$tag=0;function yn(t,n,e){this._0=t,this._1=n,this._2=e}yn.prototype.$tag=1;function ee(t){this._0=t}ee.prototype.$tag=2;const te={$tag:0};function ye(t,n){this._0=t,this._1=n}ye.prototype.$tag=1;function jo(t){this._0=t}jo.prototype.$tag=0;function Kt(t){this._0=t}Kt.prototype.$tag=1;function an(t){this._0=t}an.prototype.$tag=6;function q(t){this._0=t}q.prototype.$tag=5;function Re(t,n){this._0=t,this._1=n}Re.prototype.$tag=4;const Gt={$tag:3},$_={$tag:0};function Oo(t){this._0=t}Oo.prototype.$tag=0;function js(t){this._0=t}js.prototype.$tag=1;function ze(t){this._0=t}ze.prototype.$tag=0;function Et(t){this._0=t}Et.prototype.$tag=1;function vn(t){this._0=t}vn.prototype.$tag=0;function dt(t){this._0=t}dt.prototype.$tag=1;function __(t){this._0=t}__.prototype.$tag=0;function c_(t){this._0=t}c_.prototype.$tag=1;function i_(t){this._0=t}i_.prototype.$tag=0;function r_(t){this._0=t}r_.prototype.$tag=0;function le(t){this._0=t}le.prototype.$tag=1;function a_(t){this._0=t}a_.prototype.$tag=0;function rs(t){this._0=t}rs.prototype.$tag=1;function u_(t){this._0=t}u_.prototype.$tag=0;function l_(t){this._0=t}l_.prototype.$tag=1;function Ao(t){this._0=t}Ao.prototype.$tag=0;function Os(t){this._0=t}Os.prototype.$tag=1;const or={hi:2097151,lo:-1},sr={hi:-2097152,lo:1};function As(t){this._0=t}As.prototype.$tag=0;function Sn(t){this._0=t}Sn.prototype.$tag=1;function p_(t){this._0=t}p_.prototype.$tag=0;function m_(t){this._0=t}m_.prototype.$tag=1;function as(t){this._0=t}as.prototype.$tag=0;function d_(t){this._0=t}d_.prototype.$tag=1;const $r={$tag:0},_r={$tag:1},cr={$tag:2};function pe(t,n){this._0=t,this._1=n}pe.prototype.$tag=3;function Eo(t){this._0=t}Eo.prototype.$tag=4;const ir={$tag:5},f_={$tag:6},rr={$tag:7},b_={$tag:8},g_={$tag:9},h_={$tag:0};function X(t,n){this._0=t,this._1=n}X.prototype.$tag=1;const ro={$tag:0};function Es(t){this._0=t}Es.prototype.$tag=1;const ar={$tag:0};function k_(t){this._0=t}k_.prototype.$tag=1;const ur=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]);function me(t){this._0=t}me.prototype.$tag=1;function w_(t){this._0=t}w_.prototype.$tag=0;function y_(t){this._0=t}y_.prototype.$tag=0;function S_(t){this._0=t}S_.prototype.$tag=1;function M_(t){this._0=t}M_.prototype.$tag=0;function Gn(t){this._0=t}Gn.prototype.$tag=1;function C_(t){this._0=t}C_.prototype.$tag=0;function v_(t){this._0=t}v_.prototype.$tag=0;function x_(t){this._0=t}x_.prototype.$tag=1;const ts={hi:2147483647,lo:-1},d$={hi:0,lo:16},ns={hi:-2147483648,lo:0},lr={hi:0,lo:65536},to={$tag:0};function de(t){this._0=t}de.prototype.$tag=1;function jn(t){this._0=t}jn.prototype.$tag=0;function I_(t){this._0=t}I_.prototype.$tag=1;function ao(t){this._0=t}ao.prototype.$tag=0;function L_(t){this._0=t}L_.prototype.$tag=1;function Yn(t){this._0=t}Yn.prototype.$tag=0;function P_(t){this._0=t}P_.prototype.$tag=1;function Xt(t){this._0=t}Xt.prototype.$tag=0;function G_(t){this._0=t}G_.prototype.$tag=1;function fe(t){this._0=t}fe.prototype.$tag=0;function Kn(t){this._0=t}Kn.prototype.$tag=1;const f$={$tag:0};function us(t){this._0=t}us.prototype.$tag=1;function ls(t){this._0=t}ls.prototype.$tag=0;function j_(t){this._0=t}j_.prototype.$tag=1;const pr={$tag:0};function O_(t){this._0=t}O_.prototype.$tag=1;const A_={$tag:0};function Rs(t){this._0=t}Rs.prototype.$tag=1;function On(t){this._0=t}On.prototype.$tag=0;function E_(t){this._0=t}E_.prototype.$tag=1;function be(t){this._0=t}be.prototype.$tag=0;function R_(t){this._0=t}R_.prototype.$tag=1;function Bn(t){this._0=t}Bn.prototype.$tag=0;function oe(t){this._0=t}oe.prototype.$tag=1;function Fn(t){this._0=t}Fn.prototype.$tag=2;function Mn(t){this._0=t}Mn.prototype.$tag=0;function ne(t){this._0=t}ne.prototype.$tag=1;function ps(t){this._0=t}ps.prototype.$tag=2;function zs(t){this._0=t}zs.prototype.$tag=3;const Se={$tag:4};function z_(t){this._0=t}z_.prototype.$tag=0;const mr=Mi,dr=Ps(2143289344),fr=Ps(2139095040),br=Ps(-8388608),b$=".",g$="e",h$="E",J_="value out of range",se="invalid syntax",k$="",q_=Ci,gr=it,hr=it,ht={mantissa_bits:52,exponent_bits:11,bias:-1023},no=[1,3,6,9,13,16,19,23,26,29,33,36,39,43,46,49,53,56,59],w$=[{_0:0,_1:""},{_0:1,_1:"5"},{_0:1,_1:"25"},{_0:1,_1:"125"},{_0:2,_1:"625"},{_0:2,_1:"3125"},{_0:2,_1:"15625"},{_0:3,_1:"78125"},{_0:3,_1:"390625"},{_0:3,_1:"1953125"},{_0:4,_1:"9765625"},{_0:4,_1:"48828125"},{_0:4,_1:"244140625"},{_0:4,_1:"1220703125"},{_0:5,_1:"6103515625"},{_0:5,_1:"30517578125"},{_0:5,_1:"152587890625"},{_0:6,_1:"762939453125"},{_0:6,_1:"3814697265625"},{_0:6,_1:"19073486328125"},{_0:7,_1:"95367431640625"},{_0:7,_1:"476837158203125"},{_0:7,_1:"2384185791015625"},{_0:7,_1:"11920928955078125"},{_0:8,_1:"59604644775390625"},{_0:8,_1:"298023223876953125"},{_0:8,_1:"1490116119384765625"},{_0:9,_1:"7450580596923828125"},{_0:9,_1:"37252902984619140625"},{_0:9,_1:"186264514923095703125"},{_0:10,_1:"931322574615478515625"},{_0:10,_1:"4656612873077392578125"},{_0:10,_1:"23283064365386962890625"},{_0:10,_1:"116415321826934814453125"},{_0:11,_1:"582076609134674072265625"},{_0:11,_1:"2910383045673370361328125"},{_0:11,_1:"14551915228366851806640625"},{_0:12,_1:"72759576141834259033203125"},{_0:12,_1:"363797880709171295166015625"},{_0:12,_1:"1818989403545856475830078125"},{_0:13,_1:"9094947017729282379150390625"},{_0:13,_1:"45474735088646411895751953125"},{_0:13,_1:"227373675443232059478759765625"},{_0:13,_1:"1136868377216160297393798828125"},{_0:14,_1:"5684341886080801486968994140625"},{_0:14,_1:"28421709430404007434844970703125"},{_0:14,_1:"142108547152020037174224853515625"},{_0:15,_1:"710542735760100185871124267578125"},{_0:15,_1:"3552713678800500929355621337890625"},{_0:15,_1:"17763568394002504646778106689453125"},{_0:16,_1:"88817841970012523233890533447265625"},{_0:16,_1:"444089209850062616169452667236328125"},{_0:16,_1:"2220446049250313080847263336181640625"},{_0:16,_1:"11102230246251565404236316680908203125"},{_0:17,_1:"55511151231257827021181583404541015625"},{_0:17,_1:"277555756156289135105907917022705078125"},{_0:17,_1:"1387778780781445675529539585113525390625"},{_0:18,_1:"6938893903907228377647697925567626953125"},{_0:18,_1:"34694469519536141888238489627838134765625"},{_0:18,_1:"173472347597680709441192448139190673828125"},{_0:19,_1:"867361737988403547205962240695953369140625"}],y$=[Mt,kt,vi,xi,Ii,Li,Pi,Gi,ji,Oi,Ai,Ei,Ri,zi,Ji,qi],es=Ti,Wn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,0,0,0,0,0,0,0,0,0],kr=Bi,wr=Fi,yr=it,Sr=0,Mr=0,Cr=o_,vr="阿磐",xr="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Ir="/assets/copper/iron_wall/rocky/rocky.webp",Lr="/assets/copper/iron_wall/rocky/rocky.glb",Pr="卫斯理",Gr="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",jr="/assets/copper/iron_wall/wesley/wesley.webp",Or="/assets/copper/iron_wall/wesley/wesley.glb",Ar="大贝尔",Er="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",Rr="/assets/copper/iron_wall/bell/bell.webp",zr="/assets/copper/iron_wall/bell/bell.glb",Jr="团团",qr="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",Tr="/assets/copper/iron_wall/tumble/tumble.webp",Br="/assets/copper/iron_wall/tumble/tumble.glb",Fr="铿铿",Hr="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",Nr="/assets/copper/iron_wall/chief/chief.webp",Dr="/assets/copper/iron_wall/chief/chief.glb",Ur="咝咝",Vr="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",Wr="/assets/copper/arcanist/spark/spark.webp",Xr="/assets/copper/arcanist/spark/spark.glb",Yr="拉斐尔",Kr="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",Qr="/assets/copper/arcanist/syrup/syrup.webp",Zr="/assets/copper/arcanist/syrup/syrup.glb",ta="波普尔",na="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",ea="/assets/copper/arcanist/bubble/bubble.webp",oa="/assets/copper/arcanist/bubble/bubble.glb",sa="菲尼",$a="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",_a="/assets/copper/arcanist/glimmer/glimmer.webp",ca="/assets/copper/arcanist/glimmer/glimmer.glb",ia="卷卷",ra="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",aa="/assets/copper/arcanist/turner/turner.webp",ua="/assets/copper/arcanist/turner/turner.glb",la="絮絮",pa="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",ma="/assets/copper/resonator/murmur/murmur.webp",da="/assets/copper/resonator/murmur/murmur.glb",fa="啾啾",ba="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",ga="/assets/copper/resonator/melody/melody.webp",ha="/assets/copper/resonator/melody/melody.glb",ka="库克",wa="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",ya="/assets/copper/resonator/clawster/clawster.webp",Sa="/assets/copper/resonator/clawster/clawster.glb",Ma="鼹鼠的地洞",Ca="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",va="/assets/copper/resonator/diggs/diggs.webp",xa="/assets/copper/resonator/diggs/diggs.glb",Ia="蜜拉",La="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",Pa="/assets/copper/resonator/hive/hive.webp",Ga="/assets/copper/resonator/hive/hive.glb",ja="米洛",Oa="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",Aa="/assets/copper/mechanic/gyro/gyro.webp",Ea="/assets/copper/mechanic/gyro/gyro.glb",Ra="杰克",za="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",Ja="/assets/copper/mechanic/tricky/tricky.webp",qa="/assets/copper/mechanic/tricky/tricky.glb",Ta="格洛克",Ba="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",Fa="/assets/copper/mechanic/pendulum/pendulum.webp",Ha="/assets/copper/mechanic/pendulum/pendulum.glb",Na="溜溜",Da="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",Ua="/assets/copper/mechanic/yoyo/yoyo.webp",Va="/assets/copper/mechanic/yoyo/yoyo.glb",Wa="卡琳",Xa="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",Ya="/assets/copper/mechanic/karin/karin.webp",Ka="/assets/copper/mechanic/karin/karin.glb",Qa="波波",Za="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",tu="/assets/copper/craftsman/wrench/wrench.webp",nu="/assets/copper/craftsman/wrench/wrench.glb",eu="特斯拉",ou="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",su="/assets/copper/craftsman/coil/coil.webp",$u="/assets/copper/craftsman/coil/coil.glb",_u="公输",cu="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",iu="/assets/copper/craftsman/artifex/artifex.webp",ru="/assets/copper/craftsman/artifex/artifex.glb",au="丁格",uu="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",lu="/assets/copper/craftsman/drillbit/drillbit.webp",pu="/assets/copper/craftsman/drillbit/drillbit.glb",mu="小卯",du="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",fu="/assets/copper/craftsman/quickhand/quickhand.webp",bu="/assets/copper/craftsman/quickhand/quickhand.glb",gu={type_msg:"upgrade_cost_error",content:"升级等级错误"},hu={_0:2,_1:100},ku={_0:1,_1:0},wu={_0:4,_1:0},yu={_0:3,_1:0},Su={_0:0,_1:0},Mu={_0:2,_1:0},Cu={_0:1,_1:0},vu={_0:4,_1:0},xu={_0:3,_1:0},Iu={_0:0,_1:0},Lu={type_msg:"resource_not_enough",content:"资源不足"},Pu={type_msg:"resource_not_enough",content:"资源不足"},Gu=[0,2,3,4,6,6,8],ju={name:"精炼铜锭",resource_type:3,model_url:"/assets/resource/refined_copper_ingot/refined_copper_ingot.glb"},Ou={name:"共鸣星晶",resource_type:4,model_url:"/assets/resource/resonant_star_crystal/resonant_star_crystal.glb"},Au={_0:0,_1:0},Eu={_0:0,_1:3},Ru={_0:0,_1:4},zu={_0:0,_1:5},Ju={_0:0,_1:3},qu={_0:0,_1:4},Tu={_0:0,_1:5},Bu={_0:-1,_1:0},Fu={_0:1,_1:0},Hu={_0:0,_1:-1},Nu={_0:0,_1:1},Du={_0:-1,_1:0},Uu={_0:1,_1:0},Vu={_0:0,_1:-1},Wu={_0:0,_1:1},Xu={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:10},Yu=void 0,Ku={name:vr,copper_type:0,description:xr,icon_url:Ir,model_url:Lr,skill:Xu,attack_range:Yu},Qu={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:10},Zu=void 0,tl={name:Pr,copper_type:0,description:Gr,icon_url:jr,model_url:Or,skill:Qu,attack_range:Zu},nl={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},el=void 0,ol={name:Ar,copper_type:0,description:Er,icon_url:Rr,model_url:zr,skill:nl,attack_range:el},sl={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},$l=void 0,_l={name:Jr,copper_type:0,description:qr,icon_url:Tr,model_url:Br,skill:sl,attack_range:$l},cl={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},il=void 0,rl={name:Fr,copper_type:0,description:Hr,icon_url:Nr,model_url:Dr,skill:cl,attack_range:il},al={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:20},ul=void 0,ll={name:Ur,copper_type:1,description:Vr,icon_url:Wr,model_url:Xr,skill:al,attack_range:ul},pl={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},ml=void 0,dl={name:Yr,copper_type:1,description:Kr,icon_url:Qr,model_url:Zr,skill:pl,attack_range:ml},fl={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:10},bl=void 0,gl={name:ta,copper_type:1,description:na,icon_url:ea,model_url:oa,skill:fl,attack_range:bl},hl={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},kl=void 0,wl={name:sa,copper_type:1,description:$a,icon_url:_a,model_url:ca,skill:hl,attack_range:kl},yl={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:5},Sl=void 0,Ml={name:ia,copper_type:1,description:ra,icon_url:aa,model_url:ua,skill:yl,attack_range:Sl},Cl={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},vl=void 0,xl={name:la,copper_type:4,description:pa,icon_url:ma,model_url:da,skill:Cl,attack_range:vl},Il={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},Ll=void 0,Pl={name:fa,copper_type:4,description:ba,icon_url:ga,model_url:ha,skill:Il,attack_range:Ll},Gl={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawster_skill.webp",cool_down:void 0},jl=void 0,Ol={name:ka,copper_type:4,description:wa,icon_url:ya,model_url:Sa,skill:Gl,attack_range:jl},Al={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},El=void 0,Rl={name:Ma,copper_type:4,description:Ca,icon_url:va,model_url:xa,skill:Al,attack_range:El},zl={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},Jl=void 0,ql={name:Ia,copper_type:4,description:La,icon_url:Pa,model_url:Ga,skill:zl,attack_range:Jl},Tl={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:10},Bl=void 0,Fl={name:ja,copper_type:3,description:Oa,icon_url:Aa,model_url:Ea,skill:Tl,attack_range:Bl},Hl={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:10},Nl=void 0,Dl={name:Ra,copper_type:3,description:za,icon_url:Ja,model_url:qa,skill:Hl,attack_range:Nl},Ul={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:5},Vl=void 0,Wl={name:Ta,copper_type:3,description:Ba,icon_url:Fa,model_url:Ha,skill:Ul,attack_range:Vl},Xl={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:3},Yl=void 0,Kl={name:Na,copper_type:3,description:Da,icon_url:Ua,model_url:Va,skill:Xl,attack_range:Yl},Ql={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},Zl=void 0,tp={name:Wa,copper_type:3,description:Xa,icon_url:Ya,model_url:Ka,skill:Ql,attack_range:Zl},np=void 0,ep=void 0,op={name:Qa,copper_type:2,description:Za,icon_url:tu,model_url:nu,skill:np,attack_range:ep},sp=void 0,$p=void 0,_p={name:eu,copper_type:2,description:ou,icon_url:su,model_url:$u,skill:sp,attack_range:$p},cp=void 0,ip=void 0,rp={name:_u,copper_type:2,description:cu,icon_url:iu,model_url:ru,skill:cp,attack_range:ip},ap=void 0,up=void 0,lp={name:au,copper_type:2,description:uu,icon_url:lu,model_url:pu,skill:ap,attack_range:up},pp=void 0,mp=void 0,ge=[Ku,tl,ol,_l,rl,ll,dl,gl,wl,Ml,xl,Pl,Ol,Rl,ql,Fl,Dl,Wl,Kl,tp,op,_p,rp,lp,{name:mu,copper_type:2,description:du,icon_url:fu,model_url:bu,skill:pp,attack_range:mp}],dp=Vi(),fp=hd(t=>{const n=ge.length;let e=0;for(;;){const s=e;if(s<n){const o=ge[s];if(t({_0:o.name,_1:o})===1){e=s+1|0;continue}else return 0}else return 1}}),$e=Kc(),pt=L2(f1()),bp=Kc(),T_=e2(),U=W2(),Me=Pe(Hi),Ce=Pe(Ni),B_=[{_0:160,_1:160},{_0:5760,_1:5760},{_0:8192,_1:8202},{_0:8232,_1:8233},{_0:8239,_1:8239},{_0:8287,_1:8287},{_0:12288,_1:12288},{_0:65279,_1:65279}],gp=Pe(Di),F_=je(s_,52),nn=qe(8),he=qe(8),ft=qe(8),jt=qe(8),xn=tm(8),lt=P2(void 0),Jt=Nm([]),ms=[{name:"铆接壁垒",health:Math.fround(400),can_move:!1,can_attack:!1,attack_range:0,description:" 一段坚固的、由巨大黄铜板铆接而成的城墙，板上有蒸汽管道加固。墙头有齿轮驱动的可动挡板，墙体内嵌有发出稳定黄光的观察灯。",asset_url:"assets/structure/riveted_barrier/riveted_barrier.webp",model_url:"assets/structure/riveted_barrier/riveted_barrier.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:8},{_0:1,_1:2}])},{name:"齿轮箭塔",health:Math.fround(180),can_move:!1,can_attack:!0,attack_range:3,description:"一座细高的塔楼，顶部是一个开放式齿轮组平台，通过传送带将铜质弩箭自动上弦并连续发射。塔身有蒸汽泄压阀，每次齐射都伴随“嘶嘶”声。",asset_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.webp",model_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(30),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:6},{_0:1,_1:3}])},{name:"心源矿钻",health:Math.fround(300),can_move:!1,can_attack:!1,attack_range:0,description:"一台顶部装有巨大钻头的大型钻井装置，由复杂的齿轮组和活塞驱动。钻头高速旋转，闪烁着蓝光，从地底带出发光的矿石。",asset_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.webp",model_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:10},{_0:1,_1:4},{_0:0,_1:5}])},{name:"充能线圈",health:Math.fround(200),can_move:!1,can_attack:!1,attack_range:0,description:"一个由巨大铜线圈缠绕而成的塔状建筑，线圈中央有电弧在不断跳跃。它能够为周围一定范围内的友方建筑提供能量，使其运作更快。",asset_url:"assets/structure/charging_coil/charging_coil.webp",model_url:"assets/structure/charging_coil/charging_coil.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:20},{_0:1,_1:6},{_0:4,_1:10}])},{name:"维修工坊",health:Math.fround(200),can_move:!1,can_attack:!0,attack_range:3,description:"一个带有可开合顶棚的圆形工坊，内部有多个机械臂。友方铜偶经过时，机械臂会自动为其进行修复和保养，发出叮叮当当的敲打声。",asset_url:"assets/structure/repair_workshop/repair_workshop.webp",model_url:"assets/structure/repair_workshop/repair_workshop.glb",attribute:bt(Math.fround(0),0,Math.fround(25),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:8},{_0:1,_1:3},{_0:0,_1:3}])},{name:"镜光折射塔",health:Math.fround(1200),can_move:!1,can_attack:!0,attack_range:5,description:"一座顶部镶嵌着巨大、可转动水晶镜片的塔。它能聚集环境中的心源能量，发射出一道灼热的折射光束，对直线上的敌人造成伤害。",asset_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.webp",model_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(120),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:30},{_0:4,_1:20},{_0:0,_1:10},{_0:2,_1:8}])},{name:"共鸣警钟",health:Math.fround(500),can_move:!1,can_attack:!0,attack_range:4,description:"一个悬挂在精致黄铜钟楼里的大钟，钟体刻有共鸣符文。当敌人靠近时，它会自动鸣响，发出可见的声波涟漪。",asset_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.webp",model_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.glb",attribute:bt(Math.fround(0),0,Math.fround(60),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:15},{_0:1,_1:5},{_0:4,_1:8}])},{name:"风暴铁砧",health:Math.fround(800),can_move:!1,can_attack:!0,attack_range:4,description:"一个被闪电线圈环绕的巨大铁砧。它会定期引动空气中的能量，召唤一道小范围的闪电风暴，轰击区域内的所有敌人。",asset_url:"assets/structure/storm_iron_anvil/storm_anvil.webp",model_url:"assets/structure/storm_iron_anvil/storm_anvil.glb",attribute:bt(Math.fround(0),0,Math.fround(100),Math.fround(0),Math.fround(0)),cost:ut([{_0:3,_1:25},{_0:4,_1:15},{_0:2,_1:5}])}],H_=gd(t=>{const n=ms.length;let e=0;for(;;){const s=e;if(s<n){const o=ms[s];if(t({_0:o.name,_1:o})===1){e=s+1|0;continue}else return 0}else return 1}}),un=Dm([]),fo=[{level:1,health:Math.fround(25),attack:Math.fround(8),defense:Math.fround(3),dodge:Math.fround(0),attack_range:1,speed:2,name:"哥布林",enemy_type:"goblin",description:"哥布林并非铜曜王朝的原生种族，而是一群在王朝崩溃后，趁机潜入地牢的'拾荒者'。它们对心源科技一知半解，但天生对机械有着诡异的亲和力，擅长拆解、偷窃和利用废墟中的一切。它们不是最强大的敌人，但非常狡猾，会设置陷阱、偷走玩家的临时增益，或是呼叫同伴。击败它们有时能获得一些意想不到的小玩意和零件。",asset_url:"/assets/enemy/goblin/goblin.webp",model_url:"/assets/enemy/goblin/goblin.glb",drop_items:[{_0:1,_1:{_0:0,_1:1}},{_0:3,_1:{_0:1,_1:1}}],summon_cost:ut([{_0:3,_1:2},{_0:1,_1:1}])},{level:1,health:Math.fround(30),attack:Math.fround(7),defense:Math.fround(5),dodge:Math.fround(0),attack_range:1,speed:1,name:"锈蚀巡游者",enemy_type:"cruiser",description:"曾是王城负责除锈保养的工役，核心程序错乱后，反而开始传播锈蚀。它们是地牢中最常见的退化力量。",asset_url:"/assets/enemy/cruiser/cruiser.webp",model_url:"/assets/enemy/cruiser/cruiser.glb",drop_items:[{_0:4,_1:{_0:0,_1:1}},{_0:0,_1:{_0:1,_1:1}}],summon_cost:ut([{_0:3,_1:1},{_0:0,_1:2}])},{level:2,health:Math.fround(35),attack:Math.fround(12),defense:Math.fround(5),dodge:Math.fround(10),attack_range:1,speed:4,name:"齿轮斥候",enemy_type:"scout",description:"朝军队用来巡逻和送信的自动机械犬。失控后，它们依然在漫无目的地'巡逻'，并将任何移动单位视为入侵者。",asset_url:"/assets/enemy/scout/scout.webp",model_url:"/assets/enemy/scout/scout.glb",drop_items:[{_0:1,_1:{_0:1,_1:2}},{_0:3,_1:{_0:0,_1:1}}],summon_cost:ut([{_0:3,_1:3},{_0:1,_1:2},{_0:0,_1:1}])},{level:2,health:Math.fround(40),attack:Math.fround(16),defense:Math.fround(8),dodge:Math.fround(5),attack_range:3,speed:2,name:"管风琴号手",enemy_type:"horn",description:"皇家乐团的自动乐器成员之一，原本奏响庄严乐章。如今，它的乐曲变成了撕裂耳膜、扰乱心智的噪音攻击。",asset_url:"/assets/enemy/horn/horn.webp",model_url:"/assets/enemy/horn/horn.glb",drop_items:[{_0:4,_1:{_0:1,_1:2}},{_0:0,_1:{_0:0,_1:1}}],summon_cost:ut([{_0:1,_1:2},{_0:4,_1:3},{_0:2,_1:1}])},{level:3,health:Math.fround(70),attack:Math.fround(22),defense:Math.fround(15),dodge:Math.fround(0),attack_range:1,speed:1,name:"蒸汽拳手",enemy_type:"boxer",description:" 矿区使用的重型劳工铜偶，拥有惊人的力量。现在，它们只会重复最简单的指令：用蒸汽动力重拳粉碎眼前的障碍。",asset_url:"/assets/enemy/boxer/boxer.webp",model_url:"/assets/enemy/boxer/boxer.glb",drop_items:[{_0:1,_1:{_0:1,_1:3}},{_0:4,_1:{_0:1,_1:2}},{_0:3,_1:{_0:0,_1:1}}],summon_cost:ut([{_0:1,_1:4},{_0:4,_1:2},{_0:3,_1:8},{_0:2,_1:3}])},{level:3,health:Math.fround(55),attack:Math.fround(30),defense:Math.fround(4),dodge:Math.fround(20),attack_range:1,speed:3,name:"发条刺客",enemy_type:"assassin",description:"阴影中的守护者，负责处理见不得光的威胁。程序失控后，它们的刺杀名单上写满了所有活物。",asset_url:"/assets/enemy/assassin/assassin.webp",model_url:"/assets/enemy/assassin/assassin.glb",drop_items:[{_0:1,_1:{_0:1,_1:2}},{_0:4,_1:{_0:0,_1:1}}],summon_cost:ut([{_0:1,_1:2},{_0:0,_1:6},{_0:3,_1:6},{_0:2,_1:1}])},{level:4,health:Math.fround(110),attack:Math.fround(30),defense:Math.fround(20),dodge:Math.fround(0),attack_range:1,speed:2,name:"锅炉吞噬者",enemy_type:"devourer",description:"地牢的能量回收单元，负责将废弃物转化为蒸汽动力。如今它变得无比贪婪，会主动吞噬任何金属物体，包括掉队的铜偶。",asset_url:"/assets/enemy/devourer/devourer.glb",model_url:"/assets/enemy/devourer/devourer.glb",drop_items:[{_0:1,_1:{_0:2,_1:4}},{_0:4,_1:{_0:1,_1:3}},{_0:3,_1:{_0:1,_1:2}}],summon_cost:ut([{_0:1,_1:6},{_0:4,_1:4},{_0:3,_1:12},{_0:2,_1:3}])},{level:4,health:Math.fround(50),attack:Math.fround(32),defense:Math.fround(10),dodge:Math.fround(70),attack_range:2,speed:3,name:"镜面编织者",enemy_type:"mirror",description:"用于宫廷娱乐和谜题守护的精密造物。它能创造以假乱真的幻象来迷惑入侵者，本身十分脆弱，但极难被真正触及。",asset_url:"/assets/enemy/mirror/mirror.webp",model_url:"/assets/enemy/mirror/mirror.glb",drop_items:[{_0:1,_1:{_0:1,_1:2}},{_0:4,_1:{_0:2,_1:3}},{_0:0,_1:{_0:1,_1:2}}],summon_cost:ut([{_0:1,_1:10},{_0:4,_1:10},{_0:0,_1:10},{_0:2,_1:3}])},{level:5,health:Math.fround(250),attack:Math.fround(45),defense:Math.fround(35),dodge:Math.fround(5),attack_range:2,speed:1,name:"巨锤守卫",enemy_type:"guard",description:"王城宝库和重要大门的守卫者。即使失控，它们依然固守着生前的位置，用最纯粹的力量碾碎一切未经许可的靠近者。",asset_url:"/assets/enemy/guard/guard.webp",model_url:"/assets/enemy/guard/guard.glb",drop_items:[{_0:1,_1:{_0:2,_1:4}},{_0:4,_1:{_0:2,_1:4}},{_0:3,_1:{_0:1,_1:2}}],summon_cost:ut([{_0:1,_1:10},{_0:4,_1:10},{_0:3,_1:15},{_0:2,_1:5}])},{level:5,health:Math.fround(100),attack:Math.fround(50),defense:Math.fround(10),dodge:Math.fround(25),attack_range:2,speed:5,name:"差分机妖",enemy_type:"demon",description:"王朝计算中心的智能核心碎片，拥有强大的逻辑运算能力。它将战斗视为一场需要'计算'和'优化'的数学问题，是极其难缠的精英敌人。",asset_url:"/assets/enemy/demon/demon.webp",model_url:"/assets/enemy/demon/demon.glb",drop_items:[{_0:1,_1:{_0:3,_1:5}},{_0:4,_1:{_0:2,_1:3}},{_0:0,_1:{_0:1,_1:2}}],summon_cost:ut([{_0:1,_1:10},{_0:4,_1:15},{_0:3,_1:10},{_0:2,_1:5}])},{level:5,health:Math.fround(160),attack:Math.fround(55),defense:Math.fround(15),dodge:Math.fround(0),attack_range:2,speed:2,name:"心源畸变体",enemy_type:"variant",description:"它曾是王朝庆典的中央娱乐单元——'欢宴主脑'。大休眠时，过量的心源能量没有摧毁它，反而让它陷入了永久的、失控的狂喜状态。它将地牢变成了它个人的派对现场，并'热情'地邀请（或者说强迫）所有闯入者加入它混乱的欢宴。它会用五彩的声光、抛洒的零件和看似可爱实则威力巨大的玩具进行攻击。击败它，就是终结这场永无止境的噪音派对。",asset_url:"/assets/enemy/variant/variant.webp",model_url:"/assets/enemy/variant/variant.glb",drop_items:[{_0:1,_1:{_0:2,_1:3}},{_0:4,_1:{_0:3,_1:5}},{_0:3,_1:{_0:1,_1:2}}],summon_cost:ut([{_0:1,_1:15},{_0:4,_1:15},{_0:0,_1:20},{_0:3,_1:20},{_0:2,_1:8}])},{level:6,health:Math.fround(300),attack:Math.fround(60),defense:Math.fround(20),dodge:Math.fround(30),attack_range:3,speed:3,name:"（BOSS）织网夫人·夏特拉",enemy_type:"shatra",description:"夏特拉曾是王朝的'信息架构师'，负责维护整个王城的心源能量网络。大休眠发生时，她为了稳定网络，选择将自己的核心与主控终端永久连接。数百年的孤独守护和能量侵蚀让她变得偏执，她认为任何外来者都是不稳定的'病毒'，会破坏她精心维持的、死寂的'平衡'。她会操纵整个地牢的机关和能量流来攻击玩家，将玩家视为需要清除的系统威胁。",asset_url:"/assets/enemy/shatra/shatra.webp",model_url:"/assets/enemy/shatra/shatra.glb",drop_items:[{_0:1,_1:{_0:4,_1:6}},{_0:4,_1:{_0:4,_1:6}},{_0:3,_1:{_0:2,_1:3}},{_0:0,_1:{_0:2,_1:3}}],summon_cost:ut([{_0:1,_1:30},{_0:4,_1:30},{_0:0,_1:30},{_0:3,_1:30},{_0:2,_1:10}])},{level:6,health:Math.fround(500),attack:Math.fround(40),defense:Math.fround(40),dodge:Math.fround(0),attack_range:1,speed:2,name:"（BOSS）废械吞噬者·饕餮",enemy_type:"glutton",description:"它不是被制造的，而是'生长'出来的。在王朝崩溃的废墟中，一个简单的'垃圾处理'核心程序发生了可怕的变异，它开始主动吞噬遇到的一切机械体，并将它们的功能和结构粗暴地整合到自己身上。它代表着纯粹的、无意识的毁灭与贪婪，是地牢中会移动的天灾。击败它需要攻击其身上不断变化的弱点核心。",asset_url:"/assets/enemy/glutton/glutton.webp",model_url:"/assets/enemy/glutton/glutton.glb",drop_items:[{_0:1,_1:{_0:5,_1:7}},{_0:4,_1:{_0:5,_1:7}},{_0:3,_1:{_0:3,_1:4}},{_0:0,_1:{_0:3,_1:4}}],summon_cost:ut([{_0:1,_1:40},{_0:4,_1:40},{_0:0,_1:40},{_0:3,_1:40},{_0:2,_1:15}])}],hp=Zp(fo),ds=bd(t=>hp(n=>t({_0:n.name,_1:n}))),ve=Vs(!1),xe=Vs(!1),Ie=Vs(!1);function ln(t){M()}function kp(t){return M()}function bo(t){return M()}function wp(t){return M()}function yp(t){return M()}function Sp(t){return M()}function Mp(t){return M()}function Cp(t){return M()}function fs(t,n){return Fo(t,n)>=0}function vp(t,n){return Ho(t,n)>=0}function Le(t,n){return Fo(t,n)<=0}function xp(t,n){return Ho(t,n)<=0}function Ro(t,n){return Fo(t,n)<0}function bs(t,n){return Ho(t,n)<0}function Ip(t,n,e,s,o){if(t===e&&n<s){let $=0;for(;;){const c=$;if(c<o){const _=n+c|0,i=s+c|0;d(e,i),d(t,_),t[_]=e[i],$=c+1|0;continue}else return}}else{let $=o-1|0;for(;;){const c=$;if(c>=0){const _=n+c|0,i=s+c|0;d(e,i),d(t,_),t[_]=e[i],$=c-1|0;continue}else return}}}function Lp(t,n,e,s,o){if(t===e&&n<s){let $=0;for(;;){const c=$;if(c<o){const _=n+c|0,i=s+c|0;d(e,i),d(t,_),t[_]=e[i],$=c+1|0;continue}else return}}else{let $=o-1|0;for(;;){const c=$;if(c>=0){const _=n+c|0,i=s+c|0;d(e,i),d(t,_),t[_]=e[i],$=c-1|0;continue}else return}}}function pn(t){return{val:""}}function nt(t,n){const e=t;e.val=`${e.val}${String.fromCodePoint(n)}`}function N_(t,n){return Fo(t,n)>0}function go(t,n){return Ho(t,n)>0}function Pp(t,n){return(((Math.imul(t-55296|0,1024)|0)+n|0)-56320|0)+65536|0}function j(t,n){const e=t.charCodeAt(n);if(55296<=e&&e<=56319){const s=n+1|0,o=t.charCodeAt(s);return Pp(e,o)}else return e}function Gp(t,n){return!R2(t,n)}function $t(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function _t(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function cn(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function jp(t,n){const e=t.length;return n<e?(d(t,n),t[n]):M()}function Op(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function Ap(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function Ep(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function Rp(t,n){const e=t.length;return n<e?(d(t,n),t[n]):M()}function mn(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function S$(t,n){const e=t.length;return n>=0&&n<e?(d(t,n),t[n]):M()}function tt(t,n){const e=t;e.val=`${e.val}${n}`}function Ct(t){const n=t._0,e=t._1,s=[J(n),J(e)];return new Pt(s)}function zp(t){const n=t._0,e=t._1,s=[Vo(n),Ct(e)];return new Pt(s)}function Jp(t){const n=t._0,e=t._1,s=[Vo(n),J(e)];return new Pt(s)}function qp(t,n){$0(n,t)}function Tp(t,n){N2(n,t)}function Bp(t,n){Fp(n,t)}function gs(t,n){_0(n,t)}function Fp(t,n){const e=t._0,s=t._1;gs(n,e),gs(n,s)}function Hp(t){let n=t.acc;return n=n^(n>>>15|0),n=Math.imul(n,-2048144777)|0,n=n^(n>>>13|0),n=Math.imul(n,-1028477379)|0,n=n^(n>>>16|0),n}function zo(t){return Hp(t)}function Np(t){return{acc:(t>>>0)+374761393|0}}function Jo(t){let n;return n=dp,Np(n)}function Vt(t){const n=Jo();return qp(n,t),zo(n)}function D_(t){const n=Jo();return Tp(n,t),zo(n)}function Dn(t){const n=Jo();return Bp(n,t),zo(n)}function on(t){const n=Jo();return gs(n,t),zo(n)}function Dp(t){const n=pn();return M1(t,{self:n,method_0:tt,method_1:_e,method_2:nt}),n.val}function Up(t){const n=pn();return H2(t,{self:n,method_0:tt,method_1:_e,method_2:nt}),n.val}function qo(t){const n=pn(),e={self:n,method_0:tt,method_1:_e,method_2:nt};return t?e.method_0(e.self,"true"):e.method_0(e.self,"false"),n.val}function Vp(t){return{hi:t>>31&-1,lo:t|0}}function Rt(t){return Vp(t)}function En(t){return t.lo}function U_(t,n){const e=t._1,s=t._0,o=n/s|0;o!==0&&U_(t,o);const $=n%s|0,c=$<0?0-$|0:$;d("0123456789abcdefghijklmnopqrstuvwxyz",c),e.method_2(e.self,"0123456789abcdefghijklmnopqrstuvwxyz".charCodeAt(c))}function Wp(t,n,e){t<0&&n.method_2(n.self,45),U_({_0:e,_1:n},t<0?0-t|0:t)}function Xp(t,n){const e=pn();return Wp(t,{self:e,method_0:tt,method_1:_e,method_2:nt},n),e.val}function xt(t){return Xp(t,10)}function V_(t){return t.lo}function Yp(t,n,e){const s=t.length;let o;return e===void 0?o=s:o=e,n>=0&&n<=o&&o<=s?t.substring(n,o):M()}function _e(t,n,e,s){const o=t;o.val=`${o.val}${Yp(n,e,e+s|0)}`}function Kp(t,n){l0(n,{self:t,method_0:tt,method_1:_e,method_2:nt})}function M$(t){return t<10?(t+48|0)&255:(((t+97|0)&255)-10|0)&255}function Qp(t){const n=pn();return nt(n,M$((t/16|0)&255)),nt(n,M$((t%16|0)&255)),n.val}function Zp(t){return e=>{const s=t.length;let o=0;for(;;){const $=o;if($<s){const c=t[$];if(e(c)!==1)return 0;o=$+1|0;continue}else return 1}}}function W_(t){return t.$tag===0?M():t._0}function re(t){return t.$tag===0?M():t._0}function rt(t){return t>=0?t<=1?1:t>1073741824?1073741824:(2147483647>>(Math.clz32(t-1|0)-1|0))+1|0:M()}function X_(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function tm(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function nm(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function em(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function om(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function sm(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function $m(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function _m(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function cm(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function im(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function rm(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function am(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function um(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function lm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function pm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function mm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function dm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function fm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function bm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function gm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function hm(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function km(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function C$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function hs(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function ks(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function ws(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function v$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function x$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function I$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function L$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function P$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function G$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function j$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function wm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,C$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,C$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function ym(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,v$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,v$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Sm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,ws(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,ws(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Mm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,hs(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,hs(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Cm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,ks(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,ks(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function vm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,x$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,x$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function xm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,I$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,I$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Im(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,L$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,L$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Lm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,P$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,P$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Pm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,G$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,G$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Gm(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,j$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,j$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Y_(t,n,e,s){t.size>=t.grow_at&&jm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){wm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};am(t,_,u)}function K_(t,n,e,s){t.size>=t.grow_at&&Om(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&Zc(f.key,n)){f.value=e;return}if(l>f.psl){ym(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};um(t,_,u)}function Q_(t,n,e,s){t.size>=t.grow_at&&Am(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){Sm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};lm(t,_,u)}function Z_(t,n,e,s){t.size>=t.grow_at&&Em(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){Mm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};pm(t,_,u)}function tc(t,n,e,s){t.size>=t.grow_at&&Rm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){Cm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};mm(t,_,u)}function nc(t,n,e,s){t.size>=t.grow_at&&zm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){vm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};dm(t,_,u)}function ec(t,n,e,s){t.size>=t.grow_at&&Jm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){xm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};fm(t,_,u)}function oc(t,n,e,s){t.size>=t.grow_at&&qm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;let k;if(f.hash===s){const w=f.key;k=w._0===n._0&&w._1===n._1}else k=!1;if(k){f.value=e;return}if(l>f.psl){Im(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};bm(t,_,u)}function sc(t,n,e,s){t.size>=t.grow_at&&Tm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;let k;if(f.hash===s){const w=f.key;k=w._0===n._0&&w._1===n._1}else k=!1;if(k){f.value=e;return}if(l>f.psl){Lm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};gm(t,_,u)}function $c(t,n,e,s){t.size>=t.grow_at&&Bm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;if(f.hash===s&&f.key===n){f.value=e;return}if(l>f.psl){Pm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};hm(t,_,u)}function _c(t,n,e,s){t.size>=t.grow_at&&Fm(t);let o,$=0,c=s&t.capacity_mask;for(;;){const l=$,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:l};break}else{const f=b;let k;if(f.hash===s){const w=f.key;k=w._0===n._0&&w._1===n._1}else k=!1;if(k){f.value=e;return}if(l>f.psl){Gm(t,p,f),o={_0:p,_1:l};break}$=l+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,u={prev:t.tail,next:void 0,psl:i,hash:s,key:n,value:e};km(t,_,u)}function jm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;Y_(t,r,a,u),o=i;continue}}}function Om(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;K_(t,r,a,u),o=i;continue}}}function Am(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;Q_(t,r,a,u),o=i;continue}}}function Em(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;Z_(t,r,a,u),o=i;continue}}}function Rm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;tc(t,r,a,u),o=i;continue}}}function zm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;nc(t,r,a,u),o=i;continue}}}function Jm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;ec(t,r,a,u),o=i;continue}}}function qm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;oc(t,r,a,u),o=i;continue}}}function Tm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;sc(t,r,a,u),o=i;continue}}}function Bm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;$c(t,r,a,u),o=i;continue}}}function Fm(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.value,u=_.hash;_c(t,r,a,u),o=i;continue}}}function L(t,n,e){Y_(t,n,e,Vt(n))}function Js(t,n,e){K_(t,n,e,D_(n))}function Hm(t,n,e){Q_(t,n,e,on(n))}function cc(t,n,e){Z_(t,n,e,on(n))}function ic(t,n,e){tc(t,n,e,on(n))}function rc(t,n,e){nc(t,n,e,Vt(n))}function ac(t,n,e){ec(t,n,e,Vt(n))}function ho(t,n,e){oc(t,n,e,Dn(n))}function ys(t,n,e){sc(t,n,e,Dn(n))}function uc(t,n,e){$c(t,n,e,Vt(n))}function lc(t,n,e){_c(t,n,e,Dn(n))}function R(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=X_(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];L(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Nm(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=nm(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];cc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Dm(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=em(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];ic(o,i._0,i._1),c=_+1|0;continue}else break}return o}function pc(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=om(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];Js(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Um(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=sm(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];rc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Vm(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=$m(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];ac(o,i._0,i._1),c=_+1|0;continue}else break}return o}function mc(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=_m(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];ho(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Wm(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=cm(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];ys(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Xm(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=im(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];uc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Ym(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=rm(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];lc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function I(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function dc(t,n){const e=D_(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&Zc(a.key,n))return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function Je(t,n){const e=on(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function Km(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function Qm(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function Zm(t,n){const e=on(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function td(t,n){const e=on(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===e&&a.key===n)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function nd(t,n){const e=Dn(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;let u;if(a.hash===e){const l=a.key;u=l._0===n._0&&l._1===n._1}else u=!1;if(u)return a.value;if($>a.psl)return;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function fc(t,n){const e=Dn(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return-1;{const a=i;let u;if(a.hash===e){const l=a.key;u=l._0===n._0&&l._1===n._1}else u=!1;if(u)return a.value;if($>a.psl)return-1;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function ko(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)M();else{const a=i;if(a.hash===e&&a.key===n)return a.value;if($<=a.psl){s=$+1|0,o=c+1&t.capacity_mask;continue}else M()}}}function O$(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)M();else{const a=i;if(a.hash===e&&a.key===n)return a.value;if($<=a.psl){s=$+1|0,o=c+1&t.capacity_mask;continue}else M()}}}function ed(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)M();else{const a=i;if(a.hash===e&&a.key===n)return a.value;if($<=a.psl){s=$+1|0,o=c+1&t.capacity_mask;continue}else M()}}}function od(t,n){const e=Vt(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)M();else{const a=i;if(a.hash===e&&a.key===n)return a.value;if($<=a.psl){s=$+1|0,o=c+1&t.capacity_mask;continue}else M()}}}function sd(t,n){const e=n.prev;if(e===-1)t.head=n.next;else{const o=t.entries;d(o,e);const $=o[e];let c;$===void 0?c=M():c=$;const _=c;_.next=n.next}const s=n.next;if(s===void 0){t.tail=n.prev;return}else{const $=s;$.prev=n.prev;return}}function $d(t,n){const e=n.prev;if(e===-1)t.head=n.next;else{const o=t.entries;d(o,e);const $=o[e];let c;$===void 0?c=M():c=$;const _=c;_.next=n.next}const s=n.next;if(s===void 0){t.tail=n.prev;return}else{const $=s;$.prev=n.prev;return}}function _d(t,n){const e=n.prev;if(e===-1)t.head=n.next;else{const o=t.entries;d(o,e);const $=o[e];let c;$===void 0?c=M():c=$;const _=c;_.next=n.next}const s=n.next;if(s===void 0){t.tail=n.prev;return}else{const $=s;$.prev=n.prev;return}}function cd(t,n){let e=n;for(;;){const s=e,o=s+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,hs(t,r,s),e=o;continue}}const $=t.entries;d($,s),$[s]=void 0;return}}function id(t,n){let e=n;for(;;){const s=e,o=s+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,ks(t,r,s),e=o;continue}}const $=t.entries;d($,s),$[s]=void 0;return}}function rd(t,n){let e=n;for(;;){const s=e,o=s+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,ws(t,r,s),e=o;continue}}const $=t.entries;d($,s),$[s]=void 0;return}}function ad(t,n,e){let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===e&&a.key===n){sd(t,a),cd(t,c),t.size=t.size-1|0;break}if($>a.psl)break;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function ud(t,n,e){let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===e&&a.key===n){$d(t,a),id(t,c),t.size=t.size-1|0;break}if($>a.psl)break;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function ld(t,n,e){let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===e&&a.key===n){_d(t,a),rd(t,c),t.size=t.size-1|0;break}if($>a.psl)break;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function To(t,n){ad(t,n,on(n))}function Bo(t,n){ud(t,n,on(n))}function bc(t,n){ld(t,n,on(n))}function pd(t,n,e,s){const o=t.length;if(o>0)if(e<o){let $;$=o-e|0,t.fill(n,e,e+$);return}else{M();return}else return}function md(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.key,i=c.value,r=c.next;if(e({_0:_,_1:i})===1){s=r;continue}else return 0}}}}function dd(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.key,i=c.value,r=c.next;if(e({_0:_,_1:i})===1){s=r;continue}else return 0}}}}function fd(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.key,i=c.value,r=c.next;if(e(_,i)===1){s=r;continue}else return 0}}}}function gc(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(e(_)===1){s=i;continue}else return 0}}}}function qs(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(e(_)===1){s=i;continue}else return 0}}}}function Ts(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(e(_)===1){s=i;continue}else return 0}}}}function bd(t){const n=Um([]);return t(e=>(rc(n,e._0,e._1),1)),n}function gd(t){const n=Vm([]);return t(e=>(ac(n,e._0,e._1),1)),n}function hd(t){const n=Xm([]);return t(e=>(uc(n,e._0,e._1),1)),n}function It(t){return t?n_:e_}function J(t){const n=t+0,e=void 0;return new Ee(n,e)}function kd(t){return{hi:0,lo:t}}function Bs(t){return kd(t)}function Ss(t){return Bs(t)}function wo(t){return Xi(t)}function Pe(t){return Yi(t)}function Lt(t){const n=t,e=void 0;return new Ee(n,e)}function wd(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=Xo($),s=o+1|0;continue}else break}return new Pt(n)}function yd(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=xs($),s=o+1|0;continue}else break}return new Pt(n)}function Sd(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=$,s=o+1|0;continue}else break}return new Pt(n)}function Md(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=ri($),s=o+1|0;continue}else break}return new Pt(n)}function Cd(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=zp($),s=o+1|0;continue}else break}return new Pt(n)}function vd(t){const n=new Array(t.length),e=t.length;let s=0;for(;;){const o=s;if(o<e){const $=t[o];n[o]=Jp($),s=o+1|0;continue}else break}return new Pt(n)}function xd(t){if(t.length===0){const $=[];return new Pt($)}const e=new Array(t.length),s=t.length;let o=0;for(;;){const $=o;if($<s){const c=t[$];e[$]=ai(c),o=$+1|0;continue}else break}return new Pt(e)}function Id(t,n){Ot(t,n)}function Ld(t,n){Ot(t,n)}function vt(t,n){Ot(t,n)}function Pd(t,n){Ot(t,n)}function Gd(t,n){Ot(t,n)}function In(t,n){Ot(t,n)}function jd(t,n){Ot(t,n)}function Od(t,n){Ot(t,n)}function Ad(t,n){Ot(t,n)}function Ed(t,n){Ot(t,n)}function Rd(t,n){Ot(t,n)}function os(t,n){Ot(t,n)}function zd(t,n){Ot(t,n)}function Jd(t,n){Ot(t,n)}function qd(){return t=>1}function A$(t){return n=>n(t)}function Td(t,n){return e=>t(e)===1&&n(e)===1?1:0}function Bd(t){const n=[];return t(e=>(Id(n,e),1)),n}function Fd(t){const n=[];return t(e=>(Jd(n,e),1)),n}function E$(t){return V_(t)&255}function yo(t){return Rt(t)}function Hd(t){return t.lo===0?{hi:~t.hi+1|0,lo:0}:{hi:~t.hi,lo:~t.lo+1|0}}function hc(t,n,e){const s=t.hi,o=t.lo,$=o+e|0,c=$>>31,_=o>>31,i=e>>31,r=(_&i|~c&(_^i))&1;return{hi:(s+n|0)+r|0,lo:$}}function kc(t,n){return hc(t,n.hi,n.lo)}function wc(t,n){return n.lo===0?{hi:t.hi-n.hi|0,lo:t.lo}:hc(t,~n.hi,~n.lo+1|0)}function yc(t,n){const e=t.hi,s=t.lo,o=n.hi,$=n.lo,c=e,_=s,i=o,r=$,a=c>>>16|0,u=c&65535,l=_>>>16|0,p=_&65535,m=i>>>16|0,b=i&65535,g=r>>>16|0,f=r&65535,k=Math.imul(p,f)|0,w=k>>>16|0,v=k&65535,y=(w>>>0)+((Math.imul(l,f)|0)>>>0)|0,x=y>>>16|0,P=((y&65535)>>>0)+((Math.imul(p,g)|0)>>>0)|0,C=(x>>>0)+((P>>>16|0)>>>0)|0,O=P&65535,G=(C>>>0)+((Math.imul(u,f)|0)>>>0)|0,A=G>>>16|0,H=((G&65535)>>>0)+((Math.imul(l,g)|0)>>>0)|0,B=(A>>>0)+((H>>>16|0)>>>0)|0,K=((H&65535)>>>0)+((Math.imul(p,b)|0)>>>0)|0,Z=(B>>>0)+((K>>>16|0)>>>0)|0,F=K&65535;return{hi:(((((((((Z>>>0)+((Math.imul(a,f)|0)>>>0)|0)>>>0)+((Math.imul(u,g)|0)>>>0)|0)>>>0)+((Math.imul(l,b)|0)>>>0)|0)>>>0)+((Math.imul(p,m)|0)>>>0)|0)&65535)<<16|F,lo:O<<16|v}}function Nd(t,n){if(n.hi===0&&n.lo===0)return M();{const e=Gs(),s=t.hi,o=t.lo,$=n.hi,c=n.lo,_=e.div_s,i=_(o,s,c,$),r=e.get_high;return{hi:r(),lo:i}}}function Dd(t,n){if(n.hi===0&&n.lo===0)return M();{const e=Gs(),s=t.hi,o=t.lo,$=n.hi,c=n.lo,_=e.div_u,i=_(o,s,c,$),r=e.get_high;return{hi:r(),lo:i}}}function Ud(t,n){if(n.hi===0&&n.lo===0)return M();{const e=Gs(),s=t.hi,o=t.lo,$=n.hi,c=n.lo,_=e.rem_u,i=_(o,s,c,$),r=e.get_high;return{hi:r(),lo:i}}}function Vd(t){return{hi:~t.hi,lo:~t.lo}}function Sc(t,n){return{hi:t.hi&n.hi,lo:t.lo&n.lo}}function Mc(t,n){return{hi:t.hi|n.hi,lo:t.lo|n.lo}}function Cc(t,n){const e=n&63;if(e===0)return t;if(e<32){const s=t.hi,o=t.lo,$=s,c=o,_=$<<e|(c>>>(32-e|0)|0),i=c<<e;return{hi:_,lo:i}}else return{hi:t.lo<<(e-32|0),lo:0}}function Wd(t,n){const e=n&63;return e===0?t:e<32?{hi:t.hi>>>e|0,lo:t.lo>>>e|t.hi<<(32-e|0)}:{hi:0,lo:t.hi>>>(e-32|0)|0}}function Xd(t,n){const e=n&63;return e===0?t:e<32?{hi:t.hi>>e,lo:t.lo>>>e|t.hi<<(32-e|0)}:{hi:t.hi>>31,lo:t.hi>>(e-32|0)}}function vc(t){return Hd(t)}function Zt(t,n){return kc(t,n)}function Ge(t,n){return wc(t,n)}function Hn(t,n){return yc(t,n)}function fn(t,n){return Nd(t,n)}function xc(t,n){return Sc(t,n)}function R$(t,n){return Mc(t,n)}function Yd(t,n){return Xd(t,n)}function Rn(t,n){return Cc(t,n)}function z$(t,n){const e=t,s=n;return e.hi===s.hi&&e.lo===s.lo}function Fo(t,n){return Ki(t,n)}function Kd(t){return Zi(t)}function Qd(t){return Kd(t)}function gn(t,n){return kc(t,n)}function Ms(t,n){return wc(t,n)}function Tt(t,n){return yc(t,n)}function Zd(t,n){return Dd(t,n)}function t0(t,n){return Ud(t,n)}function J$(t){return t.lo}function Ho(t,n){return Qi(t,n)}function hn(t,n){const e=t,s=n;return e.hi===s.hi&&e.lo===s.lo}function zn(t,n){return Sc(t,n)}function n0(t,n){return Mc(t,n)}function e0(t){return Vd(t)}function je(t,n){return Cc(t,n)}function Nt(t,n){return Wd(t,n)}function q$(t){const n=t;return n.hi!==0?Math.clz32(n.hi):32+Math.clz32(n.lo)|0}function o0(t,n){const e=(t.acc>>>0)+((Math.imul(n,-1028477379)|0)>>>0)|0,s=17;t.acc=Math.imul(e<<s|(e>>>(32-s|0)|0),668265263)|0}function Ic(t,n){t.acc=(t.acc>>>0)+4|0,o0(t,n)}function Qn(t,n){Ic(t,n)}function s0(t,n){const e=n.length;let s=0;for(;;){const o=s;if(o<e){Ic(t,n.charCodeAt(o)),s=o+1|0;continue}else return}}function $0(t,n){s0(n,t)}function _0(t,n){Qn(n,t)}function So(t,n,e,s,o){if(o>=0&&s>=0&&(o+e|0)<=n.length&&(s+e|0)<=t.length){Ip(n,o,t,s,e);return}else{ln(`bounds check failed: dst_offset = ${xt(o)}, src_offset = ${xt(s)}, len = ${xt(e)}, dst.length = ${xt(n.length)}, self.length = ${xt(t.length)}`);return}}function c0(t,n,e,s,o){if((o+e|0)<=n.length&&(s+e|0)<=t.length){Lp(n,o,t,s,e);return}else{ln(`bounds check failed: dst_offset = ${xt(o)}, src_offset = ${xt(s)}, len = ${xt(e)}, dst.length = ${xt(n.length)}, self.length = ${xt(t.length)}`);return}}function Zn(t){return t!==t?0:t>=2147483647?2147483647:t<=-2147483648?-2147483648:t|0}function Lc(t){console.log(t)}function i0(t,n){if(n>=0&&n<t.length){d(t,n);const e=t[n];return tr(t,n,1),e}else return Sp(`index out of bounds: the len is from 0 to ${xt(t.length)} but the index is ${xt(n)}`)}function r0(t,n){const e=t.length;return n<e?t[n]:void 0}function a0(t,n){{const e=et(t,n(0));let s=1;for(;;){const o=s;if(o<t){d(e,o),e[o]=n(o),s=o+1|0;continue}else break}return e}}function u0(t){return nr(t)}function l0(t,n){n.method_0(n.self,String(t))}function eo(t,n){if(n>=0&&n<t.len){const e=t.bytes,s=t.start+n|0;return d(e,s),e[s]}else return Cp(`index out of bounds: the len is from 0 to ${xt(t.len)} but the index is ${xt(n)}`)}function p0(t,n,e){const s=t.length;let o;if(e===void 0)o=s;else{const _=e;o=_<0?s+_|0:_}const $=n<0?s+n|0:n;return $>=0&&$<=o&&o<=s?{bytes:t,start:$,len:o-$|0}:Mp()}function m0(t){const n=eo(t,0),e=eo(t,1),s=(n>>>0)+(e<<8>>>0)|0,o=eo(t,2),$=(s>>>0)+(o<<16>>>0)|0,c=eo(t,3);return($>>>0)+(c<<24>>>0)|0}function d0(t,n){return{elem_info:0|1<<t,data:[n]}}function Fs(t,n){if(t.elem_info&1<<n){const s=t.data,o=t.elem_info,$=Go(o&((1<<n>>>0)-1|0));return d(s,$),s[$]}else return}function f0(t,n,e,s){return{elem_info:0|1<<t|1<<e,data:t<e?[n,s]:[s,n]}}function b0(t,n,e){const s=t.data,o=s.length,$=o+1|0,c=t.elem_info,_=Go(c&((1<<n>>>0)-1|0)),i=et($,e);return So(s,i,_,0,0),So(s,i,o-_|0,_,_+1|0),{elem_info:t.elem_info|1<<n,data:i}}function g0(t,n){const e=t.data,s=e.length,o=t.elem_info,$=Go(o&((1<<n>>>0)-1|0)),c=et(s-1|0,e[0]);return So(e,c,$,0,0),So(e,c,(s-$|0)-1|0,$+1|0,$),{elem_info:t.elem_info^1<<n,data:c}}function Pc(t,n,e){const s=u0(t.data),o=t.elem_info,$=Go(o&((1<<n>>>0)-1|0));return d(s,$),s[$]=e,{elem_info:t.elem_info,data:s}}function h0(t,n,e){d(n,0),n[0]=1634760805,d(n,1),n[1]=1634760805,d(n,2),n[2]=1634760805,d(n,3),n[3]=1634760805,d(n,4),n[4]=857760878,d(n,5),n[5]=857760878,d(n,6),n[6]=857760878,d(n,7),n[7]=857760878,d(n,8),n[8]=2036477234,d(n,9),n[9]=2036477234,d(n,10),n[10]=2036477234,d(n,11),n[11]=2036477234,d(n,12),n[12]=1797285236,d(n,13),n[13]=1797285236,d(n,14),n[14]=1797285236,d(n,15),n[15]=1797285236,d(t,0),d(n,16),n[16]=t[0],d(t,0),d(n,17),n[17]=t[0],d(t,0),d(n,18),n[18]=t[0],d(t,0),d(n,19),n[19]=t[0],d(t,1),d(n,20),n[20]=t[1],d(t,1),d(n,21),n[21]=t[1],d(t,1),d(n,22),n[22]=t[1],d(t,1),d(n,23),n[23]=t[1],d(t,2),d(n,24),n[24]=t[2],d(t,2),d(n,25),n[25]=t[2],d(t,2),d(n,26),n[26]=t[2],d(t,2),d(n,27),n[27]=t[2],d(t,3),d(n,28),n[28]=t[3],d(t,3),d(n,29),n[29]=t[3],d(t,3),d(n,30),n[30]=t[3],d(t,3),d(n,31),n[31]=t[3],d(t,4),d(n,32),n[32]=t[4],d(t,4),d(n,33),n[33]=t[4],d(t,4),d(n,34),n[34]=t[4],d(t,4),d(n,35),n[35]=t[4],d(t,5),d(n,36),n[36]=t[5],d(t,5),d(n,37),n[37]=t[5],d(t,5),d(n,38),n[38]=t[5],d(t,5),d(n,39),n[39]=t[5],d(t,6),d(n,40),n[40]=t[6],d(t,6),d(n,41),n[41]=t[6],d(t,6),d(n,42),n[42]=t[6],d(t,6),d(n,43),n[43]=t[6],d(t,7),d(n,44),n[44]=t[7],d(t,7),d(n,45),n[45]=t[7],d(t,7),d(n,46),n[46]=t[7],d(t,7),d(n,47),n[47]=t[7],d(n,48),n[48]=e,d(n,49),n[49]=(e>>>0)+1|0,d(n,50),n[50]=(e>>>0)+2|0,d(n,51),n[51]=(e>>>0)+3|0,d(n,52),n[52]=0,d(n,53),n[53]=0,d(n,54),n[54]=0,d(n,55),n[55]=0,d(n,56),n[56]=0,d(n,57),n[57]=0,d(n,58),n[58]=0,d(n,59),n[59]=0,d(n,60),n[60]=0,d(n,61),n[61]=0,d(n,62),n[62]=0,d(n,63),n[63]=0}function dn(t){const n=t._0,e=t._1,s=t._2,o=t._3,$=(n>>>0)+(e>>>0)|0,c=o^$,_=c<<16|(c>>>16|0),i=(s>>>0)+(_>>>0)|0,r=e^i,a=r<<12|(r>>>20|0),u=($>>>0)+(a>>>0)|0,l=_^u,p=l<<8|(l>>>24|0),m=(i>>>0)+(p>>>0)|0,b=a^m,g=b<<7|(b>>>25|0);return{_0:u,_1:g,_2:m,_3:p}}function Gc(t,n,e){h0(t,n,e);let s=0;for(;;){const o=s;if(o<4){d(n,o);let $=n[o];const c=4+o|0;d(n,c);let _=n[c];const i=8+o|0;d(n,i);let r=n[i];const a=12+o|0;d(n,a);let u=n[a];const l=16+o|0;d(n,l);let p=n[l];const m=20+o|0;d(n,m);let b=n[m];const g=24+o|0;d(n,g);let f=n[g];const k=28+o|0;d(n,k);let w=n[k];const v=32+o|0;d(n,v);let y=n[v];const x=36+o|0;d(n,x);let S=n[x];const P=40+o|0;d(n,P);let C=n[P];const O=44+o|0;d(n,O);let G=n[O];const A=48+o|0;d(n,A);let T=n[A];const H=52+o|0;d(n,H);let B=n[H];const ct=56+o|0;d(n,ct);let K=n[ct];const Z=60+o|0;d(n,Z);let F=n[Z],N=0;for(;;){const p$=N;if(p$<4){const Ue=dn({_0:$,_1:p,_2:y,_3:T});$=Ue._0,p=Ue._1,y=Ue._2,T=Ue._3;const Ve=dn({_0:_,_1:b,_2:S,_3:B});_=Ve._0,b=Ve._1,S=Ve._2,B=Ve._3;const We=dn({_0:r,_1:f,_2:C,_3:K});r=We._0,f=We._1,C=We._2,K=We._3;const Xe=dn({_0:u,_1:w,_2:G,_3:F});u=Xe._0,w=Xe._1,G=Xe._2,F=Xe._3;const Ye=dn({_0:$,_1:b,_2:C,_3:F});$=Ye._0,b=Ye._1,C=Ye._2,F=Ye._3;const Ke=dn({_0:_,_1:f,_2:G,_3:T});_=Ke._0,f=Ke._1,G=Ke._2,T=Ke._3;const Qe=dn({_0:r,_1:w,_2:y,_3:B});r=Qe._0,w=Qe._1,y=Qe._2,B=Qe._3;const Ze=dn({_0:u,_1:p,_2:S,_3:K});u=Ze._0,p=Ze._1,S=Ze._2,K=Ze._3,N=p$+1|0;continue}else break}d(n,o),n[o]=$;const V=4+o|0;d(n,V),n[V]=_;const at=8+o|0;d(n,at),n[at]=r;const W=12+o|0;d(n,W),n[W]=u;const ot=16+o|0;d(n,ot),d(n,ot),n[ot]=(n[ot]>>>0)+(p>>>0)|0;const qt=20+o|0;d(n,qt),d(n,qt),n[qt]=(n[qt]>>>0)+(b>>>0)|0;const Te=24+o|0;d(n,Te),d(n,Te),n[Te]=(n[Te]>>>0)+(f>>>0)|0;const Be=28+o|0;d(n,Be),d(n,Be),n[Be]=(n[Be]>>>0)+(w>>>0)|0;const Fe=32+o|0;d(n,Fe),d(n,Fe),n[Fe]=(n[Fe]>>>0)+(y>>>0)|0;const He=36+o|0;d(n,He),d(n,He),n[He]=(n[He]>>>0)+(S>>>0)|0;const Ne=40+o|0;d(n,Ne),d(n,Ne),n[Ne]=(n[Ne]>>>0)+(C>>>0)|0;const De=44+o|0;d(n,De),d(n,De),n[De]=(n[De]>>>0)+(G>>>0)|0;const r$=48+o|0;d(n,r$),n[r$]=T;const a$=52+o|0;d(n,a$),n[a$]=B;const u$=56+o|0;d(n,u$),n[u$]=K;const l$=60+o|0;d(n,l$),n[l$]=F,s=o+1|0;continue}else return}}function k0(t){const n=a0(8,o=>m0(p0(t,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),e=et(64,0);return Gc(n,e,0),{buffer:e,seed:n,i:0,n:32,counter:0}}function w0(t){const n=t.i;if(n>>>0>=t.n>>>0)return;t.i=(n>>>0)+1|0;const e=n&31,s=t.buffer,o=Math.imul(e,2)|0;d(s,o);const $=Ss(s[o]),c=t.buffer,_=(Math.imul(e,2)|0)+1|0;d(c,_);const i=Ss(c[_]);return n0(je(i,32),$)}function y0(t){t.counter=(t.counter>>>0)+4|0,t.counter===16&&(c0(t.buffer,t.seed,8,56,0),t.counter=0),Gc(t.seed,t.buffer,t.counter),t.i=0,t.n=t.counter===12?28:32}function S0(t){return Math.round(t)}function M0(t,n,e){let s=t,o=e;t:for(;;){const $=s,c=o;switch($.$tag){case 1:{const _=$,i=_._0,r=_._1,a=_._2;return n===i?r:Q0(a,n)}case 0:{const _=$,i=_._0,r=_._1,a=_._2;return c===a&&n===i?r:void 0}default:{const i=$._0,a=c&31,u=Fs(i,a);if(u!==void 0){s=u,o=c>>>5|0;continue t}return}}}}function C0(t,n){const e=t;if(e!==void 0)return M0(e,n,Mo(n))}function jc(t,n,e,s,o,$){const _=e&31,r=$&31;if(_===r){let a;if(e>>>0<=127){const l={_0:t,_1:n};a=new yn(s,o,new ye(l,te))}else{const p=e>>>5|0;a=jc(t,n,p,s,o,$>>>5|0)}return new ee(d0(_,a))}else{let a,u;t:if(e>>>0<=127){const p=new yn(t,n,te),m=new yn(s,o,te);a=p,u=m;break t}else{const p=e,m=new Tn(t,n,p>>>5|0),b=$,g=new Tn(s,o,b>>>5|0);a=m,u=g;break t}return new ee(f0(_,a,r,u))}}function Oc(t,n,e,s){switch(t.$tag){case 1:{const o=t,$=o._0,c=o._1,_=o._2;if(n===$)return new yn(n,e,_);{const i=Nc(_,u=>u._0===n);let r;i===void 0?r=_:r=Dc(_,i);const a={_0:$,_1:c};return new yn(n,e,new ye(a,r))}}case 0:{const o=t,$=o._0,c=o._1,_=o._2;return s===_&&n===$?new Tn($,e,_):jc($,c,_,n,e,s)}default:{const $=t._0,_=s&31,i=Fs($,_);if(i===void 0){const r=s,a=new Tn(n,e,r>>>5|0);return new ee(b0($,_,a))}else{const l=Oc(i,n,e,s>>>5|0);return new ee(Pc($,_,l))}}}}function uo(t,n,e){const s=t;return s===void 0?new Tn(n,e,Mo(n)):Oc(s,n,e,Mo(n))}function Ac(t,n,e){switch(t.$tag){case 1:{const s=t,o=s._0,$=s._1,c=s._2;if(o===n){if(c.$tag===0)return;{const _=c,i=_._0,r=i._0,a=i._1,u=_._1;return new yn(r,a,u)}}else{const _=Nc(c,i=>i._0===n);if(_===void 0)return t;{const r=_;return new yn(o,$,Dc(c,r))}}}case 0:{const s=t,o=s._0,$=s._2;return e===$&&n===o?void 0:t}default:{const o=t._0,c=e&31,_=Fs(o,c);if(_===void 0)return t;{const u=Ac(_,n,e>>>5|0);let l,p;t:{n:{if(o.data.length===1){if(u===void 0)return;p=u;break n}else if(u===void 0)l=g0(o,c);else{p=u;break n}break t}l=Pc(o,c,p)}t:{const m=l.data;if(m.length===1){const b=m[0];if(b.$tag===0){const g=b,f=g._0,k=g._1,w=g._2,v=l.elem_info,y=er(v),x=w;return new Tn(f,k,x<<5|y)}else break t}else break t}return new ee(l)}}}}function v0(t,n){const e=t;if(e!==void 0)return Ac(e,n,Mo(n))}function Ec(t){switch(t.$tag){case 1:{const n=t,e=n._0,s=n._1,o=n._2;return Td(A$({_0:e,_1:s}),K0(o))}case 0:{const n=t,e=n._0,s=n._1;return A$({_0:e,_1:s})}default:{const s=t._0.data;return o=>{const $=s.length;let c=0;for(;;){const _=c;if(_<$){const i=s[_];if(Ec(i)(o)===1){c=_+1|0;continue}else return 0}else return 1}}}}}function x0(t){const n=t;return n===void 0?qd():Ec(n)}function I0(t){const n=x0(t);return e=>n(s=>e(s._1))}function Mo(t){return on(t)|-1073741824}function No(t,n){let e=1,s=0,o=0;for(;;){const $=o;if($<n){const c=t.str,_=t.start+$|0;c.charCodeAt(_)===10?(e=e+1|0,s=0):s=s+1|0,o=$+1|0;continue}else break}return{line:e,column:s}}function L0(t,n){const e=t.offset+n|0,s=Uo(t.input,e),o=65533;return new jo(new Re(No(t.input,e),s===-1?o:s))}function Ft(t,n){const e=t.offset+n|0,s=Uo(t.input,e),o=65533;return new Oo(new Re(No(t.input,e),s===-1?o:s))}function Hs(t,n){const e=t.offset+n|0,s=Uo(t.input,e),o=65533;return new ze(new Re(No(t.input,e),s===-1?o:s))}function Do(t,n){const e=t.offset+n|0,s=Uo(t.input,e),o=65533;return new vn(new Re(No(t.input,e),s===-1?o:s))}function P0(t,n){return new __(new q({_0:t,_1:n}))}function G0(t,n){return new i_(new q({_0:t,_1:n}))}function j0(t,n){return new r_(new q({_0:t,_1:n}))}function O0(t,n){return new a_(new q({_0:t,_1:n}))}function A0(t,n){return new u_(new q({_0:t,_1:n}))}function Rc(t,n){const e=t;let s=0,o=e.length;for(;;){const $=s,c=o;if($<c){const _=($+c|0)/2|0,i=Ap(e,_),r=i._0,a=i._1;if(n<r){o=_;continue}else if(n>a){s=_+1|0;continue}else return!0}else return!1}}function gt(t){if(t.offset<t.end_offset){const n=t.input,e=t.offset,s=n.str,o=n.start+e|0,$=s.charCodeAt(o);if(t.offset=t.offset+1|0,$>=55296&&$<=56319&&t.offset<t.end_offset){const c=t.input,_=t.offset,i=c.str,r=c.start+_|0,a=i.charCodeAt(r);if(a>=56320&&a<=57343)return t.offset=t.offset+1|0,(($<<10)+a|0)-56613888|0}return $}else return-1}function ce(t){t:for(;;)n:{e:{const n=gt(t);if(n===-1)break;{const s=n;switch(s){case 9:break e;case 32:break e;case 10:break e;case 13:break e;default:{if(s>127&&Rc(B_,s))break n;t.offset=t.offset-1|0;break t}}}}break n}}function E0(t,n){return{offset:0,input:t,end_offset:t.end-t.start|0,remaining_available_depth:n}}function Wt(t,n){if(t.offset<t.end_offset){const e=t.input,s=t.offset,o=e.str,$=e.start+s|0,c=o.charCodeAt($);return t.offset=t.offset+1|0,n!==c?Ft(t,-1):new js(void 0)}else return new Oo(Gt)}function Ln(t,n,e){const s=Xc(t.input,n,e);if(!ss(s,{str:b$,start:0,end:b$.length})&&!ss(s,{str:g$,start:0,end:g$.length})&&!ss(s,{str:h$,start:0,end:h$.length})){let o,$;t:{n:{const c=Uc(s);let _;if(c.$tag===1)_=c._0;else{$=c._0;break n}o=new Os(_);break t}o=new Ao($)}t:if(o.$tag===1){const _=o._0;if(Le(_,or)&&fs(_,sr))return{_0:Qd(_),_1:void 0};break t}else break t;t:if(st(s.str,1,s.start,s.end)){if(j(s.str,h(s.str,0,s.start,s.end))===45)return{_0:Me,_1:s};break t}else break t;return{_0:Ce,_1:s}}else{let o,$;t:{n:{const c=I2(s);let _;if(c.$tag===1)_=c._0;else{$=c._0;break n}o=new Sn(_);break t}o=new As($)}if(o.$tag===1)return{_0:o._0,_1:void 0};t:if(st(s.str,1,s.start,s.end)){if(j(s.str,h(s.str,0,s.start,s.end))===45)return{_0:Me,_1:s};break t}else break t;return{_0:Ce,_1:s}}}function zc(t,n){for(;;)t:{const e=gt(t);if(e===-1)return Ln(t,n,t.offset);{const o=e;if(o>=48&&o<=57)break t;return t.offset=t.offset-1|0,Ln(t,n,t.offset)}}}function R0(t,n){const e=gt(t);if(e===-1)return new ze(Gt);{const o=e;return o>=48&&o<=57?new Et(zc(t,n)):(t.offset=t.offset-1|0,Hs(t,0))}}function Ns(t,n){t:{const o=gt(t);if(o===-1)return new ze(Gt);{const c=o;switch(c){case 43:break t;case 45:break t;default:return c>=48&&c<=57?new Et(zc(t,n)):(t.offset=t.offset-1|0,Hs(t,0))}}}const e=R0(t,n);let s;if(e.$tag===1)s=e._0;else return e;return new Et(s)}function z0(t,n){for(;;)t:{n:{const o=gt(t);if(o===-1)return new Et(Ln(t,n,t.offset));{const c=o;switch(c){case 101:break n;case 69:break n;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Et(Ln(t,n,t.offset))}}}}const e=Ns(t,n);let s;if(e.$tag===1)s=e._0;else return e;return new Et(s)}}function Jc(t,n){const e=gt(t);if(e===-1)return new ze(Gt);{const o=e;return o>=48&&o<=57?z0(t,n):Hs(t,-1)}}function T$(t,n){for(;;)t:{n:{const o=gt(t);if(o===-1)return new Et(Ln(t,n,t.offset));{const c=o;switch(c){case 46:{const _=Jc(t,n);let i;if(_.$tag===1)i=_._0;else return _;return new Et(i)}case 101:break n;case 69:break n;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Et(Ln(t,n,t.offset))}}}}const e=Ns(t,n);let s;if(e.$tag===1)s=e._0;else return e;return new Et(s)}}function J0(t,n){let e=0,s=0;for(;;){const o=s;if(o<n){const $=gt(t);if($===-1)return new p_(Gt);{const _=$;if(_>=65){const i=((_&-33)-65|0)+10|0;if(i>15){const r=Ft(t,-1);if(r.$tag===1)r._0;else return r}e=e<<4|i}else if(_>=48){const i=_-48|0;if(i>9){const r=Ft(t,-1);if(r.$tag===1)r._0;else return r}e=e<<4|i}else{const i=Ft(t,-1);if(i.$tag===1)i._0;else return i}}s=o+1|0;continue}else break}return new m_(e)}function B$(t,n){const e=t._2,s=t._1,o=t._0;if(e.val>0&&n>e.val){const c=s.input.str,i=s.input.start;_e(o,c,i+e.val|0,n-e.val|0);return}else return}function Ds(t){const n=pn(),e={val:t.offset},s={_0:n,_1:t,_2:e};t:for(;;)n:{e:{o:{const $=gt(t);if($===-1)return new as(Gt);{const _=$;switch(_){case 34:{B$(s,t.offset-1|0);break t}case 10:break o;case 13:break o;case 92:{B$(s,t.offset-1|0);const i=gt(t);if(i===-1)return new as(Gt);switch(i){case 98:{nt(n,8);break}case 102:{nt(n,12);break}case 110:{nt(n,10);break}case 114:{nt(n,13);break}case 116:{nt(n,9);break}case 34:{nt(n,34);break}case 92:{nt(n,92);break}case 47:{nt(n,47);break}case 117:{const u=J0(t,4);let l;if(u.$tag===1)l=u._0;else return u;nt(n,l);break}default:{const u=Ft(t,-1);if(u.$tag===1)u._0;else return u}}e.val=t.offset;break}default:if(_<32){const i=Ft(t,-1);if(i.$tag===1)i._0;else return i}else break n}}break e}const o=Ft(t,-1);if(o.$tag===1)o._0;else return o}break n}return new d_(n.val)}function F$(t,n){t:{const e=gt(t);if(e===-1)return new Et(Ln(t,n,t.offset));{const o=e;switch(o){case 46:return Jc(t,n);case 101:break t;case 69:break t;default:{if(o>=48&&o<=57){t.offset=t.offset-1|0;const $=Ft(t,0);if($.$tag===1)$._0;else return $}return t.offset=t.offset-1|0,new Et(Ln(t,n,t.offset))}}}}return Ns(t,n)}function Cs(t,n){for(;;)t:{n:{e:{const e=gt(t);if(e===-1)return new vn(Gt);{const o=e;if(o===9)break e;if(o===32)break e;if(o===10)break e;if(o===13)break e;if(o===123)return new dt(ir);if(o===91)return new dt(rr);if(o===93){if(n)return new dt(b_);{const $=Ft(t,-1);if($.$tag===1)$._0;else return $}}else if(o===110){const $=Wt(t,117);if($.$tag===1)$._0;else return $;const c=Wt(t,108);if(c.$tag===1)c._0;else return c;const _=Wt(t,108);if(_.$tag===1)_._0;else return _;return new dt($r)}else if(o===116){const $=Wt(t,114);if($.$tag===1)$._0;else return $;const c=Wt(t,117);if(c.$tag===1)c._0;else return c;const _=Wt(t,101);if(_.$tag===1)_._0;else return _;return new dt(_r)}else if(o===102){const $=Wt(t,97);if($.$tag===1)$._0;else return $;const c=Wt(t,108);if(c.$tag===1)c._0;else return c;const _=Wt(t,115);if(_.$tag===1)_._0;else return _;const i=Wt(t,101);if(i.$tag===1)i._0;else return i;return new dt(cr)}else if(o===45){const $=gt(t);if($===-1)return new vn(Gt);{const _=$;if(_===48){const i=F$(t,t.offset-2|0);let r;if(i.$tag===1)r=i._0;else return i;const a=r._0,u=r._1;return new dt(new pe(a,so(u,l=>co(l))))}else{if(_>=49&&_<=57){const r=T$(t,t.offset-2|0);let a;if(r.$tag===1)a=r._0;else return r;const u=a._0,l=a._1;return new dt(new pe(u,so(l,p=>co(p))))}const i=Ft(t,-1);if(i.$tag===1)i._0;else return i}}}else if(o===48){const $=F$(t,t.offset-1|0);let c;if($.$tag===1)c=$._0;else return $;const _=c._0,i=c._1;return new dt(new pe(_,so(i,r=>co(r))))}else if(o>=49&&o<=57){const $=T$(t,t.offset-1|0);let c;if($.$tag===1)c=$._0;else return $;const _=c._0,i=c._1;return new dt(new pe(_,so(i,r=>co(r))))}else if(o===34){const $=Ds(t);let c;if($.$tag===1)c=$._0;else return $;return new dt(new Eo(c))}else{if(o>127&&Rc(B_,o))break t;const c=-(o<=65535?1:2)|0,_=Ft(t,c);if(_.$tag===1)_._0;else return _}}break n}break t}break t}}function q0(t){ce(t);const n=gt(t);if(n===-1)return new vn(Gt);switch(n){case 93:return new dt(b_);case 44:return new dt(g_);default:return Do(t,-1)}}function T0(t){ce(t);const n=gt(t);if(n===-1)return new vn(Gt);switch(n){case 125:return new dt(f_);case 44:return new dt(g_);default:return Do(t,-1)}}function B0(t){ce(t);const n=gt(t);return n===-1?new Oo(Gt):n===58?new js(void 0):Ft(t,-1)}function F0(t){ce(t);const n=gt(t);if(n===-1)return new vn(Gt);switch(n){case 125:return new dt(f_);case 34:{const o=Ds(t);let $;if(o.$tag===1)$=o._0;else return o;return new dt(new Eo($))}default:return Do(t,-1)}}function H0(t){ce(t);const n=gt(t);if(n===-1)return new vn(Gt);if(n===34){const o=Ds(t);let $;if(o.$tag===1)$=o._0;else return o;return new dt(new Eo($))}else return Do(t,-1)}function qc(t){const n=Cs(t,!1);let e;if(n.$tag===1)e=n._0;else return n;return Tc(t,e)}function Tc(t,n){t:switch(n.$tag){case 0:return new Kt(mr);case 1:return new Kt(n_);case 2:return new Kt(e_);case 3:{const e=n,s=e._0,o=e._1;return new Kt(new Ee(s,o))}case 4:{const s=n._0;return new Kt(new z(s))}case 5:return D0(t);case 7:return N0(t);case 8:break t;case 6:break t;default:break t}return new Kt(bo())}function N0(t){if(t.remaining_available_depth<=0)return new jo($_);t.remaining_available_depth=t.remaining_available_depth-1|0;const n=[];let e;const s=Cs(t,!0);let o;if(s.$tag===1)o=s._0;else return s;let $=o;t:for(;;){const c=$;if(c.$tag===8){t.remaining_available_depth=t.remaining_available_depth+1|0,e=new Pt(n);break}else{const _=Tc(t,c);let i;if(_.$tag===1)i=_._0;else return _;Ed(n,i);const r=q0(t);let a;if(r.$tag===1)a=r._0;else return r;switch(a.$tag){case 9:{const u=Cs(t,!1);if(u.$tag===1)$=u._0;else return u;continue t}case 8:{t.remaining_available_depth=t.remaining_available_depth+1|0,e=new Pt(n);break t}default:{e=bo();break t}}}}return new Kt(e)}function D0(t){if(t.remaining_available_depth<=0)return new jo($_);t.remaining_available_depth=t.remaining_available_depth-1|0;const n=X_(8);let e;const s=F0(t);let o;if(s.$tag===1)o=s._0;else return s;let $=o;t:for(;;){const c=$;switch(c.$tag){case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,e=new E(n);break t}case 4:{const i=c._0,r=B0(t);if(r.$tag===1)r._0;else return r;const a=qc(t);let u;if(a.$tag===1)u=a._0;else return a;L(n,i,u);const l=T0(t);let p;if(l.$tag===1)p=l._0;else return l;switch(p.$tag){case 9:{const m=H0(t);if(m.$tag===1)$=m._0;else return m;continue t}case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,e=new E(n);break t}default:{e=bo();break t}}}default:{e=bo();break t}}}return new Kt(e)}function Bc(t,n){const e=E0(t,n),s=qc(e);let o;if(s.$tag===1)o=s._0;else return s;return ce(e),e.offset>=e.end_offset?new Kt(o):L0(e,0)}function H$(t,n){const e=pn(t.length);return z2(t)(o=>{switch(o){case 34:{tt(e,'\\"');break}case 92:{tt(e,"\\\\");break}case 47:{n?tt(e,"\\/"):nt(e,o);break}case 10:{tt(e,"\\n");break}case 13:{tt(e,"\\r");break}case 8:{tt(e,"\\b");break}case 9:{tt(e,"\\t");break}default:{const $=o;$===12?tt(e,"\\f"):$<32?(tt(e,"\\u00"),tt(e,Qp($&255))):nt(e,o)}}return 1}),e.val}function Xn(t,n){return n===0?"":`
${B2(" ",Math.imul(n,t)|0)}`}function vs(t,n,e){const s=t._2,o=t._1,$=t._0;switch(n.$tag){case 6:{const _=n._0;if(_.size===0){tt(o,"{}");return}nt(o,123),tt(o,Xn(e+1|0,s));const i={val:!0};fd(_)((a,u)=>(i.val?i.val=!1:(nt(o,44),tt(o,Xn(e+1|0,s))),nt(o,34),tt(o,H$(a,$)),nt(o,34),s===0?nt(o,58):tt(o,": "),vs(t,u,e+1|0),1)),tt(o,Xn(e,s)),nt(o,125);return}case 5:{const _=n._0;if(_.length===0){tt(o,"[]");return}nt(o,91),tt(o,Xn(e+1|0,s));const i=_.length;let r=0;for(;;){const a=r;if(a<i){const u=_[a];a>0&&(nt(o,44),tt(o,Xn(e+1|0,s))),vs(t,u,e+1|0),r=a+1|0;continue}else break}tt(o,Xn(e,s)),nt(o,93);return}case 4:{const _=n._0;nt(o,34),tt(o,H$(_,$)),nt(o,34);return}case 3:{const c=n,_=c._0,i=c._1;if(i===void 0){Kp(o,_);return}else{tt(o,i);return}}case 1:{tt(o,"true");return}case 2:{tt(o,"false");return}default:{tt(o,"null");return}}}function D(t,n,e){const s=pn();return vs({_0:n,_1:s,_2:e},t,0),s.val}function ae(t){if(t.$tag===3){const e=t._0;return new Es(e)}else return ro}function lo(t){if(t.$tag===4)return t._0}function Fc(t){if(t.$tag===5){const e=t._0;return new k_(e)}else return ar}function Hc(t){if(t.$tag===6)return t._0}function U0(t,n){return Y2(t,n)}function V0(t,n){return Is(t,n)}function W0(t,n){let e;return e=h_,U0(t,e)}function X0(t,n){let e;return e=h_,V0(t,e)}function Y0(t,n){switch(t.$tag){case 1:return new rs(!0);case 2:return new rs(!1);default:return O0(n,"Bool::from_json: expected boolean")}}function kn(t,n){t:if(t.$tag===3){const s=t._0;if(s!==Ce)if(s!==Me){if(s>2147483647||s<-2147483648){const o=G0(n,"Int::from_json: overflow");if(o.$tag===1)o._0;else return o}return new c_(Zn(s))}else break t;else break t}else break t;return P0(n,"Int::from_json: expected number")}function oo(t,n){t:switch(t.$tag){case 4:switch(t._0){case"NaN":return new le(dr);case"Infinity":return new le(fr);case"-Infinity":return new le(br);default:break t}case 3:{const s=t._0;if(s!==Ce&&s!==Me)return new le(Math.fround(s));break t}default:break t}return j0(n,"Float::from_json: expected number")}function Qt(t,n){if(t.$tag===4){const s=t._0;return new l_(s)}else return A0(n,"String::from_json: expected string")}function K0(t){return e=>{let s=t;for(;;){const o=s;if(o.$tag===0)return 1;{const $=o,c=$._0,_=$._1;if(e(c)===0)return 0;s=_;continue}}}}function Q0(t,n){let e=t;for(;;){const s=e;if(s.$tag===0)return;{const o=s,$=o._0,c=$._0,_=$._1,i=o._1;if(c===n)return _;e=i;continue}}}function Nc(t,n){let e=t,s=0;for(;;){const o=e,$=s;if(o.$tag===0)return;{const c=o,_=c._0,i=c._1;if(n(_))return $;e=i,s=$+1|0;continue}}}function Dc(t,n){if(t.$tag===0)return te;if(n<0)return t;if(n===0)return t._1;{const e=t,s=e._0,o=e._1,$=new ye(s,te);let c=$,_=o,i=n-1|0;for(;;){const r=c,a=_,u=i;if(a.$tag===0)break;if(r.$tag===1){const l=r,p=a,m=p._0,b=p._1;if(u===0){l._1=b;break}else{l._1=new ye(m,te),c=l._1,_=b,i=u-1|0;continue}}else{M();break}}return $}}function Z0(t,n){return Math.pow(t,n)}function so(t,n){if(t!==void 0)return n(t)}function t2(t){for(;;){const n=w0(t);if(n!==void 0)return n;y0(t)}}function n2(t){return{self:k0(t),method_0:t2}}function e2(t){return n2(ur)}function N$(t,n){const e=zn(t,Zo),s=Nt(t,32),o=zn(n,Zo),$=Nt(n,32),c=Tt(e,o),_=gn(Tt(s,o),Nt(c,32)),i=gn(Tt(e,$),zn(_,Zo));return{hi:gn(gn(Tt(s,$),Nt(_,32)),Nt(i,32)),lo:Tt(t,n)}}function o2(t,n){if(hn(n,it)){const o=t;return o.method_0(o.self)}else if(hn(zn(n,Ms(n,Mt)),it)){const o=t;return zn(o.method_0(o.self),Ms(n,Mt))}const e=t;let s=N$(e.method_0(e.self),n);if(bs(s.lo,n)){const o=t0(e0(n),n);for(;bs(s.lo,o);){const $=t;s=N$($.method_0($.self),n);continue}}return s.hi}function s2(t,n){if(n===0){const e=t;return J$(e.method_0(e.self))}return J$(o2(t,Ss(n)))}function $2(t,n){if(n===0){const e=t;return V_(Nt(e.method_0(e.self),33))}else return s2(t,n)}function _2(t){const n=t;return wo(Nt(je(n.method_0(n.self),11),11))/wo(je(Mt,53))}function c2(t,n){{t:{let e;n:{let s;e:{let o;o:if(st(t.str,2,t.start,t.end))if(j(t.str,h(t.str,0,t.start,t.end))===48)switch(j(t.str,h(t.str,1,t.start,t.end))){case 120:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 88:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 111:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,s={str:_,start:r,end:t.end};break e}case 79:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,s={str:_,start:r,end:t.end};break e}case 98:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,e={str:_,start:r,end:t.end};break n}case 66:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,e={str:_,start:r,end:t.end};break n}default:break t}else break t;else break t;return new me({_0:16,_1:o,_2:!0})}return new me({_0:8,_1:s,_2:!0})}return new me({_0:2,_1:e,_2:!0})}return new me({_0:10,_1:t,_2:!1})}}function po(){return new w_(new an(J_))}function $o(){return new Ao(new an(J_))}function i2(){return new y_(new an(se))}function ue(){return new Ao(new an(se))}function Co(){return new As(new an(se))}function r2(){return new M_(new an(se))}function D$(){return new C_(new an(se))}function U$(){return new v_(new an(se))}function a2(t,n){return n?t===10?fn(ns,kt):t===16?fn(ns,d$):fn(ns,Rt(t)):Zt(t===10?fn(ts,kt):t===16?fn(ts,d$):fn(ts,Rt(t)),Mt)}function Uc(t,n){if(Gp(t,{str:k$,start:0,end:k$.length})){let e,s;t:{n:{const p=Xc(t,0,void 0);if(st(p.str,1,p.start,p.end))switch(j(p.str,h(p.str,0,p.start,p.end))){case 43:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,e={_0:!1,_1:{str:b,start:f,end:p.end}};break}case 45:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,e={_0:!0,_1:{str:b,start:f,end:p.end}};break}default:{s=p;break n}}else{s=p;break n}break t}e={_0:!1,_1:s}}const o=e._0,$=e._1,c=c2($);let _;if(c.$tag===1)_=c._0;else return c;const i=_._0,r=_._1,a=_._2,u=a2(i,o);let l;if(st(r.str,1,r.start,r.end)){const p=j(r.str,h(r.str,0,r.start,r.end));if(p>=48&&p<=57)l=!0;else if(p>=97&&p<=122)l=!0;else if(p>=65&&p<=90)l=!0;else if(st(r.str,2,r.start,r.end))if(p===95){const m=j(r.str,h(r.str,1,r.start,r.end));l=m>=48&&m<=57||m>=97&&m<=122?!0:m>=65&&m<=90}else l=!1;else l=!1}else l=!1;if(l){let p,m=r,b=it,g=a;for(;;){const f=m,k=b,w=g;let v,y,x;t:if(Cn(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95){const O=ue();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,G=h(f.str,1,f.start,f.end);let A;G===void 0?A=f.end:A=G;const H={str:O,start:A,end:f.end};v=k,y=H,x=C;break t}}else if(st(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95)if(w===!1){const O=ue();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,G=h(f.str,1,f.start,f.end);let A;G===void 0?A=f.end:A=G,m={str:O,start:A,end:f.end},g=!1;continue}else{const O=f.str,G=h(f.str,1,f.start,f.end);let A;G===void 0?A=f.end:A=G;const H={str:O,start:A,end:f.end};v=k,y=H,x=C;break t}}else{p=k;break}const S=x;let P;if(S>=48&&S<=57)P=S-48|0;else if(S>=97&&S<=122)P=S+-87|0;else if(S>=65&&S<=90)P=S+-55|0;else{const C=i2();if(C.$tag===1)P=C._0;else return C}if(P<i)if(o)if(fs(v,u)){const C=Ge(Hn(v,Rt(i)),Rt(P));if(Le(C,v)){m=y,b=C,g=!0;continue}else{const O=$o();if(O.$tag===1){p=O._0;break}else return O}}else{const C=$o();if(C.$tag===1){p=C._0;break}else return C}else if(Ro(v,u)){const C=Zt(Hn(v,Rt(i)),Rt(P));if(fs(C,v)){m=y,b=C,g=!0;continue}else{const O=$o();if(O.$tag===1){p=O._0;break}else return O}}else{const C=$o();if(C.$tag===1){p=C._0;break}else return C}else{const C=ue();if(C.$tag===1){p=C._0;break}else return C}}return new Os(p)}else return ue()}else return ue()}function u2(t,n){const e=Uc(t);let s;if(e.$tag===1)s=e._0;else return e;if(Ro(s,Rt(-2147483648))||N_(s,Rt(2147483647))){const o=po();if(o.$tag===1)o._0;else return o}return new S_(En(s))}function l2(t){let n;if(st(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 43:{const u=t.str,l=h(t.str,1,t.start,t.end);let p;l===void 0?p=t.end:p=l,n={str:u,start:p,end:t.end};break}case 45:{const u=t.str,l=h(t.str,1,t.start,t.end);let p;l===void 0?p=t.end:p=l,n={str:u,start:p,end:t.end};break}default:n=t}else n=t;let e,s;t:{n:{let a;e:{o:{let u;_:{s:{let l;$:if(st(n.str,2,n.start,n.end))if(j(n.str,h(n.str,0,n.start,n.end))===48)switch(j(n.str,h(n.str,1,n.start,n.end))){case 120:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,l={str:b,start:f,end:n.end};break $}case 88:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,l={str:b,start:f,end:n.end};break $}case 111:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,u={str:b,start:f,end:n.end};break s}case 79:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,u={str:b,start:f,end:n.end};break s}case 98:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,a={str:b,start:f,end:n.end};break o}case 66:{const b=n.str,g=h(n.str,2,n.start,n.end);let f;g===void 0?f=n.end:f=g,a={str:b,start:f,end:n.end};break o}default:{s=n;break n}}else{s=n;break n}else{s=n;break n}e={_0:l,_1:!0,_2:!0};break _}e={_0:u,_1:!0,_2:!1}}break e}e={_0:a,_1:!0,_2:!1}}break t}e={_0:s,_1:!1,_2:!1}}const o=e._0,$=e._1,c=e._2;let _=o,i=$,r=!1;for(;;){const a=_,u=i,l=r;let p,m,b;t:{if(Cn(a.str,0,a.start,a.end))return!0;if(Cn(a.str,1,a.start,a.end)){const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=l;break t}}else{const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95){if(u===!1)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,_={str:f,start:w,end:a.end},i=!1,r=!0;continue}}else{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=l;break t}}}if(m>=48&&m<=57||c&&(m>=97&&m<=102||m>=65&&m<=70)){_=p,i=!0,r=!1;continue}else{if(b)return!1;_=p,i=!1,r=!1;continue}}}function p2(){return{digits:Wi(800),digits_num:0,decimal_point:0,negative:!1,truncated:!1}}function Us(t){for(;;){let n;if(t.digits_num>0){const e=t.digits,s=t.digits_num-1|0;d(e,s),n=e[s]===0}else n=!1;if(n){t.digits_num=t.digits_num-1|0;continue}else break}if(t.digits_num===0){t.decimal_point=0;return}else return}function m2(t){const n=p2();let e=!1,s=!1,o;t:{n:{if(st(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r;const l={str:i,start:a,end:t.end};n.negative=!0,o=l;break}case 43:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r,o={str:i,start:a,end:t.end};break}default:break n}else break n;break t}o=t}let $,c=o;for(;;){const _=c;if(st(_.str,1,_.start,_.end)){const i=j(_.str,h(_.str,0,_.start,_.end));if(i===95){const r=_.str,a=h(_.str,1,_.start,_.end);let u;a===void 0?u=_.end:u=a,c={str:r,start:u,end:_.end};continue}else if(i===46){const r=_.str,a=h(_.str,1,_.start,_.end);let u;a===void 0?u=_.end:u=a;const p={str:r,start:u,end:_.end};if(e){const m=D$();if(m.$tag===1){$=m._0;break}else return m}else{e=!0,n.decimal_point=n.digits_num,c=p;continue}}else if(i>=48&&i<=57){const r=_.str,a=h(_.str,1,_.start,_.end);let u;a===void 0?u=_.end:u=a;const p={str:r,start:u,end:_.end};if(s=!0,i===48&&n.digits_num===0){n.decimal_point=n.decimal_point-1|0,c=p;continue}if(n.digits_num<n.digits.length){const m=n.digits,b=n.digits_num;d(m,b),m[b]=(i-48|0)&255,n.digits_num=n.digits_num+1|0}else i!==48&&(n.truncated=!0);c=p;continue}else{$=_;break}}else{$=_;break}}if(s){e||(n.decimal_point=n.digits_num);let _,i;t:{n:{if(st($.str,1,$.start,$.end))switch(j($.str,h($.str,0,$.start,$.end))){case 101:{const l=$.str,p=h($.str,1,$.start,$.end);let m;p===void 0?m=$.end:m=p,i={str:l,start:m,end:$.end};break n}case 69:{const l=$.str,p=h($.str,1,$.start,$.end);let m;p===void 0?m=$.end:m=p,i={str:l,start:m,end:$.end};break n}default:_=$}else _=$;break t}let r=1,a;if(st(i.str,1,i.start,i.end))switch(j(i.str,h(i.str,0,i.start,i.end))){case 43:{const l=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p,a={str:l,start:m,end:i.end};break}case 45:{const l=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p;const g={str:l,start:m,end:i.end};r=-1,a=g;break}default:a=i}else a=i;n:{e:{if(st(a.str,1,a.start,a.end)){const l=j(a.str,h(a.str,0,a.start,a.end));if(l>=48&&l<=57){let p=0,m,b=a;for(;;){const g=b;if(st(g.str,1,g.start,g.end)){const f=j(g.str,h(g.str,0,g.start,g.end));if(f===95){const k=g.str,w=h(g.str,1,g.start,g.end);let v;w===void 0?v=g.end:v=w,b={str:k,start:v,end:g.end};continue}else if(f>=48&&f<=57){const k=g.str,w=h(g.str,1,g.start,g.end);let v;w===void 0?v=g.end:v=w;const x={str:k,start:v,end:g.end};p=(Math.imul(p,10)|0)+(f-48|0)|0,b=x;continue}else{m=g;break}}else{m=g;break}}n.decimal_point=n.decimal_point+(Math.imul(r,p)|0)|0,_=m}else break e}else break e;break n}const u=D$();if(u.$tag===1)_=u._0;else return u}}return Cn(_.str,0,_.start,_.end)?(Us(n),new x_(n)):U$()}else return U$()}function d2(t){return m2(t)}function f2(t){let n,e;t:{n:{if(st(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,n={_0:!1,_1:{str:c,start:i,end:t.end}};break}case 43:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,e={str:c,start:i,end:t.end};break n}default:{e=t;break n}}else{e=t;break n}break t}n={_0:!0,_1:e}}const s=n._0,o=n._1;t:{let $;n:{e:if(Cn(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 110:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break e;case 78:break e;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break e;case 78:break e;default:break t}default:break t}case 78:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break e;case 78:break e;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break e;case 78:break e;default:break t}default:break t}case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}default:break t}default:break t}else if(st(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let u;a===void 0?u=o.end:u=a,$={str:r,start:u,end:o.end};break n}default:break t}default:break t}default:break t}else break t;return new Sn(gp)}n:{e:{if(Cn($.str,0,$.start,$.end))break e;if(Cn($.str,5,$.start,$.end))switch(j($.str,h($.str,0,$.start,$.end))){case 105:switch(j($.str,h($.str,1,$.start,$.end))){case 110:switch(j($.str,h($.str,2,$.start,$.end))){case 105:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}case 73:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}default:break n}case 78:switch(j($.str,h($.str,2,$.start,$.end))){case 105:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}case 73:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}default:break n}default:break n}case 73:switch(j($.str,h($.str,1,$.start,$.end))){case 110:switch(j($.str,h($.str,2,$.start,$.end))){case 105:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}case 73:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}default:break n}case 78:switch(j($.str,h($.str,2,$.start,$.end))){case 105:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}case 73:switch(j($.str,h($.str,3,$.start,$.end))){case 116:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}case 84:switch(j($.str,h($.str,4,$.start,$.end))){case 121:break e;case 89:break e;default:break n}default:break n}default:break n}default:break n}default:break n}else break n}return s?new Sn(Ce):new Sn(Me)}return Co()}return Co()}function b2(t,n,e){let s=n,o=0,$=t;for(;;){const c=$;if(st(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const l={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,s=e(_-48|0,s);else if(_!==95)break;$=l;continue}else break}return{_0:$,_1:s,_2:o}}function g2(t,n,e){let s=n,o=0,$=t;for(;;){const c=$;if(st(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const l={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,s=e(_-48|0,s);else if(_!==95)break;$=l;continue}else break}return{_0:$,_1:s,_2:o}}function V$(t,n){return b2(t,n,(e,s)=>gn(Tt(s,kt),Bs(e)))}function h2(t){let n=t,e=!1,s,o;t:{n:{const $=n;if(st($.str,1,$.start,$.end)){const c=j($.str,h($.str,0,$.start,$.end));switch(c){case 43:{const _=$.str,i=h($.str,1,$.start,$.end);let r;i===void 0?r=$.end:r=i,s={str:_,start:r,end:$.end},o=c;break n}case 45:{const _=$.str,i=h($.str,1,$.start,$.end);let r;i===void 0?r=$.end:r=i,s={str:_,start:r,end:$.end},o=c;break n}}}break t}e=o===45,n=s}t:{const $=n;if(st($.str,1,$.start,$.end)){const c=j($.str,h($.str,0,$.start,$.end));if(c>=48&&c<=57){const _=g2(n,gr,(a,u)=>Ro(u,lr)?Zt(Hn(kt,u),Rt(a)):u),i=_._0,r=_._1;return e?{_0:i,_1:vc(r)}:{_0:i,_1:r}}else break t}else break t}}function W$(t,n){let e=n,s=0,o=t;for(;;){const $=o;let c;t:if(st($.str,1,$.start,$.end)){const _=j($.str,h($.str,0,$.start,$.end));if(_>=48&&_<=57){const i=$.str,r=h($.str,1,$.start,$.end);let a;r===void 0?a=$.end:a=r;const l={str:i,start:a,end:$.end};if(bs(e,q_)){s=s+1|0,e=gn(Tt(e,kt),Bs(_-48|0)),o=l;continue}else{c=$;break t}}else if(_===95){const i=$.str,r=h($.str,1,$.start,$.end);let a;r===void 0?a=$.end:a=r,o={str:i,start:a,end:$.end};continue}else{c=$;break t}}else{c=$;break t}return{_0:c,_1:e,_2:s}}}function k2(t){let n,e;t:{n:{if(st(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const k=t.str,w=h(t.str,1,t.start,t.end);let v;w===void 0?v=t.end:v=w,n={_0:{str:k,start:v,end:t.end},_1:!0};break}case 43:{const k=t.str,w=h(t.str,1,t.start,t.end);let v;w===void 0?v=t.end:v=w,e={str:k,start:v,end:t.end};break n}default:{e=t;break n}}else{e=t;break n}break t}n={_0:e,_1:!1}}const s=n._0,o=n._1;if(F2(s))return new Gn(void 0);const $=V$(s,it),c=$._0,_=$._1,i=$._2;let r=_,a=c,u=i,l=0,p=it;const m=a;if(st(m.str,1,m.start,m.end)&&j(m.str,h(m.str,0,m.start,m.end))===46){const k=m.str,w=h(m.str,1,m.start,m.end);let v;w===void 0?v=m.end:v=w,a={str:k,start:v,end:m.end};const S=V$(a,r),P=S._0,C=S._1,O=S._2;a=P,r=C,l=O,p=vc(Rt(l))}if(u=u+l|0,u===0)return new Gn(void 0);let b;t:{n:{const y=a;if(st(y.str,1,y.start,y.end))switch(j(y.str,h(y.str,0,y.start,y.end))){case 101:{const S=y.str,P=h(y.str,1,y.start,y.end);let C;P===void 0?C=y.end:C=P,b={str:S,start:C,end:y.end};break n}case 69:{const S=y.str,P=h(y.str,1,y.start,y.end);let C;P===void 0?C=y.end:C=P,b={str:S,start:C,end:y.end};break n}}break t}const f=h2(b);let k;if(f===void 0)return new Gn(void 0);k=f;const w=k._0,v=k._1;a=w,p=Zt(p,v)}const g=a;if(Cn(g.str,0,g.start,g.end)){if(u<=19)return new Gn({exponent:p,mantissa:r,negative:o,many_digits:!1});u=u-19|0;let f=!1,k=t.str,w=t.start,v=t.end;t:for(;;){const x=k,S=w,P=v;let C,O;n:if(st(x,1,S,P)){const G=j(x,h(x,0,S,P));switch(G){case 48:{const A=h(x,1,S,P);let T;A===void 0?T=P:T=A,C={str:x,start:T,end:P},O=G;break n}case 46:{const A=h(x,1,S,P);let T;A===void 0?T=P:T=A,C={str:x,start:T,end:P},O=G;break n}default:break t}}else break;u=u-((O-46|0)/2|0)|0,k=C.str,w=C.start,v=C.end}let y=r;if(u>0){f=!0,y=it;const x=W$(t,y),S=x._0,P=x._1,C=x._2;y=P;let O;if(vp(y,q_))O=C;else if(st(S.str,1,S.start,S.end)){const G=S.str,A=h(S.str,1,S.start,S.end);let T;A===void 0?T=S.end:T=A;const B={str:G,start:T,end:S.end},ct=W$(B,y),K=ct._1,Z=ct._2;y=K,O=Z}else return new Gn(void 0);p=Rt(O),p=Zt(p,hr)}return new Gn({exponent:p,mantissa:y,negative:o,many_digits:f})}else return r2()}function X$(t,n,e){const s=n-ht.bias|0;let o=xc(t,Ge(Rn(Mt,ht.mantissa_bits),Mt));const $=Rt(s&((1<<ht.exponent_bits)-1|0));return o=R$(o,Rn($,ht.mantissa_bits)),e&&(o=R$(o,Rn(Rn(Mt,ht.mantissa_bits),ht.exponent_bits))),o}function w2(t,n){if(n<0||n>=t.digits_num)return!1;let e;const s=t.digits;if(d(s,n),s[n]===5?e=(n+1|0)===t.digits_num:e=!1,e){if(t.truncated)return!0;let $;if(n>0){const c=t.digits,_=n-1|0;d(c,_),$=(c[_]%2|0)!==0}else $=!1;return $}const o=t.digits;return d(o,n),o[n]>=5}function y2(t){if(t.decimal_point>20)return o_;let n=it,e=0;for(;e<t.decimal_point&&e<t.digits_num;){const s=Hn(n,kt),o=t.digits,$=e;d(o,$),n=Zt(s,yo(o[$])),e=e+1|0;continue}for(;e<t.decimal_point;){n=Hn(n,kt),e=e+1|0;continue}return w2(t,t.decimal_point)&&(n=Zt(n,Mt)),n}function S2(t,n){const e=S$(w$,n)._0,s=S$(w$,n)._1;let o=!1;const $=s.length;let c=0;for(;;){const _=c;if(_<$){if(_>=t.digits_num){o=!0;break}const i=s.charCodeAt(_)-48|0,r=t.digits;if(d(r,_),r[_]!==i){const a=t.digits;d(a,_),o=a[_]<i;break}c=_+1|0;continue}else break}return o?e-1|0:e}function Y$(t,n){const e=S2(t,n);let s=t.digits_num,o=t.digits_num+e|0,$=it;for(s=s-1|0;s>=0;){const c=t.digits,_=s;d(c,_);const i=yo(c[_]);$=Zt($,Rn(i,n));const r=fn($,kt),a=En(Ge($,Hn(r,kt)));if(o=o-1|0,o<t.digits.length){const u=t.digits,l=o;d(u,l),u[l]=a&255}else a!==0&&(t.truncated=!0);$=r,s=s-1|0;continue}for(;N_($,it);){const c=fn($,kt),_=En(Ge($,Hn(kt,c)));if(o=o-1|0,o<t.digits.length){const i=t.digits,r=o;d(i,r),i[r]=_&255}else _!==0&&(t.truncated=!0);$=c;continue}t.digits_num=t.digits_num+e|0,t.digits_num>t.digits.length&&(t.digits_num=t.digits.length),t.decimal_point=t.decimal_point+e|0,Us(t)}function K$(t,n){let e=0,s=0,o=it;for(;hn(Nt(o,n),it);){if(e>=t.digits_num){for(;hn(Nt(o,n),it);){o=Tt(o,kt),e=e+1|0;continue}break}const c=t.digits,_=e;d(c,_);const i=c[_];o=gn(Tt(o,kt),yo(i)),e=e+1|0;continue}t.decimal_point=t.decimal_point-(e-1|0)|0;const $=Ms(je(Mt,n),Mt);for(;e<t.digits_num;){const c=Nt(o,n),_=t.digits,i=s;d(_,i),_[i]=E$(c),s=s+1|0,o=zn(o,$);const r=t.digits,a=e;d(r,a);const u=r[a];o=gn(Tt(o,kt),yo(u)),e=e+1|0;continue}for(;go(o,it);){const c=Nt(o,n);if(s<t.digits.length){const _=t.digits,i=s;d(_,i),_[i]=E$(c),s=s+1|0}else go(c,it)&&(t.truncated=!0);o=zn(o,$),o=Tt(o,kt);continue}t.digits_num=s,Us(t)}function _o(t,n){if(t.digits_num===0)return;let e=n;if(e>0){for(;e>59;){Y$(t,59),e=e-59|0;continue}Y$(t,e)}if(e<0){for(;e<-59;){K$(t,59),e=e+59|0;continue}K$(t,-e|0);return}else return}function M2(t){let n=0,e=it;if(t.digits_num===0||t.decimal_point<-330){e=it,n=ht.bias;const o=X$(e,n,t.negative);return new Sn(Pe(o))}if(t.decimal_point>310){const o=po();if(o.$tag===1)o._0;else return o}for(;t.decimal_point>0;){let o=0;t.decimal_point>=no.length?o=60:o=cn(no,t.decimal_point),_o(t,-o|0),n=n+o|0;continue}for(;;){let o;if(t.decimal_point<0)o=!0;else{let $;if(t.decimal_point===0){const c=t.digits;d(c,0),$=c[0]<5}else $=!1;o=$}if(o){let $=0;(-t.decimal_point|0)>=no.length?$=60:$=cn(no,-t.decimal_point|0),_o(t,$),n=n-$|0;continue}else break}if(n=n-1|0,n<(ht.bias+1|0)){const o=(ht.bias+1|0)-n|0;_o(t,-o|0),n=n+o|0}if((n-ht.bias|0)>=((1<<ht.exponent_bits)-1|0)){const o=po();if(o.$tag===1)o._0;else return o}if(_o(t,ht.mantissa_bits+1|0),e=y2(t),z$(e,Rn(s_,ht.mantissa_bits))&&(e=Yd(e,1),n=n+1|0,(n-ht.bias|0)>=((1<<ht.exponent_bits)-1|0))){const o=po();if(o.$tag===1)o._0;else return o}z$(xc(e,Rn(Mt,ht.mantissa_bits)),it)&&(n=ht.bias);const s=X$(e,n,t.negative);return new Sn(Pe(s))}function C2(t,n){if(hn(t,it)||hn(n,it))return yr;if(hn(t,Mt))return n;if(hn(n,Mt))return t;if(q$(n)===0||q$(t)===0)return;const e=Zd(Cr,n);if(!go(t,e))return Tt(t,n)}function v2(t){return Le(wr,t.exponent)&&Le(t.exponent,kr)&&xp(t.mantissa,F_)&&!t.many_digits}function x2(t){if(v2(t)){let n;if(Le(t.exponent,es)){const e=wo(t.mantissa);if(Ro(t.exponent,it)){const o=(-En(t.exponent)|0)&31;d(Wn,o),n=e/Wn[o]}else{const o=En(t.exponent)&31;d(Wn,o),n=e*Wn[o]}}else{const e=Ge(t.exponent,es),s=t.mantissa,o=En(e);d(y$,o);const $=C2(s,y$[o]);let c;if($===void 0||(c=$,go(c,F_)))return ro;const _=wo(c),r=En(es)&31;d(Wn,r),n=_*Wn[r]}return t.negative&&(n=-n),new Es(n)}else return ro}function I2(t){if((t.end-t.start|0)>0)if(l2(t)){const n=k2(t);let e;if(n.$tag===1)e=n._0;else return n;if(e===void 0)return f2(t);{const $=x2(e);if($.$tag===1){const _=$._0;return new Sn(_)}else{const c=d2(t);let _;if(c.$tag===1)_=c._0;else return c;return M2(_)}}}else return Co();else return Co()}function L2(t){return{val:t}}function P2(t){return{val:t}}function Vs(t){return{val:t}}function qe(t){const n=rt(t),e=n-1|0,s=(Math.imul(n,13)|0)/16|0;return{entries:et(n,void 0),size:0,capacity:n,capacity_mask:e,grow_at:s,head:void 0,tail:-1}}function G2(t,n,e){const s=t.tail;if(s===-1)t.head=e;else{const $=t.entries;d($,s);const c=$[s];let _;c===void 0?_=M():_=c,_.next=e}t.tail=n;const o=t.entries;d(o,n),o[n]=e,t.size=t.size+1|0}function Q$(t,n,e){const s=t.entries;d(s,e),s[e]=n;const o=n.next;if(o===void 0){t.tail=e;return}else{const c=o;c.prev=e;return}}function j2(t,n,e){let s=e.psl+1|0,o=n+1&t.capacity_mask,$=e;for(;;){const c=s,_=o,i=$,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Q$(t,i,_);break}else{const l=a;if(c>l.psl){i.psl=c,Q$(t,i,_),s=l.psl+1|0,o=_+1&t.capacity_mask,$=l;continue}else{s=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Vc(t,n,e){t.size>=t.grow_at&&O2(t);let s,o=0,$=e&t.capacity_mask;for(;;){const u=o,l=$,p=t.entries;d(p,l);const m=p[l];if(m===void 0){s={_0:l,_1:u};break}else{const g=m;let f;if(g.hash===e){const k=g.key;f=k._0===n._0&&k._1===n._1}else f=!1;if(f)return;if(u>g.psl){j2(t,l,g),s={_0:l,_1:u};break}o=u+1|0,$=l+1&t.capacity_mask;continue}}const c=s._0,_=s._1,a={prev:t.tail,next:void 0,psl:_,hash:e,key:n};G2(t,c,a)}function O2(t){const n=t.head,e=t.capacity<<1;t.entries=et(e,void 0),t.capacity=e,t.capacity_mask=e-1|0;const s=t.capacity;t.grow_at=(Math.imul(s,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=n;for(;;){const $=o;if($===void 0)return;{const _=$,i=_.next,r=_.key,a=_.hash;Vc(t,r,a),o=i;continue}}}function Dt(t,n){Vc(t,n,Dn(n))}function Wc(t){const n=t.length;let e=rt(n);n>((Math.imul(e,13)|0)/16|0)&&(e=Math.imul(e,2)|0);const o=qe(e),$=t.length;let c=0;for(;;){const _=c;if(_<$){const i=t[_];Dt(o,i),c=_+1|0;continue}else break}return o}function Yt(t,n){const e=Dn(n);let s=0,o=e&t.capacity_mask;for(;;){const $=s,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return!1;{const a=i;let u;if(a.hash===e){const l=a.key;u=l._0===n._0&&l._1===n._1}else u=!1;if(u)return!0;if($>a.psl)return!1;s=$+1|0,o=c+1&t.capacity_mask;continue}}}function wt(t){pd(t.entries,void 0,0),t.size=0,t.head=void 0,t.tail=-1}function yt(t){return e=>{let s=t.head;for(;;){const o=s;if(o===void 0)return 1;{const c=o,_=c.key,i=c.next;if(e(_)===1){s=i;continue}else return 0}}}}function Xc(t,n,e){let s;return e===void 0?s=t.end-t.start|0:s=e,n>=0&&n<=s&&s<=(t.end-t.start|0)?{str:t.str,start:t.start+n|0,end:t.start+s|0}:wp()}function A2(t,n,e,s){let o=0,$=s;for(;($-1|0)>=e&&o<n;){const c=$-1|0,_=t.charCodeAt(c);56320<=_&&_<=57343?$=$-2|0:$=$-1|0,o=o+1|0;continue}return o<n||$<e?void 0:$}function E2(t,n,e,s){if(e>=0&&e<=s){let o=e,$=0;for(;o<s&&$<n;){const c=o,_=t.charCodeAt(c);55296<=_&&_<=56319?o=o+2|0:o=o+1|0,$=$+1|0;continue}return $<n||o>=s?void 0:o}else return yp()}function h(t,n,e,s){let o;return s===void 0?o=t.length:o=s,n>=0?E2(t,n,e,o):A2(t,-n|0,e,o)}function Cn(t,n,e,s){let o;s===void 0?o=t.length:o=s;let $=e,c=0;for(;;){const _=$,i=c;if(_<o&&i<n){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,u=t.charCodeAt(a);if(56320<=u&&u<=57343){$=_+2|0,c=i+1|0;continue}else ln()}$=_+1|0,c=i+1|0;continue}else return i===n&&_===o}}function st(t,n,e,s){let o;s===void 0?o=t.length:o=s;let $=e,c=0;for(;;){const _=$,i=c;if(_<o&&i<n){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,u=t.charCodeAt(a);if(56320<=u&&u<=57343){$=_+2|0,c=i+1|0;continue}else ln()}$=_+1|0,c=i+1|0;continue}else return i>=n}}function co(t){return t.str.substring(t.start,t.end)}function Yc(t,n){return(((Math.imul(t-55296|0,1024)|0)+n|0)-56320|0)+65536|0}function R2(t,n){const e=t.end-t.start|0;if(e===(n.end-n.start|0)){if(t.str===n.str&&t.start===n.start)return!0;let s=0;for(;;){const o=s;if(o<e){const $=t.str,c=t.start+o|0,_=$.charCodeAt(c),i=n.str,r=n.start+o|0;if(_!==i.charCodeAt(r))return!1;s=o+1|0;continue}else break}return!0}else return!1}function z2(t){return e=>{const s=t.length;let o=0;for(;;){const $=o;if($<s){const c=t.charCodeAt($);if(55296<=c&&c<=56319&&($+1|0)<s){const i=$+1|0,r=t.charCodeAt(i);if(56320<=r&&r<=57343){const a=Yc(c,r);if(e(a)===1){o=$+2|0;continue}else return 0}}if(e(c)!==1)return 0;o=$+1|0;continue}else return 1}}}function J2(t,n){const e=t.end-t.start|0,s=n.end-n.start|0;if(s>0)if(e>=s){const o=et(256,s),$=s-1|0;let c=0;for(;;){const i=c;if(i<$){const r=n.str,a=n.start+i|0,u=r.charCodeAt(a)&255;d(o,u),o[u]=(s-1|0)-i|0,c=i+1|0;continue}else break}let _=0;for(;;){const i=_;if(i<=(e-s|0)){const r=s-1|0;let a=0;for(;;){const b=a;if(b<=r){const g=i+b|0,f=t.str,k=t.start+g|0,w=f.charCodeAt(k),v=n.str,y=n.start+b|0;if(w!==v.charCodeAt(y))break;a=b+1|0;continue}else return i}const u=(i+s|0)-1|0,l=t.str,p=t.start+u|0,m=l.charCodeAt(p)&255;d(o,m),_=i+o[m]|0;continue}else break}return}else return;else return Sr}function q2(t,n){const e=t.end-t.start|0,s=n.end-n.start|0;if(s>0)if(e>=s){const $=n.str,c=n.start+0|0,_=$.charCodeAt(c),i=e-s|0;let r=0;for(;r<=i;){for(;;){let a;if(r<=i){const u=r,l=t.str,p=t.start+u|0;a=l.charCodeAt(p)!==_}else a=!1;if(a){r=r+1|0;continue}else break}if(r<=i){let a=1;for(;;){const u=a;if(u<s){const l=r+u|0,p=t.str,m=t.start+l|0,b=p.charCodeAt(m),g=n.str,f=n.start+u|0;if(b!==g.charCodeAt(f))break;a=u+1|0;continue}else return r}r=r+1|0}continue}return}else return;else return Mr}function T2(t,n){return(n.end-n.start|0)<=4?q2(t,n):J2(t,n)}function B2(t,n){if(n<=0)return"";if(n===1)return t;{const e=pn(),s=t;let o=0;for(;;){const $=o;if($<n){tt(e,s),o=$+1|0;continue}else break}return e.val}}function ss(t,n){return T2(t,n)!==void 0}function F2(t){return(t.end-t.start|0)===0}function Uo(t,n){if(n>=0&&n<(t.end-t.start|0)){const e=t.str,s=t.start+n|0,o=e.charCodeAt(s);if(55296<=o&&o<=56319)if((n+1|0)<(t.end-t.start|0)){const $=n+1|0,c=t.str,_=t.start+$|0,i=c.charCodeAt(_);return 56320<=i&&i<=57343?Yc(o,i):-1}else return-1;else return 56320<=o&&o<=57343?-1:o}else return-1}function Kc(){return{now:0}}function Un(t){return t.now=t.now+1|0,t.now}function Qc(t){const n=R([]);return L(n,"cost",vd(t.cost)),new E(n)}function H2(t,n){switch(t){case 0:{n.method_0(n.self,"HeartCrystalDust");return}case 1:{n.method_0(n.self,"RecallGear");return}case 2:{n.method_0(n.self,"SpiritalSpark");return}case 3:{n.method_0(n.self,"RefinedCopper");return}default:{n.method_0(n.self,"ResonantCrystal");return}}}function Zc(t,n){switch(t){case 0:return n===0;case 1:return n===1;case 2:return n===2;case 3:return n===3;default:return n===4}}function N2(t,n){switch(t){case 0:{Qn(n,0);return}case 1:{Qn(n,1);return}case 2:{Qn(n,2);return}case 3:{Qn(n,3);return}default:{Qn(n,4);return}}}function Vo(t){switch(t){case 0:{const n="HeartCrystalDust";return new z(n)}case 1:{const n="RecallGear";return new z(n)}case 2:{const n="SpiritalSpark";return new z(n)}case 3:{const n="RefinedCopper";return new z(n)}default:{const n="ResonantCrystal";return new z(n)}}}function ut(t){return{cost:t}}function Wo(t){const n=R([]);return L(n,"health",Lt(t.health)),L(n,"speed",J(t.speed)),L(n,"attack",Lt(t.attack)),L(n,"defense",Lt(t.defense)),L(n,"dodge",Lt(t.dodge)),new E(n)}function ti(t,n){let e,s=to,o=to,$=to,c=to;if(t.$tag===6){const k=t._0,w=I(k,"health");if(w!==void 0){const C=w,O="health",G=oo(C,new X(n,O));let A;if(G.$tag===1)A=G._0;else return G;s=new de(A)}const v=I(k,"speed");if(v!==void 0){const C=v,O="speed",G=kn(C,new X(n,O));let A;if(G.$tag===1)A=G._0;else return G;e=A}const y=I(k,"attack");if(y!==void 0){const C=y,O="attack",G=oo(C,new X(n,O));let A;if(G.$tag===1)A=G._0;else return G;c=new de(A)}const x=I(k,"defense");if(x!==void 0){const C=x,O="defense",G=oo(C,new X(n,O));let A;if(G.$tag===1)A=G._0;else return G;$=new de(A)}const S=I(k,"dodge");if(S!==void 0){const C=S,O="dodge",G=oo(C,new X(n,O));let A;if(G.$tag===1)A=G._0;else return G;o=new de(A)}}else return new jn(new q({_0:n,_1:"Expected object to deserialize Attribute"}));const _=e;let i;if(_===void 0)return new jn(new q({_0:n,_1:"Missing field speed"}));i=_;const r=s;let a;if(r.$tag===1)a=r._0;else return new jn(new q({_0:n,_1:"Missing field health"}));const u=o;let l;if(u.$tag===1)l=u._0;else return new jn(new q({_0:n,_1:"Missing field dodge"}));const p=$;let m;if(p.$tag===1)m=p._0;else return new jn(new q({_0:n,_1:"Missing field defense"}));const b=c;let g;if(b.$tag===1)g=b._0;else return new jn(new q({_0:n,_1:"Missing field attack"}));return new I_({health:a,speed:i,attack:g,defense:m,dodge:l})}function bt(t,n,e,s,o){return{health:t,speed:n,attack:e,defense:s,dodge:o}}function xs(t){const n=R([]);return L(n,"equipment_base",D2(t.equipment_base)),L(n,"id",J(t.id)),new E(n)}function Is(t,n){let e,s;if(t.$tag===6){const r=t._0,a=I(r,"equipment_base");if(a!==void 0){const p=a,m="equipment_base",b=U2(p,new X(n,m));let g;if(b.$tag===1)g=b._0;else return b;s=g}const u=I(r,"id");if(u!==void 0){const p=u,m="id",b=kn(p,new X(n,m));let g;if(b.$tag===1)g=b._0;else return b;e=g}}else return new ao(new q({_0:n,_1:"Expected object to deserialize Equipment"}));const o=e;let $;if(o===void 0)return new ao(new q({_0:n,_1:"Missing field id"}));$=o;const c=s;let _;return c===void 0?new ao(new q({_0:n,_1:"Missing field equipment_base"})):(_=c,new L_({equipment_base:_,id:$}))}function D2(t){const n=R([]),e=t.name;L(n,"name",new z(e));const s=t.description;L(n,"description",new z(s));const o=t.resource_url;return L(n,"resource_url",new z(o)),L(n,"attribute",Wo(t.attribute)),new E(n)}function U2(t,n){let e,s,o,$;if(t.$tag===6){const b=t._0,g=I(b,"name");if(g!==void 0){const y=g,x="name",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;s=P}const f=I(b,"description");if(f!==void 0){const y=f,x="description",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;o=P}const k=I(b,"resource_url");if(k!==void 0){const y=k,x="resource_url",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;e=P}const w=I(b,"attribute");if(w!==void 0){const y=w,x="attribute",S=ti(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;$=P}}else return new Yn(new q({_0:n,_1:"Expected object to deserialize EquipmentBase"}));const c=e;let _;if(c===void 0)return new Yn(new q({_0:n,_1:"Missing field resource_url"}));_=c;const i=s;let r;if(i===void 0)return new Yn(new q({_0:n,_1:"Missing field name"}));r=i;const a=o;let u;if(a===void 0)return new Yn(new q({_0:n,_1:"Missing field description"}));u=a;const l=$;let p;return l===void 0?new Yn(new q({_0:n,_1:"Missing field attribute"})):(p=l,new P_({name:r,description:u,resource_url:_,attribute:p}))}function V2(t){const n=R([]);L(n,"id",J(t.id));const e=t.type_msg;L(n,"type_msg",new z(e));const s=t.content;return L(n,"content",new z(s)),new E(n)}function W2(){return{history:[],callback:t=>{}}}function X2(t,n){t.callback=n}function Y(t,n){const e={id:Un(bp),type_msg:n.type_msg,content:n.content};Ld(t.history,e);const s=t.callback;s(D(V2(e),!1,0))}function Xo(t){const n=R([]);return L(n,"id",J(t.id)),L(n,"level",J(t.level)),L(n,"suffix",J(t.suffix)),L(n,"live_left",J(t.live_left)),L(n,"attribute",Wo(t.attribute)),L(n,"copper_type",ni(t.copper_type)),L(n,"equipment_slot",K2(t.equipment_slot)),L(n,"copper_info",Z2(t.copper_info)),new E(n)}function Y2(t,n){let e,s,o,$,c,_,i,r;if(t.$tag===6){const G=t._0,A=I(G,"id");if(A!==void 0){const V=A,at="id",W=kn(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;$=ot}const T=I(G,"level");if(T!==void 0){const V=T,at="level",W=kn(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;o=ot}const H=I(G,"suffix");if(H!==void 0){const V=H,at="suffix",W=kn(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;e=ot}const B=I(G,"live_left");if(B!==void 0){const V=B,at="live_left",W=kn(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;s=ot}const ct=I(G,"attribute");if(ct!==void 0){const V=ct,at="attribute",W=ti(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;r=ot}const K=I(G,"copper_type");if(K!==void 0){const V=K,at="copper_type",W=ei(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;_=ot}const Z=I(G,"equipment_slot");if(Z!==void 0){const V=Z,at="equipment_slot",W=Q2(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;c=ot}const F=I(G,"copper_info");if(F!==void 0){const V=F,at="copper_info",W=t1(V,new X(n,at));let ot;if(W.$tag===1)ot=W._0;else return W;i=ot}}else return new Xt(new q({_0:n,_1:"Expected object to deserialize Copper"}));const a=e;let u;if(a===void 0)return new Xt(new q({_0:n,_1:"Missing field suffix"}));u=a;const l=s;let p;if(l===void 0)return new Xt(new q({_0:n,_1:"Missing field live_left"}));p=l;const m=o;let b;if(m===void 0)return new Xt(new q({_0:n,_1:"Missing field level"}));b=m;const g=$;let f;if(g===void 0)return new Xt(new q({_0:n,_1:"Missing field id"}));f=g;const k=c;let w;if(k===void 0)return new Xt(new q({_0:n,_1:"Missing field equipment_slot"}));w=k;const v=_;let y;if(v===void 0)return new Xt(new q({_0:n,_1:"Missing field copper_type"}));y=v;const x=i;let S;if(x===void 0)return new Xt(new q({_0:n,_1:"Missing field copper_info"}));S=x;const P=r;let C;return P===void 0?new Xt(new q({_0:n,_1:"Missing field attribute"})):(C=P,new G_({id:f,level:b,suffix:u,live_left:p,attribute:C,copper_type:y,equipment_slot:w,copper_info:S}))}function ni(t){switch(t){case 0:{const n="IronWall";return new z(n)}case 1:{const n="Arcanist";return new z(n)}case 2:{const n="CraftsMan";return new z(n)}case 3:{const n="Mechanic";return new z(n)}default:{const n="Resonator";return new z(n)}}}function ei(t,n){let e;switch(t.$tag){case 4:{e=t._0;break}case 5:{const o=t._0,$=r0(o,0);if($===void 0)return new fe(new q({_0:n,_1:"Missing tag in array[0] when derserializing CopperType"}));{const _=$;if(_.$tag===4)e=_._0;else return new fe(new q({_0:n,_1:"Expected string tag at array[0] when derserializing CopperType"}))}break}default:return new fe(new q({_0:n,_1:"Expected string or array for tag in enum when derserializing CopperType"}))}switch(e){case"IronWall":return new Kn(0);case"Arcanist":return new Kn(1);case"CraftsMan":return new Kn(2);case"Mechanic":return new Kn(3);case"Resonator":return new Kn(4);default:return new fe(new q({_0:n,_1:`Unknown enum constructor ${e} when deserializing CopperType`}))}}function K2(t){const n=R([]),e=t.slot1;e===void 0||L(n,"slot1",xs(e));const s=t.slot2;return s===void 0||L(n,"slot2",xs(s)),L(n,"is_slot2_locked",It(t.is_slot2_locked)),new E(n)}function Q2(t,n){let e=f$,s=f$,o=-1;if(t.$tag===6){const l=t._0,p=I(l,"slot1");if(p!==void 0){const f=p,k="slot1",w=Is(f,new X(n,k));let v;if(w.$tag===1)v=w._0;else return w;s=new us(v)}const m=I(l,"slot2");if(m!==void 0){const f=m,k="slot2",w=Is(f,new X(n,k));let v;if(w.$tag===1)v=w._0;else return w;e=new us(v)}const b=I(l,"is_slot2_locked");if(b!==void 0){const f=b,k="is_slot2_locked",w=Y0(f,new X(n,k));let v;if(w.$tag===1)v=w._0;else return w;o=v}}else return new ls(new q({_0:n,_1:"Expected object to deserialize EquipmentSlot"}));const $=e;let c;$.$tag===1?c=$._0:c=void 0;const _=s;let i;_.$tag===1?i=_._0:i=void 0;const r=o;let a;return r===-1?new ls(new q({_0:n,_1:"Missing field is_slot2_locked"})):(a=r,new j_({slot1:i,slot2:c,is_slot2_locked:a}))}function Z2(t){const n=R([]),e=t.name;L(n,"name",new z(e)),L(n,"copper_type",ni(t.copper_type));const s=t.description;L(n,"description",new z(s));const o=t.icon_url;L(n,"icon_url",new z(o));const $=t.model_url;L(n,"model_url",new z($));const c=t.skill;c===void 0||L(n,"skill",n1(c));const _=t.attack_range;return _===void 0||L(n,"attack_range",J(_)),new E(n)}function t1(t,n){let e=pr,s,o,$,c,_,i=A_;if(t.$tag===6){const P=t._0,C=I(P,"name");if(C!==void 0){const K=C,Z="name",F=Qt(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;s=N}const O=I(P,"copper_type");if(O!==void 0){const K=O,Z="copper_type",F=ei(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;_=N}const G=I(P,"description");if(G!==void 0){const K=G,Z="description",F=Qt(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;c=N}const A=I(P,"icon_url");if(A!==void 0){const K=A,Z="icon_url",F=Qt(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;$=N}const T=I(P,"model_url");if(T!==void 0){const K=T,Z="model_url",F=Qt(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;o=N}const H=I(P,"skill");if(H!==void 0){const K=H,Z="skill",F=e1(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;e=new O_(N)}const B=I(P,"attack_range");if(B!==void 0){const K=B,Z="attack_range",F=kn(K,new X(n,Z));let N;if(F.$tag===1)N=F._0;else return F;i=new Rs(N)}}else return new On(new q({_0:n,_1:"Expected object to deserialize CopperInfo"}));const r=e;let a;r.$tag===1?a=r._0:a=void 0;const u=s;let l;if(u===void 0)return new On(new q({_0:n,_1:"Missing field name"}));l=u;const p=o;let m;if(p===void 0)return new On(new q({_0:n,_1:"Missing field model_url"}));m=p;const b=$;let g;if(b===void 0)return new On(new q({_0:n,_1:"Missing field icon_url"}));g=b;const f=c;let k;if(f===void 0)return new On(new q({_0:n,_1:"Missing field description"}));k=f;const w=_;let v;if(w===void 0)return new On(new q({_0:n,_1:"Missing field copper_type"}));v=w;const y=i;let x;return y.$tag===1?x=y._0:x=void 0,new E_({name:l,copper_type:v,description:k,icon_url:g,model_url:m,skill:a,attack_range:x})}function n1(t){const n=R([]),e=t.name;L(n,"name",new z(e));const s=t.description;L(n,"description",new z(s));const o=t.resource_url;L(n,"resource_url",new z(o));const $=t.cool_down;return $===void 0||L(n,"cool_down",J($)),new E(n)}function e1(t,n){let e,s,o,$=A_;if(t.$tag===6){const b=t._0,g=I(b,"name");if(g!==void 0){const y=g,x="name",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;s=P}const f=I(b,"description");if(f!==void 0){const y=f,x="description",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;o=P}const k=I(b,"resource_url");if(k!==void 0){const y=k,x="resource_url",S=Qt(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;e=P}const w=I(b,"cool_down");if(w!==void 0){const y=w,x="cool_down",S=kn(y,new X(n,x));let P;if(S.$tag===1)P=S._0;else return S;$=new Rs(P)}}else return new be(new q({_0:n,_1:"Expected object to deserialize Skill"}));const c=e;let _;if(c===void 0)return new be(new q({_0:n,_1:"Missing field resource_url"}));_=c;const i=s;let r;if(i===void 0)return new be(new q({_0:n,_1:"Missing field name"}));r=i;const a=o;let u;if(a===void 0)return new be(new q({_0:n,_1:"Missing field description"}));u=a;const l=$;let p;return l.$tag===1?p=l._0:p=void 0,new R_({name:r,description:u,resource_url:_,cool_down:p})}function mt(t,n,e){return S0(Math.fround(t*Math.fround(Z0(e,(n-1|0)+0))))}function Ws(t){switch(t){case 0:return bt(Math.fround(150),2,Math.fround(15),Math.fround(20),Math.fround(10));case 1:return bt(Math.fround(50),3,Math.fround(20),Math.fround(5),Math.fround(10));case 4:return bt(Math.fround(100),3,Math.fround(10),Math.fround(10),Math.fround(10));case 3:return bt(Math.fround(80),3,Math.fround(5),Math.fround(8),Math.fround(10));default:return bt(Math.fround(80),4,Math.fround(0),Math.fround(8),Math.fround(10))}}function Z$(t){const n=t.level+1|0,e=Ws(t.copper_type),s=t.attribute.speed;switch(t.copper_type){case 0:return bt(mt(e.health,n,Math.fround(1.35)),s,mt(e.attack,n,Math.fround(1.28)),mt(e.defense,n,Math.fround(1.37)),mt(e.dodge,n,Math.fround(1.19)));case 1:return bt(mt(e.health,n,Math.fround(1.22)),s,mt(e.attack,n,Math.fround(1.4)),mt(e.defense,n,Math.fround(1.27)),mt(e.dodge,n,Math.fround(1.19)));case 4:return bt(mt(e.health,n,Math.fround(1.38)),s,mt(e.attack,n,Math.fround(1.16)),mt(e.defense,n,Math.fround(1.27)),mt(e.dodge,n,Math.fround(1.19)));case 3:return bt(mt(e.health,n,Math.fround(1.3)),s,mt(e.attack,n,Math.fround(1.2)),mt(e.defense,n,Math.fround(1.27)),mt(e.dodge,n,Math.fround(1.19)));default:return bt(mt(e.health,n,Math.fround(1.3)),s,mt(e.attack,n,Math.fround(1.27)),mt(e.defense,n,Math.fround(1.16)),mt(e.dodge,n,Math.fround(1.19)))}}function o1(t){return{slot1:t.slot1,slot2:t.slot2,is_slot2_locked:!1}}function s1(t){return t.level===4?{...t,attribute:Z$(t),level:t.level+1|0,equipment_slot:o1(t.equipment_slot)}:{...t,attribute:Z$(t),level:t.level+1|0}}function $1(t){let n;switch(t){case 1:{n=5;break}case 2:{n=10;break}case 3:{n=20;break}case 4:{n=30;break}default:Y(U,gu),n=0}return ut([{_0:2,_1:n}])}function oi(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function $s(t){const n=od(fp,t),e=Un($e);return{id:e,level:1,suffix:e,live_left:5,attribute:Ws(n.copper_type),copper_type:n.copper_type,equipment_slot:oi(),copper_info:n}}function wn(t,n){return t+$2(T_,(n-t|0)+1|0)|0}function Oe(t){const n=_2(T_);return Lc(`12121:${String(n)}`),n<=t}function _1(){return pc([hu,ku,wu,yu,Su])}function c1(){return pc([Mu,Cu,vu,xu,Iu])}function At(t,n){const e=dc(t,n);return e===void 0?M():e}function si(t,n,e){const s=dc(t,n);let o;if(s===void 0?o=M():o=s,o<e){Y(U,Lu);return}else{Js(t,n,o-e|0);return}}function Xs(t,n){const e=n.cost,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$],_=c._0,i=c._1;if(At(t,_)<i)return!1;o=$+1|0;continue}else break}return!0}function Ys(t,n){const e=n.cost,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$],_=c._0,i=c._1;si(t,_,i),o=$+1|0;continue}else return}}function An(t,n,e){Js(t,n,At(t,n)+e|0)}function i1(){return{resources:_1(),equipments:[]}}function r1(t,n){return{resources:t,equipments:n}}function Ks(t,n){const e=n.length;let s=0;for(;;){const o=s;if(o<e){const $=n[o],c=$.item_type;if(c.$tag===0){const i=c._0;An(t.resources,i,$.count)}else{const i=c._0;Pd(t.equipments,i)}s=o+1|0;continue}else return}}function a1(t,n){return{item_type:t,count:n}}function u1(){const t=$s("阿磐"),n=$s("咝咝"),e=$s("波波");return{coppers:uo(uo(uo(void 0,t.id,t),n.id,n),e.id,e)}}function l1(){return{coppers:void 0}}function Qs(t,n){return{coppers:uo(t.coppers,n.id,n)}}function mo(t,n){const e=C0(t.coppers,n);return e===void 0?M():e}function $i(t){return Bd(I0(t.coppers))}function p1(t,n){return{coppers:v0(t.coppers,n)}}function m1(){const t=Un($e),n=wn(0,ge.length-1|0);d(ge,n);const e=ge[n],s=Ws(e.copper_type);return{id:t,level:1,suffix:t,live_left:5,attribute:s,copper_type:e.copper_type,equipment_slot:oi(),copper_info:e}}function d1(t){if(At(t,2)>=10)return si(t,2,10),m1();Y(U,Pu)}function f1(){const t=i1();return{warehouse:u1(),bag:t}}function b1(t,n){return{warehouse:t,bag:n}}function g1(t){const n=t.bag.resources,e=R([{_0:"SpiritalSpark",_1:J(At(n,2))},{_0:"RecallGear",_1:J(At(n,1))},{_0:"ResonantCrystal",_1:J(At(n,4))},{_0:"RefinedCopper",_1:J(At(n,3))},{_0:"HeartCrystalDust",_1:J(At(n,0))}]);return D(new E(e),!1,0)}function h1(t){const n=t.warehouse,e=R([{_0:"coppers",_1:wd($i(n))}]);return D(new E(e),!1,0)}function k1(t){const n=d1(t.bag.resources);let e;if(n===void 0){const s="error",o={_0:"type",_1:new z(s)},$="资源不足",c=R([o,{_0:"content",_1:new z($)}]);e=new E(c)}else{const o=n;t.warehouse=Qs(t.warehouse,o);const $="success",c=R([{_0:"type",_1:new z($)},{_0:"copper",_1:Xo(o)}]);e=new E(c)}return D(e,!1,0)}function w1(t,n){const e=t.warehouse,s=mo(e,n),o=$1(s.level);let $;if(Xs(t.bag.resources,o)){const c=s1(s);Ys(t.bag.resources,o),t.warehouse=p1(t.warehouse,n),t.warehouse=Qs(t.warehouse,c);const _="success",i=R([{_0:"type",_1:new z(_)}]);$=new E(i)}else{const c="error",_={_0:"type",_1:new z(c)},i="资源不足",r=R([_,{_0:"content",_1:new z(i)}]);$=new E(r)}return D($,!1,0)}function _i(t){const n=R([]);return L(n,"id",J(t.id)),L(n,"original_id",J(t.original_id)),L(n,"copper",Xo(t.copper)),L(n,"can_move",It(t.can_move)),L(n,"can_attack",It(t.can_attack)),L(n,"can_summon",It(t.can_summon)),L(n,"can_build",It(t.can_build)),L(n,"position",Ct(t.position)),L(n,"now_health",Lt(t.now_health)),L(n,"attribute",Wo(t.attribute)),new E(n)}function ci(t){const n=R([]);return L(n,"id",J(t.id)),L(n,"owned",It(t.owned)),L(n,"can_move",It(t.can_move)),L(n,"can_attack",It(t.can_attack)),L(n,"position",Ct(t.position)),L(n,"now_health",Lt(t.now_health)),L(n,"enemy_base",ri(t.enemy_base)),new E(n)}function y1(t){const n=R([]),e=t.name;L(n,"name",new z(e)),L(n,"resource_type",Vo(t.resource_type));const s=t.model_url;return L(n,"model_url",new z(s)),new E(n)}function ii(t){const n=R([]);L(n,"id",J(t.id)),L(n,"owned",It(t.owned)),L(n,"position",Ct(t.position)),L(n,"can_attack",It(t.can_attack));const e=t.resource_type;return e===void 0||L(n,"resource_type",Vo(e)),L(n,"now_health",Lt(t.now_health)),L(n,"structure_base",ai(t.structure_base)),new E(n)}function ri(t){const n=R([]);L(n,"level",J(t.level)),L(n,"health",Lt(t.health)),L(n,"attack",Lt(t.attack)),L(n,"defense",Lt(t.defense)),L(n,"dodge",Lt(t.dodge)),L(n,"attack_range",J(t.attack_range)),L(n,"speed",J(t.speed));const e=t.name;L(n,"name",new z(e));const s=t.enemy_type;L(n,"enemy_type",new z(s));const o=t.description;L(n,"description",new z(o));const $=t.asset_url;L(n,"asset_url",new z($));const c=t.model_url;return L(n,"model_url",new z(c)),L(n,"drop_items",Cd(t.drop_items)),L(n,"summon_cost",Qc(t.summon_cost)),new E(n)}function S1(t){const n=R([]);return L(n,"id",J(t.id)),L(n,"material_base",y1(t.material_base)),new E(n)}function ai(t){const n=R([]),e=t.name;L(n,"name",new z(e)),L(n,"health",Lt(t.health)),L(n,"can_move",It(t.can_move)),L(n,"can_attack",It(t.can_attack)),L(n,"attack_range",J(t.attack_range));const s=t.description;L(n,"description",new z(s));const o=t.asset_url;L(n,"asset_url",new z(o));const $=t.model_url;return L(n,"model_url",new z($)),L(n,"attribute",Wo(t.attribute)),L(n,"cost",Qc(t.cost)),new E(n)}function M1(t,n){switch(t){case 0:{n.method_0(n.self,"PositiveX");return}case 1:{n.method_0(n.self,"NegativeX");return}case 2:{n.method_0(n.self,"PositiveY");return}default:{n.method_0(n.self,"NegativeY");return}}}function ui(t,n,e,s){const o=Un($e),$=t.can_attack,c=t.health,_={id:o,owned:n,position:s,can_attack:$,resource_type:e,now_health:c,structure_base:t};return ic(un,_.id,_),_}function Zs(t){const n=td(un,t);return n===void 0?M():n}function t$(t){const n=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"clear_state",content:D(new E(n),!1,0)})}function n$(t,n){const e={_0:"id",_1:J(t)},s=qo(n),o=R([e,{_0:"can_attack",_1:new z(s)}]);Y(U,{type_msg:"display_can_attack",content:D(new E(o),!1,0)})}function ke(t){if(t$(t.id),t.structure_base.can_attack){n$(t.id,!0);return}else return}function ie(t){const n=[];let s=-t|0;for(;;){const o=s;if(o<=t){let c=-t|0;for(;;){const _=c;if(_<=t){const i=(o<0?-o|0:o)+(_<0?-_|0:_)|0;i<=t&&i!==0&&In(n,{_0:o,_1:_}),c=_+1|0;continue}else break}s=o+1|0;continue}else break}return n}function li(t,n){const e=n._0,s=n._1,o=t.index_position,$=o._0,c=o._1;return e>=$&&e<($+9|0)&&s>=c&&s<(c+9|0)}function Vn(t,n){const e=t.rooms,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$];if(li(c,n))return c;o=$+1|0;continue}else break}}function rn(t,n){const e=t.rooms,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$];if(li(c,n)){const _=n._0-c.index_position._0|0,i=n._1-c.index_position._1|0;return{_0:c,_1:{_0:_,_1:i}}}o=$+1|0;continue}else break}}function e$(t,n){const e=Vn(t,n);if(e===void 0)return M();{const o=e,$=rn(t,n);if($===void 0)return M();{const i=$._1;return{_0:o,_1:i}}}}function Pn(t,n){const e=e$(t,n),s=e._0,o=e._1;return $t(_t(s.blocks,o._0),o._1).occupant}function Jn(t,n){const e=Vn(t,n);if(e!==void 0){const o=e,$=rn(t,n);if($===void 0)M();else{const i=$._1,r=$t(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!1}function C1(t,n){const e=t.structure_base.attack_range,s=ie(e),o=[],$=s.length;let c=0;for(;;){const _=c;if(_<$){const i=s[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Jn(n,r)){const a=Pn(n,r);if(t.owned)switch(a.$tag){case 1:{const l=a._0;t.structure_base.name==="维修工坊"&&vt(o,new oe(l));break}case 0:{const l=a._0;l.owned===!1&&vt(o,new Bn(l));break}case 3:{const l=a._0;l.owned===!1&&vt(o,new Fn(l));break}}else switch(a.$tag){case 1:{const l=a._0;vt(o,new oe(l));break}case 0:{const l=a._0;l.owned===!0&&vt(o,new Bn(l));break}case 3:{const l=a._0;l.owned===!0&&vt(o,new Fn(l));break}}}c=_+1|0;continue}else break}return o}function Yo(t,n){return t.now_health=Math.fround(t.now_health-n),Math.fround(t.now_health<=Math.fround(0))}function v1(t,n,e){const s=R([{_0:"id",_1:J(n)},{_0:"position",_1:Ct(e)},{_0:"copper",_1:_i(t)}]);Y(U,{type_msg:"set_copper",content:D(new E(s),!1,0)})}function o$(t,n,e){const s=R([{_0:"id",_1:J(n)},{_0:"position",_1:Ct(e)},{_0:"enemy",_1:ci(t)}]);Y(U,{type_msg:"set_enemy",content:D(new E(s),!1,0)})}function pi(t,n,e){const s=R([{_0:"id",_1:J(n)},{_0:"position",_1:Ct(e)},{_0:"structure",_1:ii(t)}]);Y(U,{type_msg:"set_structure",content:D(new E(s),!1,0)})}function x1(t,n,e){const s=R([{_0:"id",_1:J(n)},{_0:"position",_1:Ct(e)},{_0:"material",_1:S1(t)}]);Y(U,{type_msg:"set_material",content:D(new E(s),!1,0)})}function Ut(t){const n=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"remove_unit",content:D(new E(n),!1,0)})}function qn(t,n){const e={_0:"id",_1:J(t)},s=Dp(n),o=R([e,{_0:"direction",_1:new z(s)}]);Y(U,{type_msg:"change_direction",content:D(new E(o),!1,0)})}function vo(t,n){const e=R([{_0:"id",_1:J(t)},{_0:"to",_1:Ct(n)}]);Y(U,{type_msg:"move_to",content:D(new E(e),!1,0)})}function mi(t,n){const e={_0:"id",_1:J(t)},s=qo(n),o=R([e,{_0:"can_move",_1:new z(s)}]);Y(U,{type_msg:"display_can_move",content:D(new E(o),!1,0)})}function I1(t,n){const e={_0:"id",_1:J(t)},s=qo(n),o=R([e,{_0:"can_summon",_1:new z(s)}]);Y(U,{type_msg:"display_can_summon",content:D(new E(o),!1,0)})}function L1(t,n){const e={_0:"id",_1:J(t)},s=qo(n),o=R([e,{_0:"can_build",_1:new z(s)}]);Y(U,{type_msg:"display_can_build",content:D(new E(o),!1,0)})}function Nn(t){const n=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"animate_move",content:D(new E(n),!1,0)})}function P1(){const t=R([]);Y(U,{type_msg:"animate_reset",content:D(new E(t),!1,0)})}function G1(t,n){const e=R([{_0:"room_position",_1:Ct(t)},{_0:"size",_1:J(n)}]);Y(U,{type_msg:"put_room_blocks",content:D(new E(e),!1,0)})}function xo(t){const n=R([{_0:"position",_1:Ct(t)}]);Y(U,{type_msg:"set_move_block",content:D(new E(n),!1,0)})}function bn(t){const n=R([{_0:"position",_1:Ct(t)}]);Y(U,{type_msg:"set_attack_block",content:D(new E(n),!1,0)})}function Io(t){const n=R([{_0:"position",_1:Ct(t)}]);Y(U,{type_msg:"set_can_summon_blocks",content:D(new E(n),!1,0)})}function St(t){const n=R([{_0:"position",_1:Ct(t)}]);Y(U,{type_msg:"clear_block",content:D(new E(n),!1,0)})}function s$(t){const n=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"attack_complete",content:D(new E(n),!1,0)})}function zt(t,n,e){const s=R([{_0:"id",_1:J(t)},{_0:"now_health",_1:Lt(n)},{_0:"max_health",_1:Lt(e)}]);Y(U,{type_msg:"update_health",content:D(new E(s),!1,0)})}function di(){const t=R([]);Y(U,{type_msg:"game_over",content:D(new E(t),!1,0)})}function fi(){const t=R([]);Y(U,{type_msg:"success",content:D(new E(t),!1,0)})}function bi(t){const n=[],e=fo.length;let s=0;for(;;){const $=s;if($<e){const c=fo[$];c.level<=t&&Rd(n,c),s=$+1|0;continue}else break}const o=n;return Ep(o,wn(0,o.length-1|0))}function _s(t){let n=wn(0,8),e=wn(0,8);for(;Yt(t,{_0:n,_1:e});){n=wn(0,8),e=wn(0,8);continue}return{_0:n,_1:e}}function we(t,n,e){const s=!e,o=!e,$=Un($e),c=t.health,_={id:$,owned:e,can_move:s,can_attack:o,position:n,now_health:c,enemy_base:t};return cc(Jt,_.id,_),_}function j1(){return{occupant:Se}}function t_(t){return{id:Un($e),material_base:t}}function gi(t,n,e){let s=t;const o=[];let $=0;for(;;){const c=$;if(c<9){const _=[];let i=0;for(;;){const r=i;if(r<9){jd(_,j1()),i=r+1|0;continue}else break}Od(o,_),$=c+1|0;continue}else break}if(s===6&&ve.val===!1)$t(_t(o,3),4).occupant=new Mn(we(O$(ds,"（BOSS）废械吞噬者·饕餮"),{_0:n._0+3|0,_1:n._1+4|0},!1)),$t(_t(o,5),4).occupant=new Mn(we(O$(ds,"（BOSS）织网夫人·夏特拉"),{_0:n._0+5|0,_1:n._1+4|0},!1)),ve.val=!0;else{s===6&&(s=5),$t(_t(o,4),4).occupant=new zs(ui(ed(H_,"充能线圈"),!1,void 0,{_0:n._0+4|0,_1:n._1+4|0}));const c=cn(Gu,s);let _=0;for(;;){const i=_;if(i<c){const r=bi(s),a=_s(e);Dt(e,a);const u={_0:n._0+a._0|0,_1:n._1+a._1|0};$t(_t(o,a._0),a._1).occupant=new Mn(we(r,u,!1)),_=i+1|0;continue}else break}if(Oe(.4)){const i=_s(e);Dt(e,i),$t(_t(o,i._0),i._1).occupant=new ps(t_(ju))}if(Oe(.4)){const i=_s(e);Dt(e,i),$t(_t(o,i._0),i._1).occupant=new ps(t_(Ou))}}return{level:s,index_position:n,blocks:o}}function O1(t){const n=t.blocks,e=n.length;let s=0;for(;;){const o=s;if(o<e){const $=n[o],c=$.length;let _=0;for(;;){const i=_;if(i<c){if($[i].occupant.$tag===4)return!1;_=i+1|0;continue}else break}s=o+1|0;continue}else break}return!0}function A1(t){const n=[];let e=0;for(;;){const s=e;if(s<9){let o=0;for(;;){const $=o;if($<9){$t(_t(t.blocks,s),$).occupant.$tag===4&&In(n,{_0:s,_1:$}),o=$+1|0;continue}else break}e=s+1|0;continue}else break}return n}function E1(t,n){const e=n._0,s=n._1,o=t.index_position,$=o._0,c=o._1,_=e-$|0,i=s-c|0;return _<0?i<0?{_0:5,_1:{_0:$-9|0,_1:c}}:i>=9?{_0:4,_1:{_0:$-9|0,_1:c+9|0}}:{_0:0,_1:{_0:$-9|0,_1:c}}:_>=9?i<0?{_0:7,_1:{_0:$+9|0,_1:c}}:i>=9?{_0:6,_1:{_0:$+9|0,_1:c+9|0}}:{_0:1,_1:{_0:$+9|0,_1:c}}:i<0?{_0:3,_1:{_0:$,_1:c-9|0}}:{_0:2,_1:{_0:$,_1:c+9|0}}}function R1(t){const n=Ym([]),e=t.rooms,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$],_=c.index_position,i=_._0,r=_._1;let a=0;for(;;){const u=a;if(u<9){let l=0;for(;;){const p=l;if(p<9){const m={_0:i+u|0,_1:r+p|0};lc(n,m,$t(_t(c.blocks,u),p)),l=p+1|0;continue}else break}a=u+1|0;continue}else break}o=$+1|0;continue}else break}return n}function z1(t){const n=R1(t),e=mc([]),s={map:e};return dd(n)($=>{const c=$._0;return $._1.occupant.$tag===4?ho(e,c,!0):ho(e,c,!1),1}),s}function J1(t,n){const e=fc(t.map,n);return e===-1?!1:e}function q1(t,n,e){const s=ie(n),o=[],$=s.length;let c=0;for(;;){const _=c;if(_<$){const i=s[_],r={_0:e._0+i._0|0,_1:e._1+i._1|0};J1(t,r)&&In(o,r),c=_+1|0;continue}else break}return o}function io(t,n){const e=t._0>n._0?t._0-n._0|0:n._0-t._0|0,s=t._1>n._1?t._1-n._1|0:n._1-t._1|0;return e+s|0}function T1(t,n,e,s,o){if(n._0===e._0&&n._1===e._1)return n;const $=[{position:n,g_cost:0,h_cost:io(n,e),f_cost:io(n,e)}],c=mc([]),_=Wm([]);for(;$.length>0;){let i=0,r=mn($,0);const a=$.length;let u=1;for(;;){const k=u;if(k<a){mn($,k).f_cost<r.f_cost&&(r=mn($,k),i=k),u=k+1|0;continue}else break}i0($,i),ho(c,r.position,!0);const l=io(r.position,e);let p;const m=r.position;if(m._0===e._0&&m._1===e._1?p=!0:p=l<=o,p){let k=r.position,w=r.position;for(;;){const v=nd(_,k);if(v===void 0)break;{const x=v;w=k,k=x;const S=k;if(S._0===n._0&&S._1===n._1)break;continue}}return w}const b=q1(t,s,r.position),g=b.length;let f=0;for(;;){const k=f;if(k<g){t:{const w=b[k];if(fc(c,w)!==-1)break t;const y=r.g_cost+1|0;let x=!1,S=0;const P=$.length;let C=0;for(;;){const O=C;if(O<P){const G=mn($,O).position;if(G._0===w._0&&G._1===w._1){x=!0,S=O;break}C=O+1|0;continue}else break}if(x)y<mn($,S).g_cost&&(mn($,S).g_cost=y,mn($,S).f_cost=y+mn($,S).h_cost|0,ys(_,w,r.position));else{const O=io(w,e),G=y+O|0;zd($,{position:w,g_cost:y,h_cost:O,f_cost:G}),ys(_,w,r.position)}break t}f=k+1|0;continue}else break}continue}}function hi(t,n){Ad(t.rooms,n)}function B1(t){const n=gi(1,Au,t),e={rooms:[]};return hi(e,n),e}function F1(t,n){const e=Vn(t,n);if(e===void 0)return M();{const o=e,$=rn(t,n);if($===void 0)return M();{const i=$._1;return $t(_t(o.blocks,i._0),i._1)}}}function $$(t,n){const e=Vn(t,n);if(e!==void 0){const o=e,$=rn(t,n);if($===void 0)M();else{const i=$._1,r=$t(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!0}function cs(t,n){if(Vn(t,n)!==void 0)return 0;let s=999999;const o=t.rooms,$=o.length;let c=0;for(;;){const _=c;if(_<$){const r=o[_].index_position,a=r._0,u=r._1,l=n._0,p=n._1,m=l<a?a-l|0:l>=(a+9|0)?(l-(a+9|0)|0)+1|0:0,b=p<u?u-p|0:p>=(u+9|0)?(p-(u+9|0)|0)+1|0:0,g=m>b?m:b;g<s&&(s=g),c=_+1|0;continue}else break}return s}function Bt(t,n){const e=e$(t,n),s=e._0,o=e._1;$t(_t(s.blocks,o._0),o._1).occupant=Se}function _$(t,n,e){const s=e$(t,n),o=s._0,$=s._1;$t(_t(o.blocks,$._0),$._1).occupant=e}function ki(t){const n=t.index_position,e=n._0,s=n._1;G1(t.index_position,9);let o=0;for(;;){const $=o;if($<9){let c=0;for(;;){const _=c;if(_<9){const i={_0:e+$|0,_1:s+_|0},r=$t(_t(t.blocks,$),_).occupant;switch(r.$tag){case 4:break;case 0:{const u=r._0;o$(u,u.id,i),zt(u.id,u.now_health,u.enemy_base.health);break}case 1:{const u=r._0;v1(u,u.id,i),zt(u.id,u.now_health,u.copper.attribute.health);break}case 3:{const u=r._0;pi(u,u.id,i);break}default:{const u=r._0;x1(u,u.id,i)}}c=_+1|0;continue}else break}o=$+1|0;continue}else return}}function H1(t){return((t/4|0)+1|0)>=6?6:(t/4|0)+1|0}function N1(){return{map:B1(Wc([Eu,Ru,zu]))}}function Ht(t,n){if(n===0&&(Yt(jt,t)?xo(t):Yt(he,t)?bn(t):Yt(nn,t)&&Io(t)),n===1&&(Yt(ft,t)||Yt(he,t)?bn(t):Yt(nn,t)&&Io(t)),n===2)if(Yt(ft,t)){bn(t);return}else if(Yt(he,t)){bn(t);return}else if(Yt(jt,t)){xo(t);return}else return;else return}function D1(t){const n=Zs(t),e=R([{_0:"structure",_1:ii(n)}]);Y(U,{type_msg:"handle_on_click_structure",content:D(new E(e),!1,0)})}function sn(){yt(ft)(n=>(St(n),Ht(n,0),1)),wt(ft)}function $n(){yt(jt)(n=>(St(n),Ht(n,1),1)),wt(jt)}function _n(){yt(nn)(n=>(St(n),Ht(n,2),1)),wt(nn)}function Ko(t){switch(t.$tag){case 0:return t._0.position;case 1:return t._0.position;default:return t._0.position}}function U1(t,n){$n(),sn(),_n();const e=Zs(n),s=C1(e,t),o=s.length;let $=0;for(;;){const c=$;if(c<o){const _=s[c],i=Ko(_);bn(i),Dt(ft,i),$=c+1|0;continue}else return}}function V1(){yt(ft)(n=>(St(n),Ht(n,0),1)),wt(ft)}function wi(t,n){if(Oe(t.attribute.dodge/100))return!1;const e=t.attribute.defense,s=Math.fround(n/Math.fround(n+Math.fround(Math.fround(1)*e))),o=Math.fround(n*s);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function yi(t,n){if(t.now_health=Math.fround(t.now_health+n),Math.fround(t.now_health>t.attribute.health)){t.now_health=t.attribute.health;return}else return}function Qo(t,n){if(Oe(t.enemy_base.dodge/100))return!1;const e=t.enemy_base.defense,s=Math.fround(n/Math.fround(n+Math.fround(Math.fround(1)*e))),o=Math.fround(n*s);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function c$(t){const n=[],e=t.enemy_base.drop_items,s=e.length;let o=0;for(;;){const $=o;if($<s){const c=e[$],_=wn(c._1._0,c._1._1);Gd(n,a1(new z_(c._0),_)),o=$+1|0;continue}else break}return n}function W1(t,n,e){Nn(t);const s=Zs(t),o=Pn(e,n);switch(o.$tag){case 0:{const i=o._0;Qo(i,s.structure_base.attribute.attack)?(Ks(pt.val.bag,c$(i)),To(Jt,i.id),Ut(i.id),Bt(e,i.position)):zt(i.id,i.now_health,i.enemy_base.health),s.can_attack=!1,ke(s);break}case 1:{const i=o._0;s.owned?yi(i,s.structure_base.attribute.attack):(wi(i,s.structure_base.attribute.attack)&&(bc(xn,i.id),Ut(i.id),Bt(e,i.position)),xn.size===0&&di()),zt(i.id,i.now_health,i.copper.attribute.health),s.can_attack=!1,ke(s);break}case 3:{const i=o._0;Yo(i,s.structure_base.attribute.attack)?(Bo(un,i.id),Ut(i.id),Bt(e,i.position)):zt(i.id,i.now_health,i.structure_base.health),s.can_attack=!1,ke(s);break}case 4:break;default:ln()}yt(ft)(_=>(St(_),Ht(_,0),1)),wt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){s$(t);return}}function is(t,n,e){const s=t.copper_type;let o;switch(s){case 2:{o=!1;break}case 4:{o=!1;break}default:o=!0}const $=Un($e),c=t.copper_type;let _;c===4?_=!0:_=!1;const i=t.copper_type;let r;i===2?r=!0:r=!1;const a=t.attribute.health,u=t.attribute,l={id:$,original_id:n,copper:t,can_move:!0,can_attack:o,can_summon:_,can_build:r,position:e,now_health:a,attribute:u};return Hm(xn,l.id,l),l}function tn(t){t$(t.id),mi(t.id,t.can_move),n$(t.id,t.can_attack),I1(t.id,t.can_summon),L1(t.id,t.can_build)}function X1(t){const n=pt.val.warehouse,e=is(mo(n,cn(t,0)),cn(t,0),Ju),s=is(mo(n,cn(t,1)),cn(t,1),qu),o=is(mo(n,cn(t,2)),cn(t,2),Tu);lt.val=N1();const $=lt.val;let c;$===void 0?c=M():c=$;const _=c.map,i=jp(_.rooms,0);$t(_t(i.blocks,0),3).occupant=new ne(e),$t(_t(i.blocks,0),4).occupant=new ne(s),$t(_t(i.blocks,0),5).occupant=new ne(o),ki(i),qn(e.id,2),qn(s.id,2),qn(o.id,2),tn(e),tn(s),tn(o)}function Lo(t){t:switch(t){case 0:return 1;case 1:return 0;case 2:return 2;case 3:return 3;case 4:break t;case 5:break t;case 6:break t;default:break t}return kp()}function Po(t,n){const e=n._0-t._0|0,s=n._1-t._1|0;return e!==0?e>0?2:3:s>0?0:1}function Y1(){return Fd(gc(xn))}function K1(t){const n=[],e=t.position,s=e._0,o=e._1,$=Y1(),c=$.length;let _=0;for(;;){const m=_;if(m<c){const b=$[m];os(n,{_0:b.position,_1:new oe(b)}),_=m+1|0;continue}else break}qs(Jt)(m=>(m.id!==t.id&&m.owned&&os(n,{_0:m.position,_1:new Bn(m)}),1)),Ts(un)(m=>(m.owned===!0&&os(n,{_0:m.position,_1:new Fn(m)}),1));let a=1e9,u;const l=n.length;let p=0;for(;;){const m=p;if(m<l){const b=n[m],g=b._0,f=g._0,k=g._1,w=b._1,v=f-s|0,y=v<0?-v|0:v,x=k-o|0,S=y+(x<0?-x|0:x)|0;S<a&&(a=S,u=w),p=m+1|0;continue}else break}return u}function i$(t,n){const e=t.enemy_base.attack_range,s=ie(e),o=[],$=s.length;let c=0;for(;;){const _=c;if(_<$){const i=s[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Jn(n,r)){const a=Pn(n,r);if(t.owned)switch(a.$tag){case 0:{const l=a._0;l.owned===!1&&vt(o,new Bn(l));break}case 3:{const l=a._0;l.owned===!1&&vt(o,new Fn(l));break}}else switch(a.$tag){case 1:{const l=a._0;vt(o,new oe(l));break}case 0:{const l=a._0;l.owned===!0&&vt(o,new Bn(l));break}case 3:{const l=a._0;l.owned===!0&&vt(o,new Fn(l));break}}}c=_+1|0;continue}else break}return o}function Q1(t,n){const e=i$(n,t);if(e.length>0){const s=Rp(e,0);switch(Nn(n.id),s.$tag){case 0:{const $=s._0;Qo($,n.enemy_base.attack)?(To(Jt,$.id),Ut($.id),Bt(t,$.position)):zt($.id,$.now_health,$.enemy_base.health);break}case 1:{const $=s._0;if(wi($,n.enemy_base.attack)){const _=$.copper;_.live_left=_.live_left-1|0,bc(xn,$.id),Ut($.id),Bt(t,$.position),xn.size===0&&di()}else zt($.id,$.now_health,$.copper.attribute.health);break}default:{const $=s._0;Yo($,n.enemy_base.attack)?(Bo(un,$.id),Ut($.id),Bt(t,$.position)):zt($.id,$.now_health,$.structure_base.health)}}}else{const s=K1(n);if(s!==void 0){const c=Ko(s),_=z1(t),i=T1(_,n.position,c,n.enemy_base.speed,n.enemy_base.attack_range);if(i!==void 0){const a=i;Nn(n.id);const u=n.position;Bt(t,n.position),n.position=a,_$(t,n.position,new Mn(n)),qn(n.id,Lo(Po(u,a))),vo(n.id,a)}}}return 1}function Z1(){const t=lt.val;let n;t===void 0?n=M():n=t;const e=n.map;qs(Jt)(o=>o.owned===!1?Q1(e,o):1)}function tf(){yt(ft)(o=>(St(o),1)),wt(ft),yt(jt)(o=>(St(o),1)),wt(jt),yt(he)(o=>(St(o),1)),wt(he),yt(nn)(o=>(St(o),1)),wt(nn)}function Ae(t){if(t$(t.id),t.can_move&&mi(t.id,!0),t.can_attack){n$(t.id,!0);return}else return}function nf(){gc(xn)(s=>{s.can_move=!0;const o=s.copper.copper_type;let $;switch(o){case 2:{$=!1;break}case 4:{$=!1;break}default:$=!0}s.can_attack=$;const c=s.copper.copper_type;let _;c===4?_=!0:_=!1,s.can_summon=_;const i=s.copper.copper_type;let r;return i===2?r=!0:r=!1,s.can_build=r,tn(s),1}),qs(Jt)(s=>(s.owned&&(s.can_move=!0,s.can_attack=!0,Ae(s)),1)),Ts(un)(s=>(s.owned&&(s.structure_base.can_attack&&(s.can_attack=!0),ke(s)),1))}function ef(){Ts(un)(n=>{if(n.structure_base.name==="心源矿钻"){const e=n.resource_type;if(e!==void 0){const o=e;An(pt.val.bag.resources,o,2);const $={_0:"position",_1:Ct(n.position)},c=Up(o),_={_0:"resource_type",_1:new z(c)},i=2,r=void 0,a=R([$,_,{_0:"amount",_1:new Ee(i,r)}]);Y(U,{type_msg:"drill_resource_generate",content:D(new E(a),!1,0)})}}return 1})}function of(){if(Oe(.2)){const t=lt.val;let n;t===void 0?n=M():n=t;const s=n.map.rooms,o=s.length;let $=0;for(;;){const c=$;if(c<o){t:{const _=s[c];if(O1(_))break t;const i=$t(_t(_.blocks,4),4).occupant;if(i.$tag===3&&i._0.structure_base.name==="充能线圈"){const u=_.level,l=bi(u),p=A1(_),m=Op(p,wn(0,p.length-1|0)),b={_0:_.index_position._0+m._0|0,_1:_.index_position._1+m._1|0},g=we(l,b,!1);$t(_t(_.blocks,m._0),m._1).occupant=new Mn(g),o$(g,g.id,b)}break t}$=c+1|0;continue}else return}}else return}function sf(){tf(),nf(),Z1(),P1(),of(),ef()}function $f(){lt.val=void 0,ve.val=!1,xe.val=!1,Ie.val=!1}function _f(t){$n(),sn(),_n();const n=Je(Jt,t);let e;n===void 0?e=M():e=n;const s=lt.val;let o;s===void 0?o=M():o=s;const $=o.map,_=i$(e,$).length!==0,i=R([{_0:"enemy",_1:ci(e)},{_0:"has_attack_targets",_1:It(_)}]);Y(U,{type_msg:"handle_on_click_enemy",content:D(new E(i),!1,0)})}function cf(t,n){$n(),sn(),_n();const e=Je(Jt,n);let s;e===void 0?s=M():s=e;const o=i$(s,t),$=o.length;let c=0;for(;;){const _=c;if(_<$){const i=o[_],r=Ko(i);bn(r),Dt(ft,r),c=_+1|0;continue}else return}}function rf(){yt(ft)(n=>(St(n),Ht(n,0),1)),wt(ft)}function af(t,n,e){Nn(t);const s=Je(Jt,t);let o;s===void 0?o=M():o=s;const $=Pn(e,n);switch($.$tag){case 0:{const r=$._0;Qo(r,o.enemy_base.attack)?(Ks(pt.val.bag,c$(r)),To(Jt,r.id),Ut(r.id),Bt(e,r.position),ve.val===!0&&(r.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?xe.val=!0:r.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ie.val=!0),xe.val===!0&&Ie.val===!0&&fi())):zt(r.id,r.now_health,r.enemy_base.health),o.can_attack=!1,Ae(o);break}case 3:{const r=$._0;Yo(r,o.enemy_base.attack)?(Bo(un,r.id),Ut(r.id),Bt(e,r.position)):zt(r.id,r.now_health,r.structure_base.health),o.can_attack=!1,Ae(o);break}case 4:break;default:ln()}yt(ft)(i=>(St(i),Ht(i,0),1)),wt(ft);let _;if($.$tag===4?_=!0:_=!1,!_){s$(t);return}}function uf(t,n){const e=ie(t.enemy_base.speed),s=[],o=e.length;let $=0;for(;;){const c=$;if(c<o){const _=e[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};$$(n,i)||In(s,i),$=c+1|0;continue}else break}return s}function lf(t,n){$n(),sn(),_n();const e=Je(Jt,n);let s;e===void 0?s=M():s=e;const o=uf(s,t),$=o.length;let c=0;for(;;){const _=c;if(_<$){const i=o[_];xo(i),Dt(jt,i),c=_+1|0;continue}else return}}function pf(){yt(jt)(n=>(St(n),Ht(n,1),1)),wt(jt)}function mf(t,n,e){Nn(t);const s=Je(Jt,t);let o;if(s===void 0?o=M():o=s,Vn(e,n)===void 0)ln();else{const _=o.position,i=rn(e,_);let r;i===void 0?r=M():r=i;const a=r._0,u=r._1,l=rn(e,n);let p;l===void 0?p=M():p=l;const m=p._0,b=p._1;$t(_t(a.blocks,u._0),u._1).occupant=Se,$t(_t(m.blocks,b._0),b._1).occupant=new Mn(o),o.position=n,qn(t,Lo(Po(_,n))),vo(t,n)}o.can_move=!1,Ae(o),yt(jt)(_=>(St(_),Ht(_,1),1)),wt(jt)}function en(t){const n=Zm(xn,t);return n===void 0?M():n}function df(t){const n=t.copper.copper_info.attack_range;if(n===void 0)switch(t.copper.copper_type){case 0:return 1;case 1:return 3;case 3:return 1;case 4:return 0;default:return 0}else return n}function Si(t,n){const e=df(t),s=ie(e),o=[],$=s.length;let c=0;for(;;){const _=c;if(_<$){const i=s[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(Jn(n,r)){const a=Pn(n,r);switch(a.$tag){case 1:{const l=a._0;l.copper.copper_type===3&&vt(o,new oe(l));break}case 3:{const l=a._0;l.owned===!1&&vt(o,new Fn(l));break}case 0:{const l=a._0;l.owned===!1&&vt(o,new Bn(l));break}}}c=_+1|0;continue}else break}return o}function ff(t){$n(),sn(),_n();const n=en(t),e=lt.val;let s;e===void 0?s=M():s=e;const o=s.map,c=Si(n,o).length!==0,_=R([{_0:"copper",_1:_i(en(t))},{_0:"has_attack_targets",_1:It(c)}]);Y(U,{type_msg:"handle_on_click_copper",content:D(new E(_),!1,0)}),tn(n)}function bf(t,n){$n(),sn(),_n();const e=en(n),s=Si(e,t),o=s.length;let $=0;for(;;){const c=$;if(c<o){const _=s[c],i=Ko(_);bn(i),Dt(ft,i),$=c+1|0;continue}else return}}function gf(t,n,e){Nn(t);const s=en(t),o=Pn(e,n);switch(o.$tag){case 0:{const i=o._0;if(Qo(i,s.attribute.attack)){Ks(pt.val.bag,c$(i)),To(Jt,i.id),Ut(i.id),Bt(e,i.position);const a=lt.val;let u;a===void 0?u=M():u=a;const l=u.map,p=Pn(l,i.position);let m;switch(p.$tag){case 4:{m="Empty";break}case 0:{m="Enemy";break}default:m="Other"}Lc(`deeeebug${m}`),ve.val===!0&&(i.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?xe.val=!0:i.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ie.val=!0),xe.val===!0&&Ie.val===!0&&fi())}else zt(i.id,i.now_health,i.enemy_base.health);s.can_attack=!1,tn(s);break}case 1:{const i=o._0;yi(i,s.attribute.attack),zt(i.id,i.now_health,i.copper.attribute.health),s.can_attack=!1,tn(s);break}case 3:{const i=o._0;Yo(i,s.attribute.attack)?(Bo(un,i.id),Ut(i.id),Bt(e,i.position)):zt(i.id,i.now_health,i.structure_base.health),s.can_attack=!1,tn(s);break}case 4:break;default:ln()}yt(ft)(_=>(St(_),Ht(_,0),1)),wt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){s$(t);return}}function hf(t,n){const e=ie(t.attribute.speed),s=[],o=e.length;let $=0;for(;;){const c=$;if(c<o){t:{const _=e[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};if(cs(n,i)>1||Jn(n,i))break t;const a=_._0,u=_._1;if(a!==0&&u!==0){const l={_0:t.position._0+a|0,_1:t.position._1},p={_0:t.position._0,_1:t.position._1+u|0},m=cs(n,l),b=cs(n,p),g=m<=1&&!Jn(n,l),f=b<=1&&!Jn(n,p);if(!g&&!f)break t}In(s,i);break t}$=c+1|0;continue}else break}return s}function kf(t,n){$n(),sn(),_n();const e=en(n),s=hf(e,t),o=s.length;let $=0;for(;;){const c=$;if(c<o){const _=s[c];xo(_),Dt(jt,_),$=c+1|0;continue}else return}}function wf(t,n,e){Nn(t);const s=en(t);if(Vn(e,n)===void 0){const c=s.position,_=rn(e,c);let i;_===void 0?i=M():i=_;const r=i._0,a=i._1,l=E1(r,n)._1,p=n._0-l._0|0,m=n._1-l._1|0,b=gi(H1(e.rooms.length+1|0),l,Wc([{_0:p,_1:m}]));hi(e,b),$t(_t(r.blocks,a._0),a._1).occupant=Se,$t(_t(b.blocks,p),m).occupant=new ne(s),ki(b),qn(t,Lo(Po(c,n))),s.position=n,vo(t,n)}else{const c=s.position,_=rn(e,c);let i;_===void 0?i=M():i=_;const r=i._0,a=i._1,u=rn(e,n);let l;u===void 0?l=M():l=u;const p=l._0,m=l._1;$t(_t(r.blocks,a._0),a._1).occupant=Se,$t(_t(p.blocks,m._0),m._1).occupant=new ne(s),s.position=n,qn(t,Lo(Po(c,n))),vo(t,n)}s.can_move=!1,tn(s),yt(jt)(c=>(St(c),Ht(c,1),1)),wt(jt)}function yf(t,n){const e=[],s=[Bu,Fu,Hu,Nu],o=s.length;let $=0;for(;;){const c=$;if(c<o){const _=s[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};$$(n,i)||In(e,i),$=c+1|0;continue}else break}return e}function Sf(t){$n(),sn(),_n();const n=en(t),e=lt.val;let s;e===void 0?s=M():s=e;const o=s.map,$=yf(n,o),c=$.length;let _=0;for(;;){const i=_;if(i<c){const r=$[i];Io(r),Dt(nn,r),_=i+1|0;continue}else return}}function Mf(t,n,e,s){const o=Km(ds,s);let $;o===void 0?$=M():$=o;const c=$.summon_cost,_=en(t);if(Xs(pt.val.bag.resources,c)){Ys(pt.val.bag.resources,c);const i=we($,n,!0);_$(e,n,new Mn(i)),o$(i,i.id,n),Ae(i),_.can_summon=!1,tn(_);return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r),!1,0)});return}}function Cf(){const t=R([{_0:"contents",_1:Md(fo)}]);Y(U,{type_msg:"get_summon_menu",content:D(new E(t),!1,0)})}function vf(){const t=R([{_0:"contents",_1:xd(ms)}]);Y(U,{type_msg:"get_structure_menu",content:D(new E(t),!1,0)})}function xf(t,n,e){const s=[],o=[Du,Uu,Vu,Wu],$=o.length;let c=0;for(;;){const _=c;if(_<$){const i=o[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};e?Jn(n,r)&&F1(n,r).occupant.$tag===2&&In(s,r):$$(n,r)||In(s,r),c=_+1|0;continue}else break}return s}function If(t,n){$n(),sn(),_n();const e=en(t),s=lt.val;let o;s===void 0?o=M():o=s;const $=o.map,c=xf(e,$,n==="心源矿钻"),_=c.length;let i=0;for(;;){const r=i;if(r<_){const a=c[r];Io(a),Dt(nn,a),i=r+1|0;continue}else return}}function Ls(){yt(nn)(n=>(St(n),Ht(n,2),1)),wt(nn)}function Lf(t,n,e,s){const o=Qm(H_,s);let $;o===void 0?$=M():$=o;const c=$.cost,_=en(t);if(Xs(pt.val.bag.resources,c)){Ys(pt.val.bag.resources,c);let i;if(s==="心源矿钻"){const a=Pn(e,n);if(a.$tag===2){const l=a._0;Bt(e,n),Ut(l.id),i=l.material_base.resource_type}else i=M()}else i=void 0;const r=ui($,!0,i,n);_$(e,n,new zs(r)),pi(r,r.id,n),_.can_build=!1,ke(r),Ls();return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r),!1,0)}),Ls();return}}function Q(t){t:{const n=lo(t);let e;n===void 0?e=M():e=n;const s=u2({str:e,start:0,end:e.length});if(s.$tag===1)return s._0;s._0;break t}return M()}function Pf(t){let n;t:{n:{const e=Bc({str:t,start:0,end:t.length},1024);if(e.$tag===1)n=e._0;else{e._0;break n}break t}n=M()}t:if(n.$tag===6){const s=n._0,o=I(s,"type");if(o===void 0)break t;{const c=o;if(c.$tag===4)switch(c._0){case"on_click_copper":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;ff(Q(m));return}else break t}}case"on_attack_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=lt.val;let k;f===void 0?k=M():k=f,bf(k.map,Q(g));return}}else break t}}case"on_attack_end":{sn();return}case"on_attack_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=Q(g),T={_0:Q(P),_1:Q(G)},H=lt.val;let B;H===void 0?B=M():B=H,gf(A,T,B.map);return}}}else break t}}}else break t}}case"on_move_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=lt.val;let k;f===void 0?k=M():k=f,kf(k.map,Q(g));return}}else break t}}case"on_move_end":{$n();return}case"on_move_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=Q(g),T={_0:Q(P),_1:Q(G)},H=lt.val;let B;H===void 0?B=M():B=H,wf(A,T,B.map);return}}}else break t}}}else break t}}case"on_game_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"ids");if(m===void 0)break t;{const f=W_(Fc(m)),k=new Array(f.length),w=f.length;let v=0;for(;;){const y=v;if(y<w){const x=f[y];k[y]=Q(x),v=y+1|0;continue}else break}X1(k);return}}else break t}}case"on_game_round_pass":{sf();return}case"on_click_enemy":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;_f(Q(m));return}else break t}}case"on_enemy_attack_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=lt.val;let k;f===void 0?k=M():k=f,cf(k.map,Q(g));return}}else break t}}case"on_enemy_attack_end":{rf();return}case"on_enemy_attack_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=Q(g),T={_0:Q(P),_1:Q(G)},H=lt.val;let B;H===void 0?B=M():B=H,af(A,T,B.map);return}}}else break t}}}else break t}}case"on_enemy_move_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=lt.val;let k;f===void 0?k=M():k=f,lf(k.map,Q(g));return}}else break t}}case"on_enemy_move_end":{pf();return}case"on_enemy_move_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=Q(g),T={_0:Q(P),_1:Q(G)},H=lt.val;let B;H===void 0?B=M():B=H,mf(A,T,B.map);return}}}else break t}}}else break t}}case"on_get_summon_menu":{Cf();return}case"on_summon_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;Sf(Q(m));return}else break t}}case"on_summon_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=I(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(P),_1:Q(G)},K=lt.val;let Z;K===void 0?Z=M():Z=K;const F=Z.map,N=lo(H);let V;N===void 0?V=M():V=N,Mf(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_summon_end":{_n();return}case"on_click_structure":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;D1(Q(m));return}else break t}}case"on_get_structure_menu":{vf();return}case"on_structure_build_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"name");if(f===void 0)break t;{const w=f,v=Q(g),y=lo(w);let x;y===void 0?x=M():x=y,If(v,x);return}}}else break t}}case"on_structure_build_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=I(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(P),_1:Q(G)},K=lt.val;let Z;K===void 0?Z=M():Z=K;const F=Z.map,N=lo(H);let V;N===void 0?V=M():V=N,Lf(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_structure_build_end":{Ls();return}case"on_structure_attack_start":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=lt.val;let k;f===void 0?k=M():k=f,U1(k.map,Q(g));return}}else break t}}case"on_structure_attack_end":{V1();return}case"on_structure_attack_apply":{const r=I(s,"content");if(r===void 0)break t;{const u=r;if(u.$tag===6){const p=u._0,m=I(p,"id");if(m===void 0)break t;{const g=m,f=I(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,x=I(y,"x");if(x===void 0)break t;{const P=x,C=I(y,"y");if(C===void 0)break t;{const G=C,A=Q(g),T={_0:Q(P),_1:Q(G)},H=lt.val;let B;H===void 0?B=M():B=H,W1(A,T,B.map);return}}}else break t}}}else break t}}case"on_game_over":{$f();return}default:break t}else break t}}else break t;ln()}function Gf(t){const n=$i(t),e=new Array(n.length),s=n.length;let o=0;for(;;){const $=o;if($<s){const c=n[$];e[$]=Xo(c),o=$+1|0;continue}else break}return Sd(e)}function jf(){const t={_0:"warehouse",_1:Gf(pt.val.warehouse)},n=R([{_0:"SpiritalSpark",_1:J(At(pt.val.bag.resources,2))},{_0:"RecallGear",_1:J(At(pt.val.bag.resources,1))},{_0:"ResonantCrystal",_1:J(At(pt.val.bag.resources,4))},{_0:"RefinedCopper",_1:J(At(pt.val.bag.resources,3))},{_0:"HeartCrystalDust",_1:J(At(pt.val.bag.resources,0))}]),e=R([{_0:"resources",_1:new E(n)},{_0:"equipments",_1:yd(pt.val.bag.equipments)}]),s=R([t,{_0:"bag",_1:new E(e)}]);return D(new E(s),!1,0)}function Of(t){let n=l1();if(t.$tag===5){const s=t._0,o=s.length;let $=0;for(;;){const c=$;if(c<o){const _=s[c];let i;t:{n:{const r=W0(_);if(r.$tag===1)i=r._0;else{r._0;break n}break t}i=M()}n=Qs(n,i),$=c+1|0;continue}else break}return n}else return M()}function Af(t){const n=Hc(t);let e;n===void 0?e=M():e=n;const s=c1();return md(e)($=>{const c=$._0,_=$._1;switch(c){case"SpiritalSpark":{An(s,2,Zn(re(ae(_))));break}case"RecallGear":{An(s,1,Zn(re(ae(_))));break}case"ResonantCrystal":{An(s,4,Zn(re(ae(_))));break}case"RefinedCopper":{An(s,3,Zn(re(ae(_))));break}case"HeartCrystalDust":{An(s,0,Zn(re(ae(_))));break}}return 1}),s}function Ef(t){if(t.$tag===6){const e=t._0,s=Af(ko(e,"resources")),o=W_(Fc(ko(e,"equipments"))),$=new Array(o.length),c=o.length;let _=0;for(;;){const r=_;if(r<c){const a=o[r];let u;t:{n:{const l=X0(a);if(l.$tag===1)u=l._0;else{l._0;break n}break t}u=M()}$[r]=u,_=r+1|0;continue}else break}return r1(s,$)}else return M()}function Rf(t){let n;t:{n:{const $=Bc({str:t,start:0,end:t.length},1024);let c;if($.$tag===1)c=$._0;else{$._0;break n}const _=Hc(c);_===void 0?n=M():n=_;break t}n=M()}const e=Of(ko(n,"warehouse")),s=Ef(ko(n,"bag")),o=b1(e,s);pt.val=o}function zf(){return g1(pt.val)}function Jf(){return h1(pt.val)}function qf(){return k1(pt.val)}function Tf(t){return w1(pt.val,t)}function Bf(t){X2(U,t)}function Ff(t){Rf(t)}function Hf(){return jf()}function Nf(t){Pf(t)}export{Nf as eventloop,Hf as global_export_save,qf as global_gacha,Jf as global_get_copper_list,zf as global_get_resource,Ff as global_import_save,Bf as global_info_subscribe,Tf as global_upgrade_copper};
