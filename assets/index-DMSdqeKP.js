import{T as Gl,a as Xo,b as ba,L as wa,c as qn,F as Us,M as St,V as ya,C as Dt,d as Tt,S as Ot,e as Fl,P as va,D as js,f as Bs,g as st,I as Hl,Q as Ta,h as Ul,O as Ma,i as jl,j as Bl,B as Jn,k as Vl,l as Ca,N as Kl,m as Wl,n as zl,o as Yo,p as Sa,R as Zo,q as ql,r as Jl,s as Xl,t as Co,u as Yl,v as vr,w as Zl,x as Sn,y as Ql,z as xa,A as eu,E as Tr,G as tu,H as nu,J as su,K as ou,U as So,W as Mr,X as ru,Y as iu,Z as au,_ as cu,$ as lu,a0 as uu,a1 as La,a2 as fu,a3 as Qr,a4 as ei,a5 as ti,a6 as ni,a7 as Qo,a8 as pu,a9 as du,aa as Vs,ab as hu,ac as Aa,ad as _u,ae as si,af as Ia,ag as Ea,ah as Ra,ai as Pa}from"./three-CaWlP2oR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gt(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const fe=Object.freeze({}),Ln=Object.freeze([]),xe=()=>{},ka=()=>!1,$s=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ks=e=>e.startsWith("onUpdate:"),be=Object.assign,Cr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},$u=Object.prototype.hasOwnProperty,ae=(e,t)=>$u.call(e,t),X=Array.isArray,un=e=>lo(e)==="[object Map]",Oa=e=>lo(e)==="[object Set]",Z=e=>typeof e=="function",ge=e=>typeof e=="string",Qt=e=>typeof e=="symbol",le=e=>e!==null&&typeof e=="object",Sr=e=>(le(e)||Z(e))&&Z(e.then)&&Z(e.catch),Na=Object.prototype.toString,lo=e=>Na.call(e),xr=e=>lo(e).slice(8,-1),Da=e=>lo(e)==="[object Object]",Lr=e=>ge(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Xn=Gt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mu=Gt("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),uo=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gu=/-\w/g,ot=uo(e=>e.replace(gu,t=>t.slice(1).toUpperCase())),bu=/\B([A-Z])/g,Yt=uo(e=>e.replace(bu,"-$1").toLowerCase()),fo=uo(e=>e.charAt(0).toUpperCase()+e.slice(1)),rn=uo(e=>e?`on${fo(e)}`:""),qt=(e,t)=>!Object.is(e,t),Gn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ws=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},wu=e=>{const t=parseFloat(e);return isNaN(t)?e:t},yu=e=>{const t=ge(e)?Number(e):NaN;return isNaN(t)?e:t};let oi;const ms=()=>oi||(oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zt(e){if(X(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=ge(s)?Cu(s):zt(s);if(o)for(const r in o)t[r]=o[r]}return t}else if(ge(e)||le(e))return e}const vu=/;(?![^(]*\))/g,Tu=/:([^]+)/,Mu=/\/\*[^]*?\*\//g;function Cu(e){const t={};return e.replace(Mu,"").split(vu).forEach(n=>{if(n){const s=n.split(Tu);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Zt(e){let t="";if(ge(e))t=e;else if(X(e))for(let n=0;n<e.length;n++){const s=Zt(e[n]);s&&(t+=s+" ")}else if(le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Su="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",xu="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Lu="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",Au=Gt(Su),Iu=Gt(xu),Eu=Gt(Lu),Ru="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pu=Gt(Ru);function Ga(e){return!!e||e===""}const Fa=e=>!!(e&&e.__v_isRef===!0),_e=e=>ge(e)?e:e==null?"":X(e)||le(e)&&(e.toString===Na||!Z(e.toString))?Fa(e)?_e(e.value):JSON.stringify(e,Ha,2):String(e),Ha=(e,t)=>Fa(t)?Ha(e,t.value):un(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],r)=>(n[xo(s,r)+" =>"]=o,n),{})}:Oa(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xo(n))}:Qt(t)?xo(t):le(t)&&!X(t)&&!Da(t)?String(t):t,xo=(e,t="")=>{var n;return Qt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function it(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let je;class ku{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=je,!t&&je&&(this.index=(je.scopes||(je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=je;try{return je=this,t()}finally{je=n}}else it("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=je,je=this)}off(){this._on>0&&--this._on===0&&(je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Ou(){return je}let ue;const Lo=new WeakSet;class Ua{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,je&&je.active&&je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Lo.has(this)&&(Lo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ri(this),Va(this);const t=ue,n=rt;ue=this,rt=!0;try{return this.fn()}finally{ue!==this&&it("Active effect was not restored correctly - this is likely a Vue internal bug."),Ka(this),ue=t,rt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Er(t);this.deps=this.depsTail=void 0,ri(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Lo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){er(this)&&this.run()}get dirty(){return er(this)}}let ja=0,Yn,Zn;function Ba(e,t=!1){if(e.flags|=8,t){e.next=Zn,Zn=e;return}e.next=Yn,Yn=e}function Ar(){ja++}function Ir(){if(--ja>0)return;if(Zn){let t=Zn;for(Zn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Yn;){let t=Yn;for(Yn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Va(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ka(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Er(s),Nu(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function er(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cs)||(e.globalVersion=cs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!er(e))))return;e.flags|=2;const t=e.dep,n=ue,s=rt;ue=e,rt=!0;try{Va(e);const o=e.fn(e._value);(t.version===0||qt(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ue=n,rt=s,Ka(e),e.flags&=-3}}function Er(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subsHead===e&&(n.subsHead=o),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Er(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Nu(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let rt=!0;const za=[];function at(){za.push(rt),rt=!1}function ct(){const e=za.pop();rt=e===void 0?!0:e}function ri(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ue;ue=void 0;try{t()}finally{ue=n}}}let cs=0;class Du{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0,this.subsHead=void 0}track(t){if(!ue||!rt||ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ue)n=this.activeLink=new Du(ue,this),ue.deps?(n.prevDep=ue.depsTail,ue.depsTail.nextDep=n,ue.depsTail=n):ue.deps=ue.depsTail=n,qa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ue.depsTail,n.nextDep=void 0,ue.depsTail.nextDep=n,ue.depsTail=n,ue.deps===n&&(ue.deps=s)}return ue.onTrack&&ue.onTrack(be({effect:ue},t)),n}trigger(t){this.version++,cs++,this.notify(t)}notify(t){Ar();try{for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(be({effect:n.sub},t));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ir()}}}function qa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)qa(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subsHead===void 0&&(e.dep.subsHead=e),e.dep.subs=e}}const tr=new WeakMap,fn=Symbol("Object iterate"),nr=Symbol("Map keys iterate"),ls=Symbol("Array iterate");function Te(e,t,n){if(rt&&ue){let s=tr.get(e);s||tr.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Rr),o.map=s,o.key=n),o.track({target:e,type:t,key:n})}}function gt(e,t,n,s,o,r){const i=tr.get(e);if(!i){cs++;return}const a=c=>{c&&c.trigger({target:e,type:t,key:n,newValue:s,oldValue:o,oldTarget:r})};if(Ar(),t==="clear")i.forEach(a);else{const c=X(e),u=c&&Lr(n);if(c&&n==="length"){const l=Number(s);i.forEach((f,p)=>{(p==="length"||p===ls||!Qt(p)&&p>=l)&&a(f)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),u&&a(i.get(ls)),t){case"add":c?u&&a(i.get("length")):(a(i.get(fn)),un(e)&&a(i.get(nr)));break;case"delete":c||(a(i.get(fn)),un(e)&&a(i.get(nr)));break;case"set":un(e)&&a(i.get(fn));break}}Ir()}function wn(e){const t=te(e);return t===e?t:(Te(t,"iterate",ls),Oe(e)?t:t.map(Ce))}function po(e){return Te(e=te(e),"iterate",ls),e}const Gu={__proto__:null,[Symbol.iterator](){return Ao(this,Symbol.iterator,Ce)},concat(...e){return wn(this).concat(...e.map(t=>X(t)?wn(t):t))},entries(){return Ao(this,"entries",e=>(e[1]=Ce(e[1]),e))},every(e,t){return Lt(this,"every",e,t,void 0,arguments)},filter(e,t){return Lt(this,"filter",e,t,n=>n.map(Ce),arguments)},find(e,t){return Lt(this,"find",e,t,Ce,arguments)},findIndex(e,t){return Lt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Lt(this,"findLast",e,t,Ce,arguments)},findLastIndex(e,t){return Lt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Lt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Io(this,"includes",e)},indexOf(...e){return Io(this,"indexOf",e)},join(e){return wn(this).join(e)},lastIndexOf(...e){return Io(this,"lastIndexOf",e)},map(e,t){return Lt(this,"map",e,t,void 0,arguments)},pop(){return Fn(this,"pop")},push(...e){return Fn(this,"push",e)},reduce(e,...t){return ii(this,"reduce",e,t)},reduceRight(e,...t){return ii(this,"reduceRight",e,t)},shift(){return Fn(this,"shift")},some(e,t){return Lt(this,"some",e,t,void 0,arguments)},splice(...e){return Fn(this,"splice",e)},toReversed(){return wn(this).toReversed()},toSorted(e){return wn(this).toSorted(e)},toSpliced(...e){return wn(this).toSpliced(...e)},unshift(...e){return Fn(this,"unshift",e)},values(){return Ao(this,"values",Ce)}};function Ao(e,t,n){const s=po(e),o=s[t]();return s!==e&&!Oe(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=n(r.value)),r}),o}const Fu=Array.prototype;function Lt(e,t,n,s,o,r){const i=po(e),a=i!==e&&!Oe(e),c=i[t];if(c!==Fu[t]){const f=c.apply(e,r);return a?Ce(f):f}let u=n;i!==e&&(a?u=function(f,p){return n.call(this,Ce(f),p,e)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,e)}));const l=c.call(i,u,s);return a&&o?o(l):l}function ii(e,t,n,s){const o=po(e);let r=n;return o!==e&&(Oe(e)?n.length>3&&(r=function(i,a,c){return n.call(this,i,a,c,e)}):r=function(i,a,c){return n.call(this,i,Ce(a),c,e)}),o[t](r,...s)}function Io(e,t,n){const s=te(e);Te(s,"iterate",ls);const o=s[t](...n);return(o===-1||o===!1)&&zs(n[0])?(n[0]=te(n[0]),s[t](...n)):o}function Fn(e,t,n=[]){at(),Ar();const s=te(e)[t].apply(e,n);return Ir(),ct(),s}const Hu=Gt("__proto__,__v_isRef,__isVue"),Ja=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qt));function Uu(e){Qt(e)||(e=String(e));const t=te(this);return Te(t,"has",e),t.hasOwnProperty(e)}class Xa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?nc:tc:r?ec:Qa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=X(t);if(!o){let c;if(i&&(c=Gu[n]))return c;if(n==="hasOwnProperty")return Uu}const a=Reflect.get(t,n,ve(t)?t:s);if((Qt(n)?Ja.has(n):Hu(n))||(o||Te(t,"get",n),r))return a;if(ve(a)){const c=i&&Lr(n)?a:a.value;return o&&le(c)?or(c):c}return le(a)?o?or(a):Pr(a):a}}class Ya extends Xa{constructor(t=!1){super(!1,t)}set(t,n,s,o){let r=t[n];if(!this._isShallow){const c=Mt(r);if(!Oe(s)&&!Mt(s)&&(r=te(r),s=te(s)),!X(t)&&ve(r)&&!ve(s))return c?(it(`Set operation on key "${String(n)}" failed: target is readonly.`,t[n]),!0):(r.value=s,!0)}const i=X(t)&&Lr(n)?Number(n)<t.length:ae(t,n),a=Reflect.set(t,n,s,ve(t)?t:o);return t===te(o)&&(i?qt(s,r)&&gt(t,"set",n,s,r):gt(t,"add",n,s)),a}deleteProperty(t,n){const s=ae(t,n),o=t[n],r=Reflect.deleteProperty(t,n);return r&&s&&gt(t,"delete",n,void 0,o),r}has(t,n){const s=Reflect.has(t,n);return(!Qt(n)||!Ja.has(n))&&Te(t,"has",n),s}ownKeys(t){return Te(t,"iterate",X(t)?"length":fn),Reflect.ownKeys(t)}}class Za extends Xa{constructor(t=!1){super(!0,t)}set(t,n){return it(`Set operation on key "${String(n)}" failed: target is readonly.`,t),!0}deleteProperty(t,n){return it(`Delete operation on key "${String(n)}" failed: target is readonly.`,t),!0}}const ju=new Ya,Bu=new Za,Vu=new Ya(!0),Ku=new Za(!0),sr=e=>e,Ms=e=>Reflect.getPrototypeOf(e);function Wu(e,t,n){return function(...s){const o=this.__v_raw,r=te(o),i=un(r),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,u=o[e](...s),l=n?sr:t?qs:Ce;return!t&&Te(r,"iterate",c?nr:fn),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[l(f[0]),l(f[1])]:l(f),done:p}},[Symbol.iterator](){return this}}}}function Cs(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";it(`${fo(e)} operation ${n}failed: target is readonly.`,te(this))}return e==="delete"?!1:e==="clear"?void 0:this}}function zu(e,t){const n={get(o){const r=this.__v_raw,i=te(r),a=te(o);e||(qt(o,a)&&Te(i,"get",o),Te(i,"get",a));const{has:c}=Ms(i),u=t?sr:e?qs:Ce;if(c.call(i,o))return u(r.get(o));if(c.call(i,a))return u(r.get(a));r!==i&&r.get(o)},get size(){const o=this.__v_raw;return!e&&Te(te(o),"iterate",fn),o.size},has(o){const r=this.__v_raw,i=te(r),a=te(o);return e||(qt(o,a)&&Te(i,"has",o),Te(i,"has",a)),o===a?r.has(o):r.has(o)||r.has(a)},forEach(o,r){const i=this,a=i.__v_raw,c=te(a),u=t?sr:e?qs:Ce;return!e&&Te(c,"iterate",fn),a.forEach((l,f)=>o.call(r,u(l),u(f),i))}};return be(n,e?{add:Cs("add"),set:Cs("set"),delete:Cs("delete"),clear:Cs("clear")}:{add(o){!t&&!Oe(o)&&!Mt(o)&&(o=te(o));const r=te(this);return Ms(r).has.call(r,o)||(r.add(o),gt(r,"add",o,o)),this},set(o,r){!t&&!Oe(r)&&!Mt(r)&&(r=te(r));const i=te(this),{has:a,get:c}=Ms(i);let u=a.call(i,o);u?ai(i,a,o):(o=te(o),u=a.call(i,o));const l=c.call(i,o);return i.set(o,r),u?qt(r,l)&&gt(i,"set",o,r,l):gt(i,"add",o,r),this},delete(o){const r=te(this),{has:i,get:a}=Ms(r);let c=i.call(r,o);c?ai(r,i,o):(o=te(o),c=i.call(r,o));const u=a?a.call(r,o):void 0,l=r.delete(o);return c&&gt(r,"delete",o,void 0,u),l},clear(){const o=te(this),r=o.size!==0,i=un(o)?new Map(o):new Set(o),a=o.clear();return r&&gt(o,"clear",void 0,void 0,i),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Wu(o,e,t)}),n}function ho(e,t){const n=zu(e,t);return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(ae(n,o)&&o in s?n:s,o,r)}const qu={get:ho(!1,!1)},Ju={get:ho(!1,!0)},Xu={get:ho(!0,!1)},Yu={get:ho(!0,!0)};function ai(e,t,n){const s=te(n);if(s!==n&&t.call(e,s)){const o=xr(e);it(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Qa=new WeakMap,ec=new WeakMap,tc=new WeakMap,nc=new WeakMap;function Zu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qu(e){return e.__v_skip||!Object.isExtensible(e)?0:Zu(xr(e))}function Pr(e){return Mt(e)?e:_o(e,!1,ju,qu,Qa)}function ef(e){return _o(e,!1,Vu,Ju,ec)}function or(e){return _o(e,!0,Bu,Xu,tc)}function wt(e){return _o(e,!0,Ku,Yu,nc)}function _o(e,t,n,s,o){if(!le(e))return it(`value cannot be made ${t?"readonly":"reactive"}: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Qu(e);if(r===0)return e;const i=o.get(e);if(i)return i;const a=new Proxy(e,r===2?s:n);return o.set(e,a),a}function pn(e){return Mt(e)?pn(e.__v_raw):!!(e&&e.__v_isReactive)}function Mt(e){return!!(e&&e.__v_isReadonly)}function Oe(e){return!!(e&&e.__v_isShallow)}function zs(e){return e?!!e.__v_raw:!1}function te(e){const t=e&&e.__v_raw;return t?te(t):e}function tf(e){return!ae(e,"__v_skip")&&Object.isExtensible(e)&&Ws(e,"__v_skip",!0),e}const Ce=e=>le(e)?Pr(e):e,qs=e=>le(e)?or(e):e;function ve(e){return e?e.__v_isRef===!0:!1}function ee(e){return nf(e,!1)}function nf(e,t){return ve(e)?e:new sf(e,t)}class sf{constructor(t,n){this.dep=new Rr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:te(t),this._value=n?t:Ce(t),this.__v_isShallow=n}get value(){return this.dep.track({target:this,type:"get",key:"value"}),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Oe(t)||Mt(t);t=s?t:te(t),qt(t,n)&&(this._rawValue=t,this._value=s?t:Ce(t),this.dep.trigger({target:this,type:"set",key:"value",newValue:t,oldValue:n}))}}function of(e){return ve(e)?e.value:e}const rf={get:(e,t,n)=>t==="__v_raw"?e:of(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return ve(o)&&!ve(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function sc(e){return pn(e)?e:new Proxy(e,rf)}class af{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Rr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ue!==this)return Ba(this,!0),!0}get value(){const t=this.dep.track({target:this,type:"get",key:"value"});return Wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter?this.setter(t):it("Write operation failed: computed value is readonly")}}function cf(e,t,n=!1){let s,o;return Z(e)?s=e:(s=e.get,o=e.set),new af(s,o,n)}const Ss={},Js=new WeakMap;let an;function lf(e,t=!1,n=an){if(n){let s=Js.get(n);s||Js.set(n,s=[]),s.push(e)}else t||it("onWatcherCleanup() was called when there was no active watcher to associate with.")}function uf(e,t,n=fe){const{immediate:s,deep:o,once:r,scheduler:i,augmentJob:a,call:c}=n,u=L=>{(n.onWarn||it)("Invalid watch source: ",L,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=L=>o?L:Oe(L)||o===!1||o===0?Pt(L,1):Pt(L);let f,p,d,$,b=!1,v=!1;if(ve(e)?(p=()=>e.value,b=Oe(e)):pn(e)?(p=()=>l(e),b=!0):X(e)?(v=!0,b=e.some(L=>pn(L)||Oe(L)),p=()=>e.map(L=>{if(ve(L))return L.value;if(pn(L))return l(L);if(Z(L))return c?c(L,2):L();u(L)})):Z(e)?t?p=c?()=>c(e,2):e:p=()=>{if(d){at();try{d()}finally{ct()}}const L=an;an=f;try{return c?c(e,3,[$]):e($)}finally{an=L}}:(p=xe,u(e)),t&&o){const L=p,m=o===!0?1/0:o;p=()=>Pt(L(),m)}const C=Ou(),O=()=>{f.stop(),C&&C.active&&Cr(C.effects,f)};if(r&&t){const L=t;t=(...m)=>{L(...m),O()}}let P=v?new Array(e.length).fill(Ss):Ss;const B=L=>{if(!(!(f.flags&1)||!f.dirty&&!L))if(t){const m=f.run();if(o||b||(v?m.some((j,S)=>qt(j,P[S])):qt(m,P))){d&&d();const j=an;an=f;try{const S=[m,P===Ss?void 0:v&&P[0]===Ss?[]:P,$];P=m,c?c(t,3,S):t(...S)}finally{an=j}}}else f.run()};return a&&a(B),f=new Ua(p),f.scheduler=i?()=>i(B,!1):B,$=L=>lf(L,!1,f),d=f.onStop=()=>{const L=Js.get(f);if(L){if(c)c(L,4);else for(const m of L)m();Js.delete(f)}},f.onTrack=n.onTrack,f.onTrigger=n.onTrigger,t?s?B(!0):P=f.run():i?i(B.bind(null,!0),!0):f.run(),O.pause=f.pause.bind(f),O.resume=f.resume.bind(f),O.stop=O,O}function Pt(e,t=1/0,n){if(t<=0||!le(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ve(e))Pt(e.value,t,n);else if(X(e))for(let s=0;s<e.length;s++)Pt(e[s],t,n);else if(Oa(e)||un(e))e.forEach(s=>{Pt(s,t,n)});else if(Da(e)){for(const s in e)Pt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Pt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const dn=[];function Ps(e){dn.push(e)}function ks(){dn.pop()}let Eo=!1;function G(e,...t){if(Eo)return;Eo=!0,at();const n=dn.length?dn[dn.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=ff();if(s)Nn(s,n,11,[e+t.map(r=>{var i,a;return(a=(i=r.toString)==null?void 0:i.call(r))!=null?a:JSON.stringify(r)}).join(""),n&&n.proxy,o.map(({vnode:r})=>`at <${wo(n,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...pf(o)),console.warn(...r)}ct(),Eo=!1}function ff(){let e=dn[dn.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function pf(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...df(n))}),t}function df({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${wo(e.component,e.type,s)}`,r=">"+n;return e.props?[o,...hf(e.props),r]:[o+r]}function hf(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...oc(s,e[s]))}),n.length>3&&t.push(" ..."),t}function oc(e,t,n){return ge(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:ve(t)?(t=oc(e,te(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Z(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=te(t),n?t:[`${e}=`,t])}function _f(e,t){e!==void 0&&(typeof e!="number"?G(`${t} is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&G(`${t} is NaN - the duration expression might be incorrect.`))}const kr={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Nn(e,t,n,s){try{return s?e(...s):e()}catch(o){gs(o,t,n)}}function lt(e,t,n,s){if(Z(e)){const o=Nn(e,t,n,s);return o&&Sr(o)&&o.catch(r=>{gs(r,t,n)}),o}if(X(e)){const o=[];for(let r=0;r<e.length;r++)o.push(lt(e[r],t,n,s));return o}else G(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof e}`)}function gs(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||fe;if(t){let a=t.parent;const c=t.proxy,u=kr[n];for(;a;){const l=a.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](e,c,u)===!1)return}a=a.parent}if(r){at(),Nn(r,null,10,[e,c,u]),ct();return}}$f(e,n,o,s,i)}function $f(e,t,n,s=!0,o=!1){{const r=kr[t];if(n&&Ps(n),G(`Unhandled error${r?` during execution of ${r}`:""}`),n&&ks(),s)throw e;console.error(e)}}const Pe=[];let $t=-1;const An=[];let Kt=null,Mn=0;const rc=Promise.resolve();let Xs=null;const mf=100;function Jt(e){const t=Xs||rc;return e?t.then(this?e.bind(this):e):t}function gf(e){let t=$t+1,n=Pe.length;for(;t<n;){const s=t+n>>>1,o=Pe[s],r=us(o);r<e||r===e&&o.flags&2?t=s+1:n=s}return t}function $o(e){if(!(e.flags&1)){const t=us(e),n=Pe[Pe.length-1];!n||!(e.flags&2)&&t>=us(n)?Pe.push(e):Pe.splice(gf(t),0,e),e.flags|=1,ic()}}function ic(){Xs||(Xs=rc.then(lc))}function ac(e){X(e)?An.push(...e):Kt&&e.id===-1?Kt.splice(Mn+1,0,e):e.flags&1||(An.push(e),e.flags|=1),ic()}function ci(e,t,n=$t+1){for(t=t||new Map;n<Pe.length;n++){const s=Pe[n];if(s&&s.flags&2){if(e&&s.id!==e.uid||Or(t,s))continue;Pe.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cc(e){if(An.length){const t=[...new Set(An)].sort((n,s)=>us(n)-us(s));if(An.length=0,Kt){Kt.push(...t);return}for(Kt=t,e=e||new Map,Mn=0;Mn<Kt.length;Mn++){const n=Kt[Mn];Or(e,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}Kt=null,Mn=0}}const us=e=>e.id==null?e.flags&2?-1:1/0:e.id;function lc(e){e=e||new Map;const t=n=>Or(e,n);try{for($t=0;$t<Pe.length;$t++){const n=Pe[$t];if(n&&!(n.flags&8)){if(t(n))continue;n.flags&4&&(n.flags&=-2),Nn(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;$t<Pe.length;$t++){const n=Pe[$t];n&&(n.flags&=-2)}$t=-1,Pe.length=0,cc(e),Xs=null,(Pe.length||An.length)&&lc(e)}}function Or(e,t){const n=e.get(t)||0;if(n>mf){const s=t.i,o=s&&Xc(s.type);return gs(`Maximum recursive updates exceeded${o?` in component <${o}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return e.set(t,n+1),!1}let yt=!1;const Os=new Map;ms().__VUE_HMR_RUNTIME__={createRecord:Ro(uc),rerender:Ro(yf),reload:Ro(vf)};const _n=new Map;function bf(e){const t=e.type.__hmrId;let n=_n.get(t);n||(uc(t,e.type),n=_n.get(t)),n.instances.add(e)}function wf(e){_n.get(e.type.__hmrId).instances.delete(e)}function uc(e,t){return _n.has(e)?!1:(_n.set(e,{initialDef:Ys(t),instances:new Set}),!0)}function Ys(e){return Yc(e)?e.__vccOpts:e}function yf(e,t){const n=_n.get(e);n&&(n.initialDef.render=t,[...n.instances].forEach(s=>{t&&(s.render=t,Ys(s.type).render=t),s.renderCache=[],yt=!0,s.job.flags&8||s.update(),yt=!1}))}function vf(e,t){const n=_n.get(e);if(!n)return;t=Ys(t),li(n.initialDef,t);const s=[...n.instances];for(let o=0;o<s.length;o++){const r=s[o],i=Ys(r.type);let a=Os.get(i);a||(i!==n.initialDef&&li(i,t),Os.set(i,a=new Set)),a.add(r),r.appContext.propsCache.delete(r.type),r.appContext.emitsCache.delete(r.type),r.appContext.optionsCache.delete(r.type),r.ceReload?(a.add(r),r.ceReload(t.styles),a.delete(r)):r.parent?$o(()=>{r.job.flags&8||(yt=!0,r.parent.update(),yt=!1,a.delete(r))}):r.appContext.reload?r.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),r.root.ce&&r!==r.root&&r.root.ce._removeChildStyle(i)}ac(()=>{Os.clear()})}function li(e,t){be(e,t);for(const n in e)n!=="__file"&&!(n in t)&&delete e[n]}function Ro(e){return(t,n)=>{try{return e(t,n)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let bt,Wn=[],rr=!1;function bs(e,...t){bt?bt.emit(e,...t):rr||Wn.push({event:e,args:t})}function fc(e,t){var n,s;bt=e,bt?(bt.enabled=!0,Wn.forEach(({event:o,args:r})=>bt.emit(o,...r)),Wn=[]):typeof window<"u"&&window.HTMLElement&&!((s=(n=window.navigator)==null?void 0:n.userAgent)!=null&&s.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{fc(r,t)}),setTimeout(()=>{bt||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,rr=!0,Wn=[])},3e3)):(rr=!0,Wn=[])}function Tf(e,t){bs("app:init",e,t,{Fragment:Be,Text:ys,Comment:we,Static:ns})}function Mf(e){bs("app:unmount",e)}const Cf=Nr("component:added"),pc=Nr("component:updated"),Sf=Nr("component:removed"),xf=e=>{bt&&typeof bt.cleanupBuffer=="function"&&!bt.cleanupBuffer(e)&&Sf(e)};function Nr(e){return t=>{bs(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const Lf=dc("perf:start"),Af=dc("perf:end");function dc(e){return(t,n,s)=>{bs(e,t.appContext.app,t.uid,t,n,s)}}function If(e,t,n){bs("component:emit",e.appContext.app,e,t,n)}let ke=null,hc=null;function Zs(e){const t=ke;return ke=e,hc=e&&e.type.__scopeId||null,t}function _c(e,t=ke,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&so(-1);const r=Zs(t);let i;try{i=e(...o)}finally{Zs(r),s._d&&so(1)}return pc(t),i};return s._n=!0,s._c=!0,s._d=!0,s}function $c(e){mu(e)&&G("Do not use built-in directive ids as custom directive id: "+e)}function mc(e,t){if(ke===null)return G("withDirectives can only be used inside render functions."),e;const n=bo(ke),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,i,a,c=fe]=t[o];r&&(Z(r)&&(r={mounted:r,updated:r}),r.deep&&Pt(i),s.push({dir:r,instance:n,value:i,oldValue:void 0,arg:a,modifiers:c}))}return e}function en(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let c=a.dir[s];c&&(at(),lt(c,n,8,[e.el,a,e,t]),ct())}}const Ef=Symbol("_vte"),gc=e=>e.__isTeleport,Et=Symbol("_leaveCb"),xs=Symbol("_enterCb");function Rf(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ze(()=>{e.isMounted=!0}),$n(()=>{e.isUnmounting=!0}),e}const Xe=[Function,Array],bc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xe,onEnter:Xe,onAfterEnter:Xe,onEnterCancelled:Xe,onBeforeLeave:Xe,onLeave:Xe,onAfterLeave:Xe,onLeaveCancelled:Xe,onBeforeAppear:Xe,onAppear:Xe,onAfterAppear:Xe,onAppearCancelled:Xe},wc=e=>{const t=e.subTree;return t.component?wc(t.component):t},Pf={name:"BaseTransition",props:bc,setup(e,{slots:t}){const n=Br(),s=Rf();return()=>{const o=t.default&&Tc(t.default(),!0);if(!o||!o.length)return;const r=yc(o),i=te(e),{mode:a}=i;if(a&&a!=="in-out"&&a!=="out-in"&&a!=="default"&&G(`invalid <transition> mode: ${a}`),s.isLeaving)return Po(r);const c=ui(r);if(!c)return Po(r);let u=ir(c,i,s,n,f=>u=f);c.type!==we&&fs(c,u);let l=n.subTree&&ui(n.subTree);if(l&&l.type!==we&&!cn(l,c)&&wc(n).type!==we){let f=ir(l,i,s,n);if(fs(l,f),a==="out-in"&&c.type!==we)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,l=void 0},Po(r);a==="in-out"&&c.type!==we?f.delayLeave=(p,d,$)=>{const b=vc(s,l);b[String(l.key)]=l,p[Et]=()=>{d(),p[Et]=void 0,delete u.delayedLeave,l=void 0},u.delayedLeave=()=>{$(),delete u.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return r}}};function yc(e){let t=e[0];if(e.length>1){let n=!1;for(const s of e)if(s.type!==we){if(n){G("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}t=s,n=!0}}return t}const kf=Pf;function vc(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ir(e,t,n,s,o){const{appear:r,mode:i,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:p,onLeave:d,onAfterLeave:$,onLeaveCancelled:b,onBeforeAppear:v,onAppear:C,onAfterAppear:O,onAppearCancelled:P}=t,B=String(e.key),L=vc(n,e),m=(x,q)=>{x&&lt(x,s,9,q)},j=(x,q)=>{const z=q[1];m(x,q),X(x)?x.every(w=>w.length<=1)&&z():x.length<=1&&z()},S={mode:i,persisted:a,beforeEnter(x){let q=c;if(!n.isMounted)if(r)q=v||c;else return;x[Et]&&x[Et](!0);const z=L[B];z&&cn(e,z)&&z.el[Et]&&z.el[Et](),m(q,[x])},enter(x){let q=u,z=l,w=f;if(!n.isMounted)if(r)q=C||u,z=O||l,w=P||f;else return;let y=!1;const H=x[xs]=D=>{y||(y=!0,D?m(w,[x]):m(z,[x]),S.delayedLeave&&S.delayedLeave(),x[xs]=void 0)};q?j(q,[x,H]):H()},leave(x,q){const z=String(e.key);if(x[xs]&&x[xs](!0),n.isUnmounting)return q();m(p,[x]);let w=!1;const y=x[Et]=H=>{w||(w=!0,q(),H?m(b,[x]):m($,[x]),x[Et]=void 0,L[z]===e&&delete L[z])};L[z]=e,d?j(d,[x,y]):y()},clone(x){const q=ir(x,t,n,s,o);return o&&o(q),q}};return S}function Po(e){if(ws(e))return e=Ct(e),e.children=null,e}function ui(e){if(!ws(e))return gc(e.type)&&e.children?yc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Z(n.default))return n.default()}}function fs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,fs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Tc(e,t=!1,n){let s=[],o=0;for(let r=0;r<e.length;r++){let i=e[r];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===Be?(i.patchFlag&128&&o++,s=s.concat(Tc(i.children,t,a))):(t||i.type!==we)&&s.push(a!=null?Ct(i,{key:a}):i)}if(o>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function Mc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const fi=new WeakSet,Qs=new WeakMap;function Qn(e,t,n,s,o=!1){if(X(e)){e.forEach((b,v)=>Qn(b,t&&(X(t)?t[v]:t),n,s,o));return}if(es(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Qn(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?bo(s.component):s.el,i=o?null:r,{i:a,r:c}=e;if(!a){G("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const u=t&&t.r,l=a.refs===fe?a.refs={}:a.refs,f=a.setupState,p=te(f),d=f===fe?ka:b=>(ae(p,b)&&!ve(p[b])&&G(`Template ref "${b}" used on a non-ref value. It will not work in the production build.`),fi.has(p[b])?!1:ae(p,b)),$=b=>!fi.has(b);if(u!=null&&u!==c){if(pi(t),ge(u))l[u]=null,d(u)&&(f[u]=null);else if(ve(u)){$(u)&&(u.value=null);const b=t;b.k&&(l[b.k]=null)}}if(Z(c))Nn(c,a,12,[i,l]);else{const b=ge(c),v=ve(c);if(b||v){const C=()=>{if(e.f){const O=b?d(c)?f[c]:l[c]:$(c)||!e.k?c.value:l[e.k];if(o)X(O)&&Cr(O,r);else if(X(O))O.includes(r)||O.push(r);else if(b)l[c]=[r],d(c)&&(f[c]=l[c]);else{const P=[r];$(c)&&(c.value=P),e.k&&(l[e.k]=P)}}else b?(l[c]=i,d(c)&&(f[c]=i)):v?($(c)&&(c.value=i),e.k&&(l[e.k]=i)):G("Invalid template ref type:",c,`(${typeof c})`)};if(i){const O=()=>{C(),Qs.delete(e)};O.id=-1,Qs.set(e,O),We(O,n)}else pi(e),C()}else G("Invalid template ref type:",c,`(${typeof c})`)}}function pi(e){const t=Qs.get(e);t&&(t.flags|=8,Qs.delete(e))}ms().requestIdleCallback;ms().cancelIdleCallback;const es=e=>!!e.type.__asyncLoader,ws=e=>e.type.__isKeepAlive;function Of(e,t){Cc(e,"a",t)}function Nf(e,t){Cc(e,"da",t)}function Cc(e,t,n=Se){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(mo(t,s,n),n){let o=n.parent;for(;o&&o.parent;)ws(o.parent.vnode)&&Df(s,t,n,o),o=o.parent}}function Df(e,t,n,s){const o=mo(t,e,s,!0);Sc(()=>{Cr(s[t],o)},n)}function mo(e,t,n=Se,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{at();const a=vs(n),c=lt(t,n,e,i);return a(),ct(),c});return s?o.unshift(r):o.push(r),r}else{const o=rn(kr[e].replace(/ hook$/,""));G(`${o} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Ft=e=>(t,n=Se)=>{(!ds||e==="sp")&&mo(e,(...s)=>t(...s),n)},Gf=Ft("bm"),ze=Ft("m"),Ff=Ft("bu"),Hf=Ft("u"),$n=Ft("bum"),Sc=Ft("um"),Uf=Ft("sp"),jf=Ft("rtg"),Bf=Ft("rtc");function Vf(e,t=Se){mo("ec",e,t)}const Kf=Symbol.for("v-ndc");function ko(e,t,n,s){let o;const r=n,i=X(e);if(i||ge(e)){const a=i&&pn(e);let c=!1,u=!1;a&&(c=!Oe(e),u=Mt(e),e=po(e)),o=new Array(e.length);for(let l=0,f=e.length;l<f;l++)o[l]=t(c?u?qs(Ce(e[l])):Ce(e[l]):e[l],l,void 0,r)}else if(typeof e=="number"){Number.isInteger(e)||G(`The v-for range expect an integer value but got ${e}.`),o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,r)}else if(le(e))if(e[Symbol.iterator])o=Array.from(e,(a,c)=>t(a,c,void 0,r));else{const a=Object.keys(e);o=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const l=a[c];o[c]=t(e[l],l,c,r)}}else o=[];return o}const ar=e=>e?qc(e)?bo(e):ar(e.parent):null,hn=be(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>wt(e.props),$attrs:e=>wt(e.attrs),$slots:e=>wt(e.slots),$refs:e=>wt(e.refs),$parent:e=>ar(e.parent),$root:e=>ar(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ac(e),$forceUpdate:e=>e.f||(e.f=()=>{$o(e.update)}),$nextTick:e=>e.n||(e.n=Jt.bind(e.proxy)),$watch:e=>Mp.bind(e)}),Dr=e=>e==="_"||e==="$",Oo=(e,t)=>e!==fe&&!e.__isScriptSetup&&ae(e,t),xc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:c}=e;if(t==="__isVue")return!0;let u;if(t[0]!=="$"){const d=i[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(Oo(s,t))return i[t]=1,s[t];if(o!==fe&&ae(o,t))return i[t]=2,o[t];if((u=e.propsOptions[0])&&ae(u,t))return i[t]=3,r[t];if(n!==fe&&ae(n,t))return i[t]=4,n[t];cr&&(i[t]=0)}}const l=hn[t];let f,p;if(l)return t==="$attrs"?(Te(e.attrs,"get",""),no()):t==="$slots"&&Te(e,"get",t),l(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==fe&&ae(n,t))return i[t]=4,n[t];if(p=c.config.globalProperties,ae(p,t))return p[t];ke&&(!ge(t)||t.indexOf("__v")!==0)&&(o!==fe&&Dr(t[0])&&ae(o,t)?G(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===ke&&G(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return Oo(o,t)?(o[t]=n,!0):o.__isScriptSetup&&ae(o,t)?(G(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):s!==fe&&ae(s,t)?(s[t]=n,!0):ae(e.props,t)?(G(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in e?(G(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):(t in e.appContext.config.globalProperties?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,value:n}):r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r,type:i}},a){let c,u;return!!(n[a]||e!==fe&&a[0]!=="$"&&ae(e,a)||Oo(t,a)||(c=r[0])&&ae(c,a)||ae(s,a)||ae(hn,a)||ae(o.config.globalProperties,a)||(u=i.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ae(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};xc.ownKeys=e=>(G("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e));function Wf(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(hn).forEach(n=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:()=>hn[n](e),set:xe})}),t}function zf(e){const{ctx:t,propsOptions:[n]}=e;n&&Object.keys(n).forEach(s=>{Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>e.props[s],set:xe})})}function qf(e){const{ctx:t,setupState:n}=e;Object.keys(te(n)).forEach(s=>{if(!n.__isScriptSetup){if(Dr(s[0])){G(`setup() return property ${JSON.stringify(s)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>n[s],set:xe})}})}function di(e){return X(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Jf(){const e=Object.create(null);return(t,n)=>{e[n]?G(`${t} property "${n}" is already defined in ${e[n]}.`):e[n]=t}}let cr=!0;function Xf(e){const t=Ac(e),n=e.proxy,s=e.ctx;cr=!1,t.beforeCreate&&hi(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:a,provide:c,inject:u,created:l,beforeMount:f,mounted:p,beforeUpdate:d,updated:$,activated:b,deactivated:v,beforeDestroy:C,beforeUnmount:O,destroyed:P,unmounted:B,render:L,renderTracked:m,renderTriggered:j,errorCaptured:S,serverPrefetch:x,expose:q,inheritAttrs:z,components:w,directives:y,filters:H}=t,D=Jf();{const[K]=e.propsOptions;if(K)for(const W in K)D("Props",W)}if(u&&Yf(u,s,D),i)for(const K in i){const W=i[K];Z(W)?(Object.defineProperty(s,K,{value:W.bind(n),configurable:!0,enumerable:!0,writable:!0}),D("Methods",K)):G(`Method "${K}" has type "${typeof W}" in the component definition. Did you reference the function correctly?`)}if(o){Z(o)||G("The data option must be a function. Plain object usage is no longer supported.");const K=o.call(n,n);if(Sr(K)&&G("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!le(K))G("data() should return an object.");else{e.data=Pr(K);for(const W in K)D("Data",W),Dr(W[0])||Object.defineProperty(s,W,{configurable:!0,enumerable:!0,get:()=>K[W],set:xe})}}if(cr=!0,r)for(const K in r){const W=r[K],se=Z(W)?W.bind(n,n):Z(W.get)?W.get.bind(n,n):xe;se===xe&&G(`Computed property "${K}" has no getter.`);const Ge=!Z(W)&&Z(W.set)?W.set.bind(n):()=>{G(`Write operation failed: computed property "${K}" is readonly.`)},Le=Yp({get:se,set:Ge});Object.defineProperty(s,K,{enumerable:!0,configurable:!0,get:()=>Le.value,set:Ae=>Le.value=Ae}),D("Computed",K)}if(a)for(const K in a)Lc(a[K],s,n,K);if(c){const K=Z(c)?c.call(n):c;Reflect.ownKeys(K).forEach(W=>{sp(W,K[W])})}l&&hi(l,e,"c");function V(K,W){X(W)?W.forEach(se=>K(se.bind(n))):W&&K(W.bind(n))}if(V(Gf,f),V(ze,p),V(Ff,d),V(Hf,$),V(Of,b),V(Nf,v),V(Vf,S),V(Bf,m),V(jf,j),V($n,O),V(Sc,B),V(Uf,x),X(q))if(q.length){const K=e.exposed||(e.exposed={});q.forEach(W=>{Object.defineProperty(K,W,{get:()=>n[W],set:se=>n[W]=se,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===xe&&(e.render=L),z!=null&&(e.inheritAttrs=z),w&&(e.components=w),y&&(e.directives=y),x&&Mc(e)}function Yf(e,t,n=xe){X(e)&&(e=lr(e));for(const s in e){const o=e[s];let r;le(o)?"default"in o?r=Ns(o.from||s,o.default,!0):r=Ns(o.from||s):r=Ns(o),ve(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[s]=r,n("Inject",s)}}function hi(e,t,n){lt(X(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Lc(e,t,n,s){let o=s.includes(".")?Uc(n,s):()=>n[s];if(ge(e)){const r=t[e];Z(r)?ts(o,r):G(`Invalid watch handler specified by key "${e}"`,r)}else if(Z(e))ts(o,e.bind(n));else if(le(e))if(X(e))e.forEach(r=>Lc(r,t,n,s));else{const r=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(r)?ts(o,r,e):G(`Invalid watch handler specified by key "${e.handler}"`,r)}else G(`Invalid watch option: "${s}"`,e)}function Ac(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let c;return a?c=a:!o.length&&!n&&!s?c=t:(c={},o.length&&o.forEach(u=>eo(c,u,i,!0)),eo(c,t,i)),le(t)&&r.set(t,c),c}function eo(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&eo(e,r,n,!0),o&&o.forEach(i=>eo(e,i,n,!0));for(const i in t)if(s&&i==="expose")G('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=Zf[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const Zf={data:_i,props:$i,emits:$i,methods:zn,computed:zn,beforeCreate:Re,created:Re,beforeMount:Re,mounted:Re,beforeUpdate:Re,updated:Re,beforeDestroy:Re,beforeUnmount:Re,destroyed:Re,unmounted:Re,activated:Re,deactivated:Re,errorCaptured:Re,serverPrefetch:Re,components:zn,directives:zn,watch:ep,provide:_i,inject:Qf};function _i(e,t){return t?e?function(){return be(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function Qf(e,t){return zn(lr(e),lr(t))}function lr(e){if(X(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Re(e,t){return e?[...new Set([].concat(e,t))]:t}function zn(e,t){return e?be(Object.create(null),e,t):t}function $i(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:be(Object.create(null),di(e),di(t??{})):t}function ep(e,t){if(!e)return t;if(!t)return e;const n=be(Object.create(null),e);for(const s in t)n[s]=Re(e[s],t[s]);return n}function Ic(){return{app:null,config:{isNativeTag:ka,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tp=0;function np(e,t){return function(s,o=null){Z(s)||(s=be({},s)),o!=null&&!le(o)&&(G("root props passed to app.mount() must be an object."),o=null);const r=Ic(),i=new WeakSet,a=[];let c=!1;const u=r.app={_uid:tp++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:Si,get config(){return r.config},set config(l){G("app.config cannot be replaced. Modify individual options instead.")},use(l,...f){return i.has(l)?G("Plugin has already been applied to target app."):l&&Z(l.install)?(i.add(l),l.install(u,...f)):Z(l)?(i.add(l),l(u,...f)):G('A plugin must either be a function or an object with an "install" function.'),u},mixin(l){return r.mixins.includes(l)?G("Mixin has already been applied to target app"+(l.name?`: ${l.name}`:"")):r.mixins.push(l),u},component(l,f){return _r(l,r.config),f?(r.components[l]&&G(`Component "${l}" has already been registered in target app.`),r.components[l]=f,u):r.components[l]},directive(l,f){return $c(l),f?(r.directives[l]&&G(`Directive "${l}" has already been registered in target app.`),r.directives[l]=f,u):r.directives[l]},mount(l,f,p){if(c)G("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{l.__vue_app__&&G("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const d=u._ceVNode||ye(s,o);return d.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),r.reload=()=>{const $=Ct(d);$.el=null,e($,l,p)},e(d,l,p),c=!0,u._container=l,l.__vue_app__=u,u._instance=d.component,Tf(u,Si),bo(d.component)}},onUnmount(l){typeof l!="function"&&G(`Expected function as first argument to app.onUnmount(), but got ${typeof l}`),a.push(l)},unmount(){c?(lt(a,u._instance,16),e(null,u._container),u._instance=null,Mf(u),delete u._container.__vue_app__):G("Cannot unmount an app that is not mounted.")},provide(l,f){return l in r.provides&&(ae(r.provides,l)?G(`App already provides property with key "${String(l)}". It will be overwritten with the new value.`):G(`App already provides property with key "${String(l)}" inherited from its parent element. It will be overwritten with the new value.`)),r.provides[l]=f,u},runWithContext(l){const f=In;In=u;try{return l()}finally{In=f}}};return u}}let In=null;function sp(e,t){if(!Se)G("provide() can only be used inside setup().");else{let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[e]=t}}function Ns(e,t,n=!1){const s=Br();if(s||In){let o=In?In._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Z(t)?t.call(s&&s.proxy):t;G(`injection "${String(e)}" not found.`)}else G("inject() can only be used inside setup() or functional components.")}const Ec={},Rc=()=>Object.create(Ec),Pc=e=>Object.getPrototypeOf(e)===Ec;function op(e,t,n,s=!1){const o={},r=Rc();e.propsDefaults=Object.create(null),kc(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);Nc(t||{},o,e),n?e.props=s?o:ef(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function rp(e){for(;e;){if(e.type.__hmrId)return!0;e=e.parent}}function ip(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,a=te(o),[c]=e.propsOptions;let u=!1;if(!rp(e)&&(s||i>0)&&!(i&16)){if(i&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let p=l[f];if(go(e.emitsOptions,p))continue;const d=t[p];if(c)if(ae(r,p))d!==r[p]&&(r[p]=d,u=!0);else{const $=ot(p);o[$]=ur(c,a,$,d,e,!1)}else d!==r[p]&&(r[p]=d,u=!0)}}}else{kc(e,t,o,r)&&(u=!0);let l;for(const f in a)(!t||!ae(t,f)&&((l=Yt(f))===f||!ae(t,l)))&&(c?n&&(n[f]!==void 0||n[l]!==void 0)&&(o[f]=ur(c,a,f,void 0,e,!0)):delete o[f]);if(r!==a)for(const f in r)(!t||!ae(t,f))&&(delete r[f],u=!0)}u&&gt(e.attrs,"set",""),Nc(t||{},o,e)}function kc(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,a;if(t)for(let c in t){if(Xn(c))continue;const u=t[c];let l;o&&ae(o,l=ot(c))?!r||!r.includes(l)?n[l]=u:(a||(a={}))[l]=u:go(e.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,i=!0)}if(r){const c=te(n),u=a||fe;for(let l=0;l<r.length;l++){const f=r[l];n[f]=ur(o,c,f,u[f],e,!ae(u,f))}}return i}function ur(e,t,n,s,o,r){const i=e[n];if(i!=null){const a=ae(i,"default");if(a&&s===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&Z(c)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const l=vs(o);s=u[n]=c.call(null,t),l()}}else s=c;o.ce&&o.ce._setProp(n,s)}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===Yt(n))&&(s=!0))}return s}const ap=new WeakMap;function Oc(e,t,n=!1){const s=n?ap:t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},a=[];let c=!1;if(!Z(e)){const l=f=>{c=!0;const[p,d]=Oc(f,t,!0);be(i,p),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!r&&!c)return le(e)&&s.set(e,Ln),Ln;if(X(r))for(let l=0;l<r.length;l++){ge(r[l])||G("props must be strings when using array syntax.",r[l]);const f=ot(r[l]);mi(f)&&(i[f]=fe)}else if(r){le(r)||G("invalid props options",r);for(const l in r){const f=ot(l);if(mi(f)){const p=r[l],d=i[f]=X(p)||Z(p)?{type:p}:be({},p),$=d.type;let b=!1,v=!0;if(X($))for(let C=0;C<$.length;++C){const O=$[C],P=Z(O)&&O.name;if(P==="Boolean"){b=!0;break}else P==="String"&&(v=!1)}else b=Z($)&&$.name==="Boolean";d[0]=b,d[1]=v,(b||ae(d,"default"))&&a.push(f)}}}const u=[i,a];return le(e)&&s.set(e,u),u}function mi(e){return e[0]!=="$"&&!Xn(e)?!0:(G(`Invalid prop name: "${e}" is a reserved property.`),!1)}function cp(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Nc(e,t,n){const s=te(t),o=n.propsOptions[0],r=Object.keys(e).map(i=>ot(i));for(const i in o){let a=o[i];a!=null&&lp(i,s[i],a,wt(s),!r.includes(i))}}function lp(e,t,n,s,o){const{type:r,required:i,validator:a,skipCheck:c}=n;if(i&&o){G('Missing required prop: "'+e+'"');return}if(!(t==null&&!i)){if(r!=null&&r!==!0&&!c){let u=!1;const l=X(r)?r:[r],f=[];for(let p=0;p<l.length&&!u;p++){const{valid:d,expectedType:$}=fp(t,l[p]);f.push($||""),u=d}if(!u){G(pp(e,t,f));return}}a&&!a(t,s)&&G('Invalid prop: custom validator check failed for prop "'+e+'".')}}const up=Gt("String,Number,Boolean,Function,Symbol,BigInt");function fp(e,t){let n;const s=cp(t);if(s==="null")n=e===null;else if(up(s)){const o=typeof e;n=o===s.toLowerCase(),!n&&o==="object"&&(n=e instanceof t)}else s==="Object"?n=le(e):s==="Array"?n=X(e):n=e instanceof t;return{valid:n,expectedType:s}}function pp(e,t,n){if(n.length===0)return`Prop type [] for prop "${e}" won't match anything. Did you mean to use type Array instead?`;let s=`Invalid prop: type check failed for prop "${e}". Expected ${n.map(fo).join(" | ")}`;const o=n[0],r=xr(t),i=gi(t,o),a=gi(t,r);return n.length===1&&bi(o)&&!dp(o,r)&&(s+=` with value ${i}`),s+=`, got ${r} `,bi(r)&&(s+=`with value ${a}.`),s}function gi(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function bi(e){return["string","number","boolean"].some(n=>e.toLowerCase()===n)}function dp(...e){return e.some(t=>t.toLowerCase()==="boolean")}const Gr=e=>e==="_"||e==="_ctx"||e==="$stable",Fr=e=>X(e)?e.map(nt):[nt(e)],hp=(e,t,n)=>{if(t._n)return t;const s=_c((...o)=>(Se&&!(n===null&&ke)&&!(n&&n.root!==Se.root)&&G(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),Fr(t(...o))),n);return s._c=!1,s},Dc=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Gr(o))continue;const r=e[o];if(Z(r))t[o]=hp(o,r,s);else if(r!=null){G(`Non-function value encountered for slot "${o}". Prefer function slots for better performance.`);const i=Fr(r);t[o]=()=>i}}},Gc=(e,t)=>{ws(e.vnode)||G("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=Fr(t);e.slots.default=()=>n},fr=(e,t,n)=>{for(const s in t)(n||!Gr(s))&&(e[s]=t[s])},_p=(e,t,n)=>{const s=e.slots=Rc();if(e.vnode.shapeFlag&32){const o=t._;o?(fr(s,t,n),n&&Ws(s,"_",o,!0)):Dc(t,s)}else t&&Gc(e,t)},$p=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=fe;if(s.shapeFlag&32){const a=t._;a?yt?(fr(o,t,n),gt(e,"set","$slots")):n&&a===1?r=!1:fr(o,t,n):(r=!t.$stable,Dc(t,o)),i=t}else t&&(Gc(e,t),i={default:1});if(r)for(const a in o)!Gr(a)&&i[a]==null&&delete o[a]};let Hn,Rt;function yn(e,t){e.appContext.config.performance&&to()&&Rt.mark(`vue-${t}-${e.uid}`),Lf(e,t,to()?Rt.now():Date.now())}function vn(e,t){if(e.appContext.config.performance&&to()){const n=`vue-${t}-${e.uid}`,s=n+":end",o=`<${wo(e,e.type)}> ${t}`;Rt.mark(s),Rt.measure(o,n,s),Rt.clearMeasures(o),Rt.clearMarks(n),Rt.clearMarks(s)}Af(e,t,to()?Rt.now():Date.now())}function to(){return Hn!==void 0||(typeof window<"u"&&window.performance?(Hn=!0,Rt=window.performance):Hn=!1),Hn}function mp(){const e=[];if(e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const We=Rp;function gp(e){return bp(e)}function bp(e,t){mp();const n=ms();n.__VUE__=!0,fc(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:c,setText:u,setElementText:l,parentNode:f,nextSibling:p,setScopeId:d=xe,insertStaticContent:$}=e,b=(h,_,M,R=null,I=null,A=null,F=void 0,N=null,k=yt?!1:!!_.dynamicChildren)=>{if(h===_)return;h&&!cn(h,_)&&(R=Je(h),Ie(h,I,A,!0),h=null),_.patchFlag===-2&&(k=!1,_.dynamicChildren=null);const{type:E,ref:J,shapeFlag:U}=_;switch(E){case ys:v(h,_,M,R);break;case we:C(h,_,M,R);break;case ns:h==null?O(_,M,R,F):P(h,_,M,F);break;case Be:y(h,_,M,R,I,A,F,N,k);break;default:U&1?m(h,_,M,R,I,A,F,N,k):U&6?H(h,_,M,R,I,A,F,N,k):U&64||U&128?E.process(h,_,M,R,I,A,F,N,k,Ke):G("Invalid VNode type:",E,`(${typeof E})`)}J!=null&&I?Qn(J,h&&h.ref,A,_||h,!_):J==null&&h&&h.ref!=null&&Qn(h.ref,null,A,h,!0)},v=(h,_,M,R)=>{if(h==null)s(_.el=a(_.children),M,R);else{const I=_.el=h.el;_.children!==h.children&&u(I,_.children)}},C=(h,_,M,R)=>{h==null?s(_.el=c(_.children||""),M,R):_.el=h.el},O=(h,_,M,R)=>{[h.el,h.anchor]=$(h.children,_,M,R,h.el,h.anchor)},P=(h,_,M,R)=>{if(_.children!==h.children){const I=p(h.anchor);L(h),[_.el,_.anchor]=$(_.children,M,I,R)}else _.el=h.el,_.anchor=h.anchor},B=({el:h,anchor:_},M,R)=>{let I;for(;h&&h!==_;)I=p(h),s(h,M,R),h=I;s(_,M,R)},L=({el:h,anchor:_})=>{let M;for(;h&&h!==_;)M=p(h),o(h),h=M;o(_)},m=(h,_,M,R,I,A,F,N,k)=>{_.type==="svg"?F="svg":_.type==="math"&&(F="mathml"),h==null?j(_,M,R,I,A,F,N,k):q(h,_,I,A,F,N,k)},j=(h,_,M,R,I,A,F,N)=>{let k,E;const{props:J,shapeFlag:U,transition:Y,dirs:Q}=h;if(k=h.el=i(h.type,A,J&&J.is,J),U&8?l(k,h.children):U&16&&x(h.children,k,null,R,I,No(h,A),F,N),Q&&en(h,null,R,"created"),S(k,h,h.scopeId,F,R),J){for(const de in J)de!=="value"&&!Xn(de)&&r(k,de,null,J[de],A,R);"value"in J&&r(k,"value",null,J.value,A),(E=J.onVnodeBeforeMount)&&_t(E,R,h)}Ws(k,"__vnode",h,!0),Ws(k,"__vueParentComponent",R,!0),Q&&en(h,null,R,"beforeMount");const re=wp(I,Y);re&&Y.beforeEnter(k),s(k,_,M),((E=J&&J.onVnodeMounted)||re||Q)&&We(()=>{E&&_t(E,R,h),re&&Y.enter(k),Q&&en(h,null,R,"mounted")},I)},S=(h,_,M,R,I)=>{if(M&&d(h,M),R)for(let A=0;A<R.length;A++)d(h,R[A]);if(I){let A=I.subTree;if(A.patchFlag>0&&A.patchFlag&2048&&(A=Hr(A.children)||A),_===A||Vc(A.type)&&(A.ssContent===_||A.ssFallback===_)){const F=I.vnode;S(h,F,F.scopeId,F.slotScopeIds,I.parent)}}},x=(h,_,M,R,I,A,F,N,k=0)=>{for(let E=k;E<h.length;E++){const J=h[E]=N?Wt(h[E]):nt(h[E]);b(null,J,_,M,R,I,A,F,N)}},q=(h,_,M,R,I,A,F)=>{const N=_.el=h.el;N.__vnode=_;let{patchFlag:k,dynamicChildren:E,dirs:J}=_;k|=h.patchFlag&16;const U=h.props||fe,Y=_.props||fe;let Q;if(M&&tn(M,!1),(Q=Y.onVnodeBeforeUpdate)&&_t(Q,M,_,h),J&&en(_,h,M,"beforeUpdate"),M&&tn(M,!0),yt&&(k=0,F=!1,E=null),(U.innerHTML&&Y.innerHTML==null||U.textContent&&Y.textContent==null)&&l(N,""),E?(z(h.dynamicChildren,E,N,M,R,No(_,I),A),pr(h,_)):F||se(h,_,N,null,M,R,No(_,I),A,!1),k>0){if(k&16)w(N,U,Y,M,I);else if(k&2&&U.class!==Y.class&&r(N,"class",null,Y.class,I),k&4&&r(N,"style",U.style,Y.style,I),k&8){const re=_.dynamicProps;for(let de=0;de<re.length;de++){const pe=re[de],He=U[pe],Ue=Y[pe];(Ue!==He||pe==="value")&&r(N,pe,He,Ue,I,M)}}k&1&&h.children!==_.children&&l(N,_.children)}else!F&&E==null&&w(N,U,Y,M,I);((Q=Y.onVnodeUpdated)||J)&&We(()=>{Q&&_t(Q,M,_,h),J&&en(_,h,M,"updated")},R)},z=(h,_,M,R,I,A,F)=>{for(let N=0;N<_.length;N++){const k=h[N],E=_[N],J=k.el&&(k.type===Be||!cn(k,E)||k.shapeFlag&198)?f(k.el):M;b(k,E,J,null,R,I,A,F,!0)}},w=(h,_,M,R,I)=>{if(_!==M){if(_!==fe)for(const A in _)!Xn(A)&&!(A in M)&&r(h,A,_[A],null,I,R);for(const A in M){if(Xn(A))continue;const F=M[A],N=_[A];F!==N&&A!=="value"&&r(h,A,N,F,I,R)}"value"in M&&r(h,"value",_.value,M.value,I)}},y=(h,_,M,R,I,A,F,N,k)=>{const E=_.el=h?h.el:a(""),J=_.anchor=h?h.anchor:a("");let{patchFlag:U,dynamicChildren:Y,slotScopeIds:Q}=_;(yt||U&2048)&&(U=0,k=!1,Y=null),Q&&(N=N?N.concat(Q):Q),h==null?(s(E,M,R),s(J,M,R),x(_.children||[],M,J,I,A,F,N,k)):U>0&&U&64&&Y&&h.dynamicChildren?(z(h.dynamicChildren,Y,M,I,A,F,N),pr(h,_)):se(h,_,M,J,I,A,F,N,k)},H=(h,_,M,R,I,A,F,N,k)=>{_.slotScopeIds=N,h==null?_.shapeFlag&512?I.ctx.activate(_,M,R,F,k):D(_,M,R,I,A,F,k):V(h,_,k)},D=(h,_,M,R,I,A,F)=>{const N=h.component=Up(h,R,I);if(N.type.__hmrId&&bf(N),Ps(h),yn(N,"mount"),ws(h)&&(N.ctx.renderer=Ke),yn(N,"init"),Bp(N,!1,F),vn(N,"init"),yt&&(h.el=null),N.asyncDep){if(I&&I.registerDep(N,K,F),!h.el){const k=N.subTree=ye(we);C(null,k,_,M),h.placeholder=k.el}}else K(N,h,_,M,I,A,F);ks(),vn(N,"mount")},V=(h,_,M)=>{const R=_.component=h.component;if(Ip(h,_,M))if(R.asyncDep&&!R.asyncResolved){Ps(_),W(R,_,M),ks();return}else R.next=_,R.update();else _.el=h.el,R.vnode=_},K=(h,_,M,R,I,A,F)=>{const N=()=>{if(h.isMounted){let{next:U,bu:Y,u:Q,parent:re,vnode:de}=h;{const dt=Fc(h);if(dt){U&&(U.el=de.el,W(h,U,F)),dt.asyncDep.then(()=>{h.isUnmounted||N()});return}}let pe=U,He;Ps(U||h.vnode),tn(h,!1),U?(U.el=de.el,W(h,U,F)):U=de,Y&&Gn(Y),(He=U.props&&U.props.onVnodeBeforeUpdate)&&_t(He,re,U,de),tn(h,!0),yn(h,"render");const Ue=yi(h);vn(h,"render");const pt=h.subTree;h.subTree=Ue,yn(h,"patch"),b(pt,Ue,f(pt.el),Je(pt),h,I,A),vn(h,"patch"),U.el=Ue.el,pe===null&&Ep(h,Ue.el),Q&&We(Q,I),(He=U.props&&U.props.onVnodeUpdated)&&We(()=>_t(He,re,U,de),I),pc(h),ks()}else{let U;const{el:Y,props:Q}=_,{bm:re,m:de,parent:pe,root:He,type:Ue}=h,pt=es(_);tn(h,!1),re&&Gn(re),!pt&&(U=Q&&Q.onVnodeBeforeMount)&&_t(U,pe,_),tn(h,!0);{He.ce&&He.ce._def.shadowRoot!==!1&&He.ce._injectChildStyle(Ue),yn(h,"render");const dt=h.subTree=yi(h);vn(h,"render"),yn(h,"patch"),b(null,dt,M,R,h,I,A),vn(h,"patch"),_.el=dt.el}if(de&&We(de,I),!pt&&(U=Q&&Q.onVnodeMounted)){const dt=_;We(()=>_t(U,pe,dt),I)}(_.shapeFlag&256||pe&&es(pe.vnode)&&pe.vnode.shapeFlag&256)&&h.a&&We(h.a,I),h.isMounted=!0,Cf(h),_=M=R=null}};h.scope.on();const k=h.effect=new Ua(N);h.scope.off();const E=h.update=k.run.bind(k),J=h.job=k.runIfDirty.bind(k);J.i=h,J.id=h.uid,k.scheduler=()=>$o(J),tn(h,!0),k.onTrack=h.rtc?U=>Gn(h.rtc,U):void 0,k.onTrigger=h.rtg?U=>Gn(h.rtg,U):void 0,E()},W=(h,_,M)=>{_.component=h;const R=h.vnode.props;h.vnode=_,h.next=null,ip(h,_.props,R,M),$p(h,_.children,M),at(),ci(h),ct()},se=(h,_,M,R,I,A,F,N,k=!1)=>{const E=h&&h.children,J=h?h.shapeFlag:0,U=_.children,{patchFlag:Y,shapeFlag:Q}=_;if(Y>0){if(Y&128){Le(E,U,M,R,I,A,F,N,k);return}else if(Y&256){Ge(E,U,M,R,I,A,F,N,k);return}}Q&8?(J&16&&Fe(E,I,A),U!==E&&l(M,U)):J&16?Q&16?Le(E,U,M,R,I,A,F,N,k):Fe(E,I,A,!0):(J&8&&l(M,""),Q&16&&x(U,M,R,I,A,F,N,k))},Ge=(h,_,M,R,I,A,F,N,k)=>{h=h||Ln,_=_||Ln;const E=h.length,J=_.length,U=Math.min(E,J);let Y;for(Y=0;Y<U;Y++){const Q=_[Y]=k?Wt(_[Y]):nt(_[Y]);b(h[Y],Q,M,null,I,A,F,N,k)}E>J?Fe(h,I,A,!0,!1,U):x(_,M,R,I,A,F,N,k,U)},Le=(h,_,M,R,I,A,F,N,k)=>{let E=0;const J=_.length;let U=h.length-1,Y=J-1;for(;E<=U&&E<=Y;){const Q=h[E],re=_[E]=k?Wt(_[E]):nt(_[E]);if(cn(Q,re))b(Q,re,M,null,I,A,F,N,k);else break;E++}for(;E<=U&&E<=Y;){const Q=h[U],re=_[Y]=k?Wt(_[Y]):nt(_[Y]);if(cn(Q,re))b(Q,re,M,null,I,A,F,N,k);else break;U--,Y--}if(E>U){if(E<=Y){const Q=Y+1,re=Q<J?_[Q].el:R;for(;E<=Y;)b(null,_[E]=k?Wt(_[E]):nt(_[E]),M,re,I,A,F,N,k),E++}}else if(E>Y)for(;E<=U;)Ie(h[E],I,A,!0),E++;else{const Q=E,re=E,de=new Map;for(E=re;E<=Y;E++){const Ee=_[E]=k?Wt(_[E]):nt(_[E]);Ee.key!=null&&(de.has(Ee.key)&&G("Duplicate keys found during update:",JSON.stringify(Ee.key),"Make sure keys are unique."),de.set(Ee.key,E))}let pe,He=0;const Ue=Y-re+1;let pt=!1,dt=0;const Dn=new Array(Ue);for(E=0;E<Ue;E++)Dn[E]=0;for(E=Q;E<=U;E++){const Ee=h[E];if(He>=Ue){Ie(Ee,I,A,!0);continue}let ht;if(Ee.key!=null)ht=de.get(Ee.key);else for(pe=re;pe<=Y;pe++)if(Dn[pe-re]===0&&cn(Ee,_[pe])){ht=pe;break}ht===void 0?Ie(Ee,I,A,!0):(Dn[ht-re]=E+1,ht>=dt?dt=ht:pt=!0,b(Ee,_[ht],M,null,I,A,F,N,k),He++)}const Xr=pt?yp(Dn):Ln;for(pe=Xr.length-1,E=Ue-1;E>=0;E--){const Ee=re+E,ht=_[Ee],Yr=_[Ee+1],Zr=Ee+1<J?Yr.el||Yr.placeholder:R;Dn[E]===0?b(null,ht,M,Zr,I,A,F,N,k):pt&&(pe<0||E!==Xr[pe]?Ae(ht,M,Zr,2):pe--)}}},Ae=(h,_,M,R,I=null)=>{const{el:A,type:F,transition:N,children:k,shapeFlag:E}=h;if(E&6){Ae(h.component.subTree,_,M,R);return}if(E&128){h.suspense.move(_,M,R);return}if(E&64){F.move(h,_,M,Ke);return}if(F===Be){s(A,_,M);for(let U=0;U<k.length;U++)Ae(k[U],_,M,R);s(h.anchor,_,M);return}if(F===ns){B(h,_,M);return}if(R!==2&&E&1&&N)if(R===0)N.beforeEnter(A),s(A,_,M),We(()=>N.enter(A),I);else{const{leave:U,delayLeave:Y,afterLeave:Q}=N,re=()=>{h.ctx.isUnmounted?o(A):s(A,_,M)},de=()=>{A._isLeaving&&A[Et](!0),U(A,()=>{re(),Q&&Q()})};Y?Y(A,re,de):de()}else s(A,_,M)},Ie=(h,_,M,R=!1,I=!1)=>{const{type:A,props:F,ref:N,children:k,dynamicChildren:E,shapeFlag:J,patchFlag:U,dirs:Y,cacheIndex:Q}=h;if(U===-2&&(I=!1),N!=null&&(at(),Qn(N,null,M,h,!0),ct()),Q!=null&&(_.renderCache[Q]=void 0),J&256){_.ctx.deactivate(h);return}const re=J&1&&Y,de=!es(h);let pe;if(de&&(pe=F&&F.onVnodeBeforeUnmount)&&_t(pe,_,h),J&6)Ut(h.component,M,R);else{if(J&128){h.suspense.unmount(M,R);return}re&&en(h,null,_,"beforeUnmount"),J&64?h.type.remove(h,_,M,Ke,R):E&&!E.hasOnce&&(A!==Be||U>0&&U&64)?Fe(E,_,M,!1,!0):(A===Be&&U&384||!I&&J&16)&&Fe(k,_,M),R&&ut(h)}(de&&(pe=F&&F.onVnodeUnmounted)||re)&&We(()=>{pe&&_t(pe,_,h),re&&en(h,null,_,"unmounted")},M)},ut=h=>{const{type:_,el:M,anchor:R,transition:I}=h;if(_===Be){h.patchFlag>0&&h.patchFlag&2048&&I&&!I.persisted?h.children.forEach(F=>{F.type===we?o(F.el):ut(F)}):Ht(M,R);return}if(_===ns){L(h);return}const A=()=>{o(M),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(h.shapeFlag&1&&I&&!I.persisted){const{leave:F,delayLeave:N}=I,k=()=>F(M,A);N?N(h.el,A,k):k()}else A()},Ht=(h,_)=>{let M;for(;h!==_;)M=p(h),o(h),h=M;o(_)},Ut=(h,_,M)=>{h.type.__hmrId&&wf(h);const{bum:R,scope:I,job:A,subTree:F,um:N,m:k,a:E}=h;wi(k),wi(E),R&&Gn(R),I.stop(),A&&(A.flags|=8,Ie(F,h,_,M)),N&&We(N,_),We(()=>{h.isUnmounted=!0},_),xf(h)},Fe=(h,_,M,R=!1,I=!1,A=0)=>{for(let F=A;F<h.length;F++)Ie(h[F],_,M,R,I)},Je=h=>{if(h.shapeFlag&6)return Je(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const _=p(h.anchor||h.el),M=_&&_[Ef];return M?p(M):_};let tt=!1;const ft=(h,_,M)=>{h==null?_._vnode&&Ie(_._vnode,null,null,!0):b(_._vnode||null,h,_,null,null,null,M),_._vnode=h,tt||(tt=!0,ci(),cc(),tt=!1)},Ke={p:b,um:Ie,m:Ae,r:ut,mt:D,mc:x,pc:se,pbc:z,n:Je,o:e};return{render:ft,hydrate:void 0,createApp:np(ft)}}function No({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function tn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wp(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pr(e,t,n=!1){const s=e.children,o=t.children;if(X(s)&&X(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=Wt(o[r]),a.el=i.el),!n&&a.patchFlag!==-2&&pr(i,a)),a.type===ys&&a.patchFlag!==-1&&(a.el=i.el),a.type===we&&!a.el&&(a.el=i.el),a.el&&(a.el.__vnode=a)}}function yp(e){const t=e.slice(),n=[0];let s,o,r,i,a;const c=e.length;for(s=0;s<c;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<u?r=a+1:i=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function Fc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fc(t)}function wi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const vp=Symbol.for("v-scx"),Tp=()=>{{const e=Ns(vp);return e||G("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function ts(e,t,n){return Z(t)||G("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Hc(e,t,n)}function Hc(e,t,n=fe){const{immediate:s,deep:o,flush:r,once:i}=n;t||(s!==void 0&&G('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&G('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),i!==void 0&&G('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const a=be({},n);a.onWarn=G;const c=t&&s||!t&&r!=="post";let u;if(ds){if(r==="sync"){const d=Tp();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!c){const d=()=>{};return d.stop=xe,d.resume=xe,d.pause=xe,d}}const l=Se;a.call=(d,$,b)=>lt(d,l,$,b);let f=!1;r==="post"?a.scheduler=d=>{We(d,l&&l.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(d,$)=>{$?d():$o(d)}),a.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,l&&(d.id=l.uid,d.i=l))};const p=uf(e,t,a);return ds&&(u?u.push(p):c&&p()),p}function Mp(e,t,n){const s=this.proxy,o=ge(e)?e.includes(".")?Uc(s,e):()=>s[e]:e.bind(s,s);let r;Z(t)?r=t:(r=t.handler,n=t);const i=vs(this),a=Hc(o,r.bind(s),n);return i(),a}function Uc(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const Cp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ot(t)}Modifiers`]||e[`${Yt(t)}Modifiers`];function Sp(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||fe;{const{emitsOptions:l,propsOptions:[f]}=e;if(l)if(!(t in l))(!f||!(rn(ot(t))in f))&&G(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${rn(ot(t))}" prop.`);else{const p=l[t];Z(p)&&(p(...n)||G(`Invalid event arguments: event validation failed for event "${t}".`))}}let o=n;const r=t.startsWith("update:"),i=r&&Cp(s,t.slice(7));i&&(i.trim&&(o=n.map(l=>ge(l)?l.trim():l)),i.number&&(o=n.map(wu))),If(e,t,o);{const l=t.toLowerCase();l!==t&&s[rn(l)]&&G(`Event "${l}" is emitted in component ${wo(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Yt(t)}" instead of "${t}".`)}let a,c=s[a=rn(t)]||s[a=rn(ot(t))];!c&&r&&(c=s[a=rn(Yt(t))]),c&&lt(c,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,lt(u,e,6,o)}}const xp=new WeakMap;function jc(e,t,n=!1){const s=n?xp:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},a=!1;if(!Z(e)){const c=u=>{const l=jc(u,t,!0);l&&(a=!0,be(i,l))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!a?(le(e)&&s.set(e,null),null):(X(r)?r.forEach(c=>i[c]=null):be(i,r),le(e)&&s.set(e,i),i)}function go(e,t){return!e||!$s(t)?!1:(t=t.slice(2).replace(/Once$/,""),ae(e,t[0].toLowerCase()+t.slice(1))||ae(e,Yt(t))||ae(e,t))}let dr=!1;function no(){dr=!0}function yi(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[r],slots:i,attrs:a,emit:c,render:u,renderCache:l,props:f,data:p,setupState:d,ctx:$,inheritAttrs:b}=e,v=Zs(e);let C,O;dr=!1;try{if(n.shapeFlag&4){const L=o||s,m=d.__isScriptSetup?new Proxy(L,{get(j,S,x){return G(`Property '${String(S)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(j,S,x)}}):L;C=nt(u.call(m,L,l,wt(f),d,p,$)),O=a}else{const L=t;a===f&&no(),C=nt(L.length>1?L(wt(f),{get attrs(){return no(),wt(a)},slots:i,emit:c}):L(wt(f),null)),O=t.props?a:Lp(a)}}catch(L){ss.length=0,gs(L,e,1),C=ye(we)}let P=C,B;if(C.patchFlag>0&&C.patchFlag&2048&&([P,B]=Bc(C)),O&&b!==!1){const L=Object.keys(O),{shapeFlag:m}=P;if(L.length){if(m&7)r&&L.some(Ks)&&(O=Ap(O,r)),P=Ct(P,O,!1,!0);else if(!dr&&P.type!==we){const j=Object.keys(a),S=[],x=[];for(let q=0,z=j.length;q<z;q++){const w=j[q];$s(w)?Ks(w)||S.push(w[2].toLowerCase()+w.slice(3)):x.push(w)}x.length&&G(`Extraneous non-props attributes (${x.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),S.length&&G(`Extraneous non-emits event listeners (${S.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(vi(P)||G("Runtime directive used on component with non-element root node. The directives will not function as intended."),P=Ct(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&(vi(P)||G("Component inside <Transition> renders non-element root node that cannot be animated."),fs(P,n.transition)),B?B(P):C=P,Zs(v),C}const Bc=e=>{const t=e.children,n=e.dynamicChildren,s=Hr(t,!1);if(s){if(s.patchFlag>0&&s.patchFlag&2048)return Bc(s)}else return[e,void 0];const o=t.indexOf(s),r=n?n.indexOf(s):-1,i=a=>{t[o]=a,n&&(r>-1?n[r]=a:a.patchFlag>0&&(e.dynamicChildren=[...n,a]))};return[nt(s),i]};function Hr(e,t=!0){let n;for(let s=0;s<e.length;s++){const o=e[s];if(kn(o)){if(o.type!==we||o.children==="v-if"){if(n)return;if(n=o,t&&n.patchFlag>0&&n.patchFlag&2048)return Hr(n.children)}}else return}return n}const Lp=e=>{let t;for(const n in e)(n==="class"||n==="style"||$s(n))&&((t||(t={}))[n]=e[n]);return t},Ap=(e,t)=>{const n={};for(const s in e)(!Ks(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n},vi=e=>e.shapeFlag&7||e.type===we;function Ip(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:a,patchFlag:c}=t,u=r.emitsOptions;if((o||a)&&yt||t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Ti(s,i,u):!!i;if(c&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const p=l[f];if(i[p]!==s[p]&&!go(u,p))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?Ti(s,i,u):!0:!!i;return!1}function Ti(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!go(n,r))return!0}return!1}function Ep({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Vc=e=>e.__isSuspense;function Rp(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):ac(e)}const Be=Symbol.for("v-fgt"),ys=Symbol.for("v-txt"),we=Symbol.for("v-cmt"),ns=Symbol.for("v-stc"),ss=[];let qe=null;function ie(e=!1){ss.push(qe=e?null:[])}function Pp(){ss.pop(),qe=ss[ss.length-1]||null}let ps=1;function so(e,t=!1){ps+=e,e<0&&qe&&t&&(qe.hasOnce=!0)}function Kc(e){return e.dynamicChildren=ps>0?qe||Ln:null,Pp(),ps>0&&qe&&qe.push(e),e}function ce(e,t,n,s,o,r){return Kc(T(e,t,n,s,o,r,!0))}function Ur(e,t,n,s,o){return Kc(ye(e,t,n,s,o,!0))}function kn(e){return e?e.__v_isVNode===!0:!1}function cn(e,t){if(t.shapeFlag&6&&e.component){const n=Os.get(t.type);if(n&&n.has(e.component))return e.shapeFlag&=-257,t.shapeFlag&=-513,!1}return e.type===t.type&&e.key===t.key}const kp=(...e)=>Op(...e),Wc=({key:e})=>e??null,Ds=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ge(e)||ve(e)||Z(e)?{i:ke,r:e,k:t,f:!!n}:e:null);function T(e,t=null,n=null,s=0,o=null,r=e===Be?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wc(t),ref:t&&Ds(t),scopeId:hc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ke};return a?(jr(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=ge(n)?8:16),c.key!==c.key&&G("VNode created with invalid key (NaN). VNode type:",c.type),ps>0&&!i&&qe&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&qe.push(c),c}const ye=kp;function Op(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===Kf)&&(e||G(`Invalid vnode type when creating vnode: ${e}.`),e=we),kn(e)){const a=Ct(e,t,!0);return n&&jr(a,n),ps>0&&!r&&qe&&(a.shapeFlag&6?qe[qe.indexOf(e)]=a:qe.push(a)),a.patchFlag=-2,a}if(Yc(e)&&(e=e.__vccOpts),t){t=Np(t);let{class:a,style:c}=t;a&&!ge(a)&&(t.class=Zt(a)),le(c)&&(zs(c)&&!X(c)&&(c=be({},c)),t.style=zt(c))}const i=ge(e)?1:Vc(e)?128:gc(e)?64:le(e)?4:Z(e)?2:0;return i&4&&zs(e)&&(e=te(e),G("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),T(e,t,n,s,o,i,r,!0)}function Np(e){return e?zs(e)||Pc(e)?be({},e):e:null}function Ct(e,t,n=!1,s=!1){const{props:o,ref:r,patchFlag:i,children:a,transition:c}=e,u=t?Gp(o||{},t):o,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Wc(u),ref:t&&t.ref?n&&r?X(r)?r.concat(Ds(t)):[r,Ds(t)]:Ds(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i===-1&&X(a)?a.map(zc):a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Be?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ct(e.ssContent),ssFallback:e.ssFallback&&Ct(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&fs(l,c.clone(l)),l}function zc(e){const t=Ct(e);return X(e.children)&&(t.children=e.children.map(zc)),t}function Dp(e=" ",t=0){return ye(ys,null,e,t)}function Do(e,t){const n=ye(ns,null,e);return n.staticCount=t,n}function vt(e="",t=!1){return t?(ie(),Ur(we,null,e)):ye(we,null,e)}function nt(e){return e==null||typeof e=="boolean"?ye(we):X(e)?ye(Be,null,e.slice()):kn(e)?Wt(e):ye(ys,null,String(e))}function Wt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ct(e)}function jr(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(X(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),jr(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Pc(t)?t._ctx=ke:o===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:ke},n=32):(t=String(t),s&64?(n=16,t=[Dp(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gp(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Zt([t.class,s.class]));else if(o==="style")t.style=zt([t.style,s.style]);else if($s(o)){const r=t[o],i=s[o];i&&r!==i&&!(X(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function _t(e,t,n,s=null){lt(e,t,7,[n,s])}const Fp=Ic();let Hp=0;function Up(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Fp,r={uid:Hp++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ku(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oc(s,o),emitsOptions:jc(s,o),emit:null,emitted:null,propsDefaults:fe,inheritAttrs:s.inheritAttrs,ctx:fe,data:fe,props:fe,attrs:fe,slots:fe,refs:fe,setupState:fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx=Wf(r),r.root=t?t.root:r,r.emit=Sp.bind(null,r),e.ce&&e.ce(r),r}let Se=null;const Br=()=>Se||ke;let oo,hr;{const e=ms(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};oo=t("__VUE_INSTANCE_SETTERS__",n=>Se=n),hr=t("__VUE_SSR_SETTERS__",n=>ds=n)}const vs=e=>{const t=Se;return oo(e),e.scope.on(),()=>{e.scope.off(),oo(t)}},Mi=()=>{Se&&Se.scope.off(),oo(null)},jp=Gt("slot,component");function _r(e,{isNativeTag:t}){(jp(e)||t(e))&&G("Do not use built-in or reserved HTML elements as component id: "+e)}function qc(e){return e.vnode.shapeFlag&4}let ds=!1;function Bp(e,t=!1,n=!1){t&&hr(t);const{props:s,children:o}=e.vnode,r=qc(e);op(e,s,r,t),_p(e,o,n||t);const i=r?Vp(e,t):void 0;return t&&hr(!1),i}function Vp(e,t){var n;const s=e.type;{if(s.name&&_r(s.name,e.appContext.config),s.components){const r=Object.keys(s.components);for(let i=0;i<r.length;i++)_r(r[i],e.appContext.config)}if(s.directives){const r=Object.keys(s.directives);for(let i=0;i<r.length;i++)$c(r[i])}s.compilerOptions&&Kp()&&G('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,xc),zf(e);const{setup:o}=s;if(o){at();const r=e.setupContext=o.length>1?qp(e):null,i=vs(e),a=Nn(o,e,0,[wt(e.props),r]),c=Sr(a);if(ct(),i(),(c||e.sp)&&!es(e)&&Mc(e),c){if(a.then(Mi,Mi),t)return a.then(u=>{Ci(e,u,t)}).catch(u=>{gs(u,e,0)});if(e.asyncDep=a,!e.suspense){const u=(n=s.name)!=null?n:"Anonymous";G(`Component <${u}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else Ci(e,a,t)}else Jc(e,t)}function Ci(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:le(t)?(kn(t)&&G("setup() should not return VNodes directly - return a render function instead."),e.devtoolsRawSetupState=t,e.setupState=sc(t),qf(e)):t!==void 0&&G(`setup() should return an object. Received: ${t===null?"null":typeof t}`),Jc(e,n)}const Kp=()=>!0;function Jc(e,t,n){const s=e.type;e.render||(e.render=s.render||xe);{const o=vs(e);at();try{Xf(e)}finally{ct(),o()}}!s.render&&e.render===xe&&!t&&(s.template?G('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):G("Component is missing template or render function: ",s))}const Wp={get(e,t){return no(),Te(e,"get",""),e[t]},set(){return G("setupContext.attrs is readonly."),!1},deleteProperty(){return G("setupContext.attrs is readonly."),!1}};function zp(e){return new Proxy(e.slots,{get(t,n){return Te(e,"get","$slots"),t[n]}})}function qp(e){const t=n=>{if(e.exposed&&G("expose() should be called only once per setup()."),n!=null){let s=typeof n;s==="object"&&(X(n)?s="array":ve(n)&&(s="ref")),s!=="object"&&G(`expose() should be passed a plain object, received ${s}.`)}e.exposed=n||{}};{let n,s;return Object.freeze({get attrs(){return n||(n=new Proxy(e.attrs,Wp))},get slots(){return s||(s=zp(e))},get emit(){return(o,...r)=>e.emit(o,...r)},expose:t})}}function bo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(sc(tf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hn)return hn[n](e)},has(t,n){return n in t||n in hn}})):e.proxy}const Jp=/(?:^|[-_])\w/g,Xp=e=>e.replace(Jp,t=>t.toUpperCase()).replace(/[-_]/g,"");function Xc(e,t=!0){return Z(e)?e.displayName||e.name:e.name||t&&e.__name}function wo(e,t,n=!1){let s=Xc(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=r=>{for(const i in r)if(r[i]===t)return i};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?Xp(s):n?"App":"Anonymous"}function Yc(e){return Z(e)&&"__vccOpts"in e}const Yp=(e,t)=>{const n=cf(e,t,ds);{const s=Br();s&&s.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function Zp(e,t,n){try{so(-1);const s=arguments.length;return s===2?le(t)&&!X(t)?kn(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&kn(n)&&(n=[n]),ye(e,t,n))}finally{so(1)}}function Qp(){if(typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#1677ff"},n={style:"color:#f5222d"},s={style:"color:#eb2f96"},o={__vue_custom_formatter:!0,header(f){if(!le(f))return null;if(f.__isVue)return["div",e,"VueInstance"];if(ve(f)){at();const p=f.value;return ct(),["div",{},["span",e,l(f)],"<",a(p),">"]}else{if(pn(f))return["div",{},["span",e,Oe(f)?"ShallowReactive":"Reactive"],"<",a(f),`>${Mt(f)?" (readonly)":""}`];if(Mt(f))return["div",{},["span",e,Oe(f)?"ShallowReadonly":"Readonly"],"<",a(f),">"]}return null},hasBody(f){return f&&f.__isVue},body(f){if(f&&f.__isVue)return["div",{},...r(f.$)]}};function r(f){const p=[];f.type.props&&f.props&&p.push(i("props",te(f.props))),f.setupState!==fe&&p.push(i("setup",f.setupState)),f.data!==fe&&p.push(i("data",te(f.data)));const d=c(f,"computed");d&&p.push(i("computed",d));const $=c(f,"inject");return $&&p.push(i("injected",$)),p.push(["div",{},["span",{style:s.style+";opacity:0.66"},"$ (internal): "],["object",{object:f}]]),p}function i(f,p){return p=be({},p),Object.keys(p).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},f],["div",{style:"padding-left:1.25em"},...Object.keys(p).map(d=>["div",{},["span",s,d+": "],a(p[d],!1)])]]:["span",{}]}function a(f,p=!0){return typeof f=="number"?["span",t,f]:typeof f=="string"?["span",n,JSON.stringify(f)]:typeof f=="boolean"?["span",s,f]:le(f)?["object",{object:p?te(f):f}]:["span",n,String(f)]}function c(f,p){const d=f.type;if(Z(d))return;const $={};for(const b in f.ctx)u(d,b,p)&&($[b]=f.ctx[b]);return $}function u(f,p,d){const $=f[d];if(X($)&&$.includes(p)||le($)&&p in $||f.extends&&u(f.extends,p,d)||f.mixins&&f.mixins.some(b=>u(b,p,d)))return!0}function l(f){return Oe(f)?"ShallowRef":f.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(o):window.devtoolsFormatters=[o]}const Si="3.5.22",Nt=G;/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $r;const xi=typeof window<"u"&&window.trustedTypes;if(xi)try{$r=xi.createPolicy("vue",{createHTML:e=>e})}catch(e){Nt(`Error creating trusted types policy: ${e}`)}const Zc=$r?e=>$r.createHTML(e):e=>e,ed="http://www.w3.org/2000/svg",td="http://www.w3.org/1998/Math/MathML",It=typeof document<"u"?document:null,Li=It&&It.createElement("template"),nd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?It.createElementNS(ed,e):t==="mathml"?It.createElementNS(td,e):n?It.createElement(e,{is:n}):It.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>It.createTextNode(e),createComment:e=>It.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>It.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Li.innerHTML=Zc(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Li.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},jt="transition",Un="animation",hs=Symbol("_vtc"),Qc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sd=be({},bc,Qc),od=e=>(e.displayName="Transition",e.props=sd,e),rd=od((e,{slots:t})=>Zp(kf,id(e),t)),nn=(e,t=[])=>{X(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ai=e=>e?X(e)?e.some(t=>t.length>1):e.length>1:!1;function id(e){const t={};for(const w in e)w in Qc||(t[w]=e[w]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:u=i,appearToClass:l=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,$=ad(o),b=$&&$[0],v=$&&$[1],{onBeforeEnter:C,onEnter:O,onEnterCancelled:P,onLeave:B,onLeaveCancelled:L,onBeforeAppear:m=C,onAppear:j=O,onAppearCancelled:S=P}=t,x=(w,y,H,D)=>{w._enterCancelled=D,sn(w,y?l:a),sn(w,y?u:i),H&&H()},q=(w,y)=>{w._isLeaving=!1,sn(w,f),sn(w,d),sn(w,p),y&&y()},z=w=>(y,H)=>{const D=w?j:O,V=()=>x(y,w,H);nn(D,[y,V]),Ii(()=>{sn(y,w?c:r),At(y,w?l:a),Ai(D)||Ei(y,s,b,V)})};return be(t,{onBeforeEnter(w){nn(C,[w]),At(w,r),At(w,i)},onBeforeAppear(w){nn(m,[w]),At(w,c),At(w,u)},onEnter:z(!1),onAppear:z(!0),onLeave(w,y){w._isLeaving=!0;const H=()=>q(w,y);At(w,f),w._enterCancelled?(At(w,p),ki(w)):(ki(w),At(w,p)),Ii(()=>{w._isLeaving&&(sn(w,f),At(w,d),Ai(B)||Ei(w,s,v,H))}),nn(B,[w,H])},onEnterCancelled(w){x(w,!1,void 0,!0),nn(P,[w])},onAppearCancelled(w){x(w,!0,void 0,!0),nn(S,[w])},onLeaveCancelled(w){q(w),nn(L,[w])}})}function ad(e){if(e==null)return null;if(le(e))return[Go(e.enter),Go(e.leave)];{const t=Go(e);return[t,t]}}function Go(e){const t=yu(e);return _f(t,"<transition> explicit duration"),t}function At(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[hs]||(e[hs]=new Set)).add(t)}function sn(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[hs];n&&(n.delete(t),n.size||(e[hs]=void 0))}function Ii(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let cd=0;function Ei(e,t,n,s){const o=e._endId=++cd,r=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:i,timeout:a,propCount:c}=ld(e,t);if(!i)return s();const u=i+"end";let l=0;const f=()=>{e.removeEventListener(u,p),r()},p=d=>{d.target===e&&++l>=c&&f()};setTimeout(()=>{l<c&&f()},a+1),e.addEventListener(u,p)}function ld(e,t){const n=window.getComputedStyle(e),s=$=>(n[$]||"").split(", "),o=s(`${jt}Delay`),r=s(`${jt}Duration`),i=Ri(o,r),a=s(`${Un}Delay`),c=s(`${Un}Duration`),u=Ri(a,c);let l=null,f=0,p=0;t===jt?i>0&&(l=jt,f=i,p=r.length):t===Un?u>0&&(l=Un,f=u,p=c.length):(f=Math.max(i,u),l=f>0?i>u?jt:Un:null,p=l?l===jt?r.length:c.length:0);const d=l===jt&&/\b(?:transform|all)(?:,|$)/.test(s(`${jt}Property`).toString());return{type:l,timeout:f,propCount:p,hasTransform:d}}function Ri(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Pi(n)+Pi(e[s])))}function Pi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ki(e){return(e?e.ownerDocument:document).body.offsetHeight}function ud(e,t,n){const s=e[hs];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ro=Symbol("_vod"),el=Symbol("_vsh"),tl={name:"show",beforeMount(e,{value:t},{transition:n}){e[ro]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):jn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),jn(e,!0),s.enter(e)):s.leave(e,()=>{jn(e,!1)}):jn(e,t))},beforeUnmount(e,{value:t}){jn(e,t)}};function jn(e,t){e.style.display=t?e[ro]:"none",e[el]=!t}const fd=Symbol("CSS_VAR_TEXT"),pd=/(?:^|;)\s*display\s*:/;function dd(e,t,n){const s=e.style,o=ge(n);let r=!1;if(n&&!o){if(t)if(ge(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&Gs(s,a,"")}else for(const i in t)n[i]==null&&Gs(s,i,"");for(const i in n)i==="display"&&(r=!0),Gs(s,i,n[i])}else if(o){if(t!==n){const i=s[fd];i&&(n+=";"+i),s.cssText=n,r=pd.test(n)}}else t&&e.removeAttribute("style");ro in e&&(e[ro]=r?s.display:"",e[el]&&(s.display="none"))}const hd=/[^\\];\s*$/,Oi=/\s*!important$/;function Gs(e,t,n){if(X(n))n.forEach(s=>Gs(e,t,s));else if(n==null&&(n=""),hd.test(n)&&Nt(`Unexpected semicolon at the end of '${t}' style value: '${n}'`),t.startsWith("--"))e.setProperty(t,n);else{const s=_d(e,t);Oi.test(n)?e.setProperty(Yt(s),n.replace(Oi,""),"important"):e[s]=n}}const Ni=["Webkit","Moz","ms"],Fo={};function _d(e,t){const n=Fo[t];if(n)return n;let s=ot(t);if(s!=="filter"&&s in e)return Fo[t]=s;s=fo(s);for(let o=0;o<Ni.length;o++){const r=Ni[o]+s;if(r in e)return Fo[t]=r}return t}const Di="http://www.w3.org/1999/xlink";function Gi(e,t,n,s,o,r=Pu(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Di,t.slice(6,t.length)):e.setAttributeNS(Di,t,n):n==null||r&&!Ga(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Qt(n)?String(n):n)}function Fi(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Zc(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Ga(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{e[t]=n}catch(a){i||Nt(`Failed setting prop "${t}" on <${r.toLowerCase()}>: value ${n} is invalid.`,a)}i&&e.removeAttribute(o||t)}function $d(e,t,n,s){e.addEventListener(t,n,s)}function md(e,t,n,s){e.removeEventListener(t,n,s)}const Hi=Symbol("_vei");function gd(e,t,n,s,o=null){const r=e[Hi]||(e[Hi]={}),i=r[t];if(s&&i)i.value=ji(s,t);else{const[a,c]=bd(t);if(s){const u=r[t]=vd(ji(s,t),o);$d(e,a,u,c)}else i&&(md(e,a,i,c),r[t]=void 0)}}const Ui=/(?:Once|Passive|Capture)$/;function bd(e){let t;if(Ui.test(e)){t={};let s;for(;s=e.match(Ui);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yt(e.slice(2)),t]}let Ho=0;const wd=Promise.resolve(),yd=()=>Ho||(wd.then(()=>Ho=0),Ho=Date.now());function vd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;lt(Td(s,n.value),t,5,[s])};return n.value=e,n.attached=yd(),n}function ji(e,t){return Z(e)||X(e)?e:(Nt(`Wrong type passed as event handler to ${t} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof e}.`),xe)}function Td(e,t){if(X(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Bi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Md=(e,t,n,s,o,r)=>{const i=o==="svg";t==="class"?ud(e,s,i):t==="style"?dd(e,n,s):$s(t)?Ks(t)||gd(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Cd(e,t,s,i))?(Fi(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Gi(e,t,s,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ge(s))?Fi(e,ot(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Gi(e,t,s,i))};function Cd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Bi(t)&&Z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Bi(t)&&ge(n)?!1:t in e}const Sd=["ctrl","shift","alt","meta"],xd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Sd.some(n=>e[`${n}Key`]&&!t.includes(n))},Uo=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...r)=>{for(let i=0;i<t.length;i++){const a=xd[t[i]];if(a&&a(o,t))return}return e(o,...r)})},Ld=be({patchProp:Md},nd);let Vi;function Ad(){return Vi||(Vi=gp(Ld))}const Ki=(...e)=>{const t=Ad().createApp(...e);Ed(t),Rd(t);const{mount:n}=t;return t.mount=s=>{const o=Pd(s);if(!o)return;const r=t._component;!Z(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=n(o,!1,Id(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function Id(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ed(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>Au(t)||Iu(t)||Eu(t),writable:!1})}function Rd(e){{const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){Nt("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=e.config.compilerOptions,s='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(e.config,"compilerOptions",{get(){return Nt(s),n},set(){Nt(s)}})}}function Pd(e){if(ge(e)){const t=document.querySelector(e);return t||Nt(`Failed to mount app: mount target selector "${e}" returned null.`),t}return window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&Nt('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}/**
* vue v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kd(){Qp()}kd();const Fs={maxRetries:3,retryDelay:1e3,timeout:1e4};let jo=null;const En={enabled:!0,maxCacheSize:50*1024*1024,cachePrefix:"mgpic_",version:"1.0.0",loadInterval:50,batchSize:3};class Od{constructor(){this.cache=new Map,this.totalSize=0}isSupported(){return"caches"in window}getCacheName(){return`${En.cachePrefix}${En.version}`}async isCached(t){if(!this.isSupported())return!1;try{return await(await caches.open(this.getCacheName())).match(t)!==void 0}catch(n){return console.warn("检查缓存失败:",n.message),!1}}async cacheResource(t,n){if(!this.isSupported())return!1;try{const s=await caches.open(this.getCacheName());if(await s.match(t))return console.log(`资源已存在于缓存，跳过: ${t}`),!0;await s.put(t,n.clone());const r=n.headers.get("content-length");return r&&(this.totalSize+=parseInt(r)),console.log(`资源已缓存: ${t}`),!0}catch(s){return console.warn("缓存资源失败:",s.message),!1}}async getCachedResource(t){if(!this.isSupported())return null;try{return await(await caches.open(this.getCacheName())).match(t)}catch(n){return console.warn("获取缓存资源失败:",n.message),null}}async cleanupCache(){if(this.isSupported())try{const t=await caches.keys(),n=this.getCacheName();for(const s of t)s.startsWith(En.cachePrefix)&&s!==n&&(await caches.delete(s),console.log(`清理过期缓存: ${s}`))}catch(t){console.warn("清理缓存失败:",t.message)}}}const et=new Od;let Ls=null;function Nd(){return Ls||(console.log("使用默认R2 URL"),Ls="https://pub-6f9181bda40946ea92b5e87fe84e27d4.r2.dev",Ls)}function $e(e){let t=e;e.startsWith("/assets/")&&(t=e.slice(7));const n=Nd(),s=t.startsWith("/")?t.slice(1):t;return`${n}/${s}`}async function mr(e,t={}){if(et.isSupported()){const o=await et.getCachedResource(e);if(o)return console.log(`从 Cache Storage 加载: ${e}`),o}const{maxRetries:n=Fs.maxRetries,retryDelay:s=Fs.retryDelay}=t;for(let o=1;o<=n;o++)try{console.log(`尝试加载资源 (${o}/${n}): ${e}`);const r=new AbortController,i=setTimeout(()=>r.abort(),Fs.timeout),a=await fetch(e,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:r.signal,...t});if(clearTimeout(i),a.ok)return et.isSupported()&&await et.cacheResource(e,a),console.log(`资源加载并缓存成功: ${e}`),a;throw new Error(`HTTP ${a.status}: ${a.statusText}`)}catch(r){if(console.warn(`资源加载失败 (${o}/${n}): ${e}`,r.message),o===n)throw console.error(`资源加载最终失败: ${e}`,r.message),r;const i=s*o;console.log(`等待 ${i}ms 后重试...`),await new Promise(a=>setTimeout(a,i))}}async function Dd(e=["high","medium"]){try{if(jo){console.log("使用内存缓存的资源列表");const r=Wi(jo,e);return console.log(`从缓存的资源列表加载 ${r.length} 个资源 (优先级: ${e.join(", ")})`),r}const t=$e("asset-list.json");console.log(`从 R2 CDN 加载资源列表: ${t}`);const n=await mr(t);if(!n.ok)throw new Error(`资源列表加载失败: HTTP ${n.status}`);const s=await n.json();jo=s,console.log("资源列表已缓存到内存");const o=Wi(s,e);return console.log(`从资源列表加载 ${o.length} 个资源 (优先级: ${e.join(", ")})`),o}catch(t){return console.warn("无法加载自动生成的资源列表，使用备用列表:",t.message),["logo.glb","frontend_resource/start_game.webp","frontend_resource/copper_warehouse.webp","frontend_resource/game_wiki.webp","frontend_resource/Tutorial.webp","frontend_resource/gacha.webp"]}}function Wi(e,t){const n=[];for(const s of t)if(e.categories&&e.categories[s]){const o=e.categories[s].resources||[];n.push(...o.map(r=>r.path))}return n}async function io(e=null,t=["high","medium"]){console.log("开始预缓存游戏资源..."),await et.cleanupCache();const n=await Dd(t),s=En.batchSize,o=En.loadInterval,r=n.length;let i=0;e&&e(0,r,0);for(let a=0;a<n.length;a+=s){const c=n.slice(a,a+s);console.log(`处理批次 ${Math.floor(a/s)+1}/${Math.ceil(n.length/s)}: ${c.length} 个资源`);const u=c.map(async(v,C)=>{const O=$e(v);try{if(await et.isCached(O))return console.log(`资源已在Cache Storage中，跳过: ${v}`),{success:!0,path:v,cached:!0,source:"cache"};const B=new AbortController,L=setTimeout(()=>B.abort(),Fs.timeout),m=await fetch(O,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:B.signal});if(clearTimeout(L),m.ok){const j=m.headers.get("x-cache")||m.headers.get("cf-cache-status")||m.type==="basic"&&!m.redirected;return et.isSupported()&&await et.cacheResource(O,m),console.log(`资源预缓存成功: ${v}${j?" (使用浏览器缓存)":""}`),{success:!0,path:v,cached:!1,fromBrowserCache:!!j}}else throw new Error(`HTTP ${m.status}: ${m.statusText}`)}catch(P){return console.warn(`资源预缓存失败: ${v}`,P.message),{success:!1,path:v,error:P.message}}}),l=await Promise.all(u);i+=c.length;const f=Math.round(i/r*100);e&&e(i,r,f);const p=l.filter(v=>v.success).length,d=l.filter(v=>v.cached).length,$=l.filter(v=>v.fromBrowserCache).length,b=l.filter(v=>!v.success).length;console.log(`批次完成: 成功 ${p}, Cache Storage已有 ${d}, 浏览器缓存 ${$}, 失败 ${b}`),a+s<n.length&&(console.log(`等待 ${o}ms 后处理下一批...`),await new Promise(v=>setTimeout(v,o)))}console.log("所有资源预缓存完成"),e&&e(r,r,100)}async function zi(){if(!et.isSupported())return{supported:!1,message:"浏览器不支持缓存API"};try{const t=await(await caches.open(et.getCacheName())).keys();return{supported:!0,cacheName:et.getCacheName(),resourceCount:t.length,totalSize:et.totalSize,maxSize:En.maxCacheSize}}catch(e){return{supported:!0,error:e.message}}}const gn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Gd={__name:"Hall",emits:["startGame","openWarehouse","openTutorial","openEncyclopedia"],setup(e,{expose:t,emit:n}){t();const s=n;function o(){s("startGame")}function r(){s("openWarehouse")}function i(){s("openTutorial")}function a(){s("openEncyclopedia")}const c=ee($e("img/hall/start_game.webp")),u=ee($e("img/hall/warehouse.webp")),l=ee($e("img/hall/wiki.webp")),f=ee($e("img/hall/tutorial.webp"));ze(async()=>{try{if(window.getCacheStatus){const $=await window.getCacheStatus();console.log("缓存状态:",$)}const d=[c.value,u.value,l.value,f.value];for(let $=0;$<d.length;$++){const b=d[$];try{const v=new Image;v.crossOrigin="anonymous",v.src=b,await new Promise((C,O)=>{v.onload=C,v.onerror=O}),console.log("背景图片预加载成功:",b),$<d.length-1&&await new Promise(C=>setTimeout(C,100))}catch(v){console.warn("背景图片预加载失败:",b,v.message)}}}catch(d){console.warn("背景图片预加载过程中出现错误:",d.message)}});const p={emit:s,startGame:o,openWarehouse:r,openTutorial:i,openEncyclopedia:a,bgStart:c,bgWarehouse:u,bgWiki:l,bgTutorial:f,ref:ee,onMounted:ze,get getAssetUrl(){return $e}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},Fd={class:"menu"};function Hd(e,t,n,s,o,r){return ie(),ce("div",Fd,[T("button",{class:"tile tile--start",style:zt({backgroundImage:`url('${s.bgStart}')`}),onClick:s.startGame},[...t[0]||(t[0]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--bottom"},[T("div",{class:"tile__title"},"开始游戏"),T("div",{class:"tile__subtitle"},"Start Game")],-1)])],4),T("button",{class:"tile tile--warehouse",style:zt({backgroundImage:`url('${s.bgWarehouse}')`}),onClick:s.openWarehouse},[...t[1]||(t[1]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--top"},[T("div",{class:"tile__title"},"铜偶仓库"),T("div",{class:"tile__subtitle"},"Copper Warehouse")],-1)])],4),T("button",{class:"tile tile--wiki",style:zt({backgroundImage:`url('${s.bgWiki}')`}),onClick:s.openEncyclopedia},[...t[2]||(t[2]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--bottom"},[T("div",{class:"tile__title"},"游戏百科"),T("div",{class:"tile__subtitle"},"Game Wiki")],-1)])],4),T("button",{class:"tile tile--tutorial",style:zt({backgroundImage:`url('${s.bgTutorial}')`}),onClick:s.openTutorial},[...t[3]||(t[3]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--top"},[T("div",{class:"tile__title"},"新手教程"),T("div",{class:"tile__subtitle"},"Tutorial")],-1)])],4)])}const Ud=gn(Gd,[["render",Hd],["__scopeId","data-v-7603db95"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/Hall.vue"]]),qi={hi:0,lo:1},Ji={hi:0,lo:0};class jd extends Error{}function Ne(){throw new jd}const Bd={$tag:1},Vd={$tag:2};function Vr(e,t){this._0=e,this._1=t}Vr.prototype.$tag=3;function me(e){this._0=e}me.prototype.$tag=4;function nl(e){this._0=e}nl.prototype.$tag=5;function De(e){this._0=e}De.prototype.$tag=6;function g(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}function xt(e,t){const n=new Array(e);return n.fill(t),n}const sl=(e,t)=>{e.push(t)},Kd=function e(){return e._exports?e._exports:e._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},Wd=(e,t)=>{const n=e.hi>>>0,s=t.hi>>>0;if(n<s)return-1;if(n>s)return 1;const o=e.lo>>>0,r=t.lo>>>0;return o<r?-1:o>r?1:0},zd=e=>e.slice(0),Bo={hi:0,lo:-1};function mn(e,t,n){this._0=e,this._1=t,this._2=n}mn.prototype.$tag=0;function Xt(e,t,n){this._0=e,this._1=t,this._2=n}Xt.prototype.$tag=1;function On(e){this._0=e}On.prototype.$tag=2;const Rn={$tag:0};function _s(e,t){this._0=e,this._1=t}_s.prototype.$tag=1;function qd(e){return e>>>=0,e===0?32:(e&=-e,31-Math.clz32(e))}function yo(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}const Jd=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]),Xd="阿磐",Yd="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Zd="/assets/copper/iron_wall/rocky/rocky.webp",Qd="/assets/copper/iron_wall/rocky/rocky.glb",eh="卫斯理",th="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",nh="/assets/copper/iron_wall/wesley/wesley.webp",sh="/assets/copper/iron_wall/wesley/wesley.glb",oh="大贝尔",rh="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",ih="/assets/copper/iron_wall/bell/bell.webp",ah="/assets/copper/iron_wall/bell/bell.glb",ch="团团",lh="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",uh="/assets/copper/iron_wall/tumble/tumble.webp",fh="/assets/copper/iron_wall/tumble/tumble.glb",ph="铿铿",dh="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",hh="/assets/copper/iron_wall/chief/chief.webp",_h="/assets/copper/iron_wall/chief/chief.glb",$h="咝咝",mh="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",gh="/assets/copper/arcanist/spark/spark.webp",bh="/assets/copper/arcanist/spark/spark.glb",wh="拉斐尔",yh="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",vh="/assets/copper/arcanist/syrup/syrup.webp",Th="/assets/copper/arcanist/syrup/syrup.glb",Mh="波普尔",Ch="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",Sh="/assets/copper/arcanist/bubble/bubble.webp",xh="/assets/copper/arcanist/bubble/bubble.glb",Lh="菲尼",Ah="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",Ih="/assets/copper/arcanist/glimmer/glimmer.webp",Eh="/assets/copper/arcanist/glimmer/glimmer.glb",Rh="卷卷",Ph="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",kh="/assets/copper/arcanist/turner/turner.webp",Oh="/assets/copper/arcanist/turner/turner.glb",Nh="絮絮",Dh="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",Gh="/assets/copper/resonator/murmur/murmur.webp",Fh="/assets/copper/resonator/murmur/murmur.glb",Hh="啾啾",Uh="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",jh="/assets/copper/resonator/melody/melody.webp",Bh="/assets/copper/resonator/melody/melody.glb",Vh="库克",Kh="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",Wh="/assets/copper/resonator/clawsteak/clawsteak.webp",zh="/assets/copper/resonator/clawsteak/clawsteak.glb",qh="鼹鼠的地洞",Jh="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",Xh="/assets/copper/resonator/diggs/diggs.webp",Yh="/assets/copper/resonator/diggs/diggs.glb",Zh="蜜拉",Qh="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",e_="/assets/copper/resonator/hive/hive.webp",t_="/assets/copper/resonator/hive/hive.glb",n_="米洛",s_="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",o_="/assets/copper/mechanic/gyro/gyro.webp",r_="/assets/copper/mechanic/gyro/gyro.glb",i_="杰克",a_="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",c_="/assets/copper/mechanic/tricky/tricky.webp",l_="/assets/copper/mechanic/tricky/tricky.glb",u_="格洛克",f_="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",p_="/assets/copper/mechanic/pendulum/pendulum.webp",d_="/assets/copper/mechanic/pendulum/pendulum.glb",h_="溜溜",__="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",$_="/assets/copper/mechanic/yoyo/yoyo.webp",m_="/assets/copper/mechanic/yoyo/yoyo.glb",g_="卡琳",b_="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",w_="/assets/copper/mechanic/karin/karin.webp",y_="/assets/copper/mechanic/karin/karin.glb",v_="波波",T_="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",M_="/assets/copper/craftsman/wrench/wrench.webp",C_="/assets/copper/craftsman/wrench/wrench.glb",S_="特斯拉",x_="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",L_="/assets/copper/craftsman/coil/coil.webp",A_="/assets/copper/craftsman/coil/coil.glb",I_="公输",E_="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",R_="/assets/copper/craftsman/artifex/artifex.webp",P_="/assets/copper/craftsman/artifex/artifex.glb",k_="丁格",O_="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",N_="/assets/copper/craftsman/drillbit/drillbit.webp",D_="/assets/copper/craftsman/drillbit/drillbit.glb",G_="小卯",F_="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",H_="/assets/copper/craftsman/quickhand/quickhand.webp",U_="/assets/copper/craftsman/quickhand/quickhand.glb",j_={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:10},B_={name:Xd,copper_type:0,description:Yd,icon_url:Zd,model_url:Qd,skill:j_},V_={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:10},K_={name:eh,copper_type:0,description:th,icon_url:nh,model_url:sh,skill:V_},W_={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},z_={name:oh,copper_type:0,description:rh,icon_url:ih,model_url:ah,skill:W_},q_={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},J_={name:ch,copper_type:0,description:lh,icon_url:uh,model_url:fh,skill:q_},X_={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},Y_={name:ph,copper_type:0,description:dh,icon_url:hh,model_url:_h,skill:X_},Z_={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:20},Q_={name:$h,copper_type:1,description:mh,icon_url:gh,model_url:bh,skill:Z_},e$={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},t$={name:wh,copper_type:1,description:yh,icon_url:vh,model_url:Th,skill:e$},n$={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:10},s$={name:Mh,copper_type:1,description:Ch,icon_url:Sh,model_url:xh,skill:n$},o$={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},r$={name:Lh,copper_type:1,description:Ah,icon_url:Ih,model_url:Eh,skill:o$},i$={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:5},a$={name:Rh,copper_type:1,description:Ph,icon_url:kh,model_url:Oh,skill:i$},c$={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},l$={name:Nh,copper_type:4,description:Dh,icon_url:Gh,model_url:Fh,skill:c$},u$={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},f$={name:Hh,copper_type:4,description:Uh,icon_url:jh,model_url:Bh,skill:u$},p$={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawsteak_skill.webp",cool_down:void 0},d$={name:Vh,copper_type:4,description:Kh,icon_url:Wh,model_url:zh,skill:p$},h$={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},_$={name:qh,copper_type:4,description:Jh,icon_url:Xh,model_url:Yh,skill:h$},$$={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},m$={name:Zh,copper_type:4,description:Qh,icon_url:e_,model_url:t_,skill:$$},g$={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:10},b$={name:n_,copper_type:3,description:s_,icon_url:o_,model_url:r_,skill:g$},w$={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:10},y$={name:i_,copper_type:3,description:a_,icon_url:c_,model_url:l_,skill:w$},v$={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:5},T$={name:u_,copper_type:3,description:f_,icon_url:p_,model_url:d_,skill:v$},M$={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:3},C$={name:h_,copper_type:3,description:__,icon_url:$_,model_url:m_,skill:M$},S$={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},x$={name:g_,copper_type:3,description:b_,icon_url:w_,model_url:y_,skill:S$},L$=void 0,A$={name:v_,copper_type:2,description:T_,icon_url:M_,model_url:C_,skill:L$},I$=void 0,E$={name:S_,copper_type:2,description:x_,icon_url:L_,model_url:A_,skill:I$},R$=void 0,P$={name:I_,copper_type:2,description:E_,icon_url:R_,model_url:P_,skill:R$},k$=void 0,O$={name:k_,copper_type:2,description:O_,icon_url:N_,model_url:D_,skill:k$},N$=void 0,os=[B_,K_,z_,J_,Y_,Q_,t$,s$,r$,a$,l$,f$,d$,_$,m$,b$,y$,T$,C$,x$,A$,E$,P$,O$,{name:G_,copper_type:2,description:F_,icon_url:H_,model_url:U_,skill:N$}],D$=$m(e=>{const t=os.length;let n=0;for(;;){const s=n;if(s<t){const o=os[s];if(e({_0:o.name,_1:o})===1){n=s+1|0;continue}else return 0}else return 1}}),ol=xl(),vo=Bg(),G$=xl(),To=Mg(),F$=dg();function rl(e){Ne()}function H$(e){return Ne()}function U$(e){return Ne()}function j$(e){return Ne()}function Xi(e,t){return Nm(e,t)<0}function B$(e,t,n,s,o){if(e===n&&t<s){let r=0;for(;;){const i=r;if(i<o){const a=t+i|0,c=s+i|0;g(n,c),g(e,a),e[a]=n[c],r=i+1|0;continue}else return}}else{let r=o-1|0;for(;;){const i=r;if(i>=0){const a=t+i|0,c=s+i|0;g(n,c),g(e,a),e[a]=n[c],r=i-1|0;continue}else return}}}function V$(e,t,n,s,o){if(e===n&&t<s){let r=0;for(;;){const i=r;if(i<o){const a=t+i|0,c=s+i|0;g(n,c),g(e,a),e[a]=n[c],r=i+1|0;continue}else return}}else{let r=o-1|0;for(;;){const i=r;if(i>=0){const a=t+i|0,c=s+i|0;g(n,c),g(e,a),e[a]=n[c],r=i-1|0;continue}else return}}}function Mo(e){return{val:""}}function Me(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function he(e,t){const n=e;n.val=`${n.val}${t}`}function K$(e,t){jm(t,e)}function W$(e,t){wg(t,e)}function z$(e){let t=e.acc;return t=t^(t>>>15|0),t=Math.imul(t,-2048144777)|0,t=t^(t>>>13|0),t=Math.imul(t,-1028477379)|0,t=t^(t>>>16|0),t}function il(e){return z$(e)}function al(e){return{acc:(e>>>0)+374761393|0}}function Kr(e){const t=al(0);return K$(t,e),il(t)}function cl(e){const t=al(0);return W$(t,e),il(t)}function ll(e,t){const n=e._1,s=e._0,o=t/s|0;o!==0&&ll(e,o);const r=t%s|0,i=r<0?0-r|0:r;g("0123456789abcdefghijklmnopqrstuvwxyz",i),n.method_2(n.self,"0123456789abcdefghijklmnopqrstuvwxyz".charCodeAt(i))}function q$(e,t,n){e<0&&t.method_2(t.self,45),ll({_0:n,_1:t},e<0?0-e|0:e)}function J$(e){return e>=2&&e<7?36:e>=8&&e<15?18:e>=16&&e<=36?10:U$()}function X$(e,t){const n=Mo(J$(t));return q$(e,{self:n,method_0:he,method_1:ul,method_2:Me},t),n.val}function Ze(e){return X$(e,10)}function Y$(e){return e.lo}function Z$(e,t,n){const s=e.length;let o;return n===void 0?o=s:o=n,t>=0&&t<=o&&o<=s?e.substring(t,o):Ne()}function ul(e,t,n,s){const o=e;o.val=`${o.val}${Z$(t,n,n+s|0)}`}function Q$(e,t){zm(t,{self:e,method_0:he,method_1:ul,method_2:Me})}function Wr(e){return e>=0?e<=1?1:e>1073741824?1073741824:(2147483647>>(Math.clz32(e-1|0)-1|0))+1|0:Ne()}function em(e){const t=Wr(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:xt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function tm(e){const t=Wr(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:xt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function nm(e){const t=Wr(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:xt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function sm(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const r=e.entries;g(r,s);const i=r[s];let a;i===void 0?a=Ne():a=i,a.next=n}e.tail=t;const o=e.entries;g(o,t),o[t]=n,e.size=e.size+1|0}function om(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const r=e.entries;g(r,s);const i=r[s];let a;i===void 0?a=Ne():a=i,a.next=n}e.tail=t;const o=e.entries;g(o,t),o[t]=n,e.size=e.size+1|0}function rm(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const r=e.entries;g(r,s);const i=r[s];let a;i===void 0?a=Ne():a=i,a.next=n}e.tail=t;const o=e.entries;g(o,t),o[t]=n,e.size=e.size+1|0}function Yi(e,t,n){const s=e.entries;g(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const i=o;i.prev=n;return}}function Zi(e,t,n){const s=e.entries;g(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const i=o;i.prev=n;return}}function Qi(e,t,n){const s=e.entries;g(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const i=o;i.prev=n;return}}function im(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,r=n;for(;;){const i=s,a=o,c=r,u=e.entries;g(u,a);const l=u[a];if(l===void 0){c.psl=i,Yi(e,c,a);break}else{const p=l;if(i>p.psl){c.psl=i,Yi(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,r=p;continue}else{s=i+1|0,o=a+1&e.capacity_mask;continue}}}}function am(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,r=n;for(;;){const i=s,a=o,c=r,u=e.entries;g(u,a);const l=u[a];if(l===void 0){c.psl=i,Zi(e,c,a);break}else{const p=l;if(i>p.psl){c.psl=i,Zi(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,r=p;continue}else{s=i+1|0,o=a+1&e.capacity_mask;continue}}}}function cm(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,r=n;for(;;){const i=s,a=o,c=r,u=e.entries;g(u,a);const l=u[a];if(l===void 0){c.psl=i,Qi(e,c,a);break}else{const p=l;if(i>p.psl){c.psl=i,Qi(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,r=p;continue}else{s=i+1|0,o=a+1&e.capacity_mask;continue}}}}function fl(e,t,n,s){e.size>=e.grow_at&&lm(e);let o,r=0,i=s&e.capacity_mask;for(;;){const p=r,d=i,$=e.entries;g($,d);const b=$[d];if(b===void 0){o={_0:d,_1:p};break}else{const C=b;if(C.hash===s&&C.key===t){C.value=n;return}if(p>C.psl){im(e,d,C),o={_0:d,_1:p};break}r=p+1|0,i=d+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};sm(e,a,f)}function pl(e,t,n,s){e.size>=e.grow_at&&um(e);let o,r=0,i=s&e.capacity_mask;for(;;){const p=r,d=i,$=e.entries;g($,d);const b=$[d];if(b===void 0){o={_0:d,_1:p};break}else{const C=b;if(C.hash===s&&Ll(C.key,t)){C.value=n;return}if(p>C.psl){am(e,d,C),o={_0:d,_1:p};break}r=p+1|0,i=d+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};om(e,a,f)}function dl(e,t,n,s){e.size>=e.grow_at&&fm(e);let o,r=0,i=s&e.capacity_mask;for(;;){const p=r,d=i,$=e.entries;g($,d);const b=$[d];if(b===void 0){o={_0:d,_1:p};break}else{const C=b;if(C.hash===s&&C.key===t){C.value=n;return}if(p>C.psl){cm(e,d,C),o={_0:d,_1:p};break}r=p+1|0,i=d+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};rm(e,a,f)}function lm(e){const t=e.head,n=e.capacity<<1;e.entries=xt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const r=o;if(r===void 0)return;{const a=r,c=a.next,u=a.key,l=a.value,f=a.hash;fl(e,u,l,f),o=c;continue}}}function um(e){const t=e.head,n=e.capacity<<1;e.entries=xt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const r=o;if(r===void 0)return;{const a=r,c=a.next,u=a.key,l=a.value,f=a.hash;pl(e,u,l,f),o=c;continue}}}function fm(e){const t=e.head,n=e.capacity<<1;e.entries=xt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const r=o;if(r===void 0)return;{const a=r,c=a.next,u=a.key,l=a.value,f=a.hash;dl(e,u,l,f),o=c;continue}}}function oe(e,t,n){fl(e,t,n,Kr(t))}function hl(e,t,n){pl(e,t,n,cl(t))}function _l(e,t,n){dl(e,t,n,Kr(t))}function Ve(e){const t=em(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const r=e[o];oe(t,r._0,r._1),s=o+1|0;continue}else break}return t}function pm(e){const t=tm(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const r=e[o];hl(t,r._0,r._1),s=o+1|0;continue}else break}return t}function dm(e){const t=nm(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const r=e[o];_l(t,r._0,r._1),s=o+1|0;continue}else break}return t}function $l(e,t){const n=cl(t);let s=0,o=n&e.capacity_mask;for(;;){const r=s,i=o,a=e.entries;g(a,i);const c=a[i];if(c===void 0)return;{const l=c;if(l.hash===n&&Ll(l.key,t))return l.value;if(r>l.psl)return;s=r+1|0,o=i+1&e.capacity_mask;continue}}}function hm(e,t){const n=Kr(t);let s=0,o=n&e.capacity_mask;for(;;){const r=s,i=o,a=e.entries;g(a,i);const c=a[i];if(c===void 0)Ne();else{const l=c;if(l.hash===n&&l.key===t)return l.value;if(r<=l.psl){s=r+1|0,o=i+1&e.capacity_mask;continue}else Ne()}}}function _m(e){return n=>{let s=e.head;for(;;){const o=s;if(o===void 0)return 1;{const i=o,a=i.key,c=i.value,u=i.next;if(n(a,c)===1){s=u;continue}else return 0}}}}function $m(e){const t=dm([]);return e(n=>(_l(t,n._0,n._1),1)),t}function mm(e){return e?Bd:Vd}function Qe(e){const t=e+0,n=void 0;return new Vr(t,n)}function gm(e){return{hi:0,lo:e}}function bm(e){return gm(e)}function gr(e){return bm(e)}function As(e){const t=e,n=void 0;return new Vr(t,n)}function wm(e){const t=new Array(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const r=e[o];t[o]=Il(r),s=o+1|0;continue}else break}return new nl(t)}function ym(e,t){sl(e,t)}function vm(e,t){sl(e,t)}function Tm(){return e=>1}function ea(e){return t=>t(e)}function Mm(e,t){return n=>e(n)===1&&t(n)===1?1:0}function Cm(e){const t=[];return e(n=>(ym(t,n),1)),t}function ml(e,t,n){const s=e.hi,o=e.lo,r=o+n|0,i=r>>31,a=o>>31,c=n>>31,u=(a&c|~i&(a^c))&1;return{hi:(s+t|0)+u|0,lo:r}}function Sm(e,t){return ml(e,t.hi,t.lo)}function xm(e,t){return t.lo===0?{hi:e.hi-t.hi|0,lo:e.lo}:ml(e,-1,-1)}function Lm(e,t){const n=e.hi,s=e.lo,o=t.hi,r=t.lo,i=n,a=s,c=o,u=r,l=i>>>16|0,f=i&65535,p=a>>>16|0,d=a&65535,$=c>>>16|0,b=c&65535,v=u>>>16|0,C=u&65535,O=Math.imul(d,C)|0,P=O>>>16|0,B=O&65535,L=(P>>>0)+((Math.imul(p,C)|0)>>>0)|0,m=L>>>16|0,S=((L&65535)>>>0)+((Math.imul(d,v)|0)>>>0)|0,x=(m>>>0)+((S>>>16|0)>>>0)|0,q=S&65535,z=(x>>>0)+((Math.imul(f,C)|0)>>>0)|0,w=z>>>16|0,H=((z&65535)>>>0)+((Math.imul(p,v)|0)>>>0)|0,D=(w>>>0)+((H>>>16|0)>>>0)|0,K=((H&65535)>>>0)+((Math.imul(d,b)|0)>>>0)|0,W=(D>>>0)+((K>>>16|0)>>>0)|0,se=K&65535;return{hi:(((((((((W>>>0)+((Math.imul(l,C)|0)>>>0)|0)>>>0)+((Math.imul(f,v)|0)>>>0)|0)>>>0)+((Math.imul(p,b)|0)>>>0)|0)>>>0)+((Math.imul(d,$)|0)>>>0)|0)&65535)<<16|se,lo:q<<16|B}}function Am(e,t){const n=Kd(),s=e.hi,o=e.lo,r=t.hi,i=t.lo,a=n.rem_u,c=a(o,s,i,r),u=n.get_high;return{hi:u(),lo:c}}function Im(e){return{hi:~e.hi,lo:~e.lo}}function Em(e,t){return{hi:e.hi&t.hi,lo:e.lo&t.lo}}function Rm(e,t){return{hi:e.hi|t.hi,lo:e.lo|t.lo}}function Pm(e,t){const n=t&63;return{hi:e.lo<<(n-32|0),lo:0}}function km(e,t){const n=t&63;return n===0?e:n<32?{hi:e.hi>>>n|0,lo:e.lo>>>n|e.hi<<(32-n|0)}:{hi:0,lo:e.hi>>>(n-32|0)|0}}function Is(e,t){return Sm(e,t)}function ta(e,t){return xm(e,t)}function Bn(e,t){return Lm(e,t)}function Om(e,t){return Am(e,t)}function na(e){return e.lo}function Nm(e,t){return Wd(e,t)}function sa(e,t){const n=e,s=t;return n.hi===s.hi&&n.lo===s.lo}function rs(e,t){return Em(e,t)}function Dm(e,t){return Rm(e,t)}function Gm(e){return Im(e)}function Fm(e,t){return Pm(e,t)}function Cn(e,t){return km(e,t)}function Hm(e,t){const n=(e.acc>>>0)+((Math.imul(t,-1028477379)|0)>>>0)|0,s=17;e.acc=Math.imul(n<<s|(n>>>(32-s|0)|0),668265263)|0}function gl(e,t){e.acc=(e.acc>>>0)+4|0,Hm(e,t)}function Vn(e,t){gl(e,t)}function Um(e,t){const n=t.length;let s=0;for(;;){const o=s;if(o<n){gl(e,t.charCodeAt(o)),s=o+1|0;continue}else return}}function jm(e,t){Um(t,e)}function Bm(e){const t=e;let n=t^(t>>>17|0);return n=Math.imul(n,-312814405)|0,n=n^(n>>>11|0),n=Math.imul(n,-1404298415)|0,n=n^(n>>>15|0),n=Math.imul(n,830770091)|0,n=n^(n>>>14|0),n}function ao(e,t,n,s,o){if(o>=0&&s>=0&&(o+n|0)<=t.length&&(s+n|0)<=e.length){B$(t,o,e,s,n);return}else{rl(`bounds check failed: dst_offset = ${Ze(o)}, src_offset = ${Ze(s)}, len = ${Ze(n)}, dst.length = ${Ze(t.length)}, self.length = ${Ze(e.length)}`);return}}function Vm(e,t,n,s,o){if((o+n|0)<=t.length&&(s+n|0)<=e.length){V$(t,o,e,s,n);return}else{rl(`bounds check failed: dst_offset = ${Ze(o)}, src_offset = ${Ze(s)}, len = ${Ze(n)}, dst.length = ${Ze(t.length)}, self.length = ${Ze(e.length)}`);return}}function Km(e,t){{const n=xt(e,t(0));let s=1;for(;;){const o=s;if(o<e){g(n,o),n[o]=t(o),s=o+1|0;continue}else break}return n}}function Wm(e){return zd(e)}function zm(e,t){t.method_0(t.self,String(e))}function Es(e,t){if(t>=0&&t<e.len){const n=e.bytes,s=e.start+t|0;return g(n,s),n[s]}else return j$(`index out of bounds: the len is from 0 to ${Ze(e.len)} but the index is ${Ze(t)}`)}function qm(e,t,n){const s=e.length;let o;if(n===void 0)o=s;else{const a=n;o=a<0?s+a|0:a}const r=t<0?s+t|0:t;return r>=0&&r<=o&&o<=s?{bytes:e,start:r,len:o-r|0}:H$()}function Jm(e){const t=Es(e,0),n=Es(e,1),s=(t>>>0)+(n<<8>>>0)|0,o=Es(e,2),r=(s>>>0)+(o<<16>>>0)|0,i=Es(e,3);return(r>>>0)+(i<<24>>>0)|0}function Xm(e,t,n){g(t,0),t[0]=1634760805,g(t,1),t[1]=1634760805,g(t,2),t[2]=1634760805,g(t,3),t[3]=1634760805,g(t,4),t[4]=857760878,g(t,5),t[5]=857760878,g(t,6),t[6]=857760878,g(t,7),t[7]=857760878,g(t,8),t[8]=2036477234,g(t,9),t[9]=2036477234,g(t,10),t[10]=2036477234,g(t,11),t[11]=2036477234,g(t,12),t[12]=1797285236,g(t,13),t[13]=1797285236,g(t,14),t[14]=1797285236,g(t,15),t[15]=1797285236,g(e,0),g(t,16),t[16]=e[0],g(e,0),g(t,17),t[17]=e[0],g(e,0),g(t,18),t[18]=e[0],g(e,0),g(t,19),t[19]=e[0],g(e,1),g(t,20),t[20]=e[1],g(e,1),g(t,21),t[21]=e[1],g(e,1),g(t,22),t[22]=e[1],g(e,1),g(t,23),t[23]=e[1],g(e,2),g(t,24),t[24]=e[2],g(e,2),g(t,25),t[25]=e[2],g(e,2),g(t,26),t[26]=e[2],g(e,2),g(t,27),t[27]=e[2],g(e,3),g(t,28),t[28]=e[3],g(e,3),g(t,29),t[29]=e[3],g(e,3),g(t,30),t[30]=e[3],g(e,3),g(t,31),t[31]=e[3],g(e,4),g(t,32),t[32]=e[4],g(e,4),g(t,33),t[33]=e[4],g(e,4),g(t,34),t[34]=e[4],g(e,4),g(t,35),t[35]=e[4],g(e,5),g(t,36),t[36]=e[5],g(e,5),g(t,37),t[37]=e[5],g(e,5),g(t,38),t[38]=e[5],g(e,5),g(t,39),t[39]=e[5],g(e,6),g(t,40),t[40]=e[6],g(e,6),g(t,41),t[41]=e[6],g(e,6),g(t,42),t[42]=e[6],g(e,6),g(t,43),t[43]=e[6],g(e,7),g(t,44),t[44]=e[7],g(e,7),g(t,45),t[45]=e[7],g(e,7),g(t,46),t[46]=e[7],g(e,7),g(t,47),t[47]=e[7],g(t,48),t[48]=n,g(t,49),t[49]=(n>>>0)+1|0,g(t,50),t[50]=(n>>>0)+2|0,g(t,51),t[51]=(n>>>0)+3|0,g(t,52),t[52]=0,g(t,53),t[53]=0,g(t,54),t[54]=0,g(t,55),t[55]=0,g(t,56),t[56]=0,g(t,57),t[57]=0,g(t,58),t[58]=0,g(t,59),t[59]=0,g(t,60),t[60]=0,g(t,61),t[61]=0,g(t,62),t[62]=0,g(t,63),t[63]=0}function Bt(e){const t=e._0,n=e._1,s=e._2,o=e._3,r=(t>>>0)+(n>>>0)|0,i=o^r,a=i<<16|(i>>>16|0),c=(s>>>0)+(a>>>0)|0,u=n^c,l=u<<12|(u>>>20|0),f=(r>>>0)+(l>>>0)|0,p=a^f,d=p<<8|(p>>>24|0),$=(c>>>0)+(d>>>0)|0,b=l^$,v=b<<7|(b>>>25|0);return{_0:f,_1:v,_2:$,_3:d}}function bl(e,t,n){Xm(e,t,n);let s=0;for(;;){const o=s;if(o<4){g(t,o);let r=t[o];const i=4+o|0;g(t,i);let a=t[i];const c=8+o|0;g(t,c);let u=t[c];const l=12+o|0;g(t,l);let f=t[l];const p=16+o|0;g(t,p);let d=t[p];const $=20+o|0;g(t,$);let b=t[$];const v=24+o|0;g(t,v);let C=t[v];const O=28+o|0;g(t,O);let P=t[O];const B=32+o|0;g(t,B);let L=t[B];const m=36+o|0;g(t,m);let j=t[m];const S=40+o|0;g(t,S);let x=t[S];const q=44+o|0;g(t,q);let z=t[q];const w=48+o|0;g(t,w);let y=t[w];const H=52+o|0;g(t,H);let D=t[H];const V=56+o|0;g(t,V);let K=t[V];const W=60+o|0;g(t,W);let se=t[W],Ge=0;for(;;){const R=Ge;if(R<4){const I=Bt({_0:r,_1:d,_2:L,_3:y});r=I._0,d=I._1,L=I._2,y=I._3;const A=Bt({_0:a,_1:b,_2:j,_3:D});a=A._0,b=A._1,j=A._2,D=A._3;const F=Bt({_0:u,_1:C,_2:x,_3:K});u=F._0,C=F._1,x=F._2,K=F._3;const N=Bt({_0:f,_1:P,_2:z,_3:se});f=N._0,P=N._1,z=N._2,se=N._3;const k=Bt({_0:r,_1:b,_2:x,_3:se});r=k._0,b=k._1,x=k._2,se=k._3;const E=Bt({_0:a,_1:C,_2:z,_3:y});a=E._0,C=E._1,z=E._2,y=E._3;const J=Bt({_0:u,_1:P,_2:L,_3:D});u=J._0,P=J._1,L=J._2,D=J._3;const U=Bt({_0:f,_1:d,_2:j,_3:K});f=U._0,d=U._1,j=U._2,K=U._3,Ge=R+1|0;continue}else break}g(t,o),t[o]=r;const Le=4+o|0;g(t,Le),t[Le]=a;const Ae=8+o|0;g(t,Ae),t[Ae]=u;const Ie=12+o|0;g(t,Ie),t[Ie]=f;const ut=16+o|0;g(t,ut),g(t,ut),t[ut]=(t[ut]>>>0)+(d>>>0)|0;const Ht=20+o|0;g(t,Ht),g(t,Ht),t[Ht]=(t[Ht]>>>0)+(b>>>0)|0;const Ut=24+o|0;g(t,Ut),g(t,Ut),t[Ut]=(t[Ut]>>>0)+(C>>>0)|0;const Fe=28+o|0;g(t,Fe),g(t,Fe),t[Fe]=(t[Fe]>>>0)+(P>>>0)|0;const Je=32+o|0;g(t,Je),g(t,Je),t[Je]=(t[Je]>>>0)+(L>>>0)|0;const tt=36+o|0;g(t,tt),g(t,tt),t[tt]=(t[tt]>>>0)+(j>>>0)|0;const ft=40+o|0;g(t,ft),g(t,ft),t[ft]=(t[ft]>>>0)+(x>>>0)|0;const Ke=44+o|0;g(t,Ke),g(t,Ke),t[Ke]=(t[Ke]>>>0)+(z>>>0)|0;const bn=48+o|0;g(t,bn),t[bn]=y;const h=52+o|0;g(t,h),t[h]=D;const _=56+o|0;g(t,_),t[_]=K;const M=60+o|0;g(t,M),t[M]=se,s=o+1|0;continue}else return}}function Ym(e){const t=Km(8,o=>Jm(qm(e,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),n=xt(64,0);return bl(t,n,0),{buffer:n,seed:t,i:0,n:32,counter:0}}function Zm(e){const t=e.i;if(t>>>0>=e.n>>>0)return;e.i=(t>>>0)+1|0;const n=t&31,s=e.buffer,o=Math.imul(n,2)|0;g(s,o);const r=gr(s[o]),i=e.buffer,a=(Math.imul(n,2)|0)+1|0;g(i,a);const c=gr(i[a]);return Dm(Fm(c,32),r)}function Qm(e){e.counter=(e.counter>>>0)+4|0,e.counter===16&&(Vm(e.buffer,e.seed,8,56,0),e.counter=0),bl(e.seed,e.buffer,e.counter),e.i=0,e.n=e.counter===12?28:32}function eg(e,t,n){let s=e,o=n;e:for(;;){const r=s,i=o;switch(r.$tag){case 1:{const a=r,c=a._0,u=a._1,l=a._2;return t===c?u:ug(l,t)}case 0:{const a=r,c=a._0,u=a._1,l=a._2;return i===l&&t===c?u:void 0}default:{const c=r._0,l=i&31,f=zr(c,l);if(f!==void 0){s=f,o=i>>>5|0;continue e}return}}}}function tg(e,t){const n=e;if(n!==void 0)return eg(n,t,co(t))}function wl(e,t,n,s,o,r){const a=n&31,u=r&31;if(a===u){let l;if(n>>>0<=127){const p={_0:e,_1:t};l=new Xt(s,o,new _s(p,Rn))}else{const d=n>>>5|0;l=wl(e,t,d,s,o,r>>>5|0)}return new On(rg(a,l))}else{let l,f;e:if(n>>>0<=127){const d=new Xt(e,t,Rn),$=new Xt(s,o,Rn);l=d,f=$;break e}else{const d=n,$=new mn(e,t,d>>>5|0),b=r,v=new mn(s,o,b>>>5|0);l=$,f=v;break e}return new On(ig(a,l,u,f))}}function yl(e,t,n,s){switch(e.$tag){case 1:{const o=e,r=o._0,i=o._1,a=o._2;if(t===r)return new Xt(t,n,a);{const c=Cl(a,f=>f._0===t);let u;c===void 0?u=a:u=Sl(a,c);const l={_0:r,_1:i};return new Xt(t,n,new _s(l,u))}}case 0:{const o=e,r=o._0,i=o._1,a=o._2;return s===a&&t===r?new mn(r,n,a):wl(r,i,a,t,n,s)}default:{const r=e._0,a=s&31,c=zr(r,a);if(c===void 0){const u=s,l=new mn(t,n,u>>>5|0);return new On(ag(r,a,l))}else{const p=yl(c,t,n,s>>>5|0);return new On(Ml(r,a,p))}}}}function Hs(e,t,n){const s=e;return s===void 0?new mn(t,n,co(t)):yl(s,t,n,co(t))}function vl(e,t,n){switch(e.$tag){case 1:{const s=e,o=s._0,r=s._1,i=s._2;if(o===t){if(i.$tag===0)return;{const a=i,c=a._0,u=c._0,l=c._1,f=a._1;return new Xt(u,l,f)}}else{const a=Cl(i,c=>c._0===t);if(a===void 0)return e;{const u=a;return new Xt(o,r,Sl(i,u))}}}case 0:{const s=e,o=s._0,r=s._2;return n===r&&t===o?void 0:e}default:{const o=e._0,i=n&31,a=zr(o,i);if(a===void 0)return e;{const f=vl(a,t,n>>>5|0);let p,d;e:{t:{if(o.data.length===1){if(f===void 0)return;d=f;break t}else if(f===void 0)p=cg(o,i);else{d=f;break t}break e}p=Ml(o,i,d)}e:{const $=p.data;if($.length===1){const b=$[0];if(b.$tag===0){const v=b,C=v._0,O=v._1,P=v._2,B=p.elem_info,L=qd(B),m=P;return new mn(C,O,m<<5|L)}else break e}else break e}return new On(p)}}}}function ng(e,t){const n=e;if(n!==void 0)return vl(n,t,co(t))}function Tl(e){switch(e.$tag){case 1:{const t=e,n=t._0,s=t._1,o=t._2;return Mm(ea({_0:n,_1:s}),lg(o))}case 0:{const t=e,n=t._0,s=t._1;return ea({_0:n,_1:s})}default:{const s=e._0.data;return o=>{const r=s.length;let i=0;for(;;){const a=i;if(a<r){const c=s[a];if(Tl(c)(o)===1){i=a+1|0;continue}else return 0}else return 1}}}}}function sg(e){const t=e;return t===void 0?Tm():Tl(t)}function og(e){const t=sg(e);return n=>t(s=>n(s._1))}function co(e){return Bm(e)|-1073741824}function rg(e,t){return{elem_info:0|1<<e,data:[t]}}function zr(e,t){if(e.elem_info&1<<t){const s=e.data,o=e.elem_info,r=yo(o&((1<<t>>>0)-1|0));return g(s,r),s[r]}else return}function ig(e,t,n,s){return{elem_info:0|1<<e|1<<n,data:e<n?[t,s]:[s,t]}}function ag(e,t,n){const s=e.data,o=s.length,r=o+1|0,i=e.elem_info,a=yo(i&((1<<t>>>0)-1|0)),c=xt(r,n);return ao(s,c,a,0,0),ao(s,c,o-a|0,a,a+1|0),{elem_info:e.elem_info|1<<t,data:c}}function cg(e,t){const n=e.data,s=n.length,o=e.elem_info,r=yo(o&((1<<t>>>0)-1|0)),i=xt(s-1|0,n[0]);return ao(n,i,r,0,0),ao(n,i,(s-r|0)-1|0,r+1|0,r),{elem_info:e.elem_info^1<<t,data:i}}function Ml(e,t,n){const s=Wm(e.data),o=e.elem_info,r=yo(o&((1<<t>>>0)-1|0));return g(s,r),s[r]=n,{elem_info:e.elem_info,data:s}}function oa(e){return e<10?48+e|0:97+(e-10|0)|0}function ra(e,t){const n=Mo(e.length);return gg(e)(o=>{switch(o){case 34:{he(n,'\\"');break}case 92:{he(n,"\\\\");break}case 47:{t?he(n,"\\/"):Me(n,o);break}case 10:{he(n,"\\n");break}case 13:{he(n,"\\r");break}case 8:{he(n,"\\b");break}case 9:{he(n,"\\t");break}default:{const r=o;r===12?he(n,"\\f"):r<32?(he(n,"\\u00"),Me(n,oa(r/16|0)),Me(n,oa(r%16|0))):Me(n,o)}}return 1}),n.val}function Tn(e,t){return t===0?"":`
${bg(" ",Math.imul(t,e)|0)}`}function br(e,t,n){const s=e._2,o=e._1,r=e._0;switch(t.$tag){case 6:{const a=t._0;if(a.size===0){he(r,"{}");return}Me(r,123),he(r,Tn(n+1|0,s));const c={val:!0};_m(a)((l,f)=>(c.val?c.val=!1:(Me(r,44),he(r,Tn(n+1|0,s))),Me(r,34),he(r,ra(l,o)),Me(r,34),s===0?Me(r,58):he(r,": "),br(e,f,n+1|0),1)),he(r,Tn(n,s)),Me(r,125);return}case 5:{const a=t._0;if(a.length===0){he(r,"[]");return}Me(r,91),he(r,Tn(n+1|0,s));const c=a.length;let u=0;for(;;){const l=u;if(l<c){const f=a[l];l>0&&(Me(r,44),he(r,Tn(n+1|0,s))),br(e,f,n+1|0),u=l+1|0;continue}else break}he(r,Tn(n,s)),Me(r,93);return}case 4:{const a=t._0;Me(r,34),he(r,ra(a,o)),Me(r,34);return}case 3:{const i=t,a=i._0,c=i._1;if(c===void 0){Q$(r,a);return}else{he(r,c);return}}case 1:{he(r,"true");return}case 2:{he(r,"false");return}default:{he(r,"null");return}}}function Ts(e,t,n){const s=Mo();return br({_0:s,_1:t,_2:n},e,0),s.val}function lg(e){return n=>{let s=e;for(;;){const o=s;if(o.$tag===0)return 1;{const r=o,i=r._0,a=r._1;if(n(i)===0)return 0;s=a;continue}}}}function ug(e,t){let n=e;for(;;){const s=n;if(s.$tag===0)return;{const o=s,r=o._0,i=r._0,a=r._1,c=o._1;if(i===t)return a;n=c;continue}}}function Cl(e,t){let n=e,s=0;for(;;){const o=n,r=s;if(o.$tag===0)return;{const i=o,a=i._0,c=i._1;if(t(a))return r;n=c,s=r+1|0;continue}}}function Sl(e,t){if(e.$tag===0)return Rn;if(t<0)return e;if(t===0)return e._1;{const n=e,s=n._0,o=n._1,r=new _s(s,Rn);let i=r,a=o,c=t-1|0;for(;;){const u=i,l=a,f=c;if(l.$tag===0)break;if(u.$tag===1){const p=u,d=l,$=d._0,b=d._1;if(f===0){p._1=b;break}else{p._1=new _s($,Rn),i=p._1,a=b,c=f-1|0;continue}}else{Ne();break}}return r}}function fg(e){for(;;){const t=Zm(e);if(t!==void 0)return t;Qm(e)}}function pg(e){return{self:Ym(e),method_0:fg}}function dg(e){return pg(Jd)}function ia(e,t){const n=rs(e,Bo),s=Cn(e,32),o=rs(t,Bo),r=Cn(t,32),i=Bn(n,o),a=Is(Bn(s,o),Cn(i,32)),c=Is(Bn(n,r),rs(a,Bo));return{hi:Is(Is(Bn(s,r),Cn(a,32)),Cn(c,32)),lo:Bn(e,t)}}function hg(e,t){if(sa(t,Ji)){const o=e;return o.method_0(o.self)}else if(sa(rs(t,ta(t,qi)),Ji)){const o=e;return rs(o.method_0(o.self),ta(t,qi))}const n=e;let s=ia(n.method_0(n.self),t);if(Xi(s.lo,t)){const o=Om(Gm(t),t);for(;Xi(s.lo,o);){const r=e;s=ia(r.method_0(r.self),t);continue}}return s.hi}function _g(e,t){if(t===0){const n=e;return na(n.method_0(n.self))}return na(hg(e,gr(t)))}function $g(e,t){if(t===0){const n=e;return Y$(Cn(n.method_0(n.self),33))}else return _g(e,t)}function mg(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function gg(e){return n=>{const s=e.length;let o=0;for(;;){const r=o;if(r<s){const i=e.charCodeAt(r);if(55296<=i&&i<=56319&&(r+1|0)<s){const c=r+1|0,u=e.charCodeAt(c);if(56320<=u&&u<=57343){const l=mg(i,u);if(n(l)===1){o=r+2|0;continue}else return 0}}if(n(i)!==1)return 0;o=r+1|0;continue}else return 1}}}function bg(e,t){if(t<=0)return"";if(t===1)return e;{const n=Mo(),s=e;let o=0;for(;;){const r=o;if(r<t){he(n,s),o=r+1|0;continue}else break}return n.val}}function xl(){return{now:0}}function qr(e){return e.now=e.now+1|0,e.now}function Ll(e,t){switch(e){case 0:return t===0;case 1:return t===1;case 2:return t===2;case 3:return t===3;default:return t===4}}function wg(e,t){switch(e){case 0:{Vn(t,0);return}case 1:{Vn(t,1);return}case 2:{Vn(t,2);return}case 3:{Vn(t,3);return}default:{Vn(t,4);return}}}function yg(e){return{cost:e}}function Al(e){const t=Ve([]);return oe(t,"health",As(e.health)),oe(t,"attack",As(e.attack)),oe(t,"defense",As(e.defense)),oe(t,"dodge",As(e.dodge)),new De(t)}function kt(e,t,n,s){return{health:e,attack:t,defense:n,dodge:s}}function aa(e,t){return{health:Math.fround(e.health+t.health),attack:Math.fround(e.attack+t.attack),defense:Math.fround(e.defense+t.defense),dodge:Math.fround(e.dodge+t.dodge)}}function ca(e){const t=Ve([]);return oe(t,"equipment_base",vg(e.equipment_base)),oe(t,"id",Qe(e.id)),new De(t)}function vg(e){const t=Ve([]),n=e.name;oe(t,"name",new me(n));const s=e.description;oe(t,"description",new me(s));const o=e.resource_url;return oe(t,"resource_url",new me(o)),oe(t,"attribute",Al(e.attribute)),new De(t)}function Tg(e){const t=Ve([]);oe(t,"id",Qe(e.id));const n=e.type_msg;oe(t,"type_msg",new me(n));const s=e.content;return oe(t,"content",new me(s)),new De(t)}function Mg(){return{history:[],callback:e=>{}}}function Cg(e,t){e.callback=t}function Jr(e,t){const n={id:qr(G$),type_msg:t.type_msg,content:t.content};vm(e.history,n);const s=e.callback;s(Ts(Tg(n),!1,0))}function Il(e){const t=Ve([]);return oe(t,"id",Qe(e.id)),oe(t,"level",Qe(e.level)),oe(t,"suffix",Qe(e.suffix)),oe(t,"live_left",Qe(e.live_left)),oe(t,"attribute",Al(e.attribute)),oe(t,"copper_type",El(e.copper_type)),oe(t,"equipment_slot",Sg(e.equipment_slot)),oe(t,"copper_info",xg(e.copper_info)),new De(t)}function El(e){switch(e){case 0:{const t="IronWall";return new me(t)}case 1:{const t="Arcanist";return new me(t)}case 2:{const t="CraftsMan";return new me(t)}case 3:{const t="Mechanic";return new me(t)}default:{const t="Resonator";return new me(t)}}}function Sg(e){const t=Ve([]),n=e.slot1;n===void 0||oe(t,"slot1",ca(n));const s=e.slot2;return s===void 0||oe(t,"slot2",ca(s)),oe(t,"is_slot2_locked",mm(e.is_slot2_locked)),new De(t)}function xg(e){const t=Ve([]),n=e.name;oe(t,"name",new me(n)),oe(t,"copper_type",El(e.copper_type));const s=e.description;oe(t,"description",new me(s));const o=e.icon_url;oe(t,"icon_url",new me(o));const r=e.model_url;oe(t,"model_url",new me(r));const i=e.skill;return i===void 0||oe(t,"skill",Lg(i)),new De(t)}function Lg(e){const t=Ve([]),n=e.name;oe(t,"name",new me(n));const s=e.description;oe(t,"description",new me(s));const o=e.resource_url;oe(t,"resource_url",new me(o));const r=e.cool_down;return r===void 0||oe(t,"cool_down",Qe(r)),new De(t)}function Ag(e){e:switch(e.copper_type){case 0:return kt(Math.fround(10),Math.fround(1),Math.fround(1),Math.fround(1));case 1:return kt(Math.fround(5),Math.fround(2),Math.fround(.5),Math.fround(.5));case 4:return kt(Math.fround(5),Math.fround(1),Math.fround(.5),Math.fround(.5));case 3:break e;default:break e}return kt(Math.fround(5),Math.fround(.5),Math.fround(5),Math.fround(.5))}function Ig(e){return{slot1:e.slot1,slot2:e.slot2,is_slot2_locked:!1}}function Eg(e){const t=Ag(e);return e.level===4?{...e,attribute:aa(e.attribute,t),level:e.level+1|0,equipment_slot:Ig(e.equipment_slot)}:{...e,attribute:aa(e.attribute,t),level:e.level+1|0}}function Rg(e){let t;switch(e){case 1:{t=5;break}case 2:{t=10;break}case 3:{t=20;break}case 4:{t=30;break}default:Jr(To,{type_msg:"upgrade_cost_error",content:"升级等级错误"}),t=0}return yg([{_0:2,_1:t}])}function Rl(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function Pl(e){switch(e){case 0:return kt(Math.fround(100),Math.fround(10),Math.fround(10),Math.fround(10));case 1:return kt(Math.fround(30),Math.fround(20),Math.fround(5),Math.fround(5));case 4:return kt(Math.fround(30),Math.fround(5),Math.fround(5),Math.fround(5));case 3:return kt(Math.fround(50),Math.fround(5),Math.fround(5),Math.fround(5));default:return kt(Math.fround(50),Math.fround(0),Math.fround(5),Math.fround(5))}}function Vo(e){const t=hm(D$,e),n=qr(ol);return{id:n,level:1,suffix:n,live_left:5,attribute:Pl(t.copper_type),copper_type:t.copper_type,equipment_slot:Rl(),copper_info:t}}function Pg(){return pm([{_0:2,_1:50},{_0:1,_1:0},{_0:4,_1:0},{_0:3,_1:0},{_0:0,_1:0}])}function ln(e,t){const n=$l(e,t);return n===void 0?Ne():n}function kl(e,t,n){const s=$l(e,t);let o;if(s===void 0?o=Ne():o=s,o<n){Jr(To,{type_msg:"resource_not_enough",content:"资源不足"});return}else{hl(e,t,o-n|0);return}}function kg(e,t){const n=t.cost,s=n.length;let o=0;for(;;){const r=o;if(r<s){const i=n[r],a=i._0,c=i._1;if(ln(e,a)<c)return!1;o=r+1|0;continue}else break}return!0}function Og(e,t){const n=t.cost,s=n.length;let o=0;for(;;){const r=o;if(r<s){const i=n[r],a=i._0,c=i._1;kl(e,a,c),o=r+1|0;continue}else return}}function Ng(){const e=Vo("阿磐"),t=Vo("咝咝"),n=Vo("波波");return{coppers:Hs(Hs(Hs(void 0,e.id,e),t.id,t),n.id,n)}}function Ol(e,t){return{coppers:Hs(e.coppers,t.id,t)}}function Dg(e,t){const n=tg(e.coppers,t);return n===void 0?Ne():n}function Gg(e){return Cm(og(e.coppers))}function Fg(e,t){return{coppers:ng(e.coppers,t)}}function Hg(e,t){return e+$g(F$,(t-e|0)+1|0)|0}function Ug(){const e=qr(ol),t=Hg(0,os.length-1|0);g(os,t);const n=os[t],s=Pl(n.copper_type);return{id:e,level:1,suffix:e,live_left:5,attribute:s,copper_type:n.copper_type,equipment_slot:Rl(),copper_info:n}}function jg(e){if(ln(e,2)>10)return kl(e,2,10),Ug();Jr(To,{type_msg:"resource_not_enough",content:"资源不足"})}function Bg(){return{resource:Pg(),warehouse:Ng()}}function Vg(e){const t=e.resource,n=Ve([{_0:"SpiritalSpark",_1:Qe(ln(t,2))},{_0:"RecallGear",_1:Qe(ln(t,1))},{_0:"ResonantCrystal",_1:Qe(ln(t,4))},{_0:"RefinedCopper",_1:Qe(ln(t,3))},{_0:"HeartCrystalDust",_1:Qe(ln(t,0))}]);return Ts(new De(n),!1,0)}function Kg(e){const t=e.warehouse,n=Ve([{_0:"coppers",_1:wm(Gg(t))}]);return Ts(new De(n),!1,0)}function Wg(e){const t=jg(e.resource);let n;if(t===void 0){const s="error",o={_0:"type",_1:new me(s)},r="资源不足",i=Ve([o,{_0:"content",_1:new me(r)}]);n=new De(i)}else{const o=t;e.warehouse=Ol(e.warehouse,o);const r="success",i=Ve([{_0:"type",_1:new me(r)},{_0:"copper",_1:Il(o)}]);n=new De(i)}return Ts(n,!1,0)}function zg(e,t){const n=e.warehouse,s=Dg(n,t),o=Rg(s.level);let r;if(kg(e.resource,o)){const i=Eg(s);Og(e.resource,o),e.warehouse=Fg(e.warehouse,t),e.warehouse=Ol(e.warehouse,i);const a="success",c=Ve([{_0:"type",_1:new me(a)}]);r=new De(c)}else{const i="error",a={_0:"type",_1:new me(i)},c="资源不足",u=Ve([a,{_0:"content",_1:new me(c)}]);r=new De(u)}return Ts(r,!1,0)}function qg(){return Vg(vo)}function Jg(){return Kg(vo)}function Xg(){return Wg(vo)}function Yg(e){return zg(vo,e)}function Zg(e){Cg(To,e)}function la(){return JSON.parse(Xg())}function xn(){return JSON.parse(qg())}function Rs(){return JSON.parse(Jg())}function ua(e){return JSON.parse(Yg(e))}function fa(e){Zg(t=>e(JSON.parse(t)))}const Qg={__name:"DrawScreen",emits:["draw"],setup(e,{expose:t,emit:n}){t();const s=n,o=ee(!1),r=ee(!0),i=ee(!1),a=ee("抽卡展示"),c=ee("✨"),u=ee(""),l=ee({left:0,top:0,width:0,height:0});function f(L){return L?typeof L=="string"&&L.startsWith("/")?L:$e(L):""}const p=ee(!1),d=ee(!1),$=ee(!1),b=ee("");function v(L){b.value=L||"提示",$.value=!0,setTimeout(()=>{$.value=!1},1800)}async function C(){try{const m=xn(),j=Number((m==null?void 0:m.SpiritalSpark)??0);r.value=j>=10}catch{r.value=!1}}function O(){i.value=!1,p.value=!1,d.value=!1}function P(){if(o.value)return;if(C(),!r.value){v("资源不足");return}o.value=!0,console.log("[DrawScreen] runDrawSequence start");const L=document.querySelector(".draw-card");if(L){L.classList.add("is-shaking"),setTimeout(()=>L.classList.remove("is-shaking"),500);const m=L.getBoundingClientRect();l.value={left:Math.round(m.left),top:Math.round(m.top),width:Math.round(m.width),height:Math.round(m.height)}}setTimeout(async()=>{i.value=!0,p.value=!1,d.value=!0;try{const m=la();if(m&&m.type==="success"&&m.copper&&m.copper.copper_info){const j=m.copper.copper_info;a.value=j.name||"新铜偶",c.value="",u.value=$e(j.icon_url||""),console.log("[DrawScreen] tempImage resolved:",u.value),await Jt(),setTimeout(()=>{d.value=!1,setTimeout(()=>{p.value=!0},350)},450),s("draw",{name:j.name,image:j.icon_url||""}),C()}else m&&m.type==="error"&&(i.value=!1,p.value=!1,d.value=!1,v(m.content||"资源不足"),s("draw",{error:!0}),C())}catch{i.value=!1,p.value=!1,d.value=!1,v("抽卡失败"),s("draw",{error:!0}),C()}finally{setTimeout(()=>{o.value=!1},800)}},600)}const B={emit:s,isDrawing:o,canDraw:r,showTempCard:i,tempName:a,tempIcon:c,tempImage:u,tempRect:l,resolveAssetUrl:f,infoVisible:p,cardFlipped:d,toastVisible:$,toastText:b,showToast:v,refreshCanDraw:C,onCloseResult:O,runDrawSequence:P,ref:ee,nextTick:Jt,get getAssetUrl(){return $e},get gacha(){return la},get get_resource(){return xn}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},e0={class:"draw-screen"},t0={class:"draw-screen__body"},n0={class:"draw-card"},s0={class:"card-face card-back"},o0=["src"],r0={class:"card-face card-front"},i0=["src"],a0={key:1,class:"card-icon"},c0=["src"],l0={class:"draw-cost"},u0=["src"],f0=["disabled","title"],p0={key:0,class:"toast"};function d0(e,t,n,s,o,r){return ie(),ce("div",e0,[T("div",t0,[T("div",n0,[s.showTempCard?(ie(),ce("div",{key:0,class:"draw-temp",onClick:s.onCloseResult},[t[3]||(t[3]=T("div",{class:"dim-backdrop"},null,-1)),T("div",{class:"temp-stack",style:zt({left:s.tempRect.left+"px",top:s.tempRect.top+"px",width:s.tempRect.width+"px",height:s.tempRect.height+"px"}),onClick:t[2]||(t[2]=Uo(()=>{},["stop"]))},[T("div",{class:Zt(["card",{flipped:s.cardFlipped}]),onClick:t[0]||(t[0]=Uo(i=>s.cardFlipped=!s.cardFlipped,["stop"]))},[T("div",s0,[T("img",{src:s.getAssetUrl("frontend_resource/gacha.webp"),alt:"back"},null,8,o0)]),T("div",r0,[s.tempImage?(ie(),ce("img",{key:0,src:s.tempImage,alt:"copper",class:"card-front-img"},null,8,i0)):(ie(),ce("div",a0,_e(s.tempIcon||"🎴"),1))])],2),T("div",{class:Zt(["card-name-below",{show:s.infoVisible}]),onClick:t[1]||(t[1]=Uo(()=>{},["stop"]))},_e(s.tempName),3)],4)])):vt("",!0),T("img",{class:"draw-card__img",src:s.getAssetUrl("frontend_resource/gacha.webp"),alt:"card"},null,8,c0)]),T("div",l0,[T("img",{class:"draw-cost__icon",src:s.getAssetUrl("resource/spiritual_spark.webp"),alt:"cost"},null,8,u0),t[4]||(t[4]=T("span",{class:"draw-cost__times"},"X 10",-1))]),T("button",{class:"draw-action",disabled:s.isDrawing||!s.canDraw,title:s.canDraw?"":"资源不足",onClick:s.runDrawSequence},"抽取卡牌",8,f0),s.toastVisible?(ie(),ce("div",p0,_e(s.toastText),1)):vt("",!0)])])}const h0=gn(Qg,[["render",d0],["__scopeId","data-v-0c4022d9"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/DrawScreen.vue"]]);function pa(e,t){if(t===Gl)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Xo||t===ba){let n=e.getIndex();if(n===null){const i=[],a=e.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)i.push(c);e.setIndex(i),n=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}const s=n.count-2,o=[];if(t===Xo)for(let i=1;i<=s;i++)o.push(n.getX(0)),o.push(n.getX(i)),o.push(n.getX(i+1));else for(let i=0;i<s;i++)i%2===0?(o.push(n.getX(i)),o.push(n.getX(i+1)),o.push(n.getX(i+2))):(o.push(n.getX(i+2)),o.push(n.getX(i+1)),o.push(n.getX(i)));o.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=e.clone();return r.setIndex(o),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class is extends wa{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new b0(n)}),this.register(function(n){return new w0(n)}),this.register(function(n){return new A0(n)}),this.register(function(n){return new I0(n)}),this.register(function(n){return new E0(n)}),this.register(function(n){return new v0(n)}),this.register(function(n){return new T0(n)}),this.register(function(n){return new M0(n)}),this.register(function(n){return new C0(n)}),this.register(function(n){return new g0(n)}),this.register(function(n){return new S0(n)}),this.register(function(n){return new y0(n)}),this.register(function(n){return new L0(n)}),this.register(function(n){return new x0(n)}),this.register(function(n){return new $0(n)}),this.register(function(n){return new R0(n)}),this.register(function(n){return new P0(n)})}load(t,n,s,o){const r=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const u=qn.extractUrlBase(t);i=qn.resolveURL(u,this.path)}else i=qn.extractUrlBase(t);this.manager.itemStart(t);const a=function(u){o?o(u):console.error(u),r.manager.itemError(t),r.manager.itemEnd(t)},c=new Us(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(u){try{r.parse(u,i,function(l){n(l),r.manager.itemEnd(t)},a)}catch(l){a(l)}},s,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,s,o){let r;const i={},a={},c=new TextDecoder;if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===Nl){try{i[ne.KHR_BINARY_GLTF]=new k0(t)}catch(f){o&&o(f);return}r=JSON.parse(i[ne.KHR_BINARY_GLTF].content)}else r=JSON.parse(c.decode(t));else r=t;if(r.asset===void 0||r.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new z0(r,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const f=this.pluginCallbacks[l](u);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,i[f.name]=!0}if(r.extensionsUsed)for(let l=0;l<r.extensionsUsed.length;++l){const f=r.extensionsUsed[l],p=r.extensionsRequired||[];switch(f){case ne.KHR_MATERIALS_UNLIT:i[f]=new m0;break;case ne.KHR_DRACO_MESH_COMPRESSION:i[f]=new O0(r,this.dracoLoader);break;case ne.KHR_TEXTURE_TRANSFORM:i[f]=new N0;break;case ne.KHR_MESH_QUANTIZATION:i[f]=new D0;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(i),u.setPlugins(a),u.parse(s,o)}parseAsync(t,n){const s=this;return new Promise(function(o,r){s.parse(t,n,o,r)})}}function _0(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ne={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $0{constructor(t){this.parser=t,this.name=ne.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let s=0,o=n.length;s<o;s++){const r=n[s];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const n=this.parser,s="light:"+t;let o=n.cache.get(s);if(o)return o;const r=n.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let u;const l=new Dt(16777215);c.color!==void 0&&l.setRGB(c.color[0],c.color[1],c.color[2],Tt);const f=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new js(l),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new va(l),u.distance=f;break;case"spot":u=new Fl(l),u.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),mt(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=n.createUniqueName(c.name||"light_"+t),o=Promise.resolve(u),n.cache.add(s,o),o}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,s=this.parser,r=s.json.nodes[t],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return s._getNodeRef(n.cache,a,c)})}}class m0{constructor(){this.name=ne.KHR_MATERIALS_UNLIT}getMaterialType(){return Sn}extendParams(t,n,s){const o=[];t.color=new Dt(1,1,1),t.opacity=1;const r=n.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const i=r.baseColorFactor;t.color.setRGB(i[0],i[1],i[2],Tt),t.opacity=i[3]}r.baseColorTexture!==void 0&&o.push(s.assignTexture(t,"map",r.baseColorTexture,Ot))}return Promise.all(o)}}class g0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=o.extensions[this.name].emissiveStrength;return r!==void 0&&(n.emissiveIntensity=r),Promise.resolve()}}class b0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];if(i.clearcoatFactor!==void 0&&(n.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&r.push(s.assignTexture(n,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&r.push(s.assignTexture(n,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(r.push(s.assignTexture(n,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const a=i.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ya(a,a)}return Promise.all(r)}}class w0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=o.extensions[this.name];return n.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class y0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return i.iridescenceFactor!==void 0&&(n.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&r.push(s.assignTexture(n,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(n.iridescenceIOR=i.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&r.push(s.assignTexture(n,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(r)}}class v0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[];n.sheenColor=new Dt(0,0,0),n.sheenRoughness=0,n.sheen=1;const i=o.extensions[this.name];if(i.sheenColorFactor!==void 0){const a=i.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],Tt)}return i.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&r.push(s.assignTexture(n,"sheenColorMap",i.sheenColorTexture,Ot)),i.sheenRoughnessTexture!==void 0&&r.push(s.assignTexture(n,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(r)}}class T0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return i.transmissionFactor!==void 0&&(n.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&r.push(s.assignTexture(n,"transmissionMap",i.transmissionTexture)),Promise.all(r)}}class M0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];n.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&r.push(s.assignTexture(n,"thicknessMap",i.thicknessTexture)),n.attenuationDistance=i.attenuationDistance||1/0;const a=i.attenuationColor||[1,1,1];return n.attenuationColor=new Dt().setRGB(a[0],a[1],a[2],Tt),Promise.all(r)}}class C0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=o.extensions[this.name];return n.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class S0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];n.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&r.push(s.assignTexture(n,"specularIntensityMap",i.specularTexture));const a=i.specularColorFactor||[1,1,1];return n.specularColor=new Dt().setRGB(a[0],a[1],a[2],Tt),i.specularColorTexture!==void 0&&r.push(s.assignTexture(n,"specularColorMap",i.specularColorTexture,Ot)),Promise.all(r)}}class x0{constructor(t){this.parser=t,this.name=ne.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return n.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&r.push(s.assignTexture(n,"bumpMap",i.bumpTexture)),Promise.all(r)}}class L0{constructor(t){this.parser=t,this.name=ne.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:St}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const r=[],i=o.extensions[this.name];return i.anisotropyStrength!==void 0&&(n.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(n.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&r.push(s.assignTexture(n,"anisotropyMap",i.anisotropyTexture)),Promise.all(r)}}class A0{constructor(t){this.parser=t,this.name=ne.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,s=n.json,o=s.textures[t];if(!o.extensions||!o.extensions[this.name])return null;const r=o.extensions[this.name],i=n.options.ktx2Loader;if(!i){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,r.source,i)}}class I0{constructor(t){this.parser=t,this.name=ne.EXT_TEXTURE_WEBP}loadTexture(t){const n=this.name,s=this.parser,o=s.json,r=o.textures[t];if(!r.extensions||!r.extensions[n])return null;const i=r.extensions[n],a=o.images[i.source];let c=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(c=u)}return s.loadTextureImage(t,i.source,c)}}class E0{constructor(t){this.parser=t,this.name=ne.EXT_TEXTURE_AVIF}loadTexture(t){const n=this.name,s=this.parser,o=s.json,r=o.textures[t];if(!r.extensions||!r.extensions[n])return null;const i=r.extensions[n],a=o.images[i.source];let c=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(c=u)}return s.loadTextureImage(t,i.source,c)}}class R0{constructor(t){this.name=ne.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,s=n.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const o=s.extensions[this.name],r=this.parser.getDependency("buffer",o.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const c=o.byteOffset||0,u=o.byteLength||0,l=o.count,f=o.byteStride,p=new Uint8Array(a,c,u);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(l,f,p,o.mode,o.filter).then(function(d){return d.buffer}):i.ready.then(function(){const d=new ArrayBuffer(l*f);return i.decodeGltfBuffer(new Uint8Array(d),l,f,p,o.mode,o.filter),d})})}else return null}}class P0{constructor(t){this.name=ne.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,s=n.nodes[t];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const o=n.meshes[s.mesh];for(const u of o.primitives)if(u.mode!==Ye.TRIANGLES&&u.mode!==Ye.TRIANGLE_STRIP&&u.mode!==Ye.TRIANGLE_FAN&&u.mode!==void 0)return null;const i=s.extensions[this.name].attributes,a=[],c={};for(const u in i)a.push(this.parser.getDependency("accessor",i[u]).then(l=>(c[u]=l,c[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{const l=u.pop(),f=l.isGroup?l.children:[l],p=u[0].count,d=[];for(const $ of f){const b=new Bs,v=new st,C=new Ta,O=new st(1,1,1),P=new Hl($.geometry,$.material,p);for(let B=0;B<p;B++)c.TRANSLATION&&v.fromBufferAttribute(c.TRANSLATION,B),c.ROTATION&&C.fromBufferAttribute(c.ROTATION,B),c.SCALE&&O.fromBufferAttribute(c.SCALE,B),P.setMatrixAt(B,b.compose(v,C,O));for(const B in c)if(B==="_COLOR_0"){const L=c[B];P.instanceColor=new Ul(L.array,L.itemSize,L.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&$.geometry.setAttribute(B,c[B]);Ma.prototype.copy.call(P,$),this.parser.assignFinalMaterial(P),d.push(P)}return l.isGroup?(l.clear(),l.add(...d),l):d[0]}))}}const Nl="glTF",Kn=12,da={JSON:1313821514,BIN:5130562};class k0{constructor(t){this.name=ne.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,Kn),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Nl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-Kn,r=new DataView(t,Kn);let i=0;for(;i<o;){const a=r.getUint32(i,!0);i+=4;const c=r.getUint32(i,!0);if(i+=4,c===da.JSON){const u=new Uint8Array(t,Kn+i,a);this.content=s.decode(u)}else if(c===da.BIN){const u=Kn+i;this.body=t.slice(u,u+a)}i+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class O0{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ne.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const s=this.json,o=this.dracoLoader,r=t.extensions[this.name].bufferView,i=t.extensions[this.name].attributes,a={},c={},u={};for(const l in i){const f=wr[l]||l.toLowerCase();a[f]=i[l]}for(const l in t.attributes){const f=wr[l]||l.toLowerCase();if(i[l]!==void 0){const p=s.accessors[t.attributes[l]],d=Pn[p.componentType];u[f]=d.name,c[f]=p.normalized===!0}}return n.getDependency("bufferView",r).then(function(l){return new Promise(function(f,p){o.decodeDracoFile(l,function(d){for(const $ in d.attributes){const b=d.attributes[$],v=c[$];v!==void 0&&(b.normalized=v)}f(d)},a,u,Tt,p)})})}}class N0{constructor(){this.name=ne.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class D0{constructor(){this.name=ne.KHR_MESH_QUANTIZATION}}class Dl extends du{constructor(t,n,s,o){super(t,n,s,o)}copySampleValue_(t){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,r=t*o*3+o;for(let i=0;i!==o;i++)n[i]=s[r+i];return n}interpolate_(t,n,s,o){const r=this.resultBuffer,i=this.sampleValues,a=this.valueSize,c=a*2,u=a*3,l=o-n,f=(s-n)/l,p=f*f,d=p*f,$=t*u,b=$-u,v=-2*d+3*p,C=d-p,O=1-v,P=C-p+f;for(let B=0;B!==a;B++){const L=i[b+B+a],m=i[b+B+c]*l,j=i[$+B+a],S=i[$+B]*l;r[B]=O*L+P*m+v*j+C*S}return r}}const G0=new Ta;class F0 extends Dl{interpolate_(t,n,s,o){const r=super.interpolate_(t,n,s,o);return G0.fromArray(r).normalize().toArray(r),r}}const Ye={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Pn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ha={9728:Sa,9729:Yo,9984:zl,9985:Wl,9986:Kl,9987:Ca},_a={33071:Jl,33648:ql,10497:Zo},Ko={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Vt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H0={CUBICSPLINE:void 0,LINEAR:La,STEP:uu},Wo={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function U0(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new vr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:pu})),e.DefaultMaterial}function on(e,t,n){for(const s in n.extensions)e[s]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function mt(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j0(e,t,n){let s=!1,o=!1,r=!1;for(let u=0,l=t.length;u<l;u++){const f=t[u];if(f.POSITION!==void 0&&(s=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(r=!0),s&&o&&r)break}if(!s&&!o&&!r)return Promise.resolve(e);const i=[],a=[],c=[];for(let u=0,l=t.length;u<l;u++){const f=t[u];if(s){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):e.attributes.position;i.push(p)}if(o){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):e.attributes.normal;a.push(p)}if(r){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):e.attributes.color;c.push(p)}}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(c)]).then(function(u){const l=u[0],f=u[1],p=u[2];return s&&(e.morphAttributes.position=l),o&&(e.morphAttributes.normal=f),r&&(e.morphAttributes.color=p),e.morphTargetsRelative=!0,e})}function B0(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let s=0,o=n.length;s<o;s++)e.morphTargetDictionary[n[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function V0(e){let t;const n=e.extensions&&e.extensions[ne.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+zo(n.attributes):t=e.indices+":"+zo(e.attributes)+":"+e.mode,e.targets!==void 0)for(let s=0,o=e.targets.length;s<o;s++)t+=":"+zo(e.targets[s]);return t}function zo(e){let t="";const n=Object.keys(e).sort();for(let s=0,o=n.length;s<o;s++)t+=n[s]+":"+e[n[s]]+";";return t}function yr(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function K0(e){return e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0?"image/jpeg":e.search(/\.webp($|\?)/i)>0||e.search(/^data\:image\/webp/)===0?"image/webp":e.search(/\.ktx2($|\?)/i)>0||e.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const W0=new Bs;class z0{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new _0,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,o=-1,r=!1,i=-1;if(typeof navigator<"u"){const a=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(a)===!0;const c=a.match(/Version\/(\d+)/);o=s&&c?parseInt(c[1],10):-1,r=a.indexOf("Firefox")>-1,i=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&o<17||r&&i<98?this.textureLoader=new jl(this.options.manager):this.textureLoader=new Bl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Us(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const s=this,o=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(i){const a={scene:i[0][o.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:o.asset,parser:s,userData:{}};return on(r,a,o),mt(a,o),Promise.all(s._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();t(a)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],s=this.json.meshes||[];for(let o=0,r=n.length;o<r;o++){const i=n[o].joints;for(let a=0,c=i.length;a<c;a++)t[i[a]].isBone=!0}for(let o=0,r=t.length;o<r;o++){const i=t[o];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(s[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,s){if(t.refs[n]<=1)return s;const o=s.clone(),r=(i,a)=>{const c=this.associations.get(i);c!=null&&this.associations.set(a,c);for(const[u,l]of i.children.entries())r(l,a.children[u])};return r(s,o),o.name+="_instance_"+t.uses[n]++,o}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let s=0;s<n.length;s++){const o=t(n[s]);if(o)return o}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const s=[];for(let o=0;o<n.length;o++){const r=t(n[o]);r&&s.push(r)}return s}getDependency(t,n){const s=t+":"+n;let o=this.cache.get(s);if(!o){switch(t){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(r){return r.loadNode&&r.loadNode(n)});break;case"mesh":o=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,n)}),!o)throw new Error("Unknown type: "+t);break}this.cache.add(s,o)}return o}getDependencies(t){let n=this.cache.get(t);if(!n){const s=this,o=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(r,i){return s.getDependency(t,i)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],s=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[ne.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(r,i){s.load(qn.resolveURL(n.uri,o.path),r,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(s){const o=n.byteLength||0,r=n.byteOffset||0;return s.slice(r,r+o)})}loadAccessor(t){const n=this,s=this.json,o=this.json.accessors[t];if(o.bufferView===void 0&&o.sparse===void 0){const i=Ko[o.type],a=Pn[o.componentType],c=o.normalized===!0,u=new a(o.count*i);return Promise.resolve(new Jn(u,i,c))}const r=[];return o.bufferView!==void 0?r.push(this.getDependency("bufferView",o.bufferView)):r.push(null),o.sparse!==void 0&&(r.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(r).then(function(i){const a=i[0],c=Ko[o.type],u=Pn[o.componentType],l=u.BYTES_PER_ELEMENT,f=l*c,p=o.byteOffset||0,d=o.bufferView!==void 0?s.bufferViews[o.bufferView].byteStride:void 0,$=o.normalized===!0;let b,v;if(d&&d!==f){const C=Math.floor(p/d),O="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+C+":"+o.count;let P=n.cache.get(O);P||(b=new u(a,C*d,o.count*d/l),P=new Vl(b,d/l),n.cache.add(O,P)),v=new fu(P,c,p%d/l,$)}else a===null?b=new u(o.count*c):b=new u(a,p,o.count*c),v=new Jn(b,c,$);if(o.sparse!==void 0){const C=Ko.SCALAR,O=Pn[o.sparse.indices.componentType],P=o.sparse.indices.byteOffset||0,B=o.sparse.values.byteOffset||0,L=new O(i[1],P,o.sparse.count*C),m=new u(i[2],B,o.sparse.count*c);a!==null&&(v=new Jn(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let j=0,S=L.length;j<S;j++){const x=L[j];if(v.setX(x,m[j*c]),c>=2&&v.setY(x,m[j*c+1]),c>=3&&v.setZ(x,m[j*c+2]),c>=4&&v.setW(x,m[j*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=$}return v})}loadTexture(t){const n=this.json,s=this.options,r=n.textures[t].source,i=n.images[r];let a=this.textureLoader;if(i.uri){const c=s.manager.getHandler(i.uri);c!==null&&(a=c)}return this.loadTextureImage(t,r,a)}loadTextureImage(t,n,s){const o=this,r=this.json,i=r.textures[t],a=r.images[n],c=(a.uri||a.bufferView)+":"+i.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(n,s).then(function(l){l.flipY=!1,l.name=i.name||a.name||"",l.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(l.name=a.uri);const p=(r.samplers||{})[i.sampler]||{};return l.magFilter=ha[p.magFilter]||Yo,l.minFilter=ha[p.minFilter]||Ca,l.wrapS=_a[p.wrapS]||Zo,l.wrapT=_a[p.wrapT]||Zo,l.generateMipmaps=!l.isCompressedTexture&&l.minFilter!==Sa&&l.minFilter!==Yo,o.associations.set(l,{textures:t}),l}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(t,n){const s=this,o=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(f=>f.clone());const i=o.images[t],a=self.URL||self.webkitURL;let c=i.uri||"",u=!1;if(i.bufferView!==void 0)c=s.getDependency("bufferView",i.bufferView).then(function(f){u=!0;const p=new Blob([f],{type:i.mimeType});return c=a.createObjectURL(p),c});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(c).then(function(f){return new Promise(function(p,d){let $=p;n.isImageBitmapLoader===!0&&($=function(b){const v=new Qr(b);v.needsUpdate=!0,p(v)}),n.load(qn.resolveURL(f,r.path),$,void 0,d)})}).then(function(f){return u===!0&&a.revokeObjectURL(c),mt(f,i),f.userData.mimeType=i.mimeType||K0(i.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[t]=l,l}assignTexture(t,n,s,o){const r=this;return this.getDependency("texture",s.index).then(function(i){if(!i)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(i=i.clone(),i.channel=s.texCoord),r.extensions[ne.KHR_TEXTURE_TRANSFORM]){const a=s.extensions!==void 0?s.extensions[ne.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=r.associations.get(i);i=r.extensions[ne.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,c)}}return o!==void 0&&(i.colorSpace=o),t[n]=i,i})}assignFinalMaterial(t){const n=t.geometry;let s=t.material;const o=n.attributes.tangent===void 0,r=n.attributes.color!==void 0,i=n.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Xl,Co.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,c.sizeAttenuation=!1,this.cache.add(a,c)),s=c}else if(t.isLine){const a="LineBasicMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Yl,Co.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,this.cache.add(a,c)),s=c}if(o||r||i){let a="ClonedMaterial:"+s.uuid+":";o&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),i&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=s.clone(),r&&(c.vertexColors=!0),i&&(c.flatShading=!0),o&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(s))),s=c}t.material=s}getMaterialType(){return vr}loadMaterial(t){const n=this,s=this.json,o=this.extensions,r=s.materials[t];let i;const a={},c=r.extensions||{},u=[];if(c[ne.KHR_MATERIALS_UNLIT]){const f=o[ne.KHR_MATERIALS_UNLIT];i=f.getMaterialType(),u.push(f.extendParams(a,r,n))}else{const f=r.pbrMetallicRoughness||{};if(a.color=new Dt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Tt),a.opacity=p[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",f.baseColorTexture,Ot)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),i=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,a)})))}r.doubleSided===!0&&(a.side=Zl);const l=r.alphaMode||Wo.OPAQUE;if(l===Wo.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===Wo.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&i!==Sn&&(u.push(n.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new ya(1,1),r.normalTexture.scale!==void 0)){const f=r.normalTexture.scale;a.normalScale.set(f,f)}if(r.occlusionTexture!==void 0&&i!==Sn&&(u.push(n.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&i!==Sn){const f=r.emissiveFactor;a.emissive=new Dt().setRGB(f[0],f[1],f[2],Tt)}return r.emissiveTexture!==void 0&&i!==Sn&&u.push(n.assignTexture(a,"emissiveMap",r.emissiveTexture,Ot)),Promise.all(u).then(function(){const f=new i(a);return r.name&&(f.name=r.name),mt(f,r),n.associations.set(f,{materials:t}),r.extensions&&on(o,f,r),f})}createUniqueName(t){const n=Ql.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,s=this.extensions,o=this.primitiveCache;function r(a){return s[ne.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(c){return $a(c,a,n)})}const i=[];for(let a=0,c=t.length;a<c;a++){const u=t[a],l=V0(u),f=o[l];if(f)i.push(f.promise);else{let p;u.extensions&&u.extensions[ne.KHR_DRACO_MESH_COMPRESSION]?p=r(u):p=$a(new xa,u,n),o[l]={primitive:u,promise:p},i.push(p)}}return Promise.all(i)}loadMesh(t){const n=this,s=this.json,o=this.extensions,r=s.meshes[t],i=r.primitives,a=[];for(let c=0,u=i.length;c<u;c++){const l=i[c].material===void 0?U0(this.cache):this.getDependency("material",i[c].material);a.push(l)}return a.push(n.loadGeometries(i)),Promise.all(a).then(function(c){const u=c.slice(0,c.length-1),l=c[c.length-1],f=[];for(let d=0,$=l.length;d<$;d++){const b=l[d],v=i[d];let C;const O=u[d];if(v.mode===Ye.TRIANGLES||v.mode===Ye.TRIANGLE_STRIP||v.mode===Ye.TRIANGLE_FAN||v.mode===void 0)C=r.isSkinnedMesh===!0?new eu(b,O):new Tr(b,O),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),v.mode===Ye.TRIANGLE_STRIP?C.geometry=pa(C.geometry,ba):v.mode===Ye.TRIANGLE_FAN&&(C.geometry=pa(C.geometry,Xo));else if(v.mode===Ye.LINES)C=new tu(b,O);else if(v.mode===Ye.LINE_STRIP)C=new nu(b,O);else if(v.mode===Ye.LINE_LOOP)C=new su(b,O);else if(v.mode===Ye.POINTS)C=new ou(b,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(C.geometry.morphAttributes).length>0&&B0(C,r),C.name=n.createUniqueName(r.name||"mesh_"+t),mt(C,r),v.extensions&&on(o,C,v),n.assignFinalMaterial(C),f.push(C)}for(let d=0,$=f.length;d<$;d++)n.associations.set(f[d],{meshes:t,primitives:d});if(f.length===1)return r.extensions&&on(o,f[0],r),f[0];const p=new So;r.extensions&&on(o,p,r),n.associations.set(p,{meshes:t});for(let d=0,$=f.length;d<$;d++)p.add(f[d]);return p})}loadCamera(t){let n;const s=this.json.cameras[t],o=s[s.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?n=new Mr(ru.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):s.type==="orthographic"&&(n=new iu(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),s.name&&(n.name=this.createUniqueName(s.name)),mt(n,s),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],s=[];for(let o=0,r=n.joints.length;o<r;o++)s.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",n.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(o){const r=o.pop(),i=o,a=[],c=[];for(let u=0,l=i.length;u<l;u++){const f=i[u];if(f){a.push(f);const p=new Bs;r!==null&&p.fromArray(r.array,u*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new au(a,c)})}loadAnimation(t){const n=this.json,s=this,o=n.animations[t],r=o.name?o.name:"animation_"+t,i=[],a=[],c=[],u=[],l=[];for(let f=0,p=o.channels.length;f<p;f++){const d=o.channels[f],$=o.samplers[d.sampler],b=d.target,v=b.node,C=o.parameters!==void 0?o.parameters[$.input]:$.input,O=o.parameters!==void 0?o.parameters[$.output]:$.output;b.node!==void 0&&(i.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",C)),c.push(this.getDependency("accessor",O)),u.push($),l.push(b))}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(c),Promise.all(u),Promise.all(l)]).then(function(f){const p=f[0],d=f[1],$=f[2],b=f[3],v=f[4],C=[];for(let P=0,B=p.length;P<B;P++){const L=p[P],m=d[P],j=$[P],S=b[P],x=v[P];if(L===void 0)continue;L.updateMatrix&&L.updateMatrix();const q=s._createAnimationTracks(L,m,j,S,x);if(q)for(let z=0;z<q.length;z++)C.push(q[z])}const O=new cu(r,void 0,C);return mt(O,o),O})}createNodeMesh(t){const n=this.json,s=this,o=n.nodes[t];return o.mesh===void 0?null:s.getDependency("mesh",o.mesh).then(function(r){const i=s._getNodeRef(s.meshCache,o.mesh,r);return o.weights!==void 0&&i.traverse(function(a){if(a.isMesh)for(let c=0,u=o.weights.length;c<u;c++)a.morphTargetInfluences[c]=o.weights[c]}),i})}loadNode(t){const n=this.json,s=this,o=n.nodes[t],r=s._loadNodeShallow(t),i=[],a=o.children||[];for(let u=0,l=a.length;u<l;u++)i.push(s.getDependency("node",a[u]));const c=o.skin===void 0?Promise.resolve(null):s.getDependency("skin",o.skin);return Promise.all([r,Promise.all(i),c]).then(function(u){const l=u[0],f=u[1],p=u[2];p!==null&&l.traverse(function(d){d.isSkinnedMesh&&d.bind(p,W0)});for(let d=0,$=f.length;d<$;d++)l.add(f[d]);return l})}_loadNodeShallow(t){const n=this.json,s=this.extensions,o=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=n.nodes[t],i=r.name?o.createUniqueName(r.name):"",a=[],c=o._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return c&&a.push(c),r.camera!==void 0&&a.push(o.getDependency("camera",r.camera).then(function(u){return o._getNodeRef(o.cameraCache,r.camera,u)})),o._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let l;if(r.isBone===!0?l=new lu:u.length>1?l=new So:u.length===1?l=u[0]:l=new Ma,l!==u[0])for(let f=0,p=u.length;f<p;f++)l.add(u[f]);if(r.name&&(l.userData.name=r.name,l.name=i),mt(l,r),r.extensions&&on(s,l,r),r.matrix!==void 0){const f=new Bs;f.fromArray(r.matrix),l.applyMatrix4(f)}else r.translation!==void 0&&l.position.fromArray(r.translation),r.rotation!==void 0&&l.quaternion.fromArray(r.rotation),r.scale!==void 0&&l.scale.fromArray(r.scale);if(!o.associations.has(l))o.associations.set(l,{});else if(r.mesh!==void 0&&o.meshCache.refs[r.mesh]>1){const f=o.associations.get(l);o.associations.set(l,{...f})}return o.associations.get(l).nodes=t,l}),this.nodeCache[t]}loadScene(t){const n=this.extensions,s=this.json.scenes[t],o=this,r=new So;s.name&&(r.name=o.createUniqueName(s.name)),mt(r,s),s.extensions&&on(n,r,s);const i=s.nodes||[],a=[];for(let c=0,u=i.length;c<u;c++)a.push(o.getDependency("node",i[c]));return Promise.all(a).then(function(c){for(let l=0,f=c.length;l<f;l++)r.add(c[l]);const u=l=>{const f=new Map;for(const[p,d]of o.associations)(p instanceof Co||p instanceof Qr)&&f.set(p,d);return l.traverse(p=>{const d=o.associations.get(p);d!=null&&f.set(p,d)}),f};return o.associations=u(r),r})}_createAnimationTracks(t,n,s,o,r){const i=[],a=t.name?t.name:t.uuid,c=[];Vt[r.path]===Vt.weights?t.traverse(function(p){p.morphTargetInfluences&&c.push(p.name?p.name:p.uuid)}):c.push(a);let u;switch(Vt[r.path]){case Vt.weights:u=ti;break;case Vt.rotation:u=ni;break;case Vt.translation:case Vt.scale:u=ei;break;default:switch(s.itemSize){case 1:u=ti;break;case 2:case 3:default:u=ei;break}break}const l=o.interpolation!==void 0?H0[o.interpolation]:La,f=this._getArrayFromAccessor(s);for(let p=0,d=c.length;p<d;p++){const $=new u(c[p]+"."+Vt[r.path],n.array,f,l);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant($),i.push($)}return i}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const s=yr(n.constructor),o=new Float32Array(n.length);for(let r=0,i=n.length;r<i;r++)o[r]=n[r]*s;n=o}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){const o=this instanceof ni?F0:Dl;return new o(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function q0(e,t,n){const s=t.attributes,o=new Vs;if(s.POSITION!==void 0){const a=n.json.accessors[s.POSITION],c=a.min,u=a.max;if(c!==void 0&&u!==void 0){if(o.set(new st(c[0],c[1],c[2]),new st(u[0],u[1],u[2])),a.normalized){const l=yr(Pn[a.componentType]);o.min.multiplyScalar(l),o.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const a=new st,c=new st;for(let u=0,l=r.length;u<l;u++){const f=r[u];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],d=p.min,$=p.max;if(d!==void 0&&$!==void 0){if(c.setX(Math.max(Math.abs(d[0]),Math.abs($[0]))),c.setY(Math.max(Math.abs(d[1]),Math.abs($[1]))),c.setZ(Math.max(Math.abs(d[2]),Math.abs($[2]))),p.normalized){const b=yr(Pn[p.componentType]);c.multiplyScalar(b)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(a)}e.boundingBox=o;const i=new hu;o.getCenter(i.center),i.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=i}function $a(e,t,n){const s=t.attributes,o=[];function r(i,a){return n.getDependency("accessor",i).then(function(c){e.setAttribute(a,c)})}for(const i in s){const a=wr[i]||i.toLowerCase();a in e.attributes||o.push(r(s[i],a))}if(t.indices!==void 0&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(a){e.setIndex(a)});o.push(i)}return Qo.workingColorSpace!==Tt&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Qo.workingColorSpace}" not supported.`),mt(e,t),q0(e,t,n),Promise.all(o).then(function(){return t.targets!==void 0?j0(e,t.targets,n):e})}const qo=new WeakMap;class as extends wa{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,s,o){const r=new Us(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,i=>{this.parse(i,n,o)},s,o)}parse(t,n,s=()=>{}){this.decodeDracoFile(t,n,null,null,Ot,s).catch(s)}decodeDracoFile(t,n,s,o,r=Tt,i=()=>{}){const a={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:r};return this.decodeGeometry(t,a).then(n).catch(i)}decodeGeometry(t,n){const s=JSON.stringify(n);if(qo.has(t)){const c=qo.get(t);if(c.key===s)return c.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const r=this.workerNextTaskID++,i=t.byteLength,a=this._getWorker(r,i).then(c=>(o=c,new Promise((u,l)=>{o._callbacks[r]={resolve:u,reject:l},o.postMessage({type:"decode",id:r,taskConfig:n,buffer:t},[t])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{o&&r&&this._releaseTask(o,r)}),qo.set(t,{key:s,promise:a}),a}_createGeometry(t){const n=new xa;t.index&&n.setIndex(new Jn(t.index.array,1));for(let s=0;s<t.attributes.length;s++){const o=t.attributes[s],r=o.name,i=o.array,a=o.itemSize,c=new Jn(i,a);r==="color"&&(this._assignVertexColorSpace(c,o.vertexColorSpace),c.normalized=!(i instanceof Float32Array)),n.setAttribute(r,c)}return n}_assignVertexColorSpace(t,n){if(n!==Ot)return;const s=new Dt;for(let o=0,r=t.count;o<r;o++)s.fromBufferAttribute(t,o),Qo.colorSpaceToWorking(s,Ot),t.setXYZ(o,s.r,s.g,s.b)}_loadLibrary(t,n){const s=new Us(this.manager);return s.setPath(this.decoderPath),s.setResponseType(n),s.setWithCredentials(this.withCredentials),new Promise((o,r)=>{s.load(t,o,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(s=>{const o=s[0];t||(this.decoderConfig.wasmBinary=s[1]);const r=J0.toString(),i=["/* draco decoder */",o,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(r){const i=r.data;switch(i.type){case"decode":o._callbacks[i.id].resolve(i);break;case"error":o._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,r){return o._taskLoad>r._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[t]=n,s._taskLoad+=n,s})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function J0(){let e,t;onmessage=function(i){const a=i.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(l){e.onModuleLoaded=function(f){l({draco:f})},DracoDecoderModule(e)});break;case"decode":const c=a.buffer,u=a.taskConfig;t.then(l=>{const f=l.draco,p=new f.Decoder;try{const d=n(f,p,new Int8Array(c),u),$=d.attributes.map(b=>b.array.buffer);d.index&&$.push(d.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:d},$)}catch(d){console.error(d),self.postMessage({type:"error",id:a.id,error:d.message})}finally{f.destroy(p)}});break}};function n(i,a,c,u){const l=u.attributeIDs,f=u.attributeTypes;let p,d;const $=a.GetEncodedGeometryType(c);if($===i.TRIANGULAR_MESH)p=new i.Mesh,d=a.DecodeArrayToMesh(c,c.byteLength,p);else if($===i.POINT_CLOUD)p=new i.PointCloud,d=a.DecodeArrayToPointCloud(c,c.byteLength,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const b={index:null,attributes:[]};for(const v in l){const C=self[f[v]];let O,P;if(u.useUniqueIDs)P=l[v],O=a.GetAttributeByUniqueId(p,P);else{if(P=a.GetAttributeId(p,i[l[v]]),P===-1)continue;O=a.GetAttribute(p,P)}const B=o(i,a,p,v,C,O);v==="color"&&(B.vertexColorSpace=u.vertexColorSpace),b.attributes.push(B)}return $===i.TRIANGULAR_MESH&&(b.index=s(i,a,p)),i.destroy(p),b}function s(i,a,c){const l=c.num_faces()*3,f=l*4,p=i._malloc(f);a.GetTrianglesUInt32Array(c,f,p);const d=new Uint32Array(i.HEAPF32.buffer,p,l).slice();return i._free(p),{array:d,itemSize:1}}function o(i,a,c,u,l,f){const p=f.num_components(),$=c.num_points()*p,b=$*l.BYTES_PER_ELEMENT,v=r(i,l),C=i._malloc(b);a.GetAttributeDataArrayForAllPoints(c,f,v,b,C);const O=new l(i.HEAPF32.buffer,C,$).slice();return i._free(C),{name:u,array:O,itemSize:p}}function r(i,a){switch(a){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}const X0={__name:"PuppetModelView",props:{puppet:{type:Object,default:null}},setup(e,{expose:t}){t();const n=e,s=ee(null),o=ee(!1);let r=null,i=null,a=null,c=0,u=null,l=null,f=new _u,p=null,d=null,$=0,b=!1;window.__GLTF_MEMORY_CACHE__||(window.__GLTF_MEMORY_CACHE__=new Map,console.log("[PuppetModelView] Initialized global GLTF memory cache"));const v=window.__GLTF_MEMORY_CACHE__;function C(){if(b)return;const m=s.value;if(!m){console.warn("[PuppetModelView] Container not ready for Three.js initialization");return}console.log("[PuppetModelView] Initializing Three.js..."),i=new Ea,a=new Mr(45,1,.1,1e3),a.position.set(0,1,3),r=new Ra({antialias:!0,alpha:!0}),r.setPixelRatio(window.devicePixelRatio||1),r.outputColorSpace=Ot,d=new as,d.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),d.setCrossOrigin("anonymous"),console.log("[PuppetModelView] Draco loader initialized:",!!d),m.innerHTML="",m.appendChild(r.domElement);const j=new Pa(16777215,1.2),S=new js(16777215,1.5);S.position.set(3,5,2);const x=new js(16777215,.8);x.position.set(-2,3,4);const q=new va(16777215,1,10);q.position.set(0,2,3),i.add(j,S,x,q);const z=()=>{if(!m||!r)return;let y=m.clientWidth,H=m.clientHeight;if(!y||!H){const D=m.getBoundingClientRect();if(y=D.width||200,H=D.height||200,!D.width||!D.height){requestAnimationFrame(z);return}}r.setSize(y,H,!1),a.aspect=y/Math.max(1,H),a.updateProjectionMatrix()};z(),p=new ResizeObserver(z),p.observe(m),requestAnimationFrame(()=>{z(),requestAnimationFrame(()=>{z(),requestAnimationFrame(z)})});const w=()=>{if(!r||!i||!a)return;c=requestAnimationFrame(w);const y=f.getDelta();l&&l.update(y),u&&(u.rotation.y+=y*.6),r.render(i,a)};w(),b=!0,console.log("[PuppetModelView] Three.js initialized successfully, container size:",m.clientWidth,"x",m.clientHeight)}function O(){l&&(l.stopAllAction(),l=null),u&&(i.remove(u),u.traverse(m=>{m.isMesh&&(m.geometry&&m.geometry.dispose(),Array.isArray(m.material)?m.material.forEach(j=>{j.map&&j.map.dispose(),j&&j.dispose&&j.dispose()}):m.material&&(m.material.map&&m.material.map.dispose(),m.material.dispose&&m.material.dispose()))}),u=null)}function P(m){const j=new Vs().setFromObject(m),S=new st,x=new st;j.getSize(S),j.getCenter(x),m.position.sub(x);const q=0,z=0,w=0;m.position.add(new st(q,z,w)),m.scale.multiplyScalar(.6);const H=r==null?void 0:r.domElement,D=H?H.clientWidth||H.width:200,V=H?H.clientHeight||H.height:200,K=Math.max(1e-6,D/Math.max(1,V)),W=a.fov*(Math.PI/180),se=2*Math.atan(Math.tan(W/2)*K),Ge=1.2,Le=S.y/2/Math.tan(W/2),Ae=S.x/2/Math.tan(se/2),Ie=Ge*Math.max(Le,Ae,.1);a.position.set(0,0,Ie),a.lookAt(0,0,0)}async function B(m){var q,z;if(!m)return;console.log("[PuppetModelView] Loading puppet:",m.name),o.value=!0,C(),O();const j=++$,S=new is;S.setCrossOrigin("anonymous"),d||(console.log("[PuppetModelView] Creating Draco loader..."),d=new as,d.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),d.setCrossOrigin("anonymous")),S.setDRACOLoader(d),console.log("[PuppetModelView] Draco loader set:",!!d);let x=m.modelUrl||"";if(console.log("[PuppetModelView] Original modelUrl:",x),console.log("[PuppetModelView] Puppet image:",m.image),!x&&m.image&&/.webp($|\?)/i.test(m.image)&&(x=m.image.replace(/\.webp(\?.*)?$/i,".glb"),console.log("[PuppetModelView] Generated modelUrl from image:",x)),x&&!/^https?:\/\//i.test(x)&&!x.startsWith("/assets/")){const w=x;x=$e(x),console.log("[PuppetModelView] Converted URL:",w,"->",x)}if(console.log("[PuppetModelView] Model URL:",x),!x){console.log("[PuppetModelView] No model URL found");return}try{console.log("[PuppetModelView] Starting to load:",x),console.log("[PuppetModelView] Memory cache size:",v.size,"entries"),console.log("[PuppetModelView] Memory cache has this URL?",v.has(x));let w;if(v.has(x)){console.log("[PuppetModelView] Loading from memory cache (instant):",x);const y=v.get(x);w={scene:y.scene.clone(!0),scenes:y.scenes,animations:y.animations,cameras:y.cameras,asset:y.asset,parser:y.parser,userData:y.userData},console.log("[PuppetModelView] GLTF cloned from memory cache:",w)}else try{console.log("[PuppetModelView] Checking Cache Storage for:",x);const y=await mr(x);if(y){console.log("[PuppetModelView] Loading from Cache Storage:",x);const H=await y.arrayBuffer();w=await new Promise((D,V)=>{S.parse(H,"",D,V)}),console.log("[PuppetModelView] GLTF loaded from Cache Storage:",w),v.set(x,w),console.log("[PuppetModelView] GLTF saved to memory cache")}else throw new Error("No cached response available")}catch{console.log("[PuppetModelView] Cache miss, loading from network:",x),w=await S.loadAsync(x),console.log("[PuppetModelView] GLTF loaded from network:",w),v.set(x,w),console.log("[PuppetModelView] GLTF saved to memory cache")}if(j!==$){console.log("[PuppetModelView] Ignoring outdated load result for:",m.name),w&&w.scene&&w.scene.traverse(y=>{y.isMesh&&(y.geometry&&y.geometry.dispose(),Array.isArray(y.material)?y.material.forEach(H=>{H.map&&H.map.dispose(),H.dispose&&H.dispose()}):y.material&&(y.material.map&&y.material.map.dispose(),y.material.dispose&&y.material.dispose()))});return}if(console.log("[PuppetModelView] Applying model for:",m.name),!i){console.log("[PuppetModelView] Scene not ready, initializing..."),C();let y=0;for(;!i&&y<40;)await new Promise(H=>setTimeout(H,50)),y++;if(!i){console.error("[PuppetModelView] Scene initialization timeout");return}}if(u=w.scene||((q=w.scenes)==null?void 0:q[0]),!u){console.error("[PuppetModelView] No scene found in GLTF");return}i.add(u),w.animations&&w.animations.length&&(l=new si(u),l.clipAction(w.animations[0]).play()),P(u),console.log("[PuppetModelView] Model loaded successfully:",m.name,"Scene children:",i.children.length),o.value=!1}catch(w){if(console.error("[PuppetModelView] Load failed:",w),console.error("[PuppetModelView] Failed URL:",x),console.error("[PuppetModelView] Puppet data:",m),w.message.includes("DRACOLoader")){console.log("[PuppetModelView] Retrying without Draco decoder...");try{const y=new is;y.setCrossOrigin("anonymous");const H=await y.loadAsync(x);if(j===$&&(u=H.scene||((z=H.scenes)==null?void 0:z[0]),u)){i.add(u),H.animations&&H.animations.length&&(l=new si(u),l.clipAction(H.animations[0]).play()),P(u),console.log("[PuppetModelView] Model loaded successfully without Draco:",m.name);return}}catch(y){console.error("[PuppetModelView] Fallback load also failed:",y)}}if(j===$){const y=new Ia(1,1,1),H=new vr({color:8947967});u=new Tr(y,H),i.add(u),P(u)}o.value=!1}}ts(()=>n.puppet,async m=>{await Jt(),B(m)},{immediate:!1}),ze(()=>{console.log("[PuppetModelView] Component mounted"),Jt(()=>{s.value&&(C(),n.puppet&&setTimeout(()=>{B(n.puppet)},0))})}),$n(()=>{console.log("[PuppetModelView] Cleaning up..."),cancelAnimationFrame(c),O(),i&&i.traverse(m=>{m.isMesh&&(m.geometry&&m.geometry.dispose(),Array.isArray(m.material)?m.material.forEach(j=>{j.map&&j.map.dispose(),j.dispose&&j.dispose()}):m.material&&(m.material.map&&m.material.map.dispose(),m.material.dispose&&m.material.dispose()))}),r&&(r.dispose(),r.forceContextLoss&&r.forceContextLoss()),p&&s.value&&p.unobserve(s.value),r=null,i=null,a=null,b=!1,$=0,console.log("[PuppetModelView] Cleanup completed")});const L={props:n,mountEl:s,isLoading:o,get renderer(){return r},set renderer(m){r=m},get scene(){return i},set scene(m){i=m},get camera(){return a},set camera(m){a=m},get animationId(){return c},set animationId(m){c=m},get currentModel(){return u},set currentModel(m){u=m},get currentMixer(){return l},set currentMixer(m){l=m},get clock(){return f},set clock(m){f=m},get resizeObserver(){return p},set resizeObserver(m){p=m},get dracoLoader(){return d},set dracoLoader(m){d=m},get loadSequence(){return $},set loadSequence(m){$=m},get isInitialized(){return b},set isInitialized(m){b=m},gltfMemoryCache:v,initThreeIfNeeded:C,clearCurrentModel:O,fitCameraToObject:P,loadPuppetModel:B,ref:ee,watch:ts,onMounted:ze,onBeforeUnmount:$n,nextTick:Jt,get THREE(){return Aa},get GLTFLoader(){return is},get DRACOLoader(){return as},get getAssetUrl(){return $e},get loadResourceWithCache(){return mr}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},Y0={class:"model-wrapper"},Z0={ref:"mountEl",class:"model-canvas"},Q0={key:0,class:"model-loading"};function eb(e,t,n,s,o,r){return ie(),ce("div",Y0,[T("div",Z0,null,512),s.isLoading?(ie(),ce("div",Q0,[...t[0]||(t[0]=[T("div",{class:"loading-spinner"},null,-1)])])):vt("",!0)])}const tb=gn(X0,[["render",eb],["__scopeId","data-v-c3e07470"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/PuppetModelView.vue"]]),nb={__name:"Warehouse",setup(e,{expose:t}){const n=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],s={SpiritalSpark:{name:"灵性火花",icon:$e("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:$e("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:$e("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:$e("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:$e("resource/heart_crystal_dust.webp")}};function o(w){return n.map(y=>({icon:s[y].icon,name:s[y].name,value:Number((w==null?void 0:w[y])??0)}))}const r={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};function i(w){const y=Number(w??1);return y===1?5:y===2?10:y===3?20:y===4?30:0}function a(w){return(w||[]).map((y,H)=>{var Je,tt,ft,Ke,bn,h;const D=(y==null?void 0:y.copper_info)||{},V=(D==null?void 0:D.skill)||{},K=(y==null?void 0:y.equipment_slot)||{},W=(K==null?void 0:K.slot1)||null,se=(K==null?void 0:K.slot2)||null,Ge=(y==null?void 0:y.attribute)||{},Le=((Je=W==null?void 0:W.equipment_base)==null?void 0:Je.attribute)||{},Ae=((tt=se==null?void 0:se.equipment_base)==null?void 0:tt.attribute)||{},Ie=Number(Le.attack||0)+Number(Ae.attack||0),ut=Number(Le.defense||0)+Number(Ae.defense||0),Ht=Number(Le.dodge||0)+Number(Ae.dodge||0),Ut=y==null?void 0:y.copper_type,Fe=(y==null?void 0:y.level)??1;return{id:Number((y==null?void 0:y.id)??H+1),name:(D==null?void 0:D.name)??"未知铜偶",level:Fe,suffix:(y==null?void 0:y.suffix)??0,image:$e((D==null?void 0:D.icon_url)||""),modelUrl:$e((D==null?void 0:D.model_url)||""),quantity:1,description:(D==null?void 0:D.description)||"",stats:{level:`${Fe}/5`,health:Number(Ge.health||0),live_left:Number((y==null?void 0:y.live_left)??0),attack:{base:Number(Ge.attack||0),bonus:Ie},defense:{base:Number(Ge.defense||0),bonus:ut},dodge:{base:Number(Ge.dodge||0),bonus:Ht},class:r[Ut]||"未知"},equipment:[W?{name:((ft=W.equipment_base)==null?void 0:ft.name)||"装备",icon:$e(((Ke=W.equipment_base)==null?void 0:Ke.resource_url)||""),equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},K!=null&&K.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:se?{name:((bn=se.equipment_base)==null?void 0:bn.name)||"装备",icon:$e(((h=se.equipment_base)==null?void 0:h.resource_url)||""),equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(V==null?void 0:V.name)||"——",cooldown:(V==null?void 0:V.cool_down)!=null?`${V.cool_down}回合`:"——",effect:(V==null?void 0:V.description)||"——",icon:$e((V==null?void 0:V.resource_url)||"")},upgradeCost:i(Fe)}})}function c(w,y,H=[]){if(!w||typeof w!="object")return null;if(Object.prototype.hasOwnProperty.call(w,y))return[...H,y];if(Array.isArray(w)){for(let D=0;D<w.length;D++){const V=c(w[D],y,[...H,D]);if(V)return V}return null}for(const D of Object.keys(w)){const V=c(w[D],y,[...H,D]);if(V)return V}return null}function u(w,y){return y.reduce((H,D)=>H!=null?H[D]:void 0,w)}const l=ee([]);ze(async()=>{try{const w=xn();l.value=o(w)}catch{l.value=o({})}});function f(w){let y=w;if(typeof w=="string")try{y=JSON.parse(w)}catch{}y&&y.type_msg&&(y.type_msg==="upgrade_cost_error"?alert(y.content||"升级等级错误"):console.log("[GlobalInfo]",y))}ze(()=>{try{fa(f)}catch{}});const p=ee([]);ze(()=>{try{const w=Rs();let y=w&&Array.isArray(w.coppers)?w.coppers:[];if(!Array.isArray(y)){const H=c(w,"coppers");if(console.log("[Warehouse] copper key path:",H),H){const D=u(w,H);console.log("[Warehouse] copper found by path:",D),Array.isArray(D)&&(y=D)}!Array.isArray(y)&&w&&w.entries&&console.log("[Warehouse] copper entries sample:",w.entries)}console.log("[Warehouse] copper array length:",Array.isArray(y)?y.length:"not array"),p.value=a(y),Array.isArray(p.value)&&p.value.length>0&&(d.value=p.value[0]),!d.value&&Array.isArray(p.value)&&p.value.length>0&&(d.value=p.value[0])}catch{p.value=[]}});const d=ee(null),$=ee([]),b=ee(null),v=ee(null),C=ee(null);function O(w,y){w&&($.value[y]=w)}async function P(w,y){d.value=w,await Jt();const H=$.value[y];if(H&&typeof H.scrollIntoView=="function"&&H.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),b.value=y,v.value)try{v.value.scrollTo({top:0,behavior:"smooth"})}catch{v.value.scrollTop=0}setTimeout(()=>{b.value===y&&(b.value=null)},320)}const B=ee(!1);function L(){B.value=!0}function m(){B.value=!1}function j(){const w=Math.max(0,l.value.length-1),y=l.value;if(!y[w]||y[w].value<10){alert("资源不足");return}y[w].value-=10;const H=p.value,D=Math.floor(Math.random()*H.length),V=H[D];V.quantity=(V.quantity||0)+1,d.value=V,drawResult.value={name:V.name,image:V.image}}function S(){return B.value?(B.value=!1,!0):!1}t({handleBack:S});async function x(w){try{const y=xn();l.value=o(y);const H=Rs(),D=Array.isArray(H==null?void 0:H.coppers)?H.coppers:[];p.value=a(D)}catch{}}async function q(){if(!d.value)return;if(Number(d.value.level||0)>=5){alert("已达满级");return}const w=d.value.id,y=ua(w);if(!y||y.type!=="success"){alert(y&&y.content?y.content:"升级失败");return}try{const H=xn();l.value=o(H);const D=Rs(),V=Array.isArray(D==null?void 0:D.coppers)?D.coppers:[];p.value=a(V);const K=p.value.find(W=>W.id===w);K&&(d.value=K)}catch{}}const z={ORDERED_RESOURCE_KEYS:n,RESOURCE_META:s,mapResources:o,TYPE_MAP:r,getUpgradeCostByLevel:i,mapPuppets:a,findKeyPath:c,getByPath:u,resources:l,handleGlobalInfo:f,puppets:p,selectedPuppet:d,puppetItemRefs:$,highlightedIndex:b,detailWrap:v,hoveredIndex:C,setPuppetItemRef:O,selectPuppet:P,showDrawScreen:B,drawMore:L,closeDrawScreen:m,drawTen:j,handleBack:S,onGachaResult:x,upgradeSelected:q,ref:ee,onMounted:ze,nextTick:Jt,get getAssetUrl(){return $e},DrawScreen:h0,PuppetModelView:tb,get get_resource(){return xn},get get_copper_list(){return Rs},get upgrade_copper(){return ua},get info_subscribe(){return fa}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},sb={class:"warehouse"},ob={class:"warehouse__resources"},rb={class:"resource-icon"},ib=["src","alt"],ab={class:"resource-value"},cb={key:0,class:"warehouse__main"},lb={class:"warehouse__sidebar"},ub={class:"puppet-list"},fb=["onClick","onMouseenter"],pb={class:"puppet-card__quantity"},db={class:"puppet-card__image"},hb=["src","alt"],_b={class:"puppet-card__info"},$b={class:"puppet-card__name"},mb={class:"puppet-card__level"},gb={class:"warehouse__detail",ref:"detailWrap"},bb={class:"puppet-detail__header"},wb={class:"puppet-detail__name"},yb={class:"puppet-detail__content"},vb={class:"puppet-detail__row"},Tb={class:"puppet-detail__model"},Mb={class:"puppet-detail__description"},Cb={class:"puppet-detail__row"},Sb={class:"puppet-detail__stats"},xb={class:"stats-section"},Lb={class:"stat-item"},Ab={class:"stat-value"},Ib={class:"stat-item"},Eb={class:"stat-value"},Rb={class:"stat-item"},Pb={class:"stat-value"},kb={class:"stat-item"},Ob={class:"stat-value"},Nb={class:"stat-item"},Db={class:"stat-value"},Gb={class:"stat-item"},Fb={class:"stat-value"},Hb={class:"stat-item"},Ub={class:"stat-value"},jb={class:"equipment-section"},Bb={class:"equipment-slots"},Vb=["src","alt"],Kb={key:1,class:"equipment-icon"},Wb={key:0,class:"skill-section"},zb={class:"skill-info"},qb={class:"skill-text"},Jb={class:"skill-name"},Xb={class:"skill-cooldown"},Yb={class:"skill-effect"},Zb={class:"skill-icon"},Qb=["src","alt"],e1={key:1},t1={class:"puppet-detail__upgrade"},n1={class:"upgrade-cost"},s1={class:"cost-amount"},o1=["disabled"],r1={class:"warehouse__placeholder",key:"placeholder"};function i1(e,t,n,s,o,r){return ie(),ce("div",sb,[T("div",ob,[(ie(!0),ce(Be,null,ko(s.resources,i=>(ie(),ce("div",{class:"resource-item",key:i.name},[T("div",rb,[T("img",{src:i.icon,alt:i.name},null,8,ib)]),T("div",ab,_e(i.value),1)]))),128))]),s.showDrawScreen?vt("",!0):(ie(),ce("div",cb,[T("div",lb,[t[2]||(t[2]=T("div",{class:"warehouse__title"},"铜偶仓库",-1)),T("div",ub,[(ie(!0),ce(Be,null,ko(s.puppets,(i,a)=>{var c;return ie(),ce("div",{class:Zt(["puppet-card",{"puppet-card--selected":((c=s.selectedPuppet)==null?void 0:c.id)===i.id,"puppet-card--pulse":s.highlightedIndex===a,"puppet-card--hover":s.hoveredIndex===a}]),key:i.id,ref_for:!0,ref:u=>s.setPuppetItemRef(u,a),onClick:u=>s.selectPuppet(i,a),onMouseenter:u=>s.hoveredIndex=a,onMouseleave:t[0]||(t[0]=u=>s.hoveredIndex=null)},[T("div",pb,_e(i.level),1),T("div",db,[T("img",{src:i.image,alt:i.name},null,8,hb)]),T("div",_b,[T("div",$b,_e(i.name)+_e(i.suffix),1),T("div",mb,_e(i.level)+"级",1)])],42,fb)}),128)),T("div",{class:"puppet-card puppet-card--add",onClick:s.drawMore},[...t[1]||(t[1]=[T("div",{class:"puppet-card__add-icon"},"+",-1),T("div",{class:"puppet-card__add-text"},"抽取更多",-1)])])])]),T("div",gb,[ye(rd,{name:"fade-slide",mode:"out-in"},{default:_c(()=>{var i,a,c,u;return[s.selectedPuppet?(ie(),ce("div",{class:"puppet-detail",key:((i=s.selectedPuppet)==null?void 0:i.id)||"none"},[T("div",bb,[T("h2",wb,_e(s.selectedPuppet.name),1)]),T("div",yb,[T("div",vb,[T("div",Tb,[ye(s.PuppetModelView,{puppet:s.selectedPuppet},null,8,["puppet"])]),T("div",Mb,_e(s.selectedPuppet.description),1)]),T("div",Cb,[T("div",Sb,[T("div",xb,[T("div",Lb,[t[3]||(t[3]=T("span",{class:"stat-label"},"生命:",-1)),T("span",Ab,_e(s.selectedPuppet.stats.health),1)]),T("div",Ib,[t[4]||(t[4]=T("span",{class:"stat-label"},"等级:",-1)),T("span",Eb,_e(s.selectedPuppet.stats.level),1)]),T("div",Rb,[t[5]||(t[5]=T("span",{class:"stat-label"},"剩余上场次数:",-1)),T("span",Pb,_e(s.selectedPuppet.stats.live_left),1)]),T("div",kb,[t[6]||(t[6]=T("span",{class:"stat-label"},"攻击力:",-1)),T("span",Ob,_e(s.selectedPuppet.stats.attack.base),1)]),T("div",Nb,[t[7]||(t[7]=T("span",{class:"stat-label"},"防御力:",-1)),T("span",Db,_e(s.selectedPuppet.stats.defense.base),1)]),T("div",Gb,[t[8]||(t[8]=T("span",{class:"stat-label"},"闪避:",-1)),T("span",Fb,_e(s.selectedPuppet.stats.dodge.base)+"% ",1)]),T("div",Hb,[t[9]||(t[9]=T("span",{class:"stat-label"},"职业:",-1)),T("span",Ub,_e(s.selectedPuppet.stats.class),1)])])]),T("div",jb,[t[10]||(t[10]=T("h4",{class:"section-title"},"装备",-1)),T("div",Bb,[(ie(!0),ce(Be,null,ko(s.selectedPuppet.equipment,(l,f)=>(ie(),ce("div",{key:f,class:Zt(["equipment-slot",{"equipment-slot--empty":!l.equipped&&!l.locked,"equipment-slot--locked":l.locked}])},[l.equipped&&l.icon&&(l.icon.startsWith("/")||l.icon.startsWith("http"))?(ie(),ce("img",{key:0,src:l.icon,alt:l.name,class:"equipment-icon"},null,8,Vb)):(ie(),ce("span",Kb,_e(l.locked?"🔒":l.icon),1))],2))),128))])])]),((c=(a=s.selectedPuppet)==null?void 0:a.stats)==null?void 0:c.class)!=="工匠"?(ie(),ce("div",Wb,[t[11]||(t[11]=T("h4",{class:"section-title"},"技能",-1)),T("div",zb,[T("div",qb,[T("div",Jb,_e(s.selectedPuppet.skill.name),1),T("div",Xb,"冷却: "+_e(s.selectedPuppet.skill.cooldown),1),T("div",Yb,_e(s.selectedPuppet.skill.effect),1)]),T("div",Zb,[s.selectedPuppet.skill.icon&&(s.selectedPuppet.skill.icon.startsWith("/")||s.selectedPuppet.skill.icon.startsWith("http"))?(ie(),ce("img",{key:0,src:s.selectedPuppet.skill.icon,alt:s.selectedPuppet.skill.name,class:"skill-icon-img"},null,8,Qb)):(ie(),ce("span",e1,_e(s.selectedPuppet.skill.icon),1))])])])):vt("",!0)]),T("div",t1,[T("div",n1,[T("span",s1,_e(s.selectedPuppet.level>=5?"已满级":"X "+s.selectedPuppet.upgradeCost),1)]),T("button",{class:"upgrade-btn",onClick:s.upgradeSelected,disabled:((u=s.selectedPuppet)==null?void 0:u.level)>=5},[...t[12]||(t[12]=[T("span",{class:"upgrade-icon"},"⏫",-1)])],8,o1)])])):(ie(),ce("div",r1,[...t[13]||(t[13]=[T("p",null,"请选择英雄以浏览",-1)])]))]}),_:1})],512)])),s.showDrawScreen?(ie(),Ur(s.DrawScreen,{key:1,onDraw:s.onGachaResult})):vt("",!0)])}const a1=gn(nb,[["render",i1],["__scopeId","data-v-58eda787"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/Warehouse.vue"]]),c1={__name:"TopLeftPanel",emits:["back","open-settings"],setup(e,{expose:t,emit:n}){t();const o={emit:n};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},l1={class:"panel",style:{left:"24px",right:"auto"}};function u1(e,t,n,s,o,r){return ie(),ce("div",l1,[T("button",{class:"btn",onClick:t[0]||(t[0]=i=>e.$emit("back")),title:"返回"},[...t[2]||(t[2]=[T("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M15 18L9 12L15 6",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),T("span",{class:"sr-only"},"返回",-1)])]),T("button",{class:"btn",onClick:t[1]||(t[1]=i=>e.$emit("open-settings")),title:"设置"},[...t[3]||(t[3]=[T("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M12 15.5C13.933 15.5 15.5 13.933 15.5 12C15.5 10.067 13.933 8.5 12 8.5C10.067 8.5 8.5 10.067 8.5 12C8.5 13.933 10.067 15.5 12 15.5Z",stroke:"#ffffff","stroke-width":"2"}),T("path",{d:"M19.4 15A7.964 7.964 0 0 0 20 12C20 11.49 19.95 10.99 19.86 10.5L22 8.5L20 5.5L17.34 6.07C16.78 5.58 16.14 5.18 15.44 4.9L15 2H9L8.56 4.9C7.86 5.18 7.22 5.58 6.66 6.07L4 5.5L2 8.5L4.14 10.5C4.05 10.99 4 11.49 4 12C4 12.51 4.05 13.01 4.14 13.5L2 15.5L4 18.5L6.66 17.93C7.22 18.42 7.86 18.82 8.56 19.1L9 22H15L15.44 19.1C16.14 18.82 16.78 18.42 17.34 17.93L20 18.5L22 15.5L19.86 13.5C19.95 13.01 20 12.51 20 12",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),T("span",{class:"sr-only"},"设置",-1)])])])}const f1=gn(c1,[["render",u1],["__scopeId","data-v-fb6ccffd"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/TopLeftPanel.vue"]]),p1={__name:"StartMenu",emits:["started"],setup(e,{expose:t,emit:n}){t();const s=ee(null),o=ee(null);let r=null,i=null,a=null,c=null,u=null,l=1.2;const f=ee(!1),p=ee(!1),d=n;function $(){if(c=requestAnimationFrame($),u){const S=Date.now()*.001;u.position.y=Math.sin(S*.8)*.1,u.rotation.y=Math.sin(S*.6)*.1;const x=l+Math.sin(S*1.2)*.04;u.scale.setScalar(x)}a&&a.render(r,i)}function b(){!a||!i||(i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight))}function v(){c&&(cancelAnimationFrame(c),c=null)}function C(){c||(c=requestAnimationFrame($))}function O(){try{v()}catch{}try{window.removeEventListener("resize",b)}catch{}try{r&&(r.traverse(S=>{if(S.isMesh){S.geometry&&S.geometry.dispose&&S.geometry.dispose();const x=S.material;Array.isArray(x)?x.forEach(q=>q&&q.dispose&&q.dispose()):x&&x.dispose&&x.dispose()}}),r.clear())}catch{}try{if(a){a.clear(!0,!0,!0),a.dispose();const S=a.getContext&&a.getContext(),x=S&&S.getExtension&&S.getExtension("WEBGL_lose_context");x&&x.loseContext&&x.loseContext()}}catch{}r=null,i=null,a=null,u=null}async function P(S=null){try{window.getAssetUrl=$e,window.precacheAllResources=io,window.getCacheStatus=zi}catch{}S&&S(0,100,10),await new Promise(D=>setTimeout(D,30)),r=new Ea,r.background=new Dt("#a0a0a0"),i=new Mr(50,1.333,.1,1e3),i.position.set(-3.655,.2,-.006),i.rotation.set(-1.618275,-1.538307,-1.6183,"XYZ"),S&&S(0,100,20),await new Promise(D=>setTimeout(D,30)),a=new Ra({antialias:!0,canvas:s.value}),a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(window.devicePixelRatio),S&&S(0,100,30),await new Promise(D=>setTimeout(D,30));const x=new Pa(4210752,.4);r.add(x);const q=new js(16777215,12.5);q.position.set(-5,-2,1),r.add(q),S&&S(0,100,40),await new Promise(D=>setTimeout(D,50));const z=new as;z.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/");const w=new is;w.setDRACOLoader(z),S&&S(0,100,50),await new Promise(D=>setTimeout(D,30));const y=window.getAssetUrl?window.getAssetUrl("logo.glb"):"./assets/logo.glb",H=()=>new Promise((D,V)=>{w.load(y,K=>D(K),void 0,K=>V(K))});try{if(S&&S(0,100,60),!(await fetch(y,{method:"HEAD",mode:"cors",credentials:"omit"})).ok)throw new Error("logo not ok");S&&S(0,100,70);const V=await H();S&&S(0,100,80),V.scene.position.set(0,0,0),r.add(V.scene);const W=new Vs().setFromObject(V.scene).getCenter(new st);V.scene.position.set(-W.x,-W.y,-W.z);try{V.scene.scale.setScalar(l)}catch{}u=V.scene,S&&S(0,100,90),await new Promise(se=>setTimeout(se,50)),f.value=!0,S&&S(0,100,100)}catch{try{S&&S(0,100,60);const V=await H();S&&S(0,100,80),V.scene.position.set(0,0,0),r.add(V.scene);const W=new Vs().setFromObject(V.scene).getCenter(new st);V.scene.position.set(-W.x,-W.y,-W.z);try{V.scene.scale.setScalar(l)}catch{}u=V.scene,S&&S(0,100,90),await new Promise(se=>setTimeout(se,50)),f.value=!0,S&&S(0,100,100)}catch{console.warn("3D模型加载失败，使用占位符");const K=new Ia(1,1,1),W=new Sn({color:16096779}),se=new Tr(K,W);r.add(se),u=se,S&&S(0,100,100),f.value=!0}}window.addEventListener("resize",b),$(),window.__START_MENU_PAUSE__=()=>v(),window.__START_MENU_RESUME__=()=>C()}function B(){d("started"),v()}function L(){p.value=!0}function m(){p.value=!1}ze(()=>{console.log("StartMenu组件已挂载，等待资源加载..."),window.__INIT_THREE_SCENE__=async S=>{console.log("开始初始化3D场景..."),await P(S),console.log("3D场景初始化完成")}}),$n(()=>{O()});const j={canvasRef:s,uiRootRef:o,get scene(){return r},set scene(S){r=S},get camera(){return i},set camera(S){i=S},get renderer(){return a},set renderer(S){a=S},get animationId(){return c},set animationId(S){c=S},get logoObject(){return u},set logoObject(S){u=S},get baseScale(){return l},set baseScale(S){l=S},isReady:f,showSettings:p,emit:d,renderLoop:$,handleResize:b,pause:v,resume:C,destroyScene:O,initScene:P,onStart:B,onOpenSettings:L,onCloseSettings:m,onMounted:ze,onBeforeUnmount:$n,ref:ee,get THREE(){return Aa},get GLTFLoader(){return is},get DRACOLoader(){return as},get getAssetUrl(){return $e},get precacheAllResources(){return io},get getCacheStatus(){return zi}};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},d1={class:"startmenu"},h1={ref:"canvasRef",class:"startmenu__canvas"},_1={ref:"uiRootRef",class:"startmenu-ui"},$1={key:0,class:"settings-local"};function m1(e,t,n,s,o,r){return ie(),ce("div",d1,[T("canvas",h1,null,512),mc(T("div",_1,[T("button",{id:"start-btn",class:"startmenu-btn","aria-label":"开始",onClick:s.onStart},"开始"),T("button",{id:"settings-btn",class:"startmenu-btn","aria-label":"设置",onClick:s.onOpenSettings},"设置")],512),[[tl,s.isReady]]),s.showSettings?(ie(),ce("div",$1,[T("div",{class:"settings-local__card"},[T("div",{class:"settings-local__header"},[t[0]||(t[0]=T("div",{class:"settings-local__title"},"设置",-1)),T("button",{class:"settings-local__close",onClick:s.onCloseSettings,"aria-label":"关闭"},"✕")]),t[1]||(t[1]=T("div",{class:"settings-local__content"},[T("div",{class:"settings-local__row"},"此处放置开始界面相关设置（占位）。")],-1))])])):vt("",!0)])}const g1=gn(p1,[["render",m1],["__scopeId","data-v-00070bd8"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/StartMenu.vue"]]),b1={__name:"App",setup(e,{expose:t}){t();const n=ee(!1),s=ee(null),o=ee(!1),r=ee(null),i=ee([]),a=ee(0),c=ee(!0);function u(){const m=!n.value;n.value=m,m?window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__():window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__()}function l(m){s.value!==m&&(i.value.push(s.value),s.value=m),window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__(),n.value=!0}function f(){s.value=null,i.value=[],window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1}function p(){o.value=!0,n.value=!0}function d(){o.value=!1,s.value||(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1)}function $(){if(o.value){d();return}if(s.value){if(s.value==="warehouse"&&r.value&&r.value.handleBack&&r.value.handleBack())return;const m=i.value.pop()??null;s.value=m,m||(c.value?(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1):(c.value=!0,n.value=!1));return}if(!c.value){c.value=!0,window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1;return}}const b=ee(!0),v=ee(null);function C(){b.value=!b.value}function O(){try{const m={version:1,savedAt:Date.now(),payload:{}},j=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),S=document.createElement("a");S.href=URL.createObjectURL(j),S.download="save.json",S.click(),URL.revokeObjectURL(S.href)}catch{}}function P(){try{v.value&&v.value.click()}catch{}}function B(m){try{const j=m.target&&m.target.files&&m.target.files[0];if(!j)return;const S=new FileReader;S.onload=()=>{try{JSON.parse(String(S.result||"{}"))}catch{}m.target.value=""},S.readAsText(j)}catch{}}const L={isPaused:n,overlay:s,showSettingsOverlay:o,warehouseRef:r,overlayHistory:i,currentPuppetIndex:a,showStartMenu:c,togglePause:u,openOverlay:l,closeOverlay:f,openSettings:p,closeSettings:d,goBack:$,musicOn:b,fileInput:v,onToggleMusic:C,onDownloadSave:O,onUploadSave:P,onFileChange:B,ref:ee,onMounted:ze,onBeforeUnmount:$n,Hall:Ud,Warehouse:a1,TopLeftPanel:f1,StartMenu:g1};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},w1={class:"stage"},y1={key:0,style:{position:"relative",width:"100%",height:"100%"}},v1={key:1,class:"modal"},T1={class:"modal-title"},M1={key:2,class:"overlay",style:{"z-index":"30000","align-items":"flex-start","justify-content":"flex-start",background:"rgba(0,0,0,0.25)"}},C1={class:"settings"},S1={class:"settings__content"},x1={class:"settings__state"};function L1(e,t,n,s,o,r){return ie(),ce("div",w1,[mc(ye(s.StartMenu,{onStarted:t[0]||(t[0]=i=>s.showStartMenu=!1)},null,512),[[tl,s.showStartMenu]]),s.showStartMenu?vt("",!0):(ie(),Ur(s.TopLeftPanel,{key:0,onBack:s.goBack,onOpenSettings:s.openSettings})),ye(s.Hall,{onStartGame:t[1]||(t[1]=i=>s.openOverlay("start")),onOpenWarehouse:t[2]||(t[2]=i=>s.openOverlay("warehouse")),onOpenTutorial:t[3]||(t[3]=i=>s.openOverlay("tutorial")),onOpenEncyclopedia:t[4]||(t[4]=i=>s.openOverlay("encyclopedia"))}),s.overlay?(ie(),ce("div",{key:1,class:Zt(["overlay",{"overlay--warehouse":s.overlay==="warehouse"}])},[s.overlay==="warehouse"?(ie(),ce("div",y1,[ye(s.TopLeftPanel,{onBack:s.goBack,onOpenSettings:s.openSettings}),ye(s.Warehouse,{ref:"warehouseRef"},null,512)])):(ie(),ce("div",v1,[T("h2",T1,_e(s.overlay==="warehouse"?"铜偶仓库 · Copper Warehouse":s.overlay==="tutorial"?"新手教程 · Tutorial":s.overlay==="encyclopedia"?"游戏百科 · Game Encyclopedia":"开始游戏 · Start Game"),1),t[5]||(t[5]=T("p",{class:"modal-body"},"占位内容（后续替换为实际功能界面）。",-1)),T("button",{class:"close-btn",onClick:s.closeOverlay},"关闭")]))],2)):vt("",!0),s.showSettingsOverlay?(ie(),ce("div",M1,[T("div",C1,[T("div",{class:"settings__header"},[t[7]||(t[7]=T("div",{class:"settings__title"},"设置",-1)),T("button",{class:"settings__close",onClick:s.closeSettings,"aria-label":"关闭"},[...t[6]||(t[6]=[T("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M18 6L6 18M6 6l12 12",stroke:"#fff","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),T("div",S1,[T("button",{class:"settings__item",onClick:s.onToggleMusic},[t[8]||(t[8]=Do('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M9 18V5l10-2v9" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M9 18a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm10-6a3 3 0 1 1-6 0" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>音乐</span>',2)),T("span",x1,_e(s.musicOn?"开":"关"),1)]),T("button",{class:"settings__item",onClick:s.onDownloadSave},[...t[9]||(t[9]=[Do('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M12 3v12m0 0l-4-4m4 4l4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M4 19h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>下载存档</span>',2)])]),T("button",{class:"settings__item",onClick:s.onUploadSave},[...t[10]||(t[10]=[Do('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M12 21V9m0 0l4 4m-4-4L8 13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M4 5h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>上传存档</span>',2)])]),T("input",{ref:"fileInput",type:"file",accept:".json",onChange:s.onFileChange,style:{display:"none"}},null,544)])])])):vt("",!0)])}const ma=gn(b1,[["render",L1],["__scopeId","data-v-7a7a37b1"],["__file","D:/Project/MGPIC/MGPIC-2025/src/App.vue"]]);function Jo(e,t,n,s=""){const o=document.getElementById("progress-bar"),r=document.getElementById("progress-text"),i=document.querySelector(".loading-subtitle");o&&(o.style.width=n+"%"),r&&(e===0&&t===0?r.textContent=`${n}%`:r.textContent=`${e} / ${t} (${n}%)`),i&&s&&(i.textContent=s)}function ga(){const e=document.getElementById("loading-screen");e&&(e.classList.add("fade-out"),setTimeout(()=>{e.style.display="none"},500))}async function A1(){try{console.log("开始预缓存资源..."),await io(Jo,["high"]),console.log("关键资源预缓存完成！"),Jo(0,100,100,"初始化应用界面..."),Ki(ma).mount("#app"),await new Promise(t=>setTimeout(t,200)),window.__INIT_THREE_SCENE__&&await window.__INIT_THREE_SCENE__((t,n,s)=>{Jo(0,0,s,`3D场景加载中... ${s}%`)}),console.log("所有初始化完成！"),setTimeout(()=>{ga()},300),setTimeout(async()=>{try{console.log("开始后台预缓存其他资源..."),await io(null,["medium"]),console.log("后台预缓存完成！")}catch(t){console.warn("后台预缓存失败:",t)}},1e3)}catch(e){console.error("初始化失败:",e),Ki(ma).mount("#app"),ga()}}A1();
