import{T as uc,a as to,b as ar,L as cr,c as wn,F as as,M as ft,V as lr,C as bt,d as ut,S as gt,e as fc,P as pc,D as xo,f as cs,g as Je,I as dc,Q as ur,h as $c,O as fr,i as hc,j as _c,B as vn,k as mc,l as pr,N as gc,m as bc,n as yc,o as no,p as dr,R as so,q as wc,r as vc,s as Tc,t as Es,u as Mc,v as Co,w as xc,x as bn,y as Cc,z as $r,A as Sc,E as hr,G as Lc,H as Ac,J as Ic,K as Rc,U as ks,W as So,X as Ec,Y as kc,Z as Pc,_ as Nc,$ as Oc,a0 as Dc,a1 as _r,a2 as Gc,a3 as Qo,a4 as ei,a5 as ti,a6 as ni,a7 as oo,a8 as Fc,a9 as Hc,aa as ls,ab as Uc,ac as si,ad as Bc,ae as mr,af as gr,ag as br,ah as jc}from"./three-C2K7cSXS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const le={},en=[],lt=()=>{},yr=()=>!1,ys=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ao=e=>e.startsWith("onUpdate:"),we=Object.assign,Io=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Vc=Object.prototype.hasOwnProperty,ie=(e,t)=>Vc.call(e,t),W=Array.isArray,tn=e=>ws(e)==="[object Map]",wr=e=>ws(e)==="[object Set]",Y=e=>typeof e=="function",he=e=>typeof e=="string",Gt=e=>typeof e=="symbol",de=e=>e!==null&&typeof e=="object",vr=e=>(de(e)||Y(e))&&Y(e.then)&&Y(e.catch),Tr=Object.prototype.toString,ws=e=>Tr.call(e),Kc=e=>ws(e).slice(8,-1),Mr=e=>ws(e)==="[object Object]",Ro=e=>he(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tn=Lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Wc=/-\w/g,Pt=vs(e=>e.replace(Wc,t=>t.slice(1).toUpperCase())),qc=/\B([A-Z])/g,zt=vs(e=>e.replace(qc,"-$1").toLowerCase()),xr=vs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ps=vs(e=>e?`on${xr(e)}`:""),Et=(e,t)=>!Object.is(e,t),Ns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Cr=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},zc=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Xc=e=>{const t=he(e)?Number(e):NaN;return isNaN(t)?e:t};let oi;const Ts=()=>oi||(oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function It(e){if(W(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=he(s)?Qc(s):It(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(he(e)||de(e))return e}const Jc=/;(?![^(]*\))/g,Yc=/:([^]+)/,Zc=/\/\*[^]*?\*\//g;function Qc(e){const t={};return e.replace(Zc,"").split(Jc).forEach(n=>{if(n){const s=n.split(Yc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Nt(e){let t="";if(he(e))t=e;else if(W(e))for(let n=0;n<e.length;n++){const s=Nt(e[n]);s&&(t+=s+" ")}else if(de(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const el="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tl=Lo(el);function Sr(e){return!!e||e===""}const Lr=e=>!!(e&&e.__v_isRef===!0),fe=e=>he(e)?e:e==null?"":W(e)||de(e)&&(e.toString===Tr||!Y(e.toString))?Lr(e)?fe(e.value):JSON.stringify(e,Ar,2):String(e),Ar=(e,t)=>Lr(t)?Ar(e,t.value):tn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[Os(s,i)+" =>"]=o,n),{})}:wr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Os(n))}:Gt(t)?Os(t):de(t)&&!W(t)&&!Mr(t)?String(t):t,Os=(e,t="")=>{var n;return Gt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class nl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ee;try{return Ee=this,t()}finally{Ee=n}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function sl(){return Ee}let pe;const Ds=new WeakSet;class Ir{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ds.has(this)&&(Ds.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Er(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ii(this),kr(this);const t=pe,n=Ye;pe=this,Ye=!0;try{return this.fn()}finally{Pr(this),pe=t,Ye=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Po(t);this.deps=this.depsTail=void 0,ii(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ds.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){io(this)&&this.run()}get dirty(){return io(this)}}let Rr=0,Mn,xn;function Er(e,t=!1){if(e.flags|=8,t){e.next=xn,xn=e;return}e.next=Mn,Mn=e}function Eo(){Rr++}function ko(){if(--Rr>0)return;if(xn){let t=xn;for(xn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Mn;){let t=Mn;for(Mn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function kr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pr(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Po(s),ol(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function io(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pn)||(e.globalVersion=Pn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!io(e))))return;e.flags|=2;const t=e.dep,n=pe,s=Ye;pe=e,Ye=!0;try{kr(e);const o=e.fn(e._value);(t.version===0||Et(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{pe=n,Ye=s,Pr(e),e.flags&=-3}}function Po(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Po(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ol(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ye=!0;const Or=[];function yt(){Or.push(Ye),Ye=!1}function wt(){const e=Or.pop();Ye=e===void 0?!0:e}function ii(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=pe;pe=void 0;try{t()}finally{pe=n}}}let Pn=0;class il{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class No{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!pe||!Ye||pe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==pe)n=this.activeLink=new il(pe,this),pe.deps?(n.prevDep=pe.depsTail,pe.depsTail.nextDep=n,pe.depsTail=n):pe.deps=pe.depsTail=n,Dr(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=pe.depsTail,n.nextDep=void 0,pe.depsTail.nextDep=n,pe.depsTail=n,pe.deps===n&&(pe.deps=s)}return n}trigger(t){this.version++,Pn++,this.notify(t)}notify(t){Eo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ko()}}}function Dr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Dr(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ro=new WeakMap,Wt=Symbol(""),ao=Symbol(""),Nn=Symbol("");function Te(e,t,n){if(Ye&&pe){let s=ro.get(e);s||ro.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new No),o.map=s,o.key=n),o.track()}}function _t(e,t,n,s,o,i){const r=ro.get(e);if(!r){Pn++;return}const a=c=>{c&&c.trigger()};if(Eo(),t==="clear")r.forEach(a);else{const c=W(e),u=c&&Ro(n);if(c&&n==="length"){const l=Number(s);r.forEach((f,p)=>{(p==="length"||p===Nn||!Gt(p)&&p>=l)&&a(f)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),u&&a(r.get(Nn)),t){case"add":c?u&&a(r.get("length")):(a(r.get(Wt)),tn(e)&&a(r.get(ao)));break;case"delete":c||(a(r.get(Wt)),tn(e)&&a(r.get(ao)));break;case"set":tn(e)&&a(r.get(Wt));break}}ko()}function Jt(e){const t=oe(e);return t===e?t:(Te(t,"iterate",Nn),Ve(e)?t:t.map(ye))}function Ms(e){return Te(e=oe(e),"iterate",Nn),e}const rl={__proto__:null,[Symbol.iterator](){return Gs(this,Symbol.iterator,ye)},concat(...e){return Jt(this).concat(...e.map(t=>W(t)?Jt(t):t))},entries(){return Gs(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return pt(this,"every",e,t,void 0,arguments)},filter(e,t){return pt(this,"filter",e,t,n=>n.map(ye),arguments)},find(e,t){return pt(this,"find",e,t,ye,arguments)},findIndex(e,t){return pt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return pt(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return pt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return pt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fs(this,"includes",e)},indexOf(...e){return Fs(this,"indexOf",e)},join(e){return Jt(this).join(e)},lastIndexOf(...e){return Fs(this,"lastIndexOf",e)},map(e,t){return pt(this,"map",e,t,void 0,arguments)},pop(){return pn(this,"pop")},push(...e){return pn(this,"push",e)},reduce(e,...t){return ri(this,"reduce",e,t)},reduceRight(e,...t){return ri(this,"reduceRight",e,t)},shift(){return pn(this,"shift")},some(e,t){return pt(this,"some",e,t,void 0,arguments)},splice(...e){return pn(this,"splice",e)},toReversed(){return Jt(this).toReversed()},toSorted(e){return Jt(this).toSorted(e)},toSpliced(...e){return Jt(this).toSpliced(...e)},unshift(...e){return pn(this,"unshift",e)},values(){return Gs(this,"values",ye)}};function Gs(e,t,n){const s=Ms(e),o=s[t]();return s!==e&&!Ve(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const al=Array.prototype;function pt(e,t,n,s,o,i){const r=Ms(e),a=r!==e&&!Ve(e),c=r[t];if(c!==al[t]){const f=c.apply(e,i);return a?ye(f):f}let u=n;r!==e&&(a?u=function(f,p){return n.call(this,ye(f),p,e)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,e)}));const l=c.call(r,u,s);return a&&o?o(l):l}function ri(e,t,n,s){const o=Ms(e);let i=n;return o!==e&&(Ve(e)?n.length>3&&(i=function(r,a,c){return n.call(this,r,a,c,e)}):i=function(r,a,c){return n.call(this,r,ye(a),c,e)}),o[t](i,...s)}function Fs(e,t,n){const s=oe(e);Te(s,"iterate",Nn);const o=s[t](...n);return(o===-1||o===!1)&&Fo(n[0])?(n[0]=oe(n[0]),s[t](...n)):o}function pn(e,t,n=[]){yt(),Eo();const s=oe(e)[t].apply(e,n);return ko(),wt(),s}const cl=Lo("__proto__,__v_isRef,__isVue"),Gr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gt));function ll(e){Gt(e)||(e=String(e));const t=oe(this);return Te(t,"has",e),t.hasOwnProperty(e)}class Fr{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?bl:jr:i?Br:Ur).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=W(t);if(!o){let c;if(r&&(c=rl[n]))return c;if(n==="hasOwnProperty")return ll}const a=Reflect.get(t,n,Me(t)?t:s);if((Gt(n)?Gr.has(n):cl(n))||(o||Te(t,"get",n),i))return a;if(Me(a)){const c=r&&Ro(n)?a:a.value;return o&&de(c)?lo(c):c}return de(a)?o?lo(a):Do(a):a}}class Hr extends Fr{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];if(!this._isShallow){const c=Ot(i);if(!Ve(s)&&!Ot(s)&&(i=oe(i),s=oe(s)),!W(t)&&Me(i)&&!Me(s))return c||(i.value=s),!0}const r=W(t)&&Ro(n)?Number(n)<t.length:ie(t,n),a=Reflect.set(t,n,s,Me(t)?t:o);return t===oe(o)&&(r?Et(s,i)&&_t(t,"set",n,s):_t(t,"add",n,s)),a}deleteProperty(t,n){const s=ie(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&_t(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!Gt(n)||!Gr.has(n))&&Te(t,"has",n),s}ownKeys(t){return Te(t,"iterate",W(t)?"length":Wt),Reflect.ownKeys(t)}}class ul extends Fr{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const fl=new Hr,pl=new ul,dl=new Hr(!0);const co=e=>e,Wn=e=>Reflect.getPrototypeOf(e);function $l(e,t,n){return function(...s){const o=this.__v_raw,i=oe(o),r=tn(i),a=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,u=o[e](...s),l=n?co:t?us:ye;return!t&&Te(i,"iterate",c?ao:Wt),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[l(f[0]),l(f[1])]:l(f),done:p}},[Symbol.iterator](){return this}}}}function qn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function hl(e,t){const n={get(o){const i=this.__v_raw,r=oe(i),a=oe(o);e||(Et(o,a)&&Te(r,"get",o),Te(r,"get",a));const{has:c}=Wn(r),u=t?co:e?us:ye;if(c.call(r,o))return u(i.get(o));if(c.call(r,a))return u(i.get(a));i!==r&&i.get(o)},get size(){const o=this.__v_raw;return!e&&Te(oe(o),"iterate",Wt),o.size},has(o){const i=this.__v_raw,r=oe(i),a=oe(o);return e||(Et(o,a)&&Te(r,"has",o),Te(r,"has",a)),o===a?i.has(o):i.has(o)||i.has(a)},forEach(o,i){const r=this,a=r.__v_raw,c=oe(a),u=t?co:e?us:ye;return!e&&Te(c,"iterate",Wt),a.forEach((l,f)=>o.call(i,u(l),u(f),r))}};return we(n,e?{add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear")}:{add(o){!t&&!Ve(o)&&!Ot(o)&&(o=oe(o));const i=oe(this);return Wn(i).has.call(i,o)||(i.add(o),_t(i,"add",o,o)),this},set(o,i){!t&&!Ve(i)&&!Ot(i)&&(i=oe(i));const r=oe(this),{has:a,get:c}=Wn(r);let u=a.call(r,o);u||(o=oe(o),u=a.call(r,o));const l=c.call(r,o);return r.set(o,i),u?Et(i,l)&&_t(r,"set",o,i):_t(r,"add",o,i),this},delete(o){const i=oe(this),{has:r,get:a}=Wn(i);let c=r.call(i,o);c||(o=oe(o),c=r.call(i,o)),a&&a.call(i,o);const u=i.delete(o);return c&&_t(i,"delete",o,void 0),u},clear(){const o=oe(this),i=o.size!==0,r=o.clear();return i&&_t(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=$l(o,e,t)}),n}function Oo(e,t){const n=hl(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(ie(n,o)&&o in s?n:s,o,i)}const _l={get:Oo(!1,!1)},ml={get:Oo(!1,!0)},gl={get:Oo(!0,!1)};const Ur=new WeakMap,Br=new WeakMap,jr=new WeakMap,bl=new WeakMap;function yl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wl(e){return e.__v_skip||!Object.isExtensible(e)?0:yl(Kc(e))}function Do(e){return Ot(e)?e:Go(e,!1,fl,_l,Ur)}function vl(e){return Go(e,!1,dl,ml,Br)}function lo(e){return Go(e,!0,pl,gl,jr)}function Go(e,t,n,s,o){if(!de(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=wl(e);if(i===0)return e;const r=o.get(e);if(r)return r;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function nn(e){return Ot(e)?nn(e.__v_raw):!!(e&&e.__v_isReactive)}function Ot(e){return!!(e&&e.__v_isReadonly)}function Ve(e){return!!(e&&e.__v_isShallow)}function Fo(e){return e?!!e.__v_raw:!1}function oe(e){const t=e&&e.__v_raw;return t?oe(t):e}function Tl(e){return!ie(e,"__v_skip")&&Object.isExtensible(e)&&Cr(e,"__v_skip",!0),e}const ye=e=>de(e)?Do(e):e,us=e=>de(e)?lo(e):e;function Me(e){return e?e.__v_isRef===!0:!1}function Q(e){return Ml(e,!1)}function Ml(e,t){return Me(e)?e:new xl(e,t)}class xl{constructor(t,n){this.dep=new No,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:oe(t),this._value=n?t:ye(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Ve(t)||Ot(t);t=s?t:oe(t),Et(t,n)&&(this._rawValue=t,this._value=s?t:ye(t),this.dep.trigger())}}function Cn(e){return Me(e)?e.value:e}const Cl={get:(e,t,n)=>t==="__v_raw"?e:Cn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Me(o)&&!Me(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Vr(e){return nn(e)?e:new Proxy(e,Cl)}class Sl{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new No(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&pe!==this)return Er(this,!0),!0}get value(){const t=this.dep.track();return Nr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ll(e,t,n=!1){let s,o;return Y(e)?s=e:(s=e.get,o=e.set),new Sl(s,o,n)}const zn={},fs=new WeakMap;let Vt;function Al(e,t=!1,n=Vt){if(n){let s=fs.get(n);s||fs.set(n,s=[]),s.push(e)}}function Il(e,t,n=le){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:a,call:c}=n,u=_=>o?_:Ve(_)||o===!1||o===0?mt(_,1):mt(_);let l,f,p,$,y=!1,v=!1;if(Me(e)?(f=()=>e.value,y=Ve(e)):nn(e)?(f=()=>u(e),y=!0):W(e)?(v=!0,y=e.some(_=>nn(_)||Ve(_)),f=()=>e.map(_=>{if(Me(_))return _.value;if(nn(_))return u(_);if(Y(_))return c?c(_,2):_()})):Y(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){yt();try{p()}finally{wt()}}const _=Vt;Vt=l;try{return c?c(e,3,[$]):e($)}finally{Vt=_}}:f=lt,t&&o){const _=f,w=o===!0?1/0:o;f=()=>mt(_(),w)}const R=sl(),C=()=>{l.stop(),R&&R.active&&Io(R.effects,l)};if(i&&t){const _=t;t=(...w)=>{_(...w),C()}}let g=v?new Array(e.length).fill(zn):zn;const h=_=>{if(!(!(l.flags&1)||!l.dirty&&!_))if(t){const w=l.run();if(o||y||(v?w.some((A,x)=>Et(A,g[x])):Et(w,g))){p&&p();const A=Vt;Vt=l;try{const x=[w,g===zn?void 0:v&&g[0]===zn?[]:g,$];g=w,c?c(t,3,x):t(...x)}finally{Vt=A}}}else l.run()};return a&&a(h),l=new Ir(f),l.scheduler=r?()=>r(h,!1):h,$=_=>Al(_,!1,l),p=l.onStop=()=>{const _=fs.get(l);if(_){if(c)c(_,4);else for(const w of _)w();fs.delete(l)}},t?s?h(!0):g=l.run():r?r(h.bind(null,!0),!0):l.run(),C.pause=l.pause.bind(l),C.resume=l.resume.bind(l),C.stop=C,C}function mt(e,t=1/0,n){if(t<=0||!de(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Me(e))mt(e.value,t,n);else if(W(e))for(let s=0;s<e.length;s++)mt(e[s],t,n);else if(wr(e)||tn(e))e.forEach(s=>{mt(s,t,n)});else if(Mr(e)){for(const s in e)mt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&mt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vn(e,t,n,s){try{return s?e(...s):e()}catch(o){xs(o,t,n)}}function Ze(e,t,n,s){if(Y(e)){const o=Vn(e,t,n,s);return o&&vr(o)&&o.catch(i=>{xs(i,t,n)}),o}if(W(e)){const o=[];for(let i=0;i<e.length;i++)o.push(Ze(e[i],t,n,s));return o}}function xs(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||le;if(t){let a=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const l=a.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](e,c,u)===!1)return}a=a.parent}if(i){yt(),Vn(i,null,10,[e,c,u]),wt();return}}Rl(e,n,o,s,r)}function Rl(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const Ce=[];let rt=-1;const sn=[];let Lt=null,Yt=0;const Kr=Promise.resolve();let ps=null;function On(e){const t=ps||Kr;return e?t.then(this?e.bind(this):e):t}function El(e){let t=rt+1,n=Ce.length;for(;t<n;){const s=t+n>>>1,o=Ce[s],i=Dn(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function Ho(e){if(!(e.flags&1)){const t=Dn(e),n=Ce[Ce.length-1];!n||!(e.flags&2)&&t>=Dn(n)?Ce.push(e):Ce.splice(El(t),0,e),e.flags|=1,Wr()}}function Wr(){ps||(ps=Kr.then(zr))}function kl(e){W(e)?sn.push(...e):Lt&&e.id===-1?Lt.splice(Yt+1,0,e):e.flags&1||(sn.push(e),e.flags|=1),Wr()}function ai(e,t,n=rt+1){for(;n<Ce.length;n++){const s=Ce[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ce.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function qr(e){if(sn.length){const t=[...new Set(sn)].sort((n,s)=>Dn(n)-Dn(s));if(sn.length=0,Lt){Lt.push(...t);return}for(Lt=t,Yt=0;Yt<Lt.length;Yt++){const n=Lt[Yt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,Yt=0}}const Dn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zr(e){try{for(rt=0;rt<Ce.length;rt++){const t=Ce[rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Vn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;rt<Ce.length;rt++){const t=Ce[rt];t&&(t.flags&=-2)}rt=-1,Ce.length=0,qr(),ps=null,(Ce.length||sn.length)&&zr()}}let je=null,Xr=null;function ds(e){const t=je;return je=e,Xr=e&&e.type.__scopeId||null,t}function Jr(e,t=je,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&_s(-1);const i=ds(t);let r;try{r=e(...o)}finally{ds(i),s._d&&_s(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function Yr(e,t){if(je===null)return e;const n=Rs(je),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,r,a,c=le]=t[o];i&&(Y(i)&&(i={mounted:i,updated:i}),i.deep&&mt(r),s.push({dir:i,instance:n,value:r,oldValue:void 0,arg:a,modifiers:c}))}return e}function Ft(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const a=o[r];i&&(a.oldValue=i[r].value);let c=a.dir[s];c&&(yt(),Ze(c,n,8,[e.el,a,e,t]),wt())}}const Pl=Symbol("_vte"),Zr=e=>e.__isTeleport,ht=Symbol("_leaveCb"),Xn=Symbol("_enterCb");function Nl(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qt(()=>{e.isMounted=!0}),Ls(()=>{e.isUnmounting=!0}),e}const He=[Function,Array],Qr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:He,onEnter:He,onAfterEnter:He,onEnterCancelled:He,onBeforeLeave:He,onLeave:He,onAfterLeave:He,onLeaveCancelled:He,onBeforeAppear:He,onAppear:He,onAfterAppear:He,onAppearCancelled:He},ea=e=>{const t=e.subTree;return t.component?ea(t.component):t},Ol={name:"BaseTransition",props:Qr,setup(e,{slots:t}){const n=Ca(),s=Nl();return()=>{const o=t.default&&sa(t.default(),!0);if(!o||!o.length)return;const i=ta(o),r=oe(e),{mode:a}=r;if(s.isLeaving)return Hs(i);const c=ci(i);if(!c)return Hs(i);let u=uo(c,r,s,n,f=>u=f);c.type!==Se&&Gn(c,u);let l=n.subTree&&ci(n.subTree);if(l&&l.type!==Se&&!Kt(l,c)&&ea(n).type!==Se){let f=uo(l,r,s,n);if(Gn(l,f),a==="out-in"&&c.type!==Se)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,l=void 0},Hs(i);a==="in-out"&&c.type!==Se?f.delayLeave=(p,$,y)=>{const v=na(s,l);v[String(l.key)]=l,p[ht]=()=>{$(),p[ht]=void 0,delete u.delayedLeave,l=void 0},u.delayedLeave=()=>{y(),delete u.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return i}}};function ta(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Se){t=n;break}}return t}const Dl=Ol;function na(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function uo(e,t,n,s,o){const{appear:i,mode:r,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:p,onLeave:$,onAfterLeave:y,onLeaveCancelled:v,onBeforeAppear:R,onAppear:C,onAfterAppear:g,onAppearCancelled:h}=t,_=String(e.key),w=na(n,e),A=(S,P)=>{S&&Ze(S,s,9,P)},x=(S,P)=>{const U=P[1];A(S,P),W(S)?S.every(I=>I.length<=1)&&U():S.length<=1&&U()},L={mode:r,persisted:a,beforeEnter(S){let P=c;if(!n.isMounted)if(i)P=R||c;else return;S[ht]&&S[ht](!0);const U=w[_];U&&Kt(e,U)&&U.el[ht]&&U.el[ht](),A(P,[S])},enter(S){let P=u,U=l,I=f;if(!n.isMounted)if(i)P=C||u,U=g||l,I=h||f;else return;let B=!1;const K=S[Xn]=q=>{B||(B=!0,q?A(I,[S]):A(U,[S]),L.delayedLeave&&L.delayedLeave(),S[Xn]=void 0)};P?x(P,[S,K]):K()},leave(S,P){const U=String(e.key);if(S[Xn]&&S[Xn](!0),n.isUnmounting)return P();A(p,[S]);let I=!1;const B=S[ht]=K=>{I||(I=!0,P(),K?A(v,[S]):A(y,[S]),S[ht]=void 0,w[U]===e&&delete w[U])};w[U]=e,$?x($,[S,B]):B()},clone(S){const P=uo(S,t,n,s,o);return o&&o(P),P}};return L}function Hs(e){if(Cs(e))return e=Dt(e),e.children=null,e}function ci(e){if(!Cs(e))return Zr(e.type)&&e.children?ta(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Y(n.default))return n.default()}}function Gn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Gn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sa(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let r=e[i];const a=n==null?r.key:String(n)+String(r.key!=null?r.key:i);r.type===De?(r.patchFlag&128&&o++,s=s.concat(sa(r.children,t,a))):(t||r.type!==Se)&&s.push(a!=null?Dt(r,{key:a}):r)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function oa(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const $s=new WeakMap;function Sn(e,t,n,s,o=!1){if(W(e)){e.forEach((y,v)=>Sn(y,t&&(W(t)?t[v]:t),n,s,o));return}if(Ln(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Sn(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Rs(s.component):s.el,r=o?null:i,{i:a,r:c}=e,u=t&&t.r,l=a.refs===le?a.refs={}:a.refs,f=a.setupState,p=oe(f),$=f===le?yr:y=>ie(p,y);if(u!=null&&u!==c){if(li(t),he(u))l[u]=null,$(u)&&(f[u]=null);else if(Me(u)){u.value=null;const y=t;y.k&&(l[y.k]=null)}}if(Y(c))Vn(c,a,12,[r,l]);else{const y=he(c),v=Me(c);if(y||v){const R=()=>{if(e.f){const C=y?$(c)?f[c]:l[c]:c.value;if(o)W(C)&&Io(C,i);else if(W(C))C.includes(i)||C.push(i);else if(y)l[c]=[i],$(c)&&(f[c]=l[c]);else{const g=[i];c.value=g,e.k&&(l[e.k]=g)}}else y?(l[c]=r,$(c)&&(f[c]=r)):v&&(c.value=r,e.k&&(l[e.k]=r))};if(r){const C=()=>{R(),$s.delete(e)};C.id=-1,$s.set(e,C),Oe(C,n)}else li(e),R()}}}function li(e){const t=$s.get(e);t&&(t.flags|=8,$s.delete(e))}Ts().requestIdleCallback;Ts().cancelIdleCallback;const Ln=e=>!!e.type.__asyncLoader,Cs=e=>e.type.__isKeepAlive;function Gl(e,t){ia(e,"a",t)}function Fl(e,t){ia(e,"da",t)}function ia(e,t,n=Le){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ss(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Cs(o.parent.vnode)&&Hl(s,t,n,o),o=o.parent}}function Hl(e,t,n,s){const o=Ss(t,e,s,!0);ra(()=>{Io(s[t],o)},n)}function Ss(e,t,n=Le,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{yt();const a=Kn(n),c=Ze(t,n,e,r);return a(),wt(),c});return s?o.unshift(i):o.push(i),i}}const vt=e=>(t,n=Le)=>{(!Hn||e==="sp")&&Ss(e,(...s)=>t(...s),n)},Ul=vt("bm"),qt=vt("m"),Bl=vt("bu"),jl=vt("u"),Ls=vt("bum"),ra=vt("um"),Vl=vt("sp"),Kl=vt("rtg"),Wl=vt("rtc");function ql(e,t=Le){Ss("ec",e,t)}const zl=Symbol.for("v-ndc");function Us(e,t,n,s){let o;const i=n,r=W(e);if(r||he(e)){const a=r&&nn(e);let c=!1,u=!1;a&&(c=!Ve(e),u=Ot(e),e=Ms(e)),o=new Array(e.length);for(let l=0,f=e.length;l<f;l++)o[l]=t(c?u?us(ye(e[l])):ye(e[l]):e[l],l,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,i)}else if(de(e))if(e[Symbol.iterator])o=Array.from(e,(a,c)=>t(a,c,void 0,i));else{const a=Object.keys(e);o=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const l=a[c];o[c]=t(e[l],l,c,i)}}else o=[];return o}const fo=e=>e?Sa(e)?Rs(e):fo(e.parent):null,An=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fo(e.parent),$root:e=>fo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ca(e),$forceUpdate:e=>e.f||(e.f=()=>{Ho(e.update)}),$nextTick:e=>e.n||(e.n=On.bind(e.proxy)),$watch:e=>_u.bind(e)}),Bs=(e,t)=>e!==le&&!e.__isScriptSetup&&ie(e,t),Xl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:a,appContext:c}=e;let u;if(t[0]!=="$"){const $=r[t];if($!==void 0)switch($){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(Bs(s,t))return r[t]=1,s[t];if(o!==le&&ie(o,t))return r[t]=2,o[t];if((u=e.propsOptions[0])&&ie(u,t))return r[t]=3,i[t];if(n!==le&&ie(n,t))return r[t]=4,n[t];po&&(r[t]=0)}}const l=An[t];let f,p;if(l)return t==="$attrs"&&Te(e.attrs,"get",""),l(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==le&&ie(n,t))return r[t]=4,n[t];if(p=c.config.globalProperties,ie(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Bs(o,t)?(o[t]=n,!0):s!==le&&ie(s,t)?(s[t]=n,!0):ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i,type:r}},a){let c,u;return!!(n[a]||e!==le&&a[0]!=="$"&&ie(e,a)||Bs(t,a)||(c=i[0])&&ie(c,a)||ie(s,a)||ie(An,a)||ie(o.config.globalProperties,a)||(u=r.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ui(e){return W(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let po=!0;function Jl(e){const t=ca(e),n=e.proxy,s=e.ctx;po=!1,t.beforeCreate&&fi(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:r,watch:a,provide:c,inject:u,created:l,beforeMount:f,mounted:p,beforeUpdate:$,updated:y,activated:v,deactivated:R,beforeDestroy:C,beforeUnmount:g,destroyed:h,unmounted:_,render:w,renderTracked:A,renderTriggered:x,errorCaptured:L,serverPrefetch:S,expose:P,inheritAttrs:U,components:I,directives:B,filters:K}=t;if(u&&Yl(u,s,null),r)for(const X in r){const J=r[X];Y(J)&&(s[X]=J.bind(n))}if(o){const X=o.call(n,n);de(X)&&(e.data=Do(X))}if(po=!0,i)for(const X in i){const J=i[X],$e=Y(J)?J.bind(n,n):Y(J.get)?J.get.bind(n,n):lt,Ae=!Y(J)&&Y(J.set)?J.set.bind(n):lt,ge=Du({get:$e,set:Ae});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>ge.value,set:be=>ge.value=be})}if(a)for(const X in a)aa(a[X],s,n,X);if(c){const X=Y(c)?c.call(n):c;Reflect.ownKeys(X).forEach(J=>{su(J,X[J])})}l&&fi(l,e,"c");function Z(X,J){W(J)?J.forEach($e=>X($e.bind(n))):J&&X(J.bind(n))}if(Z(Ul,f),Z(qt,p),Z(Bl,$),Z(jl,y),Z(Gl,v),Z(Fl,R),Z(ql,L),Z(Wl,A),Z(Kl,x),Z(Ls,g),Z(ra,_),Z(Vl,S),W(P))if(P.length){const X=e.exposed||(e.exposed={});P.forEach(J=>{Object.defineProperty(X,J,{get:()=>n[J],set:$e=>n[J]=$e,enumerable:!0})})}else e.exposed||(e.exposed={});w&&e.render===lt&&(e.render=w),U!=null&&(e.inheritAttrs=U),I&&(e.components=I),B&&(e.directives=B),S&&oa(e)}function Yl(e,t,n=lt){W(e)&&(e=$o(e));for(const s in e){const o=e[s];let i;de(o)?"default"in o?i=es(o.from||s,o.default,!0):i=es(o.from||s):i=es(o),Me(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[s]=i}}function fi(e,t,n){Ze(W(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function aa(e,t,n,s){let o=s.includes(".")?wa(n,s):()=>n[s];if(he(e)){const i=t[e];Y(i)&&ts(o,i)}else if(Y(e))ts(o,e.bind(n));else if(de(e))if(W(e))e.forEach(i=>aa(i,t,n,s));else{const i=Y(e.handler)?e.handler.bind(n):t[e.handler];Y(i)&&ts(o,i,e)}}function ca(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,a=i.get(t);let c;return a?c=a:!o.length&&!n&&!s?c=t:(c={},o.length&&o.forEach(u=>hs(c,u,r,!0)),hs(c,t,r)),de(t)&&i.set(t,c),c}function hs(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&hs(e,i,n,!0),o&&o.forEach(r=>hs(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const a=Zl[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const Zl={data:pi,props:di,emits:di,methods:yn,computed:yn,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:yn,directives:yn,watch:eu,provide:pi,inject:Ql};function pi(e,t){return t?e?function(){return we(Y(e)?e.call(this,this):e,Y(t)?t.call(this,this):t)}:t:e}function Ql(e,t){return yn($o(e),$o(t))}function $o(e){if(W(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xe(e,t){return e?[...new Set([].concat(e,t))]:t}function yn(e,t){return e?we(Object.create(null),e,t):t}function di(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:we(Object.create(null),ui(e),ui(t??{})):t}function eu(e,t){if(!e)return t;if(!t)return e;const n=we(Object.create(null),e);for(const s in t)n[s]=xe(e[s],t[s]);return n}function la(){return{app:null,config:{isNativeTag:yr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tu=0;function nu(e,t){return function(s,o=null){Y(s)||(s=we({},s)),o!=null&&!de(o)&&(o=null);const i=la(),r=new WeakSet,a=[];let c=!1;const u=i.app={_uid:tu++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:Fu,get config(){return i.config},set config(l){},use(l,...f){return r.has(l)||(l&&Y(l.install)?(r.add(l),l.install(u,...f)):Y(l)&&(r.add(l),l(u,...f))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,f){return f?(i.components[l]=f,u):i.components[l]},directive(l,f){return f?(i.directives[l]=f,u):i.directives[l]},mount(l,f,p){if(!c){const $=u._ceVNode||_e(s,o);return $.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),e($,l,p),c=!0,u._container=l,l.__vue_app__=u,Rs($.component)}},onUnmount(l){a.push(l)},unmount(){c&&(Ze(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(l,f){return i.provides[l]=f,u},runWithContext(l){const f=on;on=u;try{return l()}finally{on=f}}};return u}}let on=null;function su(e,t){if(Le){let n=Le.provides;const s=Le.parent&&Le.parent.provides;s===n&&(n=Le.provides=Object.create(s)),n[e]=t}}function es(e,t,n=!1){const s=Ca();if(s||on){let o=on?on._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Y(t)?t.call(s&&s.proxy):t}}const ua={},fa=()=>Object.create(ua),pa=e=>Object.getPrototypeOf(e)===ua;function ou(e,t,n,s=!1){const o={},i=fa();e.propsDefaults=Object.create(null),da(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:vl(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function iu(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,a=oe(o),[c]=e.propsOptions;let u=!1;if((s||r>0)&&!(r&16)){if(r&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let p=l[f];if(As(e.emitsOptions,p))continue;const $=t[p];if(c)if(ie(i,p))$!==i[p]&&(i[p]=$,u=!0);else{const y=Pt(p);o[y]=ho(c,a,y,$,e,!1)}else $!==i[p]&&(i[p]=$,u=!0)}}}else{da(e,t,o,i)&&(u=!0);let l;for(const f in a)(!t||!ie(t,f)&&((l=zt(f))===f||!ie(t,l)))&&(c?n&&(n[f]!==void 0||n[l]!==void 0)&&(o[f]=ho(c,a,f,void 0,e,!0)):delete o[f]);if(i!==a)for(const f in i)(!t||!ie(t,f))&&(delete i[f],u=!0)}u&&_t(e.attrs,"set","")}function da(e,t,n,s){const[o,i]=e.propsOptions;let r=!1,a;if(t)for(let c in t){if(Tn(c))continue;const u=t[c];let l;o&&ie(o,l=Pt(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:As(e.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,r=!0)}if(i){const c=oe(n),u=a||le;for(let l=0;l<i.length;l++){const f=i[l];n[f]=ho(o,c,f,u[f],e,!ie(u,f))}}return r}function ho(e,t,n,s,o,i){const r=e[n];if(r!=null){const a=ie(r,"default");if(a&&s===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&Y(c)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const l=Kn(o);s=u[n]=c.call(null,t),l()}}else s=c;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!a?s=!1:r[1]&&(s===""||s===zt(n))&&(s=!0))}return s}const ru=new WeakMap;function $a(e,t,n=!1){const s=n?ru:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,r={},a=[];let c=!1;if(!Y(e)){const l=f=>{c=!0;const[p,$]=$a(f,t,!0);we(r,p),$&&a.push(...$)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!i&&!c)return de(e)&&s.set(e,en),en;if(W(i))for(let l=0;l<i.length;l++){const f=Pt(i[l]);$i(f)&&(r[f]=le)}else if(i)for(const l in i){const f=Pt(l);if($i(f)){const p=i[l],$=r[f]=W(p)||Y(p)?{type:p}:we({},p),y=$.type;let v=!1,R=!0;if(W(y))for(let C=0;C<y.length;++C){const g=y[C],h=Y(g)&&g.name;if(h==="Boolean"){v=!0;break}else h==="String"&&(R=!1)}else v=Y(y)&&y.name==="Boolean";$[0]=v,$[1]=R,(v||ie($,"default"))&&a.push(f)}}const u=[r,a];return de(e)&&s.set(e,u),u}function $i(e){return e[0]!=="$"&&!Tn(e)}const Uo=e=>e==="_"||e==="_ctx"||e==="$stable",Bo=e=>W(e)?e.map(ct):[ct(e)],au=(e,t,n)=>{if(t._n)return t;const s=Jr((...o)=>Bo(t(...o)),n);return s._c=!1,s},ha=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Uo(o))continue;const i=e[o];if(Y(i))t[o]=au(o,i,s);else if(i!=null){const r=Bo(i);t[o]=()=>r}}},_a=(e,t)=>{const n=Bo(t);e.slots.default=()=>n},ma=(e,t,n)=>{for(const s in t)(n||!Uo(s))&&(e[s]=t[s])},cu=(e,t,n)=>{const s=e.slots=fa();if(e.vnode.shapeFlag&32){const o=t._;o?(ma(s,t,n),n&&Cr(s,"_",o,!0)):ha(t,s)}else t&&_a(e,t)},lu=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,r=le;if(s.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:ma(o,t,n):(i=!t.$stable,ha(t,o)),r=t}else t&&(_a(e,t),r={default:1});if(i)for(const a in o)!Uo(a)&&r[a]==null&&delete o[a]},Oe=Mu;function uu(e){return fu(e)}function fu(e,t){const n=Ts();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:r,createText:a,createComment:c,setText:u,setElementText:l,parentNode:f,nextSibling:p,setScopeId:$=lt,insertStaticContent:y}=e,v=(d,m,M,O=null,k=null,E=null,F=void 0,G=null,D=!!m.dynamicChildren)=>{if(d===m)return;d&&!Kt(d,m)&&(O=Fe(d),be(d,k,E,!0),d=null),m.patchFlag===-2&&(D=!1,m.dynamicChildren=null);const{type:N,ref:V,shapeFlag:H}=m;switch(N){case Is:R(d,m,M,O);break;case Se:C(d,m,M,O);break;case ns:d==null&&g(m,M,O,F);break;case De:I(d,m,M,O,k,E,F,G,D);break;default:H&1?w(d,m,M,O,k,E,F,G,D):H&6?B(d,m,M,O,k,E,F,G,D):(H&64||H&128)&&N.process(d,m,M,O,k,E,F,G,D,Pe)}V!=null&&k?Sn(V,d&&d.ref,E,m||d,!m):V==null&&d&&d.ref!=null&&Sn(d.ref,null,E,d,!0)},R=(d,m,M,O)=>{if(d==null)s(m.el=a(m.children),M,O);else{const k=m.el=d.el;m.children!==d.children&&u(k,m.children)}},C=(d,m,M,O)=>{d==null?s(m.el=c(m.children||""),M,O):m.el=d.el},g=(d,m,M,O)=>{[d.el,d.anchor]=y(d.children,m,M,O,d.el,d.anchor)},h=({el:d,anchor:m},M,O)=>{let k;for(;d&&d!==m;)k=p(d),s(d,M,O),d=k;s(m,M,O)},_=({el:d,anchor:m})=>{let M;for(;d&&d!==m;)M=p(d),o(d),d=M;o(m)},w=(d,m,M,O,k,E,F,G,D)=>{m.type==="svg"?F="svg":m.type==="math"&&(F="mathml"),d==null?A(m,M,O,k,E,F,G,D):S(d,m,k,E,F,G,D)},A=(d,m,M,O,k,E,F,G)=>{let D,N;const{props:V,shapeFlag:H,transition:j,dirs:z}=d;if(D=d.el=r(d.type,E,V&&V.is,V),H&8?l(D,d.children):H&16&&L(d.children,D,null,O,k,js(d,E),F,G),z&&Ft(d,null,O,"created"),x(D,d,d.scopeId,F,O),V){for(const ue in V)ue!=="value"&&!Tn(ue)&&i(D,ue,null,V[ue],E,O);"value"in V&&i(D,"value",null,V.value,E),(N=V.onVnodeBeforeMount)&&it(N,O,d)}z&&Ft(d,null,O,"beforeMount");const te=pu(k,j);te&&j.beforeEnter(D),s(D,m,M),((N=V&&V.onVnodeMounted)||te||z)&&Oe(()=>{N&&it(N,O,d),te&&j.enter(D),z&&Ft(d,null,O,"mounted")},k)},x=(d,m,M,O,k)=>{if(M&&$(d,M),O)for(let E=0;E<O.length;E++)$(d,O[E]);if(k){let E=k.subTree;if(m===E||Ta(E.type)&&(E.ssContent===m||E.ssFallback===m)){const F=k.vnode;x(d,F,F.scopeId,F.slotScopeIds,k.parent)}}},L=(d,m,M,O,k,E,F,G,D=0)=>{for(let N=D;N<d.length;N++){const V=d[N]=G?At(d[N]):ct(d[N]);v(null,V,m,M,O,k,E,F,G)}},S=(d,m,M,O,k,E,F)=>{const G=m.el=d.el;let{patchFlag:D,dynamicChildren:N,dirs:V}=m;D|=d.patchFlag&16;const H=d.props||le,j=m.props||le;let z;if(M&&Ht(M,!1),(z=j.onVnodeBeforeUpdate)&&it(z,M,m,d),V&&Ft(m,d,M,"beforeUpdate"),M&&Ht(M,!0),(H.innerHTML&&j.innerHTML==null||H.textContent&&j.textContent==null)&&l(G,""),N?P(d.dynamicChildren,N,G,M,O,js(m,k),E):F||J(d,m,G,null,M,O,js(m,k),E,!1),D>0){if(D&16)U(G,H,j,M,k);else if(D&2&&H.class!==j.class&&i(G,"class",null,j.class,k),D&4&&i(G,"style",H.style,j.style,k),D&8){const te=m.dynamicProps;for(let ue=0;ue<te.length;ue++){const re=te[ue],Ie=H[re],Re=j[re];(Re!==Ie||re==="value")&&i(G,re,Ie,Re,k,M)}}D&1&&d.children!==m.children&&l(G,m.children)}else!F&&N==null&&U(G,H,j,M,k);((z=j.onVnodeUpdated)||V)&&Oe(()=>{z&&it(z,M,m,d),V&&Ft(m,d,M,"updated")},O)},P=(d,m,M,O,k,E,F)=>{for(let G=0;G<m.length;G++){const D=d[G],N=m[G],V=D.el&&(D.type===De||!Kt(D,N)||D.shapeFlag&198)?f(D.el):M;v(D,N,V,null,O,k,E,F,!0)}},U=(d,m,M,O,k)=>{if(m!==M){if(m!==le)for(const E in m)!Tn(E)&&!(E in M)&&i(d,E,m[E],null,k,O);for(const E in M){if(Tn(E))continue;const F=M[E],G=m[E];F!==G&&E!=="value"&&i(d,E,G,F,k,O)}"value"in M&&i(d,"value",m.value,M.value,k)}},I=(d,m,M,O,k,E,F,G,D)=>{const N=m.el=d?d.el:a(""),V=m.anchor=d?d.anchor:a("");let{patchFlag:H,dynamicChildren:j,slotScopeIds:z}=m;z&&(G=G?G.concat(z):z),d==null?(s(N,M,O),s(V,M,O),L(m.children||[],M,V,k,E,F,G,D)):H>0&&H&64&&j&&d.dynamicChildren?(P(d.dynamicChildren,j,M,k,E,F,G),(m.key!=null||k&&m===k.subTree)&&ga(d,m,!0)):J(d,m,M,V,k,E,F,G,D)},B=(d,m,M,O,k,E,F,G,D)=>{m.slotScopeIds=G,d==null?m.shapeFlag&512?k.ctx.activate(m,M,O,F,D):K(m,M,O,k,E,F,D):q(d,m,D)},K=(d,m,M,O,k,E,F)=>{const G=d.component=Ru(d,O,k);if(Cs(d)&&(G.ctx.renderer=Pe),Eu(G,!1,F),G.asyncDep){if(k&&k.registerDep(G,Z,F),!d.el){const D=G.subTree=_e(Se);C(null,D,m,M),d.placeholder=D.el}}else Z(G,d,m,M,k,E,F)},q=(d,m,M)=>{const O=m.component=d.component;if(vu(d,m,M))if(O.asyncDep&&!O.asyncResolved){X(O,m,M);return}else O.next=m,O.update();else m.el=d.el,O.vnode=m},Z=(d,m,M,O,k,E,F)=>{const G=()=>{if(d.isMounted){let{next:H,bu:j,u:z,parent:te,vnode:ue}=d;{const st=ba(d);if(st){H&&(H.el=ue.el,X(d,H,F)),st.asyncDep.then(()=>{d.isUnmounted||G()});return}}let re=H,Ie;Ht(d,!1),H?(H.el=ue.el,X(d,H,F)):H=ue,j&&Ns(j),(Ie=H.props&&H.props.onVnodeBeforeUpdate)&&it(Ie,te,H,ue),Ht(d,!0);const Re=_i(d),nt=d.subTree;d.subTree=Re,v(nt,Re,f(nt.el),Fe(nt),d,k,E),H.el=Re.el,re===null&&Tu(d,Re.el),z&&Oe(z,k),(Ie=H.props&&H.props.onVnodeUpdated)&&Oe(()=>it(Ie,te,H,ue),k)}else{let H;const{el:j,props:z}=m,{bm:te,m:ue,parent:re,root:Ie,type:Re}=d,nt=Ln(m);Ht(d,!1),te&&Ns(te),!nt&&(H=z&&z.onVnodeBeforeMount)&&it(H,re,m),Ht(d,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Re);const st=d.subTree=_i(d);v(null,st,M,O,d,k,E),m.el=st.el}if(ue&&Oe(ue,k),!nt&&(H=z&&z.onVnodeMounted)){const st=m;Oe(()=>it(H,re,st),k)}(m.shapeFlag&256||re&&Ln(re.vnode)&&re.vnode.shapeFlag&256)&&d.a&&Oe(d.a,k),d.isMounted=!0,m=M=O=null}};d.scope.on();const D=d.effect=new Ir(G);d.scope.off();const N=d.update=D.run.bind(D),V=d.job=D.runIfDirty.bind(D);V.i=d,V.id=d.uid,D.scheduler=()=>Ho(V),Ht(d,!0),N()},X=(d,m,M)=>{m.component=d;const O=d.vnode.props;d.vnode=m,d.next=null,iu(d,m.props,O,M),lu(d,m.children,M),yt(),ai(d),wt()},J=(d,m,M,O,k,E,F,G,D=!1)=>{const N=d&&d.children,V=d?d.shapeFlag:0,H=m.children,{patchFlag:j,shapeFlag:z}=m;if(j>0){if(j&128){Ae(N,H,M,O,k,E,F,G,D);return}else if(j&256){$e(N,H,M,O,k,E,F,G,D);return}}z&8?(V&16&&ve(N,k,E),H!==N&&l(M,H)):V&16?z&16?Ae(N,H,M,O,k,E,F,G,D):ve(N,k,E,!0):(V&8&&l(M,""),z&16&&L(H,M,O,k,E,F,G,D))},$e=(d,m,M,O,k,E,F,G,D)=>{d=d||en,m=m||en;const N=d.length,V=m.length,H=Math.min(N,V);let j;for(j=0;j<H;j++){const z=m[j]=D?At(m[j]):ct(m[j]);v(d[j],z,M,null,k,E,F,G,D)}N>V?ve(d,k,E,!0,!1,H):L(m,M,O,k,E,F,G,D,H)},Ae=(d,m,M,O,k,E,F,G,D)=>{let N=0;const V=m.length;let H=d.length-1,j=V-1;for(;N<=H&&N<=j;){const z=d[N],te=m[N]=D?At(m[N]):ct(m[N]);if(Kt(z,te))v(z,te,M,null,k,E,F,G,D);else break;N++}for(;N<=H&&N<=j;){const z=d[H],te=m[j]=D?At(m[j]):ct(m[j]);if(Kt(z,te))v(z,te,M,null,k,E,F,G,D);else break;H--,j--}if(N>H){if(N<=j){const z=j+1,te=z<V?m[z].el:O;for(;N<=j;)v(null,m[N]=D?At(m[N]):ct(m[N]),M,te,k,E,F,G,D),N++}}else if(N>j)for(;N<=H;)be(d[N],k,E,!0),N++;else{const z=N,te=N,ue=new Map;for(N=te;N<=j;N++){const Ne=m[N]=D?At(m[N]):ct(m[N]);Ne.key!=null&&ue.set(Ne.key,N)}let re,Ie=0;const Re=j-te+1;let nt=!1,st=0;const fn=new Array(Re);for(N=0;N<Re;N++)fn[N]=0;for(N=z;N<=H;N++){const Ne=d[N];if(Ie>=Re){be(Ne,k,E,!0);continue}let ot;if(Ne.key!=null)ot=ue.get(Ne.key);else for(re=te;re<=j;re++)if(fn[re-te]===0&&Kt(Ne,m[re])){ot=re;break}ot===void 0?be(Ne,k,E,!0):(fn[ot-te]=N+1,ot>=st?st=ot:nt=!0,v(Ne,m[ot],M,null,k,E,F,G,D),Ie++)}const Jo=nt?du(fn):en;for(re=Jo.length-1,N=Re-1;N>=0;N--){const Ne=te+N,ot=m[Ne],Yo=m[Ne+1],Zo=Ne+1<V?Yo.el||Yo.placeholder:O;fn[N]===0?v(null,ot,M,Zo,k,E,F,G,D):nt&&(re<0||N!==Jo[re]?ge(ot,M,Zo,2):re--)}}},ge=(d,m,M,O,k=null)=>{const{el:E,type:F,transition:G,children:D,shapeFlag:N}=d;if(N&6){ge(d.component.subTree,m,M,O);return}if(N&128){d.suspense.move(m,M,O);return}if(N&64){F.move(d,m,M,Pe);return}if(F===De){s(E,m,M);for(let H=0;H<D.length;H++)ge(D[H],m,M,O);s(d.anchor,m,M);return}if(F===ns){h(d,m,M);return}if(O!==2&&N&1&&G)if(O===0)G.beforeEnter(E),s(E,m,M),Oe(()=>G.enter(E),k);else{const{leave:H,delayLeave:j,afterLeave:z}=G,te=()=>{d.ctx.isUnmounted?o(E):s(E,m,M)},ue=()=>{E._isLeaving&&E[ht](!0),H(E,()=>{te(),z&&z()})};j?j(E,te,ue):ue()}else s(E,m,M)},be=(d,m,M,O=!1,k=!1)=>{const{type:E,props:F,ref:G,children:D,dynamicChildren:N,shapeFlag:V,patchFlag:H,dirs:j,cacheIndex:z}=d;if(H===-2&&(k=!1),G!=null&&(yt(),Sn(G,null,M,d,!0),wt()),z!=null&&(m.renderCache[z]=void 0),V&256){m.ctx.deactivate(d);return}const te=V&1&&j,ue=!Ln(d);let re;if(ue&&(re=F&&F.onVnodeBeforeUnmount)&&it(re,m,d),V&6)qe(d.component,M,O);else{if(V&128){d.suspense.unmount(M,O);return}te&&Ft(d,null,m,"beforeUnmount"),V&64?d.type.remove(d,m,M,Pe,O):N&&!N.hasOnce&&(E!==De||H>0&&H&64)?ve(N,m,M,!1,!0):(E===De&&H&384||!k&&V&16)&&ve(D,m,M),O&&et(d)}(ue&&(re=F&&F.onVnodeUnmounted)||te)&&Oe(()=>{re&&it(re,m,d),te&&Ft(d,null,m,"unmounted")},M)},et=d=>{const{type:m,el:M,anchor:O,transition:k}=d;if(m===De){We(M,O);return}if(m===ns){_(d);return}const E=()=>{o(M),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(d.shapeFlag&1&&k&&!k.persisted){const{leave:F,delayLeave:G}=k,D=()=>F(M,E);G?G(d.el,E,D):D()}else E()},We=(d,m)=>{let M;for(;d!==m;)M=p(d),o(d),d=M;o(m)},qe=(d,m,M)=>{const{bum:O,scope:k,job:E,subTree:F,um:G,m:D,a:N}=d;hi(D),hi(N),O&&Ns(O),k.stop(),E&&(E.flags|=8,be(F,d,m,M)),G&&Oe(G,m),Oe(()=>{d.isUnmounted=!0},m)},ve=(d,m,M,O=!1,k=!1,E=0)=>{for(let F=E;F<d.length;F++)be(d[F],m,M,O,k)},Fe=d=>{if(d.shapeFlag&6)return Fe(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const m=p(d.anchor||d.el),M=m&&m[Pl];return M?p(M):m};let ze=!1;const tt=(d,m,M)=>{d==null?m._vnode&&be(m._vnode,null,null,!0):v(m._vnode||null,d,m,null,null,null,M),m._vnode=d,ze||(ze=!0,ai(),qr(),ze=!1)},Pe={p:v,um:be,m:ge,r:et,mt:K,mc:L,pc:J,pbc:P,n:Fe,o:e};return{render:tt,hydrate:void 0,createApp:nu(tt)}}function js({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ht({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ga(e,t,n=!1){const s=e.children,o=t.children;if(W(s)&&W(o))for(let i=0;i<s.length;i++){const r=s[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=At(o[i]),a.el=r.el),!n&&a.patchFlag!==-2&&ga(r,a)),a.type===Is&&a.patchFlag!==-1&&(a.el=r.el),a.type===Se&&!a.el&&(a.el=r.el)}}function du(e){const t=e.slice(),n=[0];let s,o,i,r,a;const c=e.length;for(s=0;s<c;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)a=i+r>>1,e[n[a]]<u?i=a+1:r=a;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function ba(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ba(t)}function hi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $u=Symbol.for("v-scx"),hu=()=>es($u);function ts(e,t,n){return ya(e,t,n)}function ya(e,t,n=le){const{immediate:s,deep:o,flush:i,once:r}=n,a=we({},n),c=t&&s||!t&&i!=="post";let u;if(Hn){if(i==="sync"){const $=hu();u=$.__watcherHandles||($.__watcherHandles=[])}else if(!c){const $=()=>{};return $.stop=lt,$.resume=lt,$.pause=lt,$}}const l=Le;a.call=($,y,v)=>Ze($,l,y,v);let f=!1;i==="post"?a.scheduler=$=>{Oe($,l&&l.suspense)}:i!=="sync"&&(f=!0,a.scheduler=($,y)=>{y?$():Ho($)}),a.augmentJob=$=>{t&&($.flags|=4),f&&($.flags|=2,l&&($.id=l.uid,$.i=l))};const p=Il(e,t,a);return Hn&&(u?u.push(p):c&&p()),p}function _u(e,t,n){const s=this.proxy,o=he(e)?e.includes(".")?wa(s,e):()=>s[e]:e.bind(s,s);let i;Y(t)?i=t:(i=t.handler,n=t);const r=Kn(this),a=ya(o,i.bind(s),n);return r(),a}function wa(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Pt(t)}Modifiers`]||e[`${zt(t)}Modifiers`];function gu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||le;let o=n;const i=t.startsWith("update:"),r=i&&mu(s,t.slice(7));r&&(r.trim&&(o=n.map(l=>he(l)?l.trim():l)),r.number&&(o=n.map(zc)));let a,c=s[a=Ps(t)]||s[a=Ps(Pt(t))];!c&&i&&(c=s[a=Ps(zt(t))]),c&&Ze(c,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ze(u,e,6,o)}}const bu=new WeakMap;function va(e,t,n=!1){const s=n?bu:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let r={},a=!1;if(!Y(e)){const c=u=>{const l=va(u,t,!0);l&&(a=!0,we(r,l))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(de(e)&&s.set(e,null),null):(W(i)?i.forEach(c=>r[c]=null):we(r,i),de(e)&&s.set(e,r),r)}function As(e,t){return!e||!ys(t)?!1:(t=t.slice(2).replace(/Once$/,""),ie(e,t[0].toLowerCase()+t.slice(1))||ie(e,zt(t))||ie(e,t))}function _i(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:a,emit:c,render:u,renderCache:l,props:f,data:p,setupState:$,ctx:y,inheritAttrs:v}=e,R=ds(e);let C,g;try{if(n.shapeFlag&4){const _=o||s,w=_;C=ct(u.call(w,_,l,f,$,p,y)),g=a}else{const _=t;C=ct(_.length>1?_(f,{attrs:a,slots:r,emit:c}):_(f,null)),g=t.props?a:yu(a)}}catch(_){In.length=0,xs(_,e,1),C=_e(Se)}let h=C;if(g&&v!==!1){const _=Object.keys(g),{shapeFlag:w}=h;_.length&&w&7&&(i&&_.some(Ao)&&(g=wu(g,i)),h=Dt(h,g,!1,!0))}return n.dirs&&(h=Dt(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(n.dirs):n.dirs),n.transition&&Gn(h,n.transition),C=h,ds(R),C}const yu=e=>{let t;for(const n in e)(n==="class"||n==="style"||ys(n))&&((t||(t={}))[n]=e[n]);return t},wu=(e,t)=>{const n={};for(const s in e)(!Ao(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function vu(e,t,n){const{props:s,children:o,component:i}=e,{props:r,children:a,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?mi(s,r,u):!!r;if(c&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const p=l[f];if(r[p]!==s[p]&&!As(u,p))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===r?!1:s?r?mi(s,r,u):!0:!!r;return!1}function mi(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!As(n,i))return!0}return!1}function Tu({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ta=e=>e.__isSuspense;function Mu(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):kl(e)}const De=Symbol.for("v-fgt"),Is=Symbol.for("v-txt"),Se=Symbol.for("v-cmt"),ns=Symbol.for("v-stc"),In=[];let Ge=null;function ne(e=!1){In.push(Ge=e?null:[])}function xu(){In.pop(),Ge=In[In.length-1]||null}let Fn=1;function _s(e,t=!1){Fn+=e,e<0&&Ge&&t&&(Ge.hasOnce=!0)}function Ma(e){return e.dynamicChildren=Fn>0?Ge||en:null,xu(),Fn>0&&Ge&&Ge.push(e),e}function ae(e,t,n,s,o,i){return Ma(T(e,t,n,s,o,i,!0))}function jo(e,t,n,s,o){return Ma(_e(e,t,n,s,o,!0))}function ms(e){return e?e.__v_isVNode===!0:!1}function Kt(e,t){return e.type===t.type&&e.key===t.key}const xa=({key:e})=>e??null,ss=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?he(e)||Me(e)||Y(e)?{i:je,r:e,k:t,f:!!n}:e:null);function T(e,t=null,n=null,s=0,o=null,i=e===De?0:1,r=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xa(t),ref:t&&ss(t),scopeId:Xr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:je};return a?(Vo(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=he(n)?8:16),Fn>0&&!r&&Ge&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ge.push(c),c}const _e=Cu;function Cu(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===zl)&&(e=Se),ms(e)){const a=Dt(e,t,!0);return n&&Vo(a,n),Fn>0&&!i&&Ge&&(a.shapeFlag&6?Ge[Ge.indexOf(e)]=a:Ge.push(a)),a.patchFlag=-2,a}if(Ou(e)&&(e=e.__vccOpts),t){t=Su(t);let{class:a,style:c}=t;a&&!he(a)&&(t.class=Nt(a)),de(c)&&(Fo(c)&&!W(c)&&(c=we({},c)),t.style=It(c))}const r=he(e)?1:Ta(e)?128:Zr(e)?64:de(e)?4:Y(e)?2:0;return T(e,t,n,s,o,r,i,!0)}function Su(e){return e?Fo(e)||pa(e)?we({},e):e:null}function Dt(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:a,transition:c}=e,u=t?Lu(o||{},t):o,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&xa(u),ref:t&&t.ref?n&&i?W(i)?i.concat(ss(t)):[i,ss(t)]:ss(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==De?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dt(e.ssContent),ssFallback:e.ssFallback&&Dt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&Gn(l,c.clone(l)),l}function os(e=" ",t=0){return _e(Is,null,e,t)}function Vs(e,t){const n=_e(ns,null,e);return n.staticCount=t,n}function kt(e="",t=!1){return t?(ne(),jo(Se,null,e)):_e(Se,null,e)}function ct(e){return e==null||typeof e=="boolean"?_e(Se):W(e)?_e(De,null,e.slice()):ms(e)?At(e):_e(Is,null,String(e))}function At(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dt(e)}function Vo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(W(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Vo(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!pa(t)?t._ctx=je:o===3&&je&&(je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Y(t)?(t={default:t,_ctx:je},n=32):(t=String(t),s&64?(n=16,t=[os(t)]):n=8);e.children=t,e.shapeFlag|=n}function Lu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Nt([t.class,s.class]));else if(o==="style")t.style=It([t.style,s.style]);else if(ys(o)){const i=t[o],r=s[o];r&&i!==r&&!(W(i)&&i.includes(r))&&(t[o]=i?[].concat(i,r):r)}else o!==""&&(t[o]=s[o])}return t}function it(e,t,n,s=null){Ze(e,t,7,[n,s])}const Au=la();let Iu=0;function Ru(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Au,i={uid:Iu++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$a(s,o),emitsOptions:va(s,o),emit:null,emitted:null,propsDefaults:le,inheritAttrs:s.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=gu.bind(null,i),e.ce&&e.ce(i),i}let Le=null;const Ca=()=>Le||je;let gs,_o;{const e=Ts(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};gs=t("__VUE_INSTANCE_SETTERS__",n=>Le=n),_o=t("__VUE_SSR_SETTERS__",n=>Hn=n)}const Kn=e=>{const t=Le;return gs(e),e.scope.on(),()=>{e.scope.off(),gs(t)}},gi=()=>{Le&&Le.scope.off(),gs(null)};function Sa(e){return e.vnode.shapeFlag&4}let Hn=!1;function Eu(e,t=!1,n=!1){t&&_o(t);const{props:s,children:o}=e.vnode,i=Sa(e);ou(e,s,i,t),cu(e,o,n||t);const r=i?ku(e,t):void 0;return t&&_o(!1),r}function ku(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Xl);const{setup:s}=n;if(s){yt();const o=e.setupContext=s.length>1?Nu(e):null,i=Kn(e),r=Vn(s,e,0,[e.props,o]),a=vr(r);if(wt(),i(),(a||e.sp)&&!Ln(e)&&oa(e),a){if(r.then(gi,gi),t)return r.then(c=>{bi(e,c)}).catch(c=>{xs(c,e,0)});e.asyncDep=r}else bi(e,r)}else La(e)}function bi(e,t,n){Y(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:de(t)&&(e.setupState=Vr(t)),La(e)}function La(e,t,n){const s=e.type;e.render||(e.render=s.render||lt);{const o=Kn(e);yt();try{Jl(e)}finally{wt(),o()}}}const Pu={get(e,t){return Te(e,"get",""),e[t]}};function Nu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Pu),slots:e.slots,emit:e.emit,expose:t}}function Rs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Vr(Tl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in An)return An[n](e)},has(t,n){return n in t||n in An}})):e.proxy}function Ou(e){return Y(e)&&"__vccOpts"in e}const Du=(e,t)=>Ll(e,t,Hn);function Gu(e,t,n){try{_s(-1);const s=arguments.length;return s===2?de(t)&&!W(t)?ms(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ms(n)&&(n=[n]),_e(e,t,n))}finally{_s(1)}}const Fu="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mo;const yi=typeof window<"u"&&window.trustedTypes;if(yi)try{mo=yi.createPolicy("vue",{createHTML:e=>e})}catch{}const Aa=mo?e=>mo.createHTML(e):e=>e,Hu="http://www.w3.org/2000/svg",Uu="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,wi=$t&&$t.createElement("template"),Bu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?$t.createElementNS(Hu,e):t==="mathml"?$t.createElementNS(Uu,e):n?$t.createElement(e,{is:n}):$t.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const r=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{wi.innerHTML=Aa(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=wi.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},xt="transition",dn="animation",Un=Symbol("_vtc"),Ia={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ju=we({},Qr,Ia),Vu=e=>(e.displayName="Transition",e.props=ju,e),Ku=Vu((e,{slots:t})=>Gu(Dl,Wu(e),t)),Ut=(e,t=[])=>{W(e)?e.forEach(n=>n(...t)):e&&e(...t)},vi=e=>e?W(e)?e.some(t=>t.length>1):e.length>1:!1;function Wu(e){const t={};for(const I in e)I in Ia||(t[I]=e[I]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=r,appearToClass:l=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:$=`${n}-leave-to`}=e,y=qu(o),v=y&&y[0],R=y&&y[1],{onBeforeEnter:C,onEnter:g,onEnterCancelled:h,onLeave:_,onLeaveCancelled:w,onBeforeAppear:A=C,onAppear:x=g,onAppearCancelled:L=h}=t,S=(I,B,K,q)=>{I._enterCancelled=q,Bt(I,B?l:a),Bt(I,B?u:r),K&&K()},P=(I,B)=>{I._isLeaving=!1,Bt(I,f),Bt(I,$),Bt(I,p),B&&B()},U=I=>(B,K)=>{const q=I?x:g,Z=()=>S(B,I,K);Ut(q,[B,Z]),Ti(()=>{Bt(B,I?c:i),dt(B,I?l:a),vi(q)||Mi(B,s,v,Z)})};return we(t,{onBeforeEnter(I){Ut(C,[I]),dt(I,i),dt(I,r)},onBeforeAppear(I){Ut(A,[I]),dt(I,c),dt(I,u)},onEnter:U(!1),onAppear:U(!0),onLeave(I,B){I._isLeaving=!0;const K=()=>P(I,B);dt(I,f),I._enterCancelled?(dt(I,p),Si(I)):(Si(I),dt(I,p)),Ti(()=>{I._isLeaving&&(Bt(I,f),dt(I,$),vi(_)||Mi(I,s,R,K))}),Ut(_,[I,K])},onEnterCancelled(I){S(I,!1,void 0,!0),Ut(h,[I])},onAppearCancelled(I){S(I,!0,void 0,!0),Ut(L,[I])},onLeaveCancelled(I){P(I),Ut(w,[I])}})}function qu(e){if(e==null)return null;if(de(e))return[Ks(e.enter),Ks(e.leave)];{const t=Ks(e);return[t,t]}}function Ks(e){return Xc(e)}function dt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Un]||(e[Un]=new Set)).add(t)}function Bt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Un];n&&(n.delete(t),n.size||(e[Un]=void 0))}function Ti(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let zu=0;function Mi(e,t,n,s){const o=e._endId=++zu,i=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:r,timeout:a,propCount:c}=Xu(e,t);if(!r)return s();const u=r+"end";let l=0;const f=()=>{e.removeEventListener(u,p),i()},p=$=>{$.target===e&&++l>=c&&f()};setTimeout(()=>{l<c&&f()},a+1),e.addEventListener(u,p)}function Xu(e,t){const n=window.getComputedStyle(e),s=y=>(n[y]||"").split(", "),o=s(`${xt}Delay`),i=s(`${xt}Duration`),r=xi(o,i),a=s(`${dn}Delay`),c=s(`${dn}Duration`),u=xi(a,c);let l=null,f=0,p=0;t===xt?r>0&&(l=xt,f=r,p=i.length):t===dn?u>0&&(l=dn,f=u,p=c.length):(f=Math.max(r,u),l=f>0?r>u?xt:dn:null,p=l?l===xt?i.length:c.length:0);const $=l===xt&&/\b(?:transform|all)(?:,|$)/.test(s(`${xt}Property`).toString());return{type:l,timeout:f,propCount:p,hasTransform:$}}function xi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ci(n)+Ci(e[s])))}function Ci(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Si(e){return(e?e.ownerDocument:document).body.offsetHeight}function Ju(e,t,n){const s=e[Un];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const bs=Symbol("_vod"),Ra=Symbol("_vsh"),Ea={name:"show",beforeMount(e,{value:t},{transition:n}){e[bs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$n(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),$n(e,!0),s.enter(e)):s.leave(e,()=>{$n(e,!1)}):$n(e,t))},beforeUnmount(e,{value:t}){$n(e,t)}};function $n(e,t){e.style.display=t?e[bs]:"none",e[Ra]=!t}const Yu=Symbol(""),Zu=/(?:^|;)\s*display\s*:/;function Qu(e,t,n){const s=e.style,o=he(n);let i=!1;if(n&&!o){if(t)if(he(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&is(s,a,"")}else for(const r in t)n[r]==null&&is(s,r,"");for(const r in n)r==="display"&&(i=!0),is(s,r,n[r])}else if(o){if(t!==n){const r=s[Yu];r&&(n+=";"+r),s.cssText=n,i=Zu.test(n)}}else t&&e.removeAttribute("style");bs in e&&(e[bs]=i?s.display:"",e[Ra]&&(s.display="none"))}const Li=/\s*!important$/;function is(e,t,n){if(W(n))n.forEach(s=>is(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ef(e,t);Li.test(n)?e.setProperty(zt(s),n.replace(Li,""),"important"):e[s]=n}}const Ai=["Webkit","Moz","ms"],Ws={};function ef(e,t){const n=Ws[t];if(n)return n;let s=Pt(t);if(s!=="filter"&&s in e)return Ws[t]=s;s=xr(s);for(let o=0;o<Ai.length;o++){const i=Ai[o]+s;if(i in e)return Ws[t]=i}return t}const Ii="http://www.w3.org/1999/xlink";function Ri(e,t,n,s,o,i=tl(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ii,t.slice(6,t.length)):e.setAttributeNS(Ii,t,n):n==null||i&&!Sr(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Gt(n)?String(n):n)}function Ei(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Aa(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Sr(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(o||t)}function tf(e,t,n,s){e.addEventListener(t,n,s)}function nf(e,t,n,s){e.removeEventListener(t,n,s)}const ki=Symbol("_vei");function sf(e,t,n,s,o=null){const i=e[ki]||(e[ki]={}),r=i[t];if(s&&r)r.value=s;else{const[a,c]=of(t);if(s){const u=i[t]=cf(s,o);tf(e,a,u,c)}else r&&(nf(e,a,r,c),i[t]=void 0)}}const Pi=/(?:Once|Passive|Capture)$/;function of(e){let t;if(Pi.test(e)){t={};let s;for(;s=e.match(Pi);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):zt(e.slice(2)),t]}let qs=0;const rf=Promise.resolve(),af=()=>qs||(rf.then(()=>qs=0),qs=Date.now());function cf(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ze(lf(s,n.value),t,5,[s])};return n.value=e,n.attached=af(),n}function lf(e,t){if(W(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,uf=(e,t,n,s,o,i)=>{const r=o==="svg";t==="class"?Ju(e,s,r):t==="style"?Qu(e,n,s):ys(t)?Ao(t)||sf(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ff(e,t,s,r))?(Ei(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ri(e,t,s,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!he(s))?Ei(e,Pt(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ri(e,t,s,r))};function ff(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ni(t)&&Y(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ni(t)&&he(n)?!1:t in e}const pf=["ctrl","shift","alt","meta"],df={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>pf.some(n=>e[`${n}Key`]&&!t.includes(n))},zs=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let r=0;r<t.length;r++){const a=df[t[r]];if(a&&a(o,t))return}return e(o,...i)})},$f=we({patchProp:uf},Bu);let Oi;function hf(){return Oi||(Oi=uu($f))}const Di=(...e)=>{const t=hf().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=mf(s);if(!o)return;const i=t._component;!Y(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,_f(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function _f(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function mf(e){return he(e)?document.querySelector(e):e}const gf={maxRetries:3,retryDelay:1e3,timeout:1e4},rn={enabled:!0,maxCacheSize:50*1024*1024,cachePrefix:"mgpic_",version:"1.0.0",loadInterval:50,batchSize:3};class bf{constructor(){this.cache=new Map,this.totalSize=0}isSupported(){return"caches"in window}getCacheName(){return`${rn.cachePrefix}${rn.version}`}async isCached(t){if(!this.isSupported())return!1;try{return await(await caches.open(this.getCacheName())).match(t)!==void 0}catch(n){return console.warn("检查缓存失败:",n.message),!1}}async cacheResource(t,n){if(!this.isSupported())return!1;try{const s=await caches.open(this.getCacheName());if(await s.match(t))return console.log(`资源已存在于缓存，跳过: ${t}`),!0;await s.put(t,n.clone());const i=n.headers.get("content-length");return i&&(this.totalSize+=parseInt(i)),console.log(`资源已缓存: ${t}`),!0}catch(s){return console.warn("缓存资源失败:",s.message),!1}}async getCachedResource(t){if(!this.isSupported())return null;try{return await(await caches.open(this.getCacheName())).match(t)}catch(n){return console.warn("获取缓存资源失败:",n.message),null}}async cleanupCache(){if(this.isSupported())try{const t=await caches.keys(),n=this.getCacheName();for(const s of t)s.startsWith(rn.cachePrefix)&&s!==n&&(await caches.delete(s),console.log(`清理过期缓存: ${s}`))}catch(t){console.warn("清理缓存失败:",t.message)}}}const Rt=new bf;let Jn=null;function yf(){return Jn||(console.log("使用默认R2 URL"),Jn="https://pub-6f9181bda40946ea92b5e87fe84e27d4.r2.dev",Jn)}function ce(e){const t=yf(),n=e.startsWith("/")?e.slice(1):e;return`${t}/${n}`}async function go(e=null){console.log("开始预缓存所有游戏资源..."),await Rt.cleanupCache();const t=["logo.glb","img/warehouse/goods/2ec8cf838cb33e421005058d17ff555b82cebf83.webp","img/warehouse/goods/04681f25cc1debaf94214a7e09f44efbc7eb2963.webp","img/warehouse/goods/1331f319af1e23fc301b7253ca5dca71e9c19e0f.webp","img/warehouse/goods/ea74bce606c59ac4ab84ab117375c0de813cea49.webp","img/warehouse/character/a93e15a01fcbf3cfb088956aedc63e86b94d4019.webp","img/warehouse/character/b2207275b74545d9fae68b985b2998de3672e0af.webp","img/warehouse/equip/3579e09f8cf4063c7d94f9f1d1a6db6fe746923f.webp","img/warehouse/skill/9ae9fd092931138c37c47a30f463011e7f4301d8.webp","img/warehouse/skill/7b7cb41dbb1b9dae0bc4e7d030386f6d7d2e7da0.webp","img/hall/start_game.webp","img/hall/warehouse.webp","img/hall/wiki.webp","img/hall/tutorial.webp"],n=rn.batchSize,s=rn.loadInterval,o=t.length;let i=0;e&&e(0,o,0);for(let r=0;r<t.length;r+=n){const a=t.slice(r,r+n);console.log(`处理批次 ${Math.floor(r/n)+1}/${Math.ceil(t.length/n)}: ${a.length} 个资源`);const c=a.map(async(v,R)=>{const C=ce(v);try{if(await Rt.isCached(C))return console.log(`资源已在Cache Storage中，跳过: ${v}`),{success:!0,path:v,cached:!0,source:"cache"};const h=new AbortController,_=setTimeout(()=>h.abort(),gf.timeout),w=await fetch(C,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:h.signal});if(clearTimeout(_),w.ok){const A=w.headers.get("x-cache")||w.headers.get("cf-cache-status")||w.type==="basic"&&!w.redirected;return Rt.isSupported()&&await Rt.cacheResource(C,w),console.log(`资源预缓存成功: ${v}${A?" (使用浏览器缓存)":""}`),{success:!0,path:v,cached:!1,fromBrowserCache:!!A}}else throw new Error(`HTTP ${w.status}: ${w.statusText}`)}catch(g){return console.warn(`资源预缓存失败: ${v}`,g.message),{success:!1,path:v,error:g.message}}}),u=await Promise.all(c);i+=a.length;const l=Math.round(i/o*100);e&&e(i,o,l);const f=u.filter(v=>v.success).length,p=u.filter(v=>v.cached).length,$=u.filter(v=>v.fromBrowserCache).length,y=u.filter(v=>!v.success).length;console.log(`批次完成: 成功 ${f}, Cache Storage已有 ${p}, 浏览器缓存 ${$}, 失败 ${y}`),r+n<t.length&&(console.log(`等待 ${s}ms 后处理下一批...`),await new Promise(v=>setTimeout(v,s)))}console.log("所有资源预缓存完成")}async function wf(){if(!Rt.isSupported())return{supported:!1,message:"浏览器不支持缓存API"};try{const t=await(await caches.open(Rt.getCacheName())).keys();return{supported:!0,cacheName:Rt.getCacheName(),resourceCount:t.length,totalSize:Rt.totalSize,maxSize:rn.maxCacheSize}}catch(e){return{supported:!0,error:e.message}}}const Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},vf={class:"menu"},Tf={__name:"Hall",emits:["startGame","openWarehouse","openTutorial","openEncyclopedia"],setup(e,{emit:t}){const n=t;function s(){n("startGame")}function o(){n("openWarehouse")}function i(){n("openTutorial")}function r(){n("openEncyclopedia")}const a=Q(ce("img/hall/start_game.webp")),c=Q(ce("img/hall/warehouse.webp")),u=Q(ce("img/hall/wiki.webp")),l=Q(ce("img/hall/tutorial.webp"));return qt(async()=>{try{if(window.getCacheStatus){const p=await window.getCacheStatus();console.log("缓存状态:",p)}const f=[a.value,c.value,u.value,l.value];for(let p=0;p<f.length;p++){const $=f[p];try{const y=new Image;y.crossOrigin="anonymous",y.src=$,await new Promise((v,R)=>{y.onload=v,y.onerror=R}),console.log("背景图片预加载成功:",$),p<f.length-1&&await new Promise(v=>setTimeout(v,100))}catch(y){console.warn("背景图片预加载失败:",$,y.message)}}}catch(f){console.warn("背景图片预加载过程中出现错误:",f.message)}}),(f,p)=>(ne(),ae("div",vf,[T("button",{class:"tile tile--start",style:It({backgroundImage:`url('${a.value}')`}),onClick:s},[...p[0]||(p[0]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--bottom"},[T("div",{class:"tile__title"},"开始游戏"),T("div",{class:"tile__subtitle"},"Start Game")],-1)])],4),T("button",{class:"tile tile--warehouse",style:It({backgroundImage:`url('${c.value}')`}),onClick:o},[...p[1]||(p[1]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--top"},[T("div",{class:"tile__title"},"铜偶仓库"),T("div",{class:"tile__subtitle"},"Copper Warehouse")],-1)])],4),T("button",{class:"tile tile--wiki",style:It({backgroundImage:`url('${u.value}')`}),onClick:r},[...p[2]||(p[2]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--bottom"},[T("div",{class:"tile__title"},"游戏百科"),T("div",{class:"tile__subtitle"},"Game Wiki")],-1)])],4),T("button",{class:"tile tile--tutorial",style:It({backgroundImage:`url('${l.value}')`}),onClick:i},[...p[3]||(p[3]=[T("div",{class:"tile__mask"},null,-1),T("div",{class:"tile__caption tile__caption--top"},[T("div",{class:"tile__title"},"新手教程"),T("div",{class:"tile__subtitle"},"Tutorial")],-1)])],4)]))}},Mf=Xt(Tf,[["__scopeId","data-v-10651f23"]]);class xf extends Error{}function ke(){throw new xf}const Cf={$tag:1},Sf={$tag:2};function Ko(e,t){this._0=e,this._1=t}Ko.prototype.$tag=3;function me(e){this._0=e}me.prototype.$tag=4;function ka(e){this._0=e}ka.prototype.$tag=5;function Ke(e){this._0=e}Ke.prototype.$tag=6;function b(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}function Tt(e,t){const n=new Array(e);return n.fill(t),n}const Pa=(e,t)=>{e.push(t)},Lf=function e(){return e._exports?e._exports:e._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},Af=(e,t)=>{const n=e.hi>>>0,s=t.hi>>>0;if(n<s)return-1;if(n>s)return 1;const o=e.lo>>>0,i=t.lo>>>0;return o<i?-1:o>i?1:0},If=e=>e.slice(0);function un(e,t,n){this._0=e,this._1=t,this._2=n}un.prototype.$tag=0;function an(e,t,n){this._0=e,this._1=t,this._2=n}an.prototype.$tag=1;function Bn(e){this._0=e}Bn.prototype.$tag=2;const cn={$tag:0};function jn(e,t){this._0=e,this._1=t}jn.prototype.$tag=1;function Wo(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}const Rf=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]),Xs={hi:0,lo:-1},Gi={hi:0,lo:0},Fi={hi:0,lo:1},Ef="阿磐",kf="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Pf="/assets/copper/iron_wall/rocky/rocky.webp",Nf="/assets/copper/iron_wall/rocky/rocky.glb",Of="卫斯理",Df="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",Gf="/assets/copper/iron_wall/wesley/wesley.webp",Ff="/assets/copper/iron_wall/wesley/wesley.glb",Hf="大贝尔",Uf="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",Bf="/assets/copper/iron_wall/bell/bell.webp",jf="/assets/copper/iron_wall/bell/bell.glb",Vf="团团",Kf="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",Wf="/assets/copper/iron_wall/tumble/tumble.webp",qf="/assets/copper/iron_wall/tumble/tumble.glb",zf="铿铿",Xf="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",Jf="/assets/copper/iron_wall/chief/chief.webp",Yf="/assets/copper/iron_wall/chief/chief.glb",Zf="咝咝",Qf="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",ep="/assets/copper/arcanist/spark/spark.webp",tp="/assets/copper/arcanist/spark/spark.glb",np="拉斐尔",sp="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",op="/assets/copper/arcanist/syrup/syrup.webp",ip="/assets/copper/arcanist/syrup/syrup.glb",rp="波普尔",ap="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",cp="/assets/copper/arcanist/bubble/bubble.webp",lp="/assets/copper/arcanist/bubble/bubble.glb",up="菲尼",fp="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",pp="/assets/copper/arcanist/glimmer/glimmer.webp",dp="/assets/copper/arcanist/glimmer/glimmer.glb",$p="卷卷",hp="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",_p="/assets/copper/arcanist/turner/turner.webp",mp="/assets/copper/arcanist/turner/turner.glb",gp="絮絮",bp="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",yp="/assets/copper/resonator/murmur/murmur.webp",wp="/assets/copper/resonator/murmur/murmur.glb",vp="啾啾",Tp="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",Mp="/assets/copper/resonator/melody/melody.webp",xp="/assets/copper/resonator/melody/melody.glb",Cp="库克",Sp="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",Lp="/assets/copper/resonator/clawsteak/clawsteak.webp",Ap="/assets/copper/resonator/clawsteak/clawsteak.glb",Ip="鼹鼠的地洞",Rp="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",Ep="/assets/copper/resonator/diggs/diggs.webp",kp="/assets/copper/resonator/diggs/diggs.glb",Pp="蜜拉",Np="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",Op="/assets/copper/resonator/hive/hive.webp",Dp="/assets/copper/resonator/hive/hive.glb",Gp="米洛",Fp="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",Hp="/assets/copper/mechanic/gyro/gyro.webp",Up="/assets/copper/mechanic/gyro/gyro.glb",Bp="杰克",jp="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",Vp="/assets/copper/mechanic/tricky/tricky.webp",Kp="/assets/copper/mechanic/tricky/tricky.glb",Wp="格洛克",qp="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",zp="/assets/copper/mechanic/pendulum/pendulum.webp",Xp="/assets/copper/mechanic/pendulum/pendulum.glb",Jp="溜溜",Yp="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",Zp="/assets/copper/mechanic/yoyo/yoyo.webp",Qp="/assets/copper/mechanic/yoyo/yoyo.glb",ed="卡琳",td="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",nd="/assets/copper/mechanic/karin/karin.webp",sd="/assets/copper/mechanic/karin/karin.glb",od="波波",id="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",rd="/assets/copper/craftsman/wrench/wrench.webp",ad="/assets/copper/craftsman/wrench/wrench.glb",cd="特斯拉",ld="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",ud="/assets/copper/craftsman/coil/coil.webp",fd="/assets/copper/craftsman/coil/coil.glb",pd="公输",dd="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",$d="/assets/copper/craftsman/artifex/artifex.webp",hd="/assets/copper/craftsman/artifex/artifex.glb",_d="丁格",md="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",gd="/assets/copper/craftsman/drillbit/drillbit.webp",bd="/assets/copper/craftsman/drillbit/drillbit.glb",yd="小卯",wd="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",vd="/assets/copper/craftsman/quickhand/quickhand.webp",Td="/assets/copper/craftsman/quickhand/quickhand.glb",Md={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:10},xd={name:Ef,copper_type:0,description:kf,icon_url:Pf,model_url:Nf,skill:Md},Cd={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:10},Sd={name:Of,copper_type:0,description:Df,icon_url:Gf,model_url:Ff,skill:Cd},Ld={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},Ad={name:Hf,copper_type:0,description:Uf,icon_url:Bf,model_url:jf,skill:Ld},Id={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},Rd={name:Vf,copper_type:0,description:Kf,icon_url:Wf,model_url:qf,skill:Id},Ed={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},kd={name:zf,copper_type:0,description:Xf,icon_url:Jf,model_url:Yf,skill:Ed},Pd={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:20},Nd={name:Zf,copper_type:1,description:Qf,icon_url:ep,model_url:tp,skill:Pd},Od={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},Dd={name:np,copper_type:1,description:sp,icon_url:op,model_url:ip,skill:Od},Gd={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:10},Fd={name:rp,copper_type:1,description:ap,icon_url:cp,model_url:lp,skill:Gd},Hd={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},Ud={name:up,copper_type:1,description:fp,icon_url:pp,model_url:dp,skill:Hd},Bd={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:5},jd={name:$p,copper_type:1,description:hp,icon_url:_p,model_url:mp,skill:Bd},Vd={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},Kd={name:gp,copper_type:4,description:bp,icon_url:yp,model_url:wp,skill:Vd},Wd={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},qd={name:vp,copper_type:4,description:Tp,icon_url:Mp,model_url:xp,skill:Wd},zd={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawsteak_skill.webp",cool_down:void 0},Xd={name:Cp,copper_type:4,description:Sp,icon_url:Lp,model_url:Ap,skill:zd},Jd={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},Yd={name:Ip,copper_type:4,description:Rp,icon_url:Ep,model_url:kp,skill:Jd},Zd={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},Qd={name:Pp,copper_type:4,description:Np,icon_url:Op,model_url:Dp,skill:Zd},e$={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:10},t$={name:Gp,copper_type:3,description:Fp,icon_url:Hp,model_url:Up,skill:e$},n$={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:10},s$={name:Bp,copper_type:3,description:jp,icon_url:Vp,model_url:Kp,skill:n$},o$={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:5},i$={name:Wp,copper_type:3,description:qp,icon_url:zp,model_url:Xp,skill:o$},r$={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:3},a$={name:Jp,copper_type:3,description:Yp,icon_url:Zp,model_url:Qp,skill:r$},c$={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},l$={name:ed,copper_type:3,description:td,icon_url:nd,model_url:sd,skill:c$},u$=void 0,f$={name:od,copper_type:2,description:id,icon_url:rd,model_url:ad,skill:u$},p$=void 0,d$={name:cd,copper_type:2,description:ld,icon_url:ud,model_url:fd,skill:p$},$$=void 0,h$={name:pd,copper_type:2,description:dd,icon_url:$d,model_url:hd,skill:$$},_$=void 0,m$={name:_d,copper_type:2,description:md,icon_url:gd,model_url:bd,skill:_$},g$=void 0,Rn=[xd,Sd,Ad,Rd,kd,Nd,Dd,Fd,Ud,jd,Kd,qd,Xd,Yd,Qd,t$,s$,i$,a$,l$,f$,d$,h$,m$,{name:yd,copper_type:2,description:wd,icon_url:vd,model_url:Td,skill:g$}],b$=th(e=>{const t=Rn.length;let n=0;for(;;){const s=n;if(s<t){const o=Rn[s];if(e({_0:o.name,_1:o})===1){n=s+1|0;continue}else return 0}else return 1}}),Na=ec(),y$=$_(),Oa=n_(),w$=ec(),v$=Jh();function Da(e){ke()}function T$(e){return ke()}function M$(e){return ke()}function x$(e){return ke()}function Hi(e,t){return wh(e,t)<0}function C$(e,t,n,s,o){if(e===n&&t<s){let i=0;for(;;){const r=i;if(r<o){const a=t+r|0,c=s+r|0;b(n,c),b(e,a),e[a]=n[c],i=r+1|0;continue}else return}}else{let i=o-1|0;for(;;){const r=i;if(r>=0){const a=t+r|0,c=s+r|0;b(n,c),b(e,a),e[a]=n[c],i=r-1|0;continue}else return}}}function S$(e,t,n,s,o){if(e===n&&t<s){let i=0;for(;;){const r=i;if(r<o){const a=t+r|0,c=s+r|0;b(n,c),b(e,a),e[a]=n[c],i=r+1|0;continue}else return}}else{let i=o-1|0;for(;;){const r=i;if(r>=0){const a=t+r|0,c=s+r|0;b(n,c),b(e,a),e[a]=n[c],i=r-1|0;continue}else return}}}function L$(e){return{val:""}}function A$(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function I$(e,t){const n=e;n.val=`${n.val}${t}`}function R$(e,t){Sh(t,e)}function E$(e,t){e_(t,e)}function k$(e){let t=e.acc;return t=t^(t>>>15|0),t=Math.imul(t,-2048144777)|0,t=t^(t>>>13|0),t=Math.imul(t,-1028477379)|0,t=t^(t>>>16|0),t}function Ga(e){return k$(e)}function Fa(e){return{acc:(e>>>0)+374761393|0}}function qo(e){const t=Fa(0);return R$(t,e),Ga(t)}function Ha(e){const t=Fa(0);return E$(t,e),Ga(t)}function Ua(e,t){const n=e._1,s=e._0,o=t/s|0;o!==0&&Ua(e,o);const i=t%s|0,r=i<0?0-i|0:i;b("0123456789abcdefghijklmnopqrstuvwxyz",r),n.method_2(n.self,"0123456789abcdefghijklmnopqrstuvwxyz".charCodeAt(r))}function P$(e,t,n){e<0&&t.method_2(t.self,45),Ua({_0:n,_1:t},e<0?0-e|0:e)}function N$(e){return e>=2&&e<7?36:e>=8&&e<15?18:e>=16&&e<=36?10:M$()}function O$(e,t){const n=L$(N$(t));return P$(e,{self:n,method_0:I$,method_1:F$,method_2:A$},t),n.val}function Be(e){return O$(e,10)}function D$(e){return e.lo}function G$(e,t,n){const s=e.length;let o;return n===void 0?o=s:o=n,t>=0&&t<=o&&o<=s?e.substring(t,o):ke()}function F$(e,t,n,s){const o=e;o.val=`${o.val}${G$(t,n,n+s|0)}`}function zo(e){return e>=0?e<=1?1:e>1073741824?1073741824:(2147483647>>(Math.clz32(e-1|0)-1|0))+1|0:ke()}function H$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function U$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function B$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function j$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let a;r===void 0?a=ke():a=r,a.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function V$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let a;r===void 0?a=ke():a=r,a.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function K$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let a;r===void 0?a=ke():a=r,a.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function Ui(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function Bi(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function ji(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function W$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,a=o,c=i,u=e.entries;b(u,a);const l=u[a];if(l===void 0){c.psl=r,Ui(e,c,a);break}else{const p=l;if(r>p.psl){c.psl=r,Ui(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=a+1&e.capacity_mask;continue}}}}function q$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,a=o,c=i,u=e.entries;b(u,a);const l=u[a];if(l===void 0){c.psl=r,Bi(e,c,a);break}else{const p=l;if(r>p.psl){c.psl=r,Bi(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=a+1&e.capacity_mask;continue}}}}function z$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,a=o,c=i,u=e.entries;b(u,a);const l=u[a];if(l===void 0){c.psl=r,ji(e,c,a);break}else{const p=l;if(r>p.psl){c.psl=r,ji(e,c,a),s=p.psl+1|0,o=a+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=a+1&e.capacity_mask;continue}}}}function Ba(e,t,n,s){e.size>=e.grow_at&&X$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const v=y[$];if(v===void 0){o={_0:$,_1:p};break}else{const C=v;if(C.hash===s&&C.key===t){C.value=n;return}if(p>C.psl){W$(e,$,C),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};j$(e,a,f)}function ja(e,t,n,s){e.size>=e.grow_at&&J$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const v=y[$];if(v===void 0){o={_0:$,_1:p};break}else{const C=v;if(C.hash===s&&tc(C.key,t)){C.value=n;return}if(p>C.psl){q$(e,$,C),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};V$(e,a,f)}function Va(e,t,n,s){e.size>=e.grow_at&&Y$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const v=y[$];if(v===void 0){o={_0:$,_1:p};break}else{const C=v;if(C.hash===s&&C.key===t){C.value=n;return}if(p>C.psl){z$(e,$,C),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const a=o._0,c=o._1,f={prev:e.tail,next:void 0,psl:c,hash:s,key:t,value:n};K$(e,a,f)}function X$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const a=i,c=a.next,u=a.key,l=a.value,f=a.hash;Ba(e,u,l,f),o=c;continue}}}function J$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const a=i,c=a.next,u=a.key,l=a.value,f=a.hash;ja(e,u,l,f),o=c;continue}}}function Y$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const a=i,c=a.next,u=a.key,l=a.value,f=a.hash;Va(e,u,l,f),o=c;continue}}}function se(e,t,n){Ba(e,t,n,qo(t))}function Ka(e,t,n){ja(e,t,n,Ha(t))}function Wa(e,t,n){Va(e,t,n,qo(t))}function Qe(e){const t=H$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];se(t,i._0,i._1),s=o+1|0;continue}else break}return t}function Z$(e){const t=U$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];Ka(t,i._0,i._1),s=o+1|0;continue}else break}return t}function Q$(e){const t=B$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];Wa(t,i._0,i._1),s=o+1|0;continue}else break}return t}function qa(e,t){const n=Ha(t);let s=0,o=n&e.capacity_mask;for(;;){const i=s,r=o,a=e.entries;b(a,r);const c=a[r];if(c===void 0)return;{const l=c;if(l.hash===n&&tc(l.key,t))return l.value;if(i>l.psl)return;s=i+1|0,o=r+1&e.capacity_mask;continue}}}function eh(e,t){const n=qo(t);let s=0,o=n&e.capacity_mask;for(;;){const i=s,r=o,a=e.entries;b(a,r);const c=a[r];if(c===void 0)ke();else{const l=c;if(l.hash===n&&l.key===t)return l.value;if(i<=l.psl){s=i+1|0,o=r+1&e.capacity_mask;continue}else ke()}}}function th(e){const t=Q$([]);return e(n=>(Wa(t,n._0,n._1),1)),t}function nh(e){return e?Cf:Sf}function Xe(e){const t=e+0,n=void 0;return new Ko(t,n)}function sh(e){return{hi:0,lo:e}}function oh(e){return sh(e)}function bo(e){return oh(e)}function Yn(e){const t=e,n=void 0;return new Ko(t,n)}function ih(e){const t=new Array(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];t[o]=oc(i),s=o+1|0;continue}else break}return new ka(t)}function rh(e,t){Pa(e,t)}function ah(e,t){Pa(e,t)}function ch(){return e=>1}function Vi(e){return t=>t(e)}function lh(e,t){return n=>e(n)===1&&t(n)===1?1:0}function uh(e){const t=[];return e(n=>(rh(t,n),1)),t}function za(e,t,n){const s=e.hi,o=e.lo,i=o+n|0,r=i>>31,a=o>>31,c=n>>31,u=(a&c|~r&(a^c))&1;return{hi:(s+t|0)+u|0,lo:i}}function fh(e,t){return za(e,t.hi,t.lo)}function ph(e,t){return t.lo===0?{hi:e.hi-t.hi|0,lo:e.lo}:za(e,-1,-1)}function dh(e,t){const n=e.hi,s=e.lo,o=t.hi,i=t.lo,r=n,a=s,c=o,u=i,l=r>>>16|0,f=r&65535,p=a>>>16|0,$=a&65535,y=c>>>16|0,v=c&65535,R=u>>>16|0,C=u&65535,g=Math.imul($,C)|0,h=g>>>16|0,_=g&65535,w=(h>>>0)+((Math.imul(p,C)|0)>>>0)|0,A=w>>>16|0,L=((w&65535)>>>0)+((Math.imul($,R)|0)>>>0)|0,S=(A>>>0)+((L>>>16|0)>>>0)|0,P=L&65535,U=(S>>>0)+((Math.imul(f,C)|0)>>>0)|0,I=U>>>16|0,K=((U&65535)>>>0)+((Math.imul(p,R)|0)>>>0)|0,q=(I>>>0)+((K>>>16|0)>>>0)|0,X=((K&65535)>>>0)+((Math.imul($,v)|0)>>>0)|0,J=(q>>>0)+((X>>>16|0)>>>0)|0,$e=X&65535;return{hi:(((((((((J>>>0)+((Math.imul(l,C)|0)>>>0)|0)>>>0)+((Math.imul(f,R)|0)>>>0)|0)>>>0)+((Math.imul(p,v)|0)>>>0)|0)>>>0)+((Math.imul($,y)|0)>>>0)|0)&65535)<<16|$e,lo:P<<16|_}}function $h(e,t){const n=Lf(),s=e.hi,o=e.lo,i=t.hi,r=t.lo,a=n.rem_u,c=a(o,s,r,i),u=n.get_high;return{hi:u(),lo:c}}function hh(e){return{hi:~e.hi,lo:~e.lo}}function _h(e,t){return{hi:e.hi&t.hi,lo:e.lo&t.lo}}function mh(e,t){return{hi:e.hi|t.hi,lo:e.lo|t.lo}}function gh(e,t){const n=t&63;return{hi:e.lo<<(n-32|0),lo:0}}function bh(e,t){const n=t&63;return n===0?e:n<32?{hi:e.hi>>>n|0,lo:e.lo>>>n|e.hi<<(32-n|0)}:{hi:0,lo:e.hi>>>(n-32|0)|0}}function Zn(e,t){return fh(e,t)}function Ki(e,t){return ph(e,t)}function hn(e,t){return dh(e,t)}function yh(e,t){return $h(e,t)}function Wi(e){return e.lo}function wh(e,t){return Af(e,t)}function qi(e,t){const n=e,s=t;return n.hi===s.hi&&n.lo===s.lo}function En(e,t){return _h(e,t)}function vh(e,t){return mh(e,t)}function Th(e){return hh(e)}function Mh(e,t){return gh(e,t)}function Zt(e,t){return bh(e,t)}function xh(e,t){const n=(e.acc>>>0)+((Math.imul(t,-1028477379)|0)>>>0)|0,s=17;e.acc=Math.imul(n<<s|(n>>>(32-s|0)|0),668265263)|0}function Xa(e,t){e.acc=(e.acc>>>0)+4|0,xh(e,t)}function _n(e,t){Xa(e,t)}function Ch(e,t){const n=t.length;let s=0;for(;;){const o=s;if(o<n){Xa(e,t.charCodeAt(o)),s=o+1|0;continue}else return}}function Sh(e,t){Ch(t,e)}function Lh(e){const t=e;let n=t^(t>>>17|0);return n=Math.imul(n,-312814405)|0,n=n^(n>>>11|0),n=Math.imul(n,-1404298415)|0,n=n^(n>>>15|0),n=Math.imul(n,830770091)|0,n=n^(n>>>14|0),n}function zi(e,t,n,s,o){if(o>=0&&s>=0&&(o+n|0)<=t.length&&(s+n|0)<=e.length){C$(t,o,e,s,n);return}else{Da(`bounds check failed: dst_offset = ${Be(o)}, src_offset = ${Be(s)}, len = ${Be(n)}, dst.length = ${Be(t.length)}, self.length = ${Be(e.length)}`);return}}function Ah(e,t,n,s,o){if((o+n|0)<=t.length&&(s+n|0)<=e.length){S$(t,o,e,s,n);return}else{Da(`bounds check failed: dst_offset = ${Be(o)}, src_offset = ${Be(s)}, len = ${Be(n)}, dst.length = ${Be(t.length)}, self.length = ${Be(e.length)}`);return}}function Ih(e,t){{const n=Tt(e,t(0));let s=1;for(;;){const o=s;if(o<e){b(n,o),n[o]=t(o),s=o+1|0;continue}else break}return n}}function Rh(e){return If(e)}function Qn(e,t){if(t>=0&&t<e.len){const n=e.bytes,s=e.start+t|0;return b(n,s),n[s]}else return x$(`index out of bounds: the len is from 0 to ${Be(e.len)} but the index is ${Be(t)}`)}function Eh(e,t,n){const s=e.length;let o;if(n===void 0)o=s;else{const a=n;o=a<0?s+a|0:a}const i=t<0?s+t|0:t;return i>=0&&i<=o&&o<=s?{bytes:e,start:i,len:o-i|0}:T$()}function kh(e){const t=Qn(e,0),n=Qn(e,1),s=(t>>>0)+(n<<8>>>0)|0,o=Qn(e,2),i=(s>>>0)+(o<<16>>>0)|0,r=Qn(e,3);return(i>>>0)+(r<<24>>>0)|0}function Ph(e,t,n){b(t,0),t[0]=1634760805,b(t,1),t[1]=1634760805,b(t,2),t[2]=1634760805,b(t,3),t[3]=1634760805,b(t,4),t[4]=857760878,b(t,5),t[5]=857760878,b(t,6),t[6]=857760878,b(t,7),t[7]=857760878,b(t,8),t[8]=2036477234,b(t,9),t[9]=2036477234,b(t,10),t[10]=2036477234,b(t,11),t[11]=2036477234,b(t,12),t[12]=1797285236,b(t,13),t[13]=1797285236,b(t,14),t[14]=1797285236,b(t,15),t[15]=1797285236,b(e,0),b(t,16),t[16]=e[0],b(e,0),b(t,17),t[17]=e[0],b(e,0),b(t,18),t[18]=e[0],b(e,0),b(t,19),t[19]=e[0],b(e,1),b(t,20),t[20]=e[1],b(e,1),b(t,21),t[21]=e[1],b(e,1),b(t,22),t[22]=e[1],b(e,1),b(t,23),t[23]=e[1],b(e,2),b(t,24),t[24]=e[2],b(e,2),b(t,25),t[25]=e[2],b(e,2),b(t,26),t[26]=e[2],b(e,2),b(t,27),t[27]=e[2],b(e,3),b(t,28),t[28]=e[3],b(e,3),b(t,29),t[29]=e[3],b(e,3),b(t,30),t[30]=e[3],b(e,3),b(t,31),t[31]=e[3],b(e,4),b(t,32),t[32]=e[4],b(e,4),b(t,33),t[33]=e[4],b(e,4),b(t,34),t[34]=e[4],b(e,4),b(t,35),t[35]=e[4],b(e,5),b(t,36),t[36]=e[5],b(e,5),b(t,37),t[37]=e[5],b(e,5),b(t,38),t[38]=e[5],b(e,5),b(t,39),t[39]=e[5],b(e,6),b(t,40),t[40]=e[6],b(e,6),b(t,41),t[41]=e[6],b(e,6),b(t,42),t[42]=e[6],b(e,6),b(t,43),t[43]=e[6],b(e,7),b(t,44),t[44]=e[7],b(e,7),b(t,45),t[45]=e[7],b(e,7),b(t,46),t[46]=e[7],b(e,7),b(t,47),t[47]=e[7],b(t,48),t[48]=n,b(t,49),t[49]=(n>>>0)+1|0,b(t,50),t[50]=(n>>>0)+2|0,b(t,51),t[51]=(n>>>0)+3|0,b(t,52),t[52]=0,b(t,53),t[53]=0,b(t,54),t[54]=0,b(t,55),t[55]=0,b(t,56),t[56]=0,b(t,57),t[57]=0,b(t,58),t[58]=0,b(t,59),t[59]=0,b(t,60),t[60]=0,b(t,61),t[61]=0,b(t,62),t[62]=0,b(t,63),t[63]=0}function Ct(e){const t=e._0,n=e._1,s=e._2,o=e._3,i=(t>>>0)+(n>>>0)|0,r=o^i,a=r<<16|(r>>>16|0),c=(s>>>0)+(a>>>0)|0,u=n^c,l=u<<12|(u>>>20|0),f=(i>>>0)+(l>>>0)|0,p=a^f,$=p<<8|(p>>>24|0),y=(c>>>0)+($>>>0)|0,v=l^y,R=v<<7|(v>>>25|0);return{_0:f,_1:R,_2:y,_3:$}}function Ja(e,t,n){Ph(e,t,n);let s=0;for(;;){const o=s;if(o<4){b(t,o);let i=t[o];const r=4+o|0;b(t,r);let a=t[r];const c=8+o|0;b(t,c);let u=t[c];const l=12+o|0;b(t,l);let f=t[l];const p=16+o|0;b(t,p);let $=t[p];const y=20+o|0;b(t,y);let v=t[y];const R=24+o|0;b(t,R);let C=t[R];const g=28+o|0;b(t,g);let h=t[g];const _=32+o|0;b(t,_);let w=t[_];const A=36+o|0;b(t,A);let x=t[A];const L=40+o|0;b(t,L);let S=t[L];const P=44+o|0;b(t,P);let U=t[P];const I=48+o|0;b(t,I);let B=t[I];const K=52+o|0;b(t,K);let q=t[K];const Z=56+o|0;b(t,Z);let X=t[Z];const J=60+o|0;b(t,J);let $e=t[J],Ae=0;for(;;){const k=Ae;if(k<4){const E=Ct({_0:i,_1:$,_2:w,_3:B});i=E._0,$=E._1,w=E._2,B=E._3;const F=Ct({_0:a,_1:v,_2:x,_3:q});a=F._0,v=F._1,x=F._2,q=F._3;const G=Ct({_0:u,_1:C,_2:S,_3:X});u=G._0,C=G._1,S=G._2,X=G._3;const D=Ct({_0:f,_1:h,_2:U,_3:$e});f=D._0,h=D._1,U=D._2,$e=D._3;const N=Ct({_0:i,_1:v,_2:S,_3:$e});i=N._0,v=N._1,S=N._2,$e=N._3;const V=Ct({_0:a,_1:C,_2:U,_3:B});a=V._0,C=V._1,U=V._2,B=V._3;const H=Ct({_0:u,_1:h,_2:w,_3:q});u=H._0,h=H._1,w=H._2,q=H._3;const j=Ct({_0:f,_1:$,_2:x,_3:X});f=j._0,$=j._1,x=j._2,X=j._3,Ae=k+1|0;continue}else break}b(t,o),t[o]=i;const ge=4+o|0;b(t,ge),t[ge]=a;const be=8+o|0;b(t,be),t[be]=u;const et=12+o|0;b(t,et),t[et]=f;const We=16+o|0;b(t,We),b(t,We),t[We]=(t[We]>>>0)+($>>>0)|0;const qe=20+o|0;b(t,qe),b(t,qe),t[qe]=(t[qe]>>>0)+(v>>>0)|0;const ve=24+o|0;b(t,ve),b(t,ve),t[ve]=(t[ve]>>>0)+(C>>>0)|0;const Fe=28+o|0;b(t,Fe),b(t,Fe),t[Fe]=(t[Fe]>>>0)+(h>>>0)|0;const ze=32+o|0;b(t,ze),b(t,ze),t[ze]=(t[ze]>>>0)+(w>>>0)|0;const tt=36+o|0;b(t,tt),b(t,tt),t[tt]=(t[tt]>>>0)+(x>>>0)|0;const Pe=40+o|0;b(t,Pe),b(t,Pe),t[Pe]=(t[Pe]>>>0)+(S>>>0)|0;const Mt=44+o|0;b(t,Mt),b(t,Mt),t[Mt]=(t[Mt]>>>0)+(U>>>0)|0;const d=48+o|0;b(t,d),t[d]=B;const m=52+o|0;b(t,m),t[m]=q;const M=56+o|0;b(t,M),t[M]=X;const O=60+o|0;b(t,O),t[O]=$e,s=o+1|0;continue}else return}}function Nh(e){const t=Ih(8,o=>kh(Eh(e,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),n=Tt(64,0);return Ja(t,n,0),{buffer:n,seed:t,i:0,n:32,counter:0}}function Oh(e){const t=e.i;if(t>>>0>=e.n>>>0)return;e.i=(t>>>0)+1|0;const n=t&31,s=e.buffer,o=Math.imul(n,2)|0;b(s,o);const i=bo(s[o]),r=e.buffer,a=(Math.imul(n,2)|0)+1|0;b(r,a);const c=bo(r[a]);return vh(Mh(c,32),i)}function Dh(e){e.counter=(e.counter>>>0)+4|0,e.counter===16&&(Ah(e.buffer,e.seed,8,56,0),e.counter=0),Ja(e.seed,e.buffer,e.counter),e.i=0,e.n=e.counter===12?28:32}function Ya(e,t,n,s,o,i){const a=n&31,u=i&31;if(a===u){let l;if(n>>>0<=127){const p={_0:e,_1:t};l=new an(s,o,new jn(p,cn))}else{const $=n>>>5|0;l=Ya(e,t,$,s,o,i>>>5|0)}return new Bn(Hh(a,l))}else{let l,f;e:if(n>>>0<=127){const $=new an(e,t,cn),y=new an(s,o,cn);l=$,f=y;break e}else{const $=n,y=new un(e,t,$>>>5|0),v=i,R=new un(s,o,v>>>5|0);l=y,f=R;break e}return new Bn(Bh(a,l,u,f))}}function Za(e,t,n,s){switch(e.$tag){case 1:{const o=e,i=o._0,r=o._1,a=o._2;if(t===i)return new an(t,n,a);{const c=Wh(a,f=>f._0===t);let u;c===void 0?u=a:u=qh(a,c);const l={_0:i,_1:r};return new an(t,n,new jn(l,u))}}case 0:{const o=e,i=o._0,r=o._1,a=o._2;return s===a&&t===i?new un(i,n,a):Ya(i,r,a,t,n,s)}default:{const i=e._0,a=s&31,c=Uh(i,a);if(c===void 0){const u=s,l=new un(t,n,u>>>5|0);return new Bn(jh(i,a,l))}else{const p=Za(c,t,n,s>>>5|0);return new Bn(Vh(i,a,p))}}}}function rs(e,t,n){const s=e;return s===void 0?new un(t,n,Xi(t)):Za(s,t,n,Xi(t))}function Qa(e){switch(e.$tag){case 1:{const t=e,n=t._0,s=t._1,o=t._2;return lh(Vi({_0:n,_1:s}),Kh(o))}case 0:{const t=e,n=t._0,s=t._1;return Vi({_0:n,_1:s})}default:{const s=e._0.data;return o=>{const i=s.length;let r=0;for(;;){const a=r;if(a<i){const c=s[a];if(Qa(c)(o)===1){r=a+1|0;continue}else return 0}else return 1}}}}}function Gh(e){const t=e;return t===void 0?ch():Qa(t)}function Fh(e){const t=Gh(e);return n=>t(s=>n(s._1))}function Xi(e){return Lh(e)|-1073741824}function Hh(e,t){return{elem_info:0|1<<e,data:[t]}}function Uh(e,t){if(e.elem_info&1<<t){const s=e.data,o=e.elem_info,i=Wo(o&((1<<t>>>0)-1|0));return b(s,i),s[i]}else return}function Bh(e,t,n,s){return{elem_info:0|1<<e|1<<n,data:e<n?[t,s]:[s,t]}}function jh(e,t,n){const s=e.data,o=s.length,i=o+1|0,r=e.elem_info,a=Wo(r&((1<<t>>>0)-1|0)),c=Tt(i,n);return zi(s,c,a,0,0),zi(s,c,o-a|0,a,a+1|0),{elem_info:e.elem_info|1<<t,data:c}}function Vh(e,t,n){const s=Rh(e.data),o=e.elem_info,i=Wo(o&((1<<t>>>0)-1|0));return b(s,i),s[i]=n,{elem_info:e.elem_info,data:s}}function Kh(e){return n=>{let s=e;for(;;){const o=s;if(o.$tag===0)return 1;{const i=o,r=i._0,a=i._1;if(n(r)===0)return 0;s=a;continue}}}}function Wh(e,t){let n=e,s=0;for(;;){const o=n,i=s;if(o.$tag===0)return;{const r=o,a=r._0,c=r._1;if(t(a))return i;n=c,s=i+1|0;continue}}}function qh(e,t){if(e.$tag===0)return cn;if(t<0)return e;if(t===0)return e._1;{const n=e,s=n._0,o=n._1,i=new jn(s,cn);let r=i,a=o,c=t-1|0;for(;;){const u=r,l=a,f=c;if(l.$tag===0)break;if(u.$tag===1){const p=u,$=l,y=$._0,v=$._1;if(f===0){p._1=v;break}else{p._1=new jn(y,cn),r=p._1,a=v,c=f-1|0;continue}}else{ke();break}}return i}}function zh(e){for(;;){const t=Oh(e);if(t!==void 0)return t;Dh(e)}}function Xh(e){return{self:Nh(e),method_0:zh}}function Jh(e){return Xh(Rf)}function Ji(e,t){const n=En(e,Xs),s=Zt(e,32),o=En(t,Xs),i=Zt(t,32),r=hn(n,o),a=Zn(hn(s,o),Zt(r,32)),c=Zn(hn(n,i),En(a,Xs));return{hi:Zn(Zn(hn(s,i),Zt(a,32)),Zt(c,32)),lo:hn(e,t)}}function Yh(e,t){if(qi(t,Gi)){const o=e;return o.method_0(o.self)}else if(qi(En(t,Ki(t,Fi)),Gi)){const o=e;return En(o.method_0(o.self),Ki(t,Fi))}const n=e;let s=Ji(n.method_0(n.self),t);if(Hi(s.lo,t)){const o=yh(Th(t),t);for(;Hi(s.lo,o);){const i=e;s=Ji(i.method_0(i.self),t);continue}}return s.hi}function Zh(e,t){if(t===0){const n=e;return Wi(n.method_0(n.self))}return Wi(Yh(e,bo(t)))}function Qh(e,t){if(t===0){const n=e;return D$(Zt(n.method_0(n.self),33))}else return Zh(e,t)}function ec(){return{now:0}}function Xo(e){return e.now=e.now+1|0,e.now}function tc(e,t){switch(e){case 0:return t===0;case 1:return t===1;case 2:return t===2;case 3:return t===3;default:return t===4}}function e_(e,t){switch(e){case 0:{_n(t,0);return}case 1:{_n(t,1);return}case 2:{_n(t,2);return}case 3:{_n(t,3);return}default:{_n(t,4);return}}}function nc(e){const t=Qe([]);return se(t,"health",Yn(e.health)),se(t,"attack",Yn(e.attack)),se(t,"defense",Yn(e.defense)),se(t,"dodge",Yn(e.dodge)),new Ke(t)}function mn(e,t,n,s){return{health:e,attack:t,defense:n,dodge:s}}function Yi(e){const t=Qe([]);return se(t,"equipment_base",t_(e.equipment_base)),se(t,"id",Xe(e.id)),new Ke(t)}function t_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n));const s=e.description;se(t,"description",new me(s));const o=e.resource_url;return se(t,"resource_url",new me(o)),se(t,"attribute",nc(e.attribute)),new Ke(t)}function n_(){return{history:[],callback:e=>{}}}function sc(e,t){const n={id:Xo(w$),type_msg:t.type_msg,content:t.content};ah(e.history,n)}function oc(e){const t=Qe([]);return se(t,"id",Xe(e.id)),se(t,"level",Xe(e.level)),se(t,"suffix",Xe(e.suffix)),se(t,"live_left",Xe(e.live_left)),se(t,"attribute",nc(e.attribute)),se(t,"copper_type",ic(e.copper_type)),se(t,"equipment_slot",s_(e.equipment_slot)),se(t,"copper_info",o_(e.copper_info)),new Ke(t)}function ic(e){switch(e){case 0:{const t="IronWall";return new me(t)}case 1:{const t="Arcanist";return new me(t)}case 2:{const t="CraftsMan";return new me(t)}case 3:{const t="Mechanic";return new me(t)}default:{const t="Resonator";return new me(t)}}}function s_(e){const t=Qe([]),n=e.slot1;n===void 0||se(t,"slot1",Yi(n));const s=e.slot2;return s===void 0||se(t,"slot2",Yi(s)),se(t,"is_slot2_locked",nh(e.is_slot2_locked)),new Ke(t)}function o_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n)),se(t,"copper_type",ic(e.copper_type));const s=e.description;se(t,"description",new me(s));const o=e.icon_url;se(t,"icon_url",new me(o));const i=e.model_url;se(t,"model_url",new me(i));const r=e.skill;return r===void 0||se(t,"skill",i_(r)),new Ke(t)}function i_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n));const s=e.description;se(t,"description",new me(s));const o=e.resource_url;se(t,"resource_url",new me(o));const i=e.cool_down;return i===void 0||se(t,"cool_down",Xe(i)),new Ke(t)}function rc(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function ac(e){switch(e){case 0:return mn(Math.fround(100),Math.fround(10),Math.fround(10),Math.fround(10));case 1:return mn(Math.fround(30),Math.fround(20),Math.fround(5),Math.fround(5));case 4:return mn(Math.fround(30),Math.fround(5),Math.fround(5),Math.fround(5));case 3:return mn(Math.fround(50),Math.fround(5),Math.fround(5),Math.fround(5));default:return mn(Math.fround(50),Math.fround(0),Math.fround(5),Math.fround(5))}}function Js(e){const t=eh(b$,e),n=Xo(Na);return{id:n,level:1,suffix:n,live_left:5,attribute:ac(t.copper_type),copper_type:t.copper_type,equipment_slot:rc(),copper_info:t}}function r_(){return Z$([{_0:2,_1:9999},{_0:1,_1:0},{_0:4,_1:0},{_0:3,_1:0},{_0:0,_1:0}])}function Qt(e,t){const n=qa(e,t);return n===void 0?ke():n}function a_(e,t,n){const s=qa(e,t);let o;if(s===void 0?o=ke():o=s,o<n){sc(Oa,{type_msg:"resource_not_enough",content:"资源不足"});return}else{Ka(e,t,o-n|0);return}}function c_(){const e=Js("阿磐"),t=Js("咝咝"),n=Js("波波");return{coppers:rs(rs(rs(void 0,e.id,e),t.id,t),n.id,n)}}function l_(e,t){return{coppers:rs(e.coppers,t.id,t)}}function u_(e){return uh(Fh(e.coppers))}function f_(e,t){return e+Qh(v$,(t-e|0)+1|0)|0}function p_(){const e=Xo(Na),t=f_(0,Rn.length-1|0);b(Rn,t);const n=Rn[t],s=ac(n.copper_type);return{id:e,level:1,suffix:e,live_left:5,attribute:s,copper_type:n.copper_type,equipment_slot:rc(),copper_info:n}}function d_(e){if(Qt(e,2)>10)return a_(e,2,10),p_();sc(Oa,{type_msg:"resource_not_enough",content:"资源不足"})}function $_(){return{resource:r_(),warehouse:c_()}}function h_(e){const t=e.resource,n=Qe([{_0:"SpiritalSpark",_1:Xe(Qt(t,2))},{_0:"RecallGear",_1:Xe(Qt(t,1))},{_0:"ResonantCrystal",_1:Xe(Qt(t,4))},{_0:"RefinedCopper",_1:Xe(Qt(t,3))},{_0:"HeartCrystalDust",_1:Xe(Qt(t,0))}]);return new Ke(n)}function __(e){const t=e.warehouse,n=Qe([{_0:"coppers",_1:ih(u_(t))}]);return new Ke(n)}function m_(e){const t=d_(e.resource);if(t===void 0){const n="error",s={_0:"type",_1:new me(n)},o="资源不足",i=Qe([s,{_0:"content",_1:new me(o)}]);return new Ke(i)}else{const s=t;e.warehouse=l_(e.warehouse,s);const o="success",i=Qe([{_0:"type",_1:new me(o)},{_0:"copper",_1:oc(s)}]);return new Ke(i)}}function kn(){return y$}function yo(e){return h_(e)}function Zi(e){return __(e)}function g_(e){return m_(e)}const b_={class:"draw-screen"},y_={class:"draw-screen__body"},w_={class:"draw-card"},v_={class:"card-face card-back"},T_=["src"],M_={class:"card-face card-front"},x_=["src"],C_={key:1,class:"card-icon"},S_=["src"],L_={class:"draw-cost"},A_=["src"],I_=["disabled","title"],R_={key:0,class:"toast"},E_={__name:"DrawScreen",emits:["draw"],setup(e,{emit:t}){const n=t,s=Q(!1),o=Q(!0),i=Q(!1),r=Q("抽卡展示"),a=Q("✨"),c=Q(""),u=Q({left:0,top:0,width:0,height:0});function l(h){return h?typeof h=="string"&&h.startsWith("/")?h:ce(h):""}const f=Q(!1),p=Q(!1),$=Q(!1),y=Q("");function v(h){y.value=h||"提示",$.value=!0,setTimeout(()=>{$.value=!1},1800)}async function R(){try{const h=await yo(kn()),_=x=>{if(x==null)return x;const L=typeof x=="object"&&"_0"in x&&Object.keys(x).length===1?x._0:x;if(L&&typeof L=="object"&&"_0"in L&&typeof L._0=="number")return L._0;if(L&&typeof L=="object"&&Array.isArray(L.entries)&&typeof L.size=="number"){const S={};for(const P of L.entries){if(!P)continue;const U=P.key??P._0??P[0],I=P.value??P._1??P[1],B=typeof U=="string"?U:U&&U._0?U._0:String(U);S[B]=_(I)}return S}if(Array.isArray(L))return L.map(_);if(L&&typeof L=="object"){const S={};for(const P of Object.keys(L))S[P]=_(L[P]);return S}return L},w=_(h),A=Number((w==null?void 0:w.SpiritalSpark)??0);o.value=A>=10}catch{o.value=!1}}function C(){i.value=!1,f.value=!1,p.value=!1}function g(){if(s.value)return;if(R(),!o.value){v("资源不足");return}s.value=!0,console.log("[DrawScreen] runDrawSequence start");const h=document.querySelector(".draw-card");if(h){h.classList.add("is-shaking"),setTimeout(()=>h.classList.remove("is-shaking"),500);const _=h.getBoundingClientRect();u.value={left:Math.round(_.left),top:Math.round(_.top),width:Math.round(_.width),height:Math.round(_.height)}}setTimeout(async()=>{i.value=!0,f.value=!1,p.value=!0;try{const _=await g_(kn());console.log("[DrawScreen] gacha raw:",_);const w=x=>{if(x==null)return x;const L=typeof x=="object"&&"_0"in x&&Object.keys(x).length===1?x._0:x;if(L&&typeof L=="object"&&"_0"in L&&typeof L._0=="number")return L._0;if(L&&typeof L=="object"&&Array.isArray(L.entries)&&typeof L.size=="number"){const S={};for(const P of L.entries){if(!P)continue;const U=P.key??P._0??P[0],I=P.value??P._1??P[1],B=typeof U=="string"?U:U&&U._0?U._0:String(U);S[B]=w(I)}return S}if(Array.isArray(L))return L.map(w);if(L&&typeof L=="object"){const S={};for(const P of Object.keys(L))S[P]=w(L[P]);return S}return L},A=w(_);if(console.log("[DrawScreen] gacha data:",A),A&&A.type==="success"&&A.copper&&A.copper.copper_info){const x=A.copper.copper_info;console.log("[DrawScreen] gacha info:",x),console.log("[DrawScreen] icon_url:",x.icon_url),r.value=x.name||"新铜偶",a.value="",c.value=l(x.icon_url||""),console.log("[DrawScreen] tempImage resolved:",c.value),await On(),setTimeout(()=>{p.value=!1,setTimeout(()=>{f.value=!0},350)},450),n("draw",{name:x.name,image:x.icon_url||""}),R()}else A&&A.type==="error"&&(i.value=!1,f.value=!1,p.value=!1,v(A.content||"资源不足"),n("draw",{error:!0}),R())}catch{i.value=!1,f.value=!1,p.value=!1,v("抽卡失败"),n("draw",{error:!0}),R()}finally{setTimeout(()=>{s.value=!1},800)}},600)}return(h,_)=>(ne(),ae("div",b_,[T("div",y_,[T("div",w_,[i.value?(ne(),ae("div",{key:0,class:"draw-temp",onClick:C},[_[3]||(_[3]=T("div",{class:"dim-backdrop"},null,-1)),T("div",{class:"temp-stack",style:It({left:u.value.left+"px",top:u.value.top+"px",width:u.value.width+"px",height:u.value.height+"px"}),onClick:_[2]||(_[2]=zs(()=>{},["stop"]))},[T("div",{class:Nt(["card",{flipped:p.value}]),onClick:_[0]||(_[0]=zs(w=>p.value=!p.value,["stop"]))},[T("div",v_,[T("img",{src:Cn(ce)("frontend_resource/gacha.webp"),alt:"back"},null,8,T_)]),T("div",M_,[c.value?(ne(),ae("img",{key:0,src:c.value,alt:"copper",class:"card-front-img"},null,8,x_)):(ne(),ae("div",C_,fe(a.value||"🎴"),1))])],2),T("div",{class:Nt(["card-name-below",{show:f.value}]),onClick:_[1]||(_[1]=zs(()=>{},["stop"]))},fe(r.value),3)],4)])):kt("",!0),T("img",{class:"draw-card__img",src:Cn(ce)("frontend_resource/gacha.webp"),alt:"card"},null,8,S_)]),T("div",L_,[T("img",{class:"draw-cost__icon",src:Cn(ce)("resource/spiritual_spark.webp"),alt:"cost"},null,8,A_),_[4]||(_[4]=T("span",{class:"draw-cost__times"},"X 10",-1))]),T("button",{class:"draw-action",disabled:s.value||!o.value,title:o.value?"":"资源不足",onClick:g},"抽取卡牌",8,I_),$.value?(ne(),ae("div",R_,fe(y.value),1)):kt("",!0)])]))}},k_=Xt(E_,[["__scopeId","data-v-7ccb01a9"]]);function Qi(e,t){if(t===uc)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===to||t===ar){let n=e.getIndex();if(n===null){const r=[],a=e.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)r.push(c);e.setIndex(r),n=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}const s=n.count-2,o=[];if(t===to)for(let r=1;r<=s;r++)o.push(n.getX(0)),o.push(n.getX(r)),o.push(n.getX(r+1));else for(let r=0;r<s;r++)r%2===0?(o.push(n.getX(r)),o.push(n.getX(r+1)),o.push(n.getX(r+2))):(o.push(n.getX(r+2)),o.push(n.getX(r+1)),o.push(n.getX(r)));o.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=e.clone();return i.setIndex(o),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class wo extends cr{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new G_(n)}),this.register(function(n){return new F_(n)}),this.register(function(n){return new z_(n)}),this.register(function(n){return new X_(n)}),this.register(function(n){return new J_(n)}),this.register(function(n){return new U_(n)}),this.register(function(n){return new B_(n)}),this.register(function(n){return new j_(n)}),this.register(function(n){return new V_(n)}),this.register(function(n){return new D_(n)}),this.register(function(n){return new K_(n)}),this.register(function(n){return new H_(n)}),this.register(function(n){return new q_(n)}),this.register(function(n){return new W_(n)}),this.register(function(n){return new N_(n)}),this.register(function(n){return new Y_(n)}),this.register(function(n){return new Z_(n)})}load(t,n,s,o){const i=this;let r;if(this.resourcePath!=="")r=this.resourcePath;else if(this.path!==""){const u=wn.extractUrlBase(t);r=wn.resolveURL(u,this.path)}else r=wn.extractUrlBase(t);this.manager.itemStart(t);const a=function(u){o?o(u):console.error(u),i.manager.itemError(t),i.manager.itemEnd(t)},c=new as(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(u){try{i.parse(u,r,function(l){n(l),i.manager.itemEnd(t)},a)}catch(l){a(l)}},s,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,s,o){let i;const r={},a={},c=new TextDecoder;if(typeof t=="string")i=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===cc){try{r[ee.KHR_BINARY_GLTF]=new Q_(t)}catch(f){o&&o(f);return}i=JSON.parse(r[ee.KHR_BINARY_GLTF].content)}else i=JSON.parse(c.decode(t));else i=t;if(i.asset===void 0||i.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new pm(i,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const f=this.pluginCallbacks[l](u);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,r[f.name]=!0}if(i.extensionsUsed)for(let l=0;l<i.extensionsUsed.length;++l){const f=i.extensionsUsed[l],p=i.extensionsRequired||[];switch(f){case ee.KHR_MATERIALS_UNLIT:r[f]=new O_;break;case ee.KHR_DRACO_MESH_COMPRESSION:r[f]=new em(i,this.dracoLoader);break;case ee.KHR_TEXTURE_TRANSFORM:r[f]=new tm;break;case ee.KHR_MESH_QUANTIZATION:r[f]=new nm;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(r),u.setPlugins(a),u.parse(s,o)}parseAsync(t,n){const s=this;return new Promise(function(o,i){s.parse(t,n,o,i)})}}function P_(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ee={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class N_{constructor(t){this.parser=t,this.name=ee.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let s=0,o=n.length;s<o;s++){const i=n[s];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const n=this.parser,s="light:"+t;let o=n.cache.get(s);if(o)return o;const i=n.json,c=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let u;const l=new bt(16777215);c.color!==void 0&&l.setRGB(c.color[0],c.color[1],c.color[2],ut);const f=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new xo(l),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new pc(l),u.distance=f;break;case"spot":u=new fc(l),u.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),at(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=n.createUniqueName(c.name||"light_"+t),o=Promise.resolve(u),n.cache.add(s,o),o}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,s=this.parser,i=s.json.nodes[t],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return s._getNodeRef(n.cache,a,c)})}}class O_{constructor(){this.name=ee.KHR_MATERIALS_UNLIT}getMaterialType(){return bn}extendParams(t,n,s){const o=[];t.color=new bt(1,1,1),t.opacity=1;const i=n.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const r=i.baseColorFactor;t.color.setRGB(r[0],r[1],r[2],ut),t.opacity=r[3]}i.baseColorTexture!==void 0&&o.push(s.assignTexture(t,"map",i.baseColorTexture,gt))}return Promise.all(o)}}class D_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name].emissiveStrength;return i!==void 0&&(n.emissiveIntensity=i),Promise.resolve()}}class G_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];if(r.clearcoatFactor!==void 0&&(n.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(i.push(s.assignTexture(n,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new lr(a,a)}return Promise.all(i)}}class F_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class H_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.iridescenceFactor!==void 0&&(n.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(n.iridescenceIOR=r.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(i)}}class U_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[];n.sheenColor=new bt(0,0,0),n.sheenRoughness=0,n.sheen=1;const r=o.extensions[this.name];if(r.sheenColorFactor!==void 0){const a=r.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],ut)}return r.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&i.push(s.assignTexture(n,"sheenColorMap",r.sheenColorTexture,gt)),r.sheenRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(i)}}class B_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.transmissionFactor!==void 0&&(n.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&i.push(s.assignTexture(n,"transmissionMap",r.transmissionTexture)),Promise.all(i)}}class j_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&i.push(s.assignTexture(n,"thicknessMap",r.thicknessTexture)),n.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return n.attenuationColor=new bt().setRGB(a[0],a[1],a[2],ut),Promise.all(i)}}class V_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class K_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&i.push(s.assignTexture(n,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return n.specularColor=new bt().setRGB(a[0],a[1],a[2],ut),r.specularColorTexture!==void 0&&i.push(s.assignTexture(n,"specularColorMap",r.specularColorTexture,gt)),Promise.all(i)}}class W_{constructor(t){this.parser=t,this.name=ee.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return n.bumpScale=r.bumpFactor!==void 0?r.bumpFactor:1,r.bumpTexture!==void 0&&i.push(s.assignTexture(n,"bumpMap",r.bumpTexture)),Promise.all(i)}}class q_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.anisotropyStrength!==void 0&&(n.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(n.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&i.push(s.assignTexture(n,"anisotropyMap",r.anisotropyTexture)),Promise.all(i)}}class z_{constructor(t){this.parser=t,this.name=ee.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,s=n.json,o=s.textures[t];if(!o.extensions||!o.extensions[this.name])return null;const i=o.extensions[this.name],r=n.options.ktx2Loader;if(!r){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,i.source,r)}}class X_{constructor(t){this.parser=t,this.name=ee.EXT_TEXTURE_WEBP}loadTexture(t){const n=this.name,s=this.parser,o=s.json,i=o.textures[t];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],a=o.images[r.source];let c=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(c=u)}return s.loadTextureImage(t,r.source,c)}}class J_{constructor(t){this.parser=t,this.name=ee.EXT_TEXTURE_AVIF}loadTexture(t){const n=this.name,s=this.parser,o=s.json,i=o.textures[t];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],a=o.images[r.source];let c=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(c=u)}return s.loadTextureImage(t,r.source,c)}}class Y_{constructor(t){this.name=ee.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,s=n.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const o=s.extensions[this.name],i=this.parser.getDependency("buffer",o.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const c=o.byteOffset||0,u=o.byteLength||0,l=o.count,f=o.byteStride,p=new Uint8Array(a,c,u);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(l,f,p,o.mode,o.filter).then(function($){return $.buffer}):r.ready.then(function(){const $=new ArrayBuffer(l*f);return r.decodeGltfBuffer(new Uint8Array($),l,f,p,o.mode,o.filter),$})})}else return null}}class Z_{constructor(t){this.name=ee.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,s=n.nodes[t];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const o=n.meshes[s.mesh];for(const u of o.primitives)if(u.mode!==Ue.TRIANGLES&&u.mode!==Ue.TRIANGLE_STRIP&&u.mode!==Ue.TRIANGLE_FAN&&u.mode!==void 0)return null;const r=s.extensions[this.name].attributes,a=[],c={};for(const u in r)a.push(this.parser.getDependency("accessor",r[u]).then(l=>(c[u]=l,c[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{const l=u.pop(),f=l.isGroup?l.children:[l],p=u[0].count,$=[];for(const y of f){const v=new cs,R=new Je,C=new ur,g=new Je(1,1,1),h=new dc(y.geometry,y.material,p);for(let _=0;_<p;_++)c.TRANSLATION&&R.fromBufferAttribute(c.TRANSLATION,_),c.ROTATION&&C.fromBufferAttribute(c.ROTATION,_),c.SCALE&&g.fromBufferAttribute(c.SCALE,_),h.setMatrixAt(_,v.compose(R,C,g));for(const _ in c)if(_==="_COLOR_0"){const w=c[_];h.instanceColor=new $c(w.array,w.itemSize,w.normalized)}else _!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&y.geometry.setAttribute(_,c[_]);fr.prototype.copy.call(h,y),this.parser.assignFinalMaterial(h),$.push(h)}return l.isGroup?(l.clear(),l.add(...$),l):$[0]}))}}const cc="glTF",gn=12,er={JSON:1313821514,BIN:5130562};class Q_{constructor(t){this.name=ee.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,gn),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==cc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-gn,i=new DataView(t,gn);let r=0;for(;r<o;){const a=i.getUint32(r,!0);r+=4;const c=i.getUint32(r,!0);if(r+=4,c===er.JSON){const u=new Uint8Array(t,gn+r,a);this.content=s.decode(u)}else if(c===er.BIN){const u=gn+r;this.body=t.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class em{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ee.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const s=this.json,o=this.dracoLoader,i=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,a={},c={},u={};for(const l in r){const f=vo[l]||l.toLowerCase();a[f]=r[l]}for(const l in t.attributes){const f=vo[l]||l.toLowerCase();if(r[l]!==void 0){const p=s.accessors[t.attributes[l]],$=ln[p.componentType];u[f]=$.name,c[f]=p.normalized===!0}}return n.getDependency("bufferView",i).then(function(l){return new Promise(function(f,p){o.decodeDracoFile(l,function($){for(const y in $.attributes){const v=$.attributes[y],R=c[y];R!==void 0&&(v.normalized=R)}f($)},a,u,ut,p)})})}}class tm{constructor(){this.name=ee.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class nm{constructor(){this.name=ee.KHR_MESH_QUANTIZATION}}class lc extends Hc{constructor(t,n,s,o){super(t,n,s,o)}copySampleValue_(t){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,i=t*o*3+o;for(let r=0;r!==o;r++)n[r]=s[i+r];return n}interpolate_(t,n,s,o){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=a*2,u=a*3,l=o-n,f=(s-n)/l,p=f*f,$=p*f,y=t*u,v=y-u,R=-2*$+3*p,C=$-p,g=1-R,h=C-p+f;for(let _=0;_!==a;_++){const w=r[v+_+a],A=r[v+_+c]*l,x=r[y+_+a],L=r[y+_]*l;i[_]=g*w+h*A+R*x+C*L}return i}}const sm=new ur;class om extends lc{interpolate_(t,n,s,o){const i=super.interpolate_(t,n,s,o);return sm.fromArray(i).normalize().toArray(i),i}}const Ue={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ln={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tr={9728:dr,9729:no,9984:yc,9985:bc,9986:gc,9987:pr},nr={33071:vc,33648:wc,10497:so},Ys={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vo={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},St={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},im={CUBICSPLINE:void 0,LINEAR:_r,STEP:Dc},Zs={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function rm(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new Co({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fc})),e.DefaultMaterial}function jt(e,t,n){for(const s in n.extensions)e[s]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function at(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function am(e,t,n){let s=!1,o=!1,i=!1;for(let u=0,l=t.length;u<l;u++){const f=t[u];if(f.POSITION!==void 0&&(s=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(i=!0),s&&o&&i)break}if(!s&&!o&&!i)return Promise.resolve(e);const r=[],a=[],c=[];for(let u=0,l=t.length;u<l;u++){const f=t[u];if(s){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):e.attributes.position;r.push(p)}if(o){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):e.attributes.normal;a.push(p)}if(i){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):e.attributes.color;c.push(p)}}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(u){const l=u[0],f=u[1],p=u[2];return s&&(e.morphAttributes.position=l),o&&(e.morphAttributes.normal=f),i&&(e.morphAttributes.color=p),e.morphTargetsRelative=!0,e})}function cm(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let s=0,o=n.length;s<o;s++)e.morphTargetDictionary[n[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lm(e){let t;const n=e.extensions&&e.extensions[ee.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Qs(n.attributes):t=e.indices+":"+Qs(e.attributes)+":"+e.mode,e.targets!==void 0)for(let s=0,o=e.targets.length;s<o;s++)t+=":"+Qs(e.targets[s]);return t}function Qs(e){let t="";const n=Object.keys(e).sort();for(let s=0,o=n.length;s<o;s++)t+=n[s]+":"+e[n[s]]+";";return t}function To(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function um(e){return e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0?"image/jpeg":e.search(/\.webp($|\?)/i)>0||e.search(/^data\:image\/webp/)===0?"image/webp":e.search(/\.ktx2($|\?)/i)>0||e.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const fm=new cs;class pm{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new P_,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,o=-1,i=!1,r=-1;if(typeof navigator<"u"){const a=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(a)===!0;const c=a.match(/Version\/(\d+)/);o=s&&c?parseInt(c[1],10):-1,i=a.indexOf("Firefox")>-1,r=i?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&o<17||i&&r<98?this.textureLoader=new hc(this.options.manager):this.textureLoader=new _c(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new as(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const s=this,o=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(r){const a={scene:r[0][o.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:o.asset,parser:s,userData:{}};return jt(i,a,o),at(a,o),Promise.all(s._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();t(a)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],s=this.json.meshes||[];for(let o=0,i=n.length;o<i;o++){const r=n[o].joints;for(let a=0,c=r.length;a<c;a++)t[r[a]].isBone=!0}for(let o=0,i=t.length;o<i;o++){const r=t[o];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(s[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,s){if(t.refs[n]<=1)return s;const o=s.clone(),i=(r,a)=>{const c=this.associations.get(r);c!=null&&this.associations.set(a,c);for(const[u,l]of r.children.entries())i(l,a.children[u])};return i(s,o),o.name+="_instance_"+t.uses[n]++,o}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let s=0;s<n.length;s++){const o=t(n[s]);if(o)return o}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const s=[];for(let o=0;o<n.length;o++){const i=t(n[o]);i&&s.push(i)}return s}getDependency(t,n){const s=t+":"+n;let o=this.cache.get(s);if(!o){switch(t){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(i){return i.loadNode&&i.loadNode(n)});break;case"mesh":o=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(t,n)}),!o)throw new Error("Unknown type: "+t);break}this.cache.add(s,o)}return o}getDependencies(t){let n=this.cache.get(t);if(!n){const s=this,o=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(i,r){return s.getDependency(t,r)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],s=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[ee.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(i,r){s.load(wn.resolveURL(n.uri,o.path),i,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(s){const o=n.byteLength||0,i=n.byteOffset||0;return s.slice(i,i+o)})}loadAccessor(t){const n=this,s=this.json,o=this.json.accessors[t];if(o.bufferView===void 0&&o.sparse===void 0){const r=Ys[o.type],a=ln[o.componentType],c=o.normalized===!0,u=new a(o.count*r);return Promise.resolve(new vn(u,r,c))}const i=[];return o.bufferView!==void 0?i.push(this.getDependency("bufferView",o.bufferView)):i.push(null),o.sparse!==void 0&&(i.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(i).then(function(r){const a=r[0],c=Ys[o.type],u=ln[o.componentType],l=u.BYTES_PER_ELEMENT,f=l*c,p=o.byteOffset||0,$=o.bufferView!==void 0?s.bufferViews[o.bufferView].byteStride:void 0,y=o.normalized===!0;let v,R;if($&&$!==f){const C=Math.floor(p/$),g="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+C+":"+o.count;let h=n.cache.get(g);h||(v=new u(a,C*$,o.count*$/l),h=new mc(v,$/l),n.cache.add(g,h)),R=new Gc(h,c,p%$/l,y)}else a===null?v=new u(o.count*c):v=new u(a,p,o.count*c),R=new vn(v,c,y);if(o.sparse!==void 0){const C=Ys.SCALAR,g=ln[o.sparse.indices.componentType],h=o.sparse.indices.byteOffset||0,_=o.sparse.values.byteOffset||0,w=new g(r[1],h,o.sparse.count*C),A=new u(r[2],_,o.sparse.count*c);a!==null&&(R=new vn(R.array.slice(),R.itemSize,R.normalized)),R.normalized=!1;for(let x=0,L=w.length;x<L;x++){const S=w[x];if(R.setX(S,A[x*c]),c>=2&&R.setY(S,A[x*c+1]),c>=3&&R.setZ(S,A[x*c+2]),c>=4&&R.setW(S,A[x*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}R.normalized=y}return R})}loadTexture(t){const n=this.json,s=this.options,i=n.textures[t].source,r=n.images[i];let a=this.textureLoader;if(r.uri){const c=s.manager.getHandler(r.uri);c!==null&&(a=c)}return this.loadTextureImage(t,i,a)}loadTextureImage(t,n,s){const o=this,i=this.json,r=i.textures[t],a=i.images[n],c=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(n,s).then(function(l){l.flipY=!1,l.name=r.name||a.name||"",l.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(l.name=a.uri);const p=(i.samplers||{})[r.sampler]||{};return l.magFilter=tr[p.magFilter]||no,l.minFilter=tr[p.minFilter]||pr,l.wrapS=nr[p.wrapS]||so,l.wrapT=nr[p.wrapT]||so,l.generateMipmaps=!l.isCompressedTexture&&l.minFilter!==dr&&l.minFilter!==no,o.associations.set(l,{textures:t}),l}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(t,n){const s=this,o=this.json,i=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(f=>f.clone());const r=o.images[t],a=self.URL||self.webkitURL;let c=r.uri||"",u=!1;if(r.bufferView!==void 0)c=s.getDependency("bufferView",r.bufferView).then(function(f){u=!0;const p=new Blob([f],{type:r.mimeType});return c=a.createObjectURL(p),c});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(c).then(function(f){return new Promise(function(p,$){let y=p;n.isImageBitmapLoader===!0&&(y=function(v){const R=new Qo(v);R.needsUpdate=!0,p(R)}),n.load(wn.resolveURL(f,i.path),y,void 0,$)})}).then(function(f){return u===!0&&a.revokeObjectURL(c),at(f,r),f.userData.mimeType=r.mimeType||um(r.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[t]=l,l}assignTexture(t,n,s,o){const i=this;return this.getDependency("texture",s.index).then(function(r){if(!r)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(r=r.clone(),r.channel=s.texCoord),i.extensions[ee.KHR_TEXTURE_TRANSFORM]){const a=s.extensions!==void 0?s.extensions[ee.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=i.associations.get(r);r=i.extensions[ee.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),i.associations.set(r,c)}}return o!==void 0&&(r.colorSpace=o),t[n]=r,r})}assignFinalMaterial(t){const n=t.geometry;let s=t.material;const o=n.attributes.tangent===void 0,i=n.attributes.color!==void 0,r=n.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Tc,Es.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,c.sizeAttenuation=!1,this.cache.add(a,c)),s=c}else if(t.isLine){const a="LineBasicMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Mc,Es.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,this.cache.add(a,c)),s=c}if(o||i||r){let a="ClonedMaterial:"+s.uuid+":";o&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=s.clone(),i&&(c.vertexColors=!0),r&&(c.flatShading=!0),o&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(s))),s=c}t.material=s}getMaterialType(){return Co}loadMaterial(t){const n=this,s=this.json,o=this.extensions,i=s.materials[t];let r;const a={},c=i.extensions||{},u=[];if(c[ee.KHR_MATERIALS_UNLIT]){const f=o[ee.KHR_MATERIALS_UNLIT];r=f.getMaterialType(),u.push(f.extendParams(a,i,n))}else{const f=i.pbrMetallicRoughness||{};if(a.color=new bt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],ut),a.opacity=p[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",f.baseColorTexture,gt)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),r=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,a)})))}i.doubleSided===!0&&(a.side=xc);const l=i.alphaMode||Zs.OPAQUE;if(l===Zs.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===Zs.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&r!==bn&&(u.push(n.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new lr(1,1),i.normalTexture.scale!==void 0)){const f=i.normalTexture.scale;a.normalScale.set(f,f)}if(i.occlusionTexture!==void 0&&r!==bn&&(u.push(n.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&r!==bn){const f=i.emissiveFactor;a.emissive=new bt().setRGB(f[0],f[1],f[2],ut)}return i.emissiveTexture!==void 0&&r!==bn&&u.push(n.assignTexture(a,"emissiveMap",i.emissiveTexture,gt)),Promise.all(u).then(function(){const f=new r(a);return i.name&&(f.name=i.name),at(f,i),n.associations.set(f,{materials:t}),i.extensions&&jt(o,f,i),f})}createUniqueName(t){const n=Cc.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,s=this.extensions,o=this.primitiveCache;function i(a){return s[ee.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(c){return sr(c,a,n)})}const r=[];for(let a=0,c=t.length;a<c;a++){const u=t[a],l=lm(u),f=o[l];if(f)r.push(f.promise);else{let p;u.extensions&&u.extensions[ee.KHR_DRACO_MESH_COMPRESSION]?p=i(u):p=sr(new $r,u,n),o[l]={primitive:u,promise:p},r.push(p)}}return Promise.all(r)}loadMesh(t){const n=this,s=this.json,o=this.extensions,i=s.meshes[t],r=i.primitives,a=[];for(let c=0,u=r.length;c<u;c++){const l=r[c].material===void 0?rm(this.cache):this.getDependency("material",r[c].material);a.push(l)}return a.push(n.loadGeometries(r)),Promise.all(a).then(function(c){const u=c.slice(0,c.length-1),l=c[c.length-1],f=[];for(let $=0,y=l.length;$<y;$++){const v=l[$],R=r[$];let C;const g=u[$];if(R.mode===Ue.TRIANGLES||R.mode===Ue.TRIANGLE_STRIP||R.mode===Ue.TRIANGLE_FAN||R.mode===void 0)C=i.isSkinnedMesh===!0?new Sc(v,g):new hr(v,g),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),R.mode===Ue.TRIANGLE_STRIP?C.geometry=Qi(C.geometry,ar):R.mode===Ue.TRIANGLE_FAN&&(C.geometry=Qi(C.geometry,to));else if(R.mode===Ue.LINES)C=new Lc(v,g);else if(R.mode===Ue.LINE_STRIP)C=new Ac(v,g);else if(R.mode===Ue.LINE_LOOP)C=new Ic(v,g);else if(R.mode===Ue.POINTS)C=new Rc(v,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+R.mode);Object.keys(C.geometry.morphAttributes).length>0&&cm(C,i),C.name=n.createUniqueName(i.name||"mesh_"+t),at(C,i),R.extensions&&jt(o,C,R),n.assignFinalMaterial(C),f.push(C)}for(let $=0,y=f.length;$<y;$++)n.associations.set(f[$],{meshes:t,primitives:$});if(f.length===1)return i.extensions&&jt(o,f[0],i),f[0];const p=new ks;i.extensions&&jt(o,p,i),n.associations.set(p,{meshes:t});for(let $=0,y=f.length;$<y;$++)p.add(f[$]);return p})}loadCamera(t){let n;const s=this.json.cameras[t],o=s[s.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?n=new So(Ec.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):s.type==="orthographic"&&(n=new kc(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),s.name&&(n.name=this.createUniqueName(s.name)),at(n,s),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],s=[];for(let o=0,i=n.joints.length;o<i;o++)s.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",n.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(o){const i=o.pop(),r=o,a=[],c=[];for(let u=0,l=r.length;u<l;u++){const f=r[u];if(f){a.push(f);const p=new cs;i!==null&&p.fromArray(i.array,u*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new Pc(a,c)})}loadAnimation(t){const n=this.json,s=this,o=n.animations[t],i=o.name?o.name:"animation_"+t,r=[],a=[],c=[],u=[],l=[];for(let f=0,p=o.channels.length;f<p;f++){const $=o.channels[f],y=o.samplers[$.sampler],v=$.target,R=v.node,C=o.parameters!==void 0?o.parameters[y.input]:y.input,g=o.parameters!==void 0?o.parameters[y.output]:y.output;v.node!==void 0&&(r.push(this.getDependency("node",R)),a.push(this.getDependency("accessor",C)),c.push(this.getDependency("accessor",g)),u.push(y),l.push(v))}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(c),Promise.all(u),Promise.all(l)]).then(function(f){const p=f[0],$=f[1],y=f[2],v=f[3],R=f[4],C=[];for(let h=0,_=p.length;h<_;h++){const w=p[h],A=$[h],x=y[h],L=v[h],S=R[h];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const P=s._createAnimationTracks(w,A,x,L,S);if(P)for(let U=0;U<P.length;U++)C.push(P[U])}const g=new Nc(i,void 0,C);return at(g,o),g})}createNodeMesh(t){const n=this.json,s=this,o=n.nodes[t];return o.mesh===void 0?null:s.getDependency("mesh",o.mesh).then(function(i){const r=s._getNodeRef(s.meshCache,o.mesh,i);return o.weights!==void 0&&r.traverse(function(a){if(a.isMesh)for(let c=0,u=o.weights.length;c<u;c++)a.morphTargetInfluences[c]=o.weights[c]}),r})}loadNode(t){const n=this.json,s=this,o=n.nodes[t],i=s._loadNodeShallow(t),r=[],a=o.children||[];for(let u=0,l=a.length;u<l;u++)r.push(s.getDependency("node",a[u]));const c=o.skin===void 0?Promise.resolve(null):s.getDependency("skin",o.skin);return Promise.all([i,Promise.all(r),c]).then(function(u){const l=u[0],f=u[1],p=u[2];p!==null&&l.traverse(function($){$.isSkinnedMesh&&$.bind(p,fm)});for(let $=0,y=f.length;$<y;$++)l.add(f[$]);return l})}_loadNodeShallow(t){const n=this.json,s=this.extensions,o=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const i=n.nodes[t],r=i.name?o.createUniqueName(i.name):"",a=[],c=o._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return c&&a.push(c),i.camera!==void 0&&a.push(o.getDependency("camera",i.camera).then(function(u){return o._getNodeRef(o.cameraCache,i.camera,u)})),o._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let l;if(i.isBone===!0?l=new Oc:u.length>1?l=new ks:u.length===1?l=u[0]:l=new fr,l!==u[0])for(let f=0,p=u.length;f<p;f++)l.add(u[f]);if(i.name&&(l.userData.name=i.name,l.name=r),at(l,i),i.extensions&&jt(s,l,i),i.matrix!==void 0){const f=new cs;f.fromArray(i.matrix),l.applyMatrix4(f)}else i.translation!==void 0&&l.position.fromArray(i.translation),i.rotation!==void 0&&l.quaternion.fromArray(i.rotation),i.scale!==void 0&&l.scale.fromArray(i.scale);if(!o.associations.has(l))o.associations.set(l,{});else if(i.mesh!==void 0&&o.meshCache.refs[i.mesh]>1){const f=o.associations.get(l);o.associations.set(l,{...f})}return o.associations.get(l).nodes=t,l}),this.nodeCache[t]}loadScene(t){const n=this.extensions,s=this.json.scenes[t],o=this,i=new ks;s.name&&(i.name=o.createUniqueName(s.name)),at(i,s),s.extensions&&jt(n,i,s);const r=s.nodes||[],a=[];for(let c=0,u=r.length;c<u;c++)a.push(o.getDependency("node",r[c]));return Promise.all(a).then(function(c){for(let l=0,f=c.length;l<f;l++)i.add(c[l]);const u=l=>{const f=new Map;for(const[p,$]of o.associations)(p instanceof Es||p instanceof Qo)&&f.set(p,$);return l.traverse(p=>{const $=o.associations.get(p);$!=null&&f.set(p,$)}),f};return o.associations=u(i),i})}_createAnimationTracks(t,n,s,o,i){const r=[],a=t.name?t.name:t.uuid,c=[];St[i.path]===St.weights?t.traverse(function(p){p.morphTargetInfluences&&c.push(p.name?p.name:p.uuid)}):c.push(a);let u;switch(St[i.path]){case St.weights:u=ti;break;case St.rotation:u=ni;break;case St.translation:case St.scale:u=ei;break;default:switch(s.itemSize){case 1:u=ti;break;case 2:case 3:default:u=ei;break}break}const l=o.interpolation!==void 0?im[o.interpolation]:_r,f=this._getArrayFromAccessor(s);for(let p=0,$=c.length;p<$;p++){const y=new u(c[p]+"."+St[i.path],n.array,f,l);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),r.push(y)}return r}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const s=To(n.constructor),o=new Float32Array(n.length);for(let i=0,r=n.length;i<r;i++)o[i]=n[i]*s;n=o}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){const o=this instanceof ni?om:lc;return new o(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function dm(e,t,n){const s=t.attributes,o=new ls;if(s.POSITION!==void 0){const a=n.json.accessors[s.POSITION],c=a.min,u=a.max;if(c!==void 0&&u!==void 0){if(o.set(new Je(c[0],c[1],c[2]),new Je(u[0],u[1],u[2])),a.normalized){const l=To(ln[a.componentType]);o.min.multiplyScalar(l),o.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=t.targets;if(i!==void 0){const a=new Je,c=new Je;for(let u=0,l=i.length;u<l;u++){const f=i[u];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],$=p.min,y=p.max;if($!==void 0&&y!==void 0){if(c.setX(Math.max(Math.abs($[0]),Math.abs(y[0]))),c.setY(Math.max(Math.abs($[1]),Math.abs(y[1]))),c.setZ(Math.max(Math.abs($[2]),Math.abs(y[2]))),p.normalized){const v=To(ln[p.componentType]);c.multiplyScalar(v)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(a)}e.boundingBox=o;const r=new Uc;o.getCenter(r.center),r.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=r}function sr(e,t,n){const s=t.attributes,o=[];function i(r,a){return n.getDependency("accessor",r).then(function(c){e.setAttribute(a,c)})}for(const r in s){const a=vo[r]||r.toLowerCase();a in e.attributes||o.push(i(s[r],a))}if(t.indices!==void 0&&!e.index){const r=n.getDependency("accessor",t.indices).then(function(a){e.setIndex(a)});o.push(r)}return oo.workingColorSpace!==ut&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${oo.workingColorSpace}" not supported.`),at(e,t),dm(e,t,n),Promise.all(o).then(function(){return t.targets!==void 0?am(e,t.targets,n):e})}const eo=new WeakMap;class Mo extends cr{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,s,o){const i=new as(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,r=>{this.parse(r,n,o)},s,o)}parse(t,n,s=()=>{}){this.decodeDracoFile(t,n,null,null,gt,s).catch(s)}decodeDracoFile(t,n,s,o,i=ut,r=()=>{}){const a={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:i};return this.decodeGeometry(t,a).then(n).catch(r)}decodeGeometry(t,n){const s=JSON.stringify(n);if(eo.has(t)){const c=eo.get(t);if(c.key===s)return c.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const i=this.workerNextTaskID++,r=t.byteLength,a=this._getWorker(i,r).then(c=>(o=c,new Promise((u,l)=>{o._callbacks[i]={resolve:u,reject:l},o.postMessage({type:"decode",id:i,taskConfig:n,buffer:t},[t])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{o&&i&&this._releaseTask(o,i)}),eo.set(t,{key:s,promise:a}),a}_createGeometry(t){const n=new $r;t.index&&n.setIndex(new vn(t.index.array,1));for(let s=0;s<t.attributes.length;s++){const o=t.attributes[s],i=o.name,r=o.array,a=o.itemSize,c=new vn(r,a);i==="color"&&(this._assignVertexColorSpace(c,o.vertexColorSpace),c.normalized=!(r instanceof Float32Array)),n.setAttribute(i,c)}return n}_assignVertexColorSpace(t,n){if(n!==gt)return;const s=new bt;for(let o=0,i=t.count;o<i;o++)s.fromBufferAttribute(t,o),oo.colorSpaceToWorking(s,gt),t.setXYZ(o,s.r,s.g,s.b)}_loadLibrary(t,n){const s=new as(this.manager);return s.setPath(this.decoderPath),s.setResponseType(n),s.setWithCredentials(this.withCredentials),new Promise((o,i)=>{s.load(t,o,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(s=>{const o=s[0];t||(this.decoderConfig.wasmBinary=s[1]);const i=$m.toString(),r=["/* draco decoder */",o,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(i){const r=i.data;switch(r.type){case"decode":o._callbacks[r.id].resolve(r);break;case"error":o._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,i){return o._taskLoad>i._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[t]=n,s._taskLoad+=n,s})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function $m(){let e,t;onmessage=function(r){const a=r.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(l){e.onModuleLoaded=function(f){l({draco:f})},DracoDecoderModule(e)});break;case"decode":const c=a.buffer,u=a.taskConfig;t.then(l=>{const f=l.draco,p=new f.Decoder;try{const $=n(f,p,new Int8Array(c),u),y=$.attributes.map(v=>v.array.buffer);$.index&&y.push($.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:$},y)}catch($){console.error($),self.postMessage({type:"error",id:a.id,error:$.message})}finally{f.destroy(p)}});break}};function n(r,a,c,u){const l=u.attributeIDs,f=u.attributeTypes;let p,$;const y=a.GetEncodedGeometryType(c);if(y===r.TRIANGULAR_MESH)p=new r.Mesh,$=a.DecodeArrayToMesh(c,c.byteLength,p);else if(y===r.POINT_CLOUD)p=new r.PointCloud,$=a.DecodeArrayToPointCloud(c,c.byteLength,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!$.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+$.error_msg());const v={index:null,attributes:[]};for(const R in l){const C=self[f[R]];let g,h;if(u.useUniqueIDs)h=l[R],g=a.GetAttributeByUniqueId(p,h);else{if(h=a.GetAttributeId(p,r[l[R]]),h===-1)continue;g=a.GetAttribute(p,h)}const _=o(r,a,p,R,C,g);R==="color"&&(_.vertexColorSpace=u.vertexColorSpace),v.attributes.push(_)}return y===r.TRIANGULAR_MESH&&(v.index=s(r,a,p)),r.destroy(p),v}function s(r,a,c){const l=c.num_faces()*3,f=l*4,p=r._malloc(f);a.GetTrianglesUInt32Array(c,f,p);const $=new Uint32Array(r.HEAPF32.buffer,p,l).slice();return r._free(p),{array:$,itemSize:1}}function o(r,a,c,u,l,f){const p=f.num_components(),y=c.num_points()*p,v=y*l.BYTES_PER_ELEMENT,R=i(r,l),C=r._malloc(v);a.GetAttributeDataArrayForAllPoints(c,f,R,v,C);const g=new l(r.HEAPF32.buffer,C,y).slice();return r._free(C),{name:u,array:g,itemSize:p}}function i(r,a){switch(a){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}const hm={__name:"PuppetModelView",props:{puppet:{type:Object,default:null}},setup(e){const t=e,n=Q(null);let s=null,o=null,i=null,r=0,a=null,c=null,u=new jc,l=null,f=null,p=0,$=!1;function y(){if($)return;const g=n.value;if(!g){console.log("[PuppetModelView] Container not ready, retrying..."),setTimeout(y,100);return}console.log("[PuppetModelView] Initializing Three.js..."),o=new mr,i=new So(45,1,.1,1e3),i.position.set(0,1,3),s=new gr({antialias:!0,alpha:!0}),s.setPixelRatio(window.devicePixelRatio||1),s.outputColorSpace=gt,f=new Mo,f.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),f.setCrossOrigin("anonymous"),console.log("[PuppetModelView] Draco loader initialized:",!!f),g.innerHTML="",g.appendChild(s.domElement);const h=new br(16777215,.8),_=new xo(16777215,.8);_.position.set(3,5,2),o.add(h,_);const w=()=>{if(!g||!s)return;let x=g.clientWidth,L=g.clientHeight;if(!x||!L){const S=g.getBoundingClientRect();if(x=S.width||200,L=S.height||200,!S.width||!S.height){requestAnimationFrame(w);return}}s.setSize(x,L,!1),i.aspect=x/Math.max(1,L),i.updateProjectionMatrix()};w(),l=new ResizeObserver(w),l.observe(g),requestAnimationFrame(()=>{w(),requestAnimationFrame(()=>{w(),requestAnimationFrame(w)})});const A=()=>{if(!s||!o||!i)return;r=requestAnimationFrame(A);const x=u.getDelta();c&&c.update(x),a&&(a.rotation.y+=x*.6),s.render(o,i)};A(),$=!0,console.log("[PuppetModelView] Three.js initialized successfully, container size:",g.clientWidth,"x",g.clientHeight)}function v(){c&&(c.stopAllAction(),c=null),a&&(o.remove(a),a.traverse(g=>{g.isMesh&&(g.geometry&&g.geometry.dispose(),Array.isArray(g.material)?g.material.forEach(h=>{h.map&&h.map.dispose(),h&&h.dispose&&h.dispose()}):g.material&&(g.material.map&&g.material.map.dispose(),g.material.dispose&&g.material.dispose()))}),a=null)}function R(g){const h=new ls().setFromObject(g),_=new Je,w=new Je;h.getSize(_),h.getCenter(w),g.position.sub(w);const A=-_.x*.3,x=_.y*.2,L=_.z*.4;g.position.add(new Je(A,x,L)),g.scale.multiplyScalar(.4);const P=s==null?void 0:s.domElement,U=P?P.clientWidth||P.width:200,I=P?P.clientHeight||P.height:200,B=Math.max(1e-6,U/Math.max(1,I)),K=i.fov*(Math.PI/180),q=2*Math.atan(Math.tan(K/2)*B),Z=1.15,X=_.y/2/Math.tan(K/2),J=_.x/2/Math.tan(q/2),$e=Z*Math.max(X,J,.1);i.position.set(0,Math.max(_.y*.05,.1),$e),i.lookAt(0,0,0)}async function C(g){var A,x;if(!g)return;console.log("[PuppetModelView] Loading puppet:",g.name),y(),v();const h=++p,_=new wo;_.setCrossOrigin("anonymous"),f||(console.log("[PuppetModelView] Creating Draco loader..."),f=new Mo,f.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),f.setCrossOrigin("anonymous")),_.setDRACOLoader(f),console.log("[PuppetModelView] Draco loader set:",!!f);let w=g.modelUrl||"";if(console.log("[PuppetModelView] Original modelUrl:",w),console.log("[PuppetModelView] Puppet image:",g.image),!w&&g.image&&/.webp($|\?)/i.test(g.image)&&(w=g.image.replace(/\.webp(\?.*)?$/i,".glb"),console.log("[PuppetModelView] Generated modelUrl from image:",w)),w&&!/^https?:\/\//i.test(w)&&!w.startsWith("/assets/")){const L=w;w=ce(w),console.log("[PuppetModelView] Converted URL:",L,"->",w)}if(console.log("[PuppetModelView] Model URL:",w),!w){console.log("[PuppetModelView] No model URL found");return}try{console.log("[PuppetModelView] Starting to load:",w);const L=await _.loadAsync(w);if(console.log("[PuppetModelView] GLTF loaded:",L),h!==p){console.log("[PuppetModelView] Ignoring outdated load result for:",g.name),L&&L.scene&&L.scene.traverse(S=>{S.isMesh&&(S.geometry&&S.geometry.dispose(),Array.isArray(S.material)?S.material.forEach(P=>{P.map&&P.map.dispose(),P.dispose&&P.dispose()}):S.material&&(S.material.map&&S.material.map.dispose(),S.material.dispose&&S.material.dispose()))});return}if(console.log("[PuppetModelView] Applying model for:",g.name),a=L.scene||((A=L.scenes)==null?void 0:A[0]),!a){console.error("[PuppetModelView] No scene found in GLTF");return}o.add(a),L.animations&&L.animations.length&&(c=new si(a),c.clipAction(L.animations[0]).play()),R(a),console.log("[PuppetModelView] Model loaded successfully:",g.name,"Scene children:",o.children.length)}catch(L){if(console.error("[PuppetModelView] Load failed:",L),console.error("[PuppetModelView] Failed URL:",w),console.error("[PuppetModelView] Puppet data:",g),L.message.includes("DRACOLoader")){console.log("[PuppetModelView] Retrying without Draco decoder...");try{const S=new wo;S.setCrossOrigin("anonymous");const P=await S.loadAsync(w);if(h===p&&(a=P.scene||((x=P.scenes)==null?void 0:x[0]),a)){o.add(a),P.animations&&P.animations.length&&(c=new si(a),c.clipAction(P.animations[0]).play()),R(a),console.log("[PuppetModelView] Model loaded successfully without Draco:",g.name);return}}catch(S){console.error("[PuppetModelView] Fallback load also failed:",S)}}if(h===p){const S=new Bc(1,1,1),P=new Co({color:8947967});a=new hr(S,P),o.add(a),R(a)}}}return ts(()=>t.puppet,async g=>{await On(),C(g)},{immediate:!0}),qt(()=>{console.log("[PuppetModelView] Component mounted"),On(()=>{n.value&&y()})}),Ls(()=>{console.log("[PuppetModelView] Cleaning up..."),cancelAnimationFrame(r),v(),o&&o.traverse(g=>{g.isMesh&&(g.geometry&&g.geometry.dispose(),Array.isArray(g.material)?g.material.forEach(h=>{h.map&&h.map.dispose(),h.dispose&&h.dispose()}):g.material&&(g.material.map&&g.material.map.dispose(),g.material.dispose&&g.material.dispose()))}),s&&(s.dispose(),s.forceContextLoss&&s.forceContextLoss()),l&&n.value&&l.unobserve(n.value),s=null,o=null,i=null,$=!1,p=0,console.log("[PuppetModelView] Cleanup completed")}),(g,h)=>(ne(),ae("div",{ref_key:"mountEl",ref:n,class:"model-canvas"},null,512))}},_m=Xt(hm,[["__scopeId","data-v-78e92f8f"]]),mm={class:"warehouse"},gm={class:"warehouse__resources"},bm={class:"resource-icon"},ym=["src","alt"],wm={class:"resource-value"},vm={key:0,class:"warehouse__main"},Tm={class:"warehouse__sidebar"},Mm={class:"puppet-list"},xm=["onClick","onMouseenter"],Cm={class:"puppet-card__quantity"},Sm={class:"puppet-card__image"},Lm=["src","alt"],Am={class:"puppet-card__info"},Im={class:"puppet-card__name"},Rm={class:"puppet-card__level"},Em={class:"puppet-detail__header"},km={class:"puppet-detail__name"},Pm={class:"puppet-detail__content"},Nm={class:"puppet-detail__row"},Om={class:"puppet-detail__model"},Dm={class:"puppet-detail__description"},Gm={class:"puppet-detail__row"},Fm={class:"puppet-detail__stats"},Hm={class:"stats-section"},Um={class:"stat-item"},Bm={class:"stat-value"},jm={class:"stat-item"},Vm={class:"stat-value"},Km={class:"stat-bonus"},Wm={class:"stat-item"},qm={class:"stat-value"},zm={class:"stat-bonus"},Xm={class:"stat-item"},Jm={class:"stat-value"},Ym={class:"stat-bonus"},Zm={class:"stat-item"},Qm={class:"stat-value"},eg={class:"equipment-section"},tg={class:"equipment-slots"},ng=["src","alt"],sg={key:1,class:"equipment-icon"},og={class:"skill-section"},ig={class:"skill-info"},rg={class:"skill-text"},ag={class:"skill-name"},cg={class:"skill-cooldown"},lg={class:"skill-effect"},ug={class:"skill-icon"},fg=["src","alt"],pg={key:1},dg={class:"puppet-detail__upgrade"},$g={class:"upgrade-cost"},hg=["src"],_g={class:"cost-amount"},mg={class:"warehouse__placeholder",key:"placeholder"},gg={__name:"Warehouse",setup(e,{expose:t}){function n(g){if(g==null)return g;const h=typeof g=="object"&&"_0"in g&&Object.keys(g).length===1?g._0:g;if(h&&typeof h=="object"&&"_0"in h&&typeof h._0=="number")return h._0;if(Array.isArray(h))return h.map(n);if(h&&typeof h=="object"){if(Array.isArray(h.entries)&&typeof h.size=="number"){const w={};for(const A of h.entries){if(!A)continue;const x=A.key??A._0??A[0],L=A.value??A._1??A[1],S=typeof x=="string"?x:x&&x._0?x._0:String(x);w[S]=n(L)}return w}const _={};for(const w of Object.keys(h)){const A=h[w];_[w]=n(A)}return _}return h}function s(g,h,_=[]){if(!g||typeof g!="object")return null;if(Object.prototype.hasOwnProperty.call(g,h))return[..._,h];if(Array.isArray(g)){for(let w=0;w<g.length;w++){const A=s(g[w],h,[..._,w]);if(A)return A}return null}for(const w of Object.keys(g)){const A=s(g[w],h,[..._,w]);if(A)return A}return null}function o(g,h){return h.reduce((_,w)=>_!=null?_[w]:void 0,g)}const i=Q([]);qt(async()=>{try{const g=kn(),h=await yo(g);console.log("[Warehouse] resource raw:",h);const _=n(h);console.log("[Warehouse] resource plain(unwrapped):",_);const w=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],A={SpiritalSpark:{name:"灵性火花",icon:ce("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:ce("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:ce("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:ce("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:ce("resource/heart_crystal_dust.webp")}},x=w.map(L=>({icon:A[L].icon,name:A[L].name,value:Number((_&&_[L])??0)}));i.value=x}catch{i.value=[{icon:ce("resource/spiritual_spark.webp"),name:"灵性火花",value:0},{icon:ce("resource/recall_gear.webp"),name:"回响齿轮",value:0},{icon:ce("resource/resonant_star_crystal/resonant_star_crystal.webp"),name:"共鸣星晶",value:0},{icon:ce("resource/refined_copper_ingot/refined_copper_ingot.webp"),name:"精炼铜锭",value:0},{icon:ce("resource/heart_crystal_dust.webp"),name:"心晶尘",value:0}]}});const r=Q([]);qt(async()=>{try{const g=kn(),h=await Zi(g);console.log("[Warehouse] copper raw:",h);const _=n(h);console.log("[Warehouse] copper plain(unwrapped):",_);let w=_&&Array.isArray(_.coppers)?_.coppers:[];if(!Array.isArray(w)){const x=s(_,"coppers");if(console.log("[Warehouse] copper key path:",x),x){const L=o(_,x);console.log("[Warehouse] copper found by path:",L),Array.isArray(L)&&(w=L)}!Array.isArray(w)&&_&&_.entries&&console.log("[Warehouse] copper entries sample:",_.entries)}console.log("[Warehouse] copper array length:",Array.isArray(w)?w.length:"not array");const A={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};r.value=(w||[]).map((x,L)=>{var ge,be,et,We,qe,ve;const S=(x==null?void 0:x.copper_info)||{},P=(S==null?void 0:S.skill)||{},U=(x==null?void 0:x.equipment_slot)||{},I=(U==null?void 0:U.slot1)||null,B=(U==null?void 0:U.slot2)||null,K=(x==null?void 0:x.attribute)||{},q=((ge=I==null?void 0:I.equipment_base)==null?void 0:ge.attribute)||{},Z=((be=B==null?void 0:B.equipment_base)==null?void 0:be.attribute)||{},X=Number(q.attack||0)+Number(Z.attack||0),J=Number(q.defense||0)+Number(Z.defense||0),$e=Number(q.dodge||0)+Number(Z.dodge||0),Ae=S==null?void 0:S.copper_type;return{id:L+1,name:(S==null?void 0:S.name)??"未知铜偶",level:(x==null?void 0:x.level)??1,image:(S==null?void 0:S.icon_url)||"",modelUrl:(S==null?void 0:S.model_url)||"",quantity:1,description:(S==null?void 0:S.description)||"",stats:{level:`${(x==null?void 0:x.level)??1}/5`,attack:{base:Number(K.attack||0),bonus:X},defense:{base:Number(K.defense||0),bonus:J},dodge:{base:Number(K.dodge||0),bonus:$e},class:A[Ae]||"未知"},equipment:[I?{name:((et=I.equipment_base)==null?void 0:et.name)||"装备",icon:((We=I.equipment_base)==null?void 0:We.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},U!=null&&U.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:B?{name:((qe=B.equipment_base)==null?void 0:qe.name)||"装备",icon:((ve=B.equipment_base)==null?void 0:ve.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(P==null?void 0:P.name)||"——",cooldown:(P==null?void 0:P.cool_down)!=null?`${P.cool_down}回合`:"——",effect:(P==null?void 0:P.description)||"——",icon:(P==null?void 0:P.resource_url)||""},upgradeCost:10}}),Array.isArray(r.value)&&r.value.length>0&&(a.value=r.value[0]),!a.value&&Array.isArray(r.value)&&r.value.length>0&&(a.value=r.value[0])}catch{r.value=[]}});const a=Q(null),c=Q([]),u=Q(null),l=Q(null),f=Q(null);function p(g,h){g&&(c.value[h]=g)}async function $(g,h){a.value=g,await On();const _=c.value[h];if(_&&typeof _.scrollIntoView=="function"&&_.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),u.value=h,l.value)try{l.value.scrollTo({top:0,behavior:"smooth"})}catch{l.value.scrollTop=0}setTimeout(()=>{u.value===h&&(u.value=null)},320)}const y=Q(!1);function v(){y.value=!0}function R(){return y.value?(y.value=!1,!0):!1}t({handleBack:R});async function C(g){try{const h=kn(),_=await yo(h),w=n(_),A=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],x={SpiritalSpark:{name:"灵性火花",icon:ce("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:ce("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:ce("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:ce("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:ce("resource/heart_crystal_dust.webp")}};i.value=A.map(I=>({icon:x[I].icon,name:x[I].name,value:Number((w==null?void 0:w[I])??0)}));const L=await Zi(h),S=n(L),P=Array.isArray(S==null?void 0:S.coppers)?S.coppers:[],U={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};r.value=(P||[]).map((I,B)=>{var ve,Fe,ze,tt,Pe,Mt;const K=(I==null?void 0:I.copper_info)||{},q=(K==null?void 0:K.skill)||{},Z=(I==null?void 0:I.equipment_slot)||{},X=(Z==null?void 0:Z.slot1)||null,J=(Z==null?void 0:Z.slot2)||null,$e=(I==null?void 0:I.attribute)||{},Ae=((ve=X==null?void 0:X.equipment_base)==null?void 0:ve.attribute)||{},ge=((Fe=J==null?void 0:J.equipment_base)==null?void 0:Fe.attribute)||{},be=Number(Ae.attack||0)+Number(ge.attack||0),et=Number(Ae.defense||0)+Number(ge.defense||0),We=Number(Ae.dodge||0)+Number(ge.dodge||0),qe=K==null?void 0:K.copper_type;return{id:B+1,name:(K==null?void 0:K.name)??"未知铜偶",level:(I==null?void 0:I.level)??1,image:(K==null?void 0:K.icon_url)||"",modelUrl:(K==null?void 0:K.model_url)||"",quantity:1,description:(K==null?void 0:K.description)||"",stats:{level:`${(I==null?void 0:I.level)??1}/5`,attack:{base:Number($e.attack||0),bonus:be},defense:{base:Number($e.defense||0),bonus:et},dodge:{base:Number($e.dodge||0),bonus:We},class:U[qe]||"未知"},equipment:[X?{name:((ze=X.equipment_base)==null?void 0:ze.name)||"装备",icon:((tt=X.equipment_base)==null?void 0:tt.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},Z!=null&&Z.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:J?{name:((Pe=J.equipment_base)==null?void 0:Pe.name)||"装备",icon:((Mt=J.equipment_base)==null?void 0:Mt.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(q==null?void 0:q.name)||"——",cooldown:(q==null?void 0:q.cool_down)!=null?`${q.cool_down}回合`:"——",effect:(q==null?void 0:q.description)||"——",icon:(q==null?void 0:q.resource_url)||""},upgradeCost:10}})}catch{}}return(g,h)=>(ne(),ae("div",mm,[T("div",gm,[(ne(!0),ae(De,null,Us(i.value,_=>(ne(),ae("div",{class:"resource-item",key:_.name},[T("div",bm,[T("img",{src:_.icon,alt:_.name},null,8,ym)]),T("div",wm,fe(_.value),1)]))),128))]),y.value?kt("",!0):(ne(),ae("div",vm,[T("div",Tm,[h[2]||(h[2]=T("div",{class:"warehouse__title"},"铜偶仓库",-1)),T("div",Mm,[(ne(!0),ae(De,null,Us(r.value,(_,w)=>{var A;return ne(),ae("div",{class:Nt(["puppet-card",{"puppet-card--selected":((A=a.value)==null?void 0:A.id)===_.id,"puppet-card--pulse":u.value===w,"puppet-card--hover":f.value===w}]),key:_.id,ref_for:!0,ref:x=>p(x,w),onClick:x=>$(_,w),onMouseenter:x=>f.value=w,onMouseleave:h[0]||(h[0]=x=>f.value=null)},[T("div",Cm,fe(_.level),1),T("div",Sm,[T("img",{src:_.image,alt:_.name},null,8,Lm)]),T("div",Am,[T("div",Im,fe(_.name),1),T("div",Rm,fe(_.level)+"级",1)])],42,xm)}),128)),T("div",{class:"puppet-card puppet-card--add",onClick:v},[...h[1]||(h[1]=[T("div",{class:"puppet-card__add-icon"},"+",-1),T("div",{class:"puppet-card__add-text"},"抽取更多",-1)])])])]),T("div",{class:"warehouse__detail",ref_key:"detailWrap",ref:l},[_e(Ku,{name:"fade-slide",mode:"out-in"},{default:Jr(()=>{var _;return[a.value?(ne(),ae("div",{class:"puppet-detail",key:((_=a.value)==null?void 0:_.id)||"none"},[T("div",Em,[T("h2",km,fe(a.value.name),1)]),T("div",Pm,[T("div",Nm,[T("div",Om,[_e(_m,{puppet:a.value},null,8,["puppet"])]),T("div",Dm,fe(a.value.description),1)]),T("div",Gm,[T("div",Fm,[T("div",Hm,[T("div",Um,[h[3]||(h[3]=T("span",{class:"stat-label"},"等级:",-1)),T("span",Bm,fe(a.value.stats.level),1)]),T("div",jm,[h[4]||(h[4]=T("span",{class:"stat-label"},"攻击力:",-1)),T("span",Vm,[os(fe(a.value.stats.attack.base)+" ",1),T("span",Km,"(+"+fe(a.value.stats.attack.bonus)+")",1)])]),T("div",Wm,[h[5]||(h[5]=T("span",{class:"stat-label"},"防御力:",-1)),T("span",qm,[os(fe(a.value.stats.defense.base)+" ",1),T("span",zm,"(+"+fe(a.value.stats.defense.bonus)+")",1)])]),T("div",Xm,[h[6]||(h[6]=T("span",{class:"stat-label"},"闪避:",-1)),T("span",Jm,[os(fe(a.value.stats.dodge.base)+"% ",1),T("span",Ym,"(+"+fe(a.value.stats.dodge.bonus)+"%)",1)])]),T("div",Zm,[h[7]||(h[7]=T("span",{class:"stat-label"},"职业:",-1)),T("span",Qm,fe(a.value.stats.class),1)])])]),T("div",eg,[h[8]||(h[8]=T("h4",{class:"section-title"},"装备",-1)),T("div",tg,[(ne(!0),ae(De,null,Us(a.value.equipment,(w,A)=>(ne(),ae("div",{key:A,class:Nt(["equipment-slot",{"equipment-slot--empty":!w.equipped&&!w.locked,"equipment-slot--locked":w.locked}])},[w.equipped&&w.icon&&w.icon.startsWith("/")?(ne(),ae("img",{key:0,src:w.icon,alt:w.name,class:"equipment-icon"},null,8,ng)):(ne(),ae("span",sg,fe(w.locked?"🔒":w.icon),1))],2))),128))])])]),T("div",og,[h[9]||(h[9]=T("h4",{class:"section-title"},"技能",-1)),T("div",ig,[T("div",rg,[T("div",ag,fe(a.value.skill.name),1),T("div",cg,"冷却: "+fe(a.value.skill.cooldown),1),T("div",lg,fe(a.value.skill.effect),1)]),T("div",ug,[a.value.skill.icon&&a.value.skill.icon.startsWith("/")?(ne(),ae("img",{key:0,src:a.value.skill.icon,alt:a.value.skill.name,class:"skill-icon-img"},null,8,fg)):(ne(),ae("span",pg,fe(a.value.skill.icon),1))])])])]),T("div",dg,[T("div",$g,[T("img",{class:"cost-icon-img",src:Cn(ce)("img/warehouse/goods/ea74bce606c59ac4ab84ab117375c0de813cea49.webp"),alt:"cost"},null,8,hg),T("span",_g,"X "+fe(a.value.upgradeCost),1)]),h[10]||(h[10]=T("button",{class:"upgrade-btn"},[T("span",{class:"upgrade-icon"},"⏫")],-1))])])):(ne(),ae("div",mg,[...h[11]||(h[11]=[T("p",null,"请选择英雄以浏览",-1)])]))]}),_:1})],512)])),y.value?(ne(),jo(k_,{key:1,onDraw:C})):kt("",!0)]))}},bg=Xt(gg,[["__scopeId","data-v-251b5a67"]]),yg={class:"panel",style:{left:"24px",right:"auto"}},wg={__name:"TopLeftPanel",emits:["back","open-settings"],setup(e,{emit:t}){return(n,s)=>(ne(),ae("div",yg,[T("button",{class:"btn",onClick:s[0]||(s[0]=o=>n.$emit("back")),title:"返回"},[...s[2]||(s[2]=[T("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M15 18L9 12L15 6",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),T("span",{class:"sr-only"},"返回",-1)])]),T("button",{class:"btn",onClick:s[1]||(s[1]=o=>n.$emit("open-settings")),title:"设置"},[...s[3]||(s[3]=[T("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M12 15.5C13.933 15.5 15.5 13.933 15.5 12C15.5 10.067 13.933 8.5 12 8.5C10.067 8.5 8.5 10.067 8.5 12C8.5 13.933 10.067 15.5 12 15.5Z",stroke:"#ffffff","stroke-width":"2"}),T("path",{d:"M19.4 15A7.964 7.964 0 0 0 20 12C20 11.49 19.95 10.99 19.86 10.5L22 8.5L20 5.5L17.34 6.07C16.78 5.58 16.14 5.18 15.44 4.9L15 2H9L8.56 4.9C7.86 5.18 7.22 5.58 6.66 6.07L4 5.5L2 8.5L4.14 10.5C4.05 10.99 4 11.49 4 12C4 12.51 4.05 13.01 4.14 13.5L2 15.5L4 18.5L6.66 17.93C7.22 18.42 7.86 18.82 8.56 19.1L9 22H15L15.44 19.1C16.14 18.82 16.78 18.42 17.34 17.93L20 18.5L22 15.5L19.86 13.5C19.95 13.01 20 12.51 20 12",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),T("span",{class:"sr-only"},"设置",-1)])])]))}},or=Xt(wg,[["__scopeId","data-v-d9966d11"]]),vg={class:"startmenu"},Tg={key:0,class:"settings-local"},Mg={__name:"StartMenu",emits:["started"],setup(e,{emit:t}){const n=Q(null),s=Q(null);let o=null,i=null,r=null,a=null,c=null,u=1.2;const l=Q(!1),f=Q(!1),p=t;function $(){if(a=requestAnimationFrame($),c){const A=Date.now()*.001;c.position.y=Math.sin(A*.8)*.1,c.rotation.y=Math.sin(A*.6)*.1;const x=u+Math.sin(A*1.2)*.04;c.scale.setScalar(x)}r&&r.render(o,i)}function y(){!r||!i||(i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight))}function v(){a&&(cancelAnimationFrame(a),a=null)}function R(){a||(a=requestAnimationFrame($))}function C(){try{v()}catch{}try{window.removeEventListener("resize",y)}catch{}try{o&&(o.traverse(A=>{if(A.isMesh){A.geometry&&A.geometry.dispose&&A.geometry.dispose();const x=A.material;Array.isArray(x)?x.forEach(L=>L&&L.dispose&&L.dispose()):x&&x.dispose&&x.dispose()}}),o.clear())}catch{}try{if(r){r.clear(!0,!0,!0),r.dispose();const A=r.getContext&&r.getContext(),x=A&&A.getExtension&&A.getExtension("WEBGL_lose_context");x&&x.loseContext&&x.loseContext()}}catch{}o=null,i=null,r=null,c=null}async function g(){try{window.getAssetUrl=ce,window.precacheAllResources=go,window.getCacheStatus=wf,go().catch(()=>{})}catch{}o=new mr,o.background=new bt("#a0a0a0"),i=new So(50,1.333,.1,1e3),i.position.set(-3.655,.2,-.006),i.rotation.set(-1.618275,-1.538307,-1.6183,"XYZ"),r=new gr({antialias:!0,canvas:n.value}),r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio);const A=new br(4210752,.4);o.add(A);const x=new xo(16777215,12.5);x.position.set(-5,-2,1),o.add(x);const L=new Mo;L.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/");const S=new wo;S.setDRACOLoader(L);const P=window.getAssetUrl?window.getAssetUrl("logo.glb"):"./assets/logo.glb",U=()=>new Promise((I,B)=>{S.load(P,K=>I(K),void 0,K=>B(K))});try{if(!(await fetch(P,{method:"HEAD",mode:"cors",credentials:"omit"})).ok)throw new Error("logo not ok");const B=await U();B.scene.position.set(0,0,0),o.add(B.scene);const q=new ls().setFromObject(B.scene).getCenter(new Je);B.scene.position.set(-q.x,-q.y,-q.z);try{B.scene.scale.setScalar(u)}catch{}c=B.scene,l.value=!0}catch{try{const B=await U();B.scene.position.set(0,0,0),o.add(B.scene);const q=new ls().setFromObject(B.scene).getCenter(new Je);B.scene.position.set(-q.x,-q.y,-q.z);try{B.scene.scale.setScalar(u)}catch{}c=B.scene,l.value=!0}catch{}}window.addEventListener("resize",y),$(),window.__START_MENU_PAUSE__=()=>v(),window.__START_MENU_RESUME__=()=>R()}function h(){p("started"),v()}function _(){f.value=!0}function w(){f.value=!1}return qt(()=>{g()}),Ls(()=>{C()}),(A,x)=>(ne(),ae("div",vg,[T("canvas",{ref_key:"canvasRef",ref:n,class:"startmenu__canvas"},null,512),Yr(T("div",{ref_key:"uiRootRef",ref:s,class:"startmenu-ui"},[T("button",{id:"start-btn",class:"startmenu-btn","aria-label":"开始",onClick:h},"开始"),T("button",{id:"settings-btn",class:"startmenu-btn","aria-label":"设置",onClick:_},"设置")],512),[[Ea,l.value]]),f.value?(ne(),ae("div",Tg,[T("div",{class:"settings-local__card"},[T("div",{class:"settings-local__header"},[x[0]||(x[0]=T("div",{class:"settings-local__title"},"设置",-1)),T("button",{class:"settings-local__close",onClick:w,"aria-label":"关闭"},"✕")]),x[1]||(x[1]=T("div",{class:"settings-local__content"},[T("div",{class:"settings-local__row"},"此处放置开始界面相关设置（占位）。")],-1))])])):kt("",!0)]))}},xg=Xt(Mg,[["__scopeId","data-v-dfe718ef"]]),Cg={class:"stage"},Sg={key:0,style:{position:"relative",width:"100%",height:"100%"}},Lg={key:1,class:"modal"},Ag={class:"modal-title"},Ig={key:2,class:"overlay",style:{"z-index":"30000","align-items":"flex-start","justify-content":"flex-start",background:"rgba(0,0,0,0.25)"}},Rg={class:"settings"},Eg={class:"settings__content"},kg={class:"settings__state"},Pg={__name:"App",setup(e){const t=Q(!1),n=Q(null),s=Q(!1),o=Q(null),i=Q([]);Q(0);const r=Q(!0);function a(g){n.value!==g&&(i.value.push(n.value),n.value=g),window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__(),t.value=!0}function c(){n.value=null,i.value=[],window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1}function u(){s.value=!0,t.value=!0}function l(){s.value=!1,n.value||(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1)}function f(){if(s.value){l();return}if(n.value){if(n.value==="warehouse"&&o.value&&o.value.handleBack&&o.value.handleBack())return;const g=i.value.pop()??null;n.value=g,g||(r.value?(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1):(r.value=!0,t.value=!1));return}if(!r.value){r.value=!0,window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1;return}}const p=Q(!0),$=Q(null);function y(){p.value=!p.value}function v(){try{const g={version:1,savedAt:Date.now(),payload:{}},h=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),_=document.createElement("a");_.href=URL.createObjectURL(h),_.download="save.json",_.click(),URL.revokeObjectURL(_.href)}catch{}}function R(){try{$.value&&$.value.click()}catch{}}function C(g){try{const h=g.target&&g.target.files&&g.target.files[0];if(!h)return;const _=new FileReader;_.onload=()=>{try{JSON.parse(String(_.result||"{}"))}catch{}g.target.value=""},_.readAsText(h)}catch{}}return(g,h)=>(ne(),ae("div",Cg,[Yr(_e(xg,{onStarted:h[0]||(h[0]=_=>r.value=!1)},null,512),[[Ea,r.value]]),r.value?kt("",!0):(ne(),jo(or,{key:0,onBack:f,onOpenSettings:u})),_e(Mf,{onStartGame:h[1]||(h[1]=_=>a("start")),onOpenWarehouse:h[2]||(h[2]=_=>a("warehouse")),onOpenTutorial:h[3]||(h[3]=_=>a("tutorial")),onOpenEncyclopedia:h[4]||(h[4]=_=>a("encyclopedia"))}),n.value?(ne(),ae("div",{key:1,class:Nt(["overlay",{"overlay--warehouse":n.value==="warehouse"}])},[n.value==="warehouse"?(ne(),ae("div",Sg,[_e(or,{onBack:f,onOpenSettings:u}),_e(bg,{ref_key:"warehouseRef",ref:o},null,512)])):(ne(),ae("div",Lg,[T("h2",Ag,fe(n.value==="warehouse"?"铜偶仓库 · Copper Warehouse":n.value==="tutorial"?"新手教程 · Tutorial":n.value==="encyclopedia"?"游戏百科 · Game Encyclopedia":"开始游戏 · Start Game"),1),h[5]||(h[5]=T("p",{class:"modal-body"},"占位内容（后续替换为实际功能界面）。",-1)),T("button",{class:"close-btn",onClick:c},"关闭")]))],2)):kt("",!0),s.value?(ne(),ae("div",Ig,[T("div",Rg,[T("div",{class:"settings__header"},[h[7]||(h[7]=T("div",{class:"settings__title"},"设置",-1)),T("button",{class:"settings__close",onClick:l,"aria-label":"关闭"},[...h[6]||(h[6]=[T("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M18 6L6 18M6 6l12 12",stroke:"#fff","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),T("div",Eg,[T("button",{class:"settings__item",onClick:y},[h[8]||(h[8]=Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M9 18V5l10-2v9" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M9 18a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm10-6a3 3 0 1 1-6 0" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>音乐</span>',2)),T("span",kg,fe(p.value?"开":"关"),1)]),T("button",{class:"settings__item",onClick:v},[...h[9]||(h[9]=[Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M12 3v12m0 0l-4-4m4 4l4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M4 19h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>下载存档</span>',2)])]),T("button",{class:"settings__item",onClick:R},[...h[10]||(h[10]=[Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M12 21V9m0 0l4 4m-4-4L8 13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M4 5h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>上传存档</span>',2)])]),T("input",{ref_key:"fileInput",ref:$,type:"file",accept:".json",onChange:C,style:{display:"none"}},null,544)])])])):kt("",!0)]))}},ir=Xt(Pg,[["__scopeId","data-v-29564b82"]]);function Ng(e,t,n){const s=document.getElementById("progress-bar"),o=document.getElementById("progress-text");s&&(s.style.width=n+"%"),o&&(o.textContent=`${e} / ${t} (${n}%)`)}function rr(){const e=document.getElementById("loading-screen");e&&(e.classList.add("fade-out"),setTimeout(()=>{e.style.display="none"},500))}async function Og(){try{console.log("开始预缓存资源..."),await go(Ng),console.log("预缓存完成！"),Di(ir).mount("#app"),setTimeout(()=>{rr()},500)}catch(e){console.error("预缓存失败:",e),Di(ir).mount("#app"),rr()}}Og();
