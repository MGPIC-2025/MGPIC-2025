import{T as Ul,a as Ko,b as ia,L as ra,c as Wn,F as Fs,M as kt,V as We,C as Et,d as Ct,S as jt,e as $l,P as aa,D as os,f as Hs,g as me,I as Vl,Q as js,h as Bl,O as la,i as Gl,j as Kl,B as qn,k as zl,l as ca,N as Wl,m as ql,n as Xl,o as zo,p as ua,R as Wo,q as Yl,r as Zl,s as Jl,t as To,u as fa,v as qt,w as Gn,x as wt,y as Ql,z as mi,A as ec,E as et,G as tc,H as da,J as nc,K as sc,U as So,W as ro,X as ha,Y as oc,Z as ic,_ as rc,$ as ac,a0 as lc,a1 as pa,a2 as cc,a3 as Bi,a4 as Gi,a5 as Ki,a6 as zi,a7 as qo,a8 as uc,a9 as fc,aa as ao,ab as dc,ac as Wi,ad as ln,ae as gi,af as hc,ag as _i,ah as yi,ai as bi,aj as pc,ak as Pn,al as xn,am as qi,an as mc,ao as gc,ap as Xi,aq as _c,ar as Yi}from"./three-BbwhY7g4.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $t(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const fe=Object.freeze({}),Mn=Object.freeze([]),Le=()=>{},ma=()=>!1,ds=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Us=t=>t.startsWith("onUpdate:"),xe=Object.assign,vi=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yc=Object.prototype.hasOwnProperty,le=(t,e)=>yc.call(t,e),Z=Array.isArray,fn=t=>hs(t)==="[object Map]",lo=t=>hs(t)==="[object Set]",Zi=t=>hs(t)==="[object Date]",ee=t=>typeof t=="function",ye=t=>typeof t=="string",Pt=t=>typeof t=="symbol",ce=t=>t!==null&&typeof t=="object",wi=t=>(ce(t)||ee(t))&&ee(t.then)&&ee(t.catch),ga=Object.prototype.toString,hs=t=>ga.call(t),Ti=t=>hs(t).slice(8,-1),_a=t=>hs(t)==="[object Object]",Si=t=>ye(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xn=$t(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bc=$t("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),co=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},vc=/-\w/g,it=co(t=>t.replace(vc,e=>e.slice(1).toUpperCase())),wc=/\B([A-Z])/g,Jt=co(t=>t.replace(wc,"-$1").toLowerCase()),uo=co(t=>t.charAt(0).toUpperCase()+t.slice(1)),on=co(t=>t?`on${uo(t)}`:""),Zt=(t,e)=>!Object.is(t,e),Tn=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$s=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Vs=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Tc=t=>{const e=ye(t)?Number(t):NaN;return isNaN(e)?t:e};let Ji;const ps=()=>Ji||(Ji=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yt(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=ye(s)?Cc(s):Yt(s);if(o)for(const i in o)e[i]=o[i]}return e}else if(ye(t)||ce(t))return t}const Sc=/;(?![^(]*\))/g,xc=/:([^]+)/,Ec=/\/\*[^]*?\*\//g;function Cc(t){const e={};return t.replace(Ec,"").split(Sc).forEach(n=>{if(n){const s=n.split(xc);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ie(t){let e="";if(ye(t))e=t;else if(Z(t))for(let n=0;n<t.length;n++){const s=Ie(t[n]);s&&(e+=s+" ")}else if(ce(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Pc="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Mc="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Ac="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",Rc=$t(Pc),kc=$t(Mc),Ic=$t(Ac),Lc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Oc=$t(Lc);function ya(t){return!!t||t===""}function Dc(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=fo(t[s],e[s]);return n}function fo(t,e){if(t===e)return!0;let n=Zi(t),s=Zi(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Pt(t),s=Pt(e),n||s)return t===e;if(n=Z(t),s=Z(e),n||s)return n&&s?Dc(t,e):!1;if(n=ce(t),s=ce(e),n||s){if(!n||!s)return!1;const o=Object.keys(t).length,i=Object.keys(e).length;if(o!==i)return!1;for(const r in t){const a=t.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!fo(t[r],e[r]))return!1}}return String(t)===String(e)}function Nc(t,e){return t.findIndex(n=>fo(n,e))}const ba=t=>!!(t&&t.__v_isRef===!0),re=t=>ye(t)?t:t==null?"":Z(t)||ce(t)&&(t.toString===ga||!ee(t.toString))?ba(t)?re(t.value):JSON.stringify(t,va,2):String(t),va=(t,e)=>ba(e)?va(t,e.value):fn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,o],i)=>(n[xo(s,i)+" =>"]=o,n),{})}:lo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>xo(n))}:Pt(e)?xo(e):ce(e)&&!Z(e)&&!_a(e)?String(e):e,xo=(t,e="")=>{var n;return Pt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function at(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let Ke;class Fc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!e&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ke;try{return Ke=this,e()}finally{Ke=n}}else at("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=Ke,Ke=this)}off(){this._on>0&&--this._on===0&&(Ke=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Hc(){return Ke}let ue;const Eo=new WeakSet;class wa{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Eo.has(this)&&(Eo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Sa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Qi(this),xa(this);const e=ue,n=rt;ue=this,rt=!0;try{return this.fn()}finally{ue!==this&&at("Active effect was not restored correctly - this is likely a Vue internal bug."),Ea(this),ue=e,rt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ci(e);this.deps=this.depsTail=void 0,Qi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Eo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xo(this)&&this.run()}get dirty(){return Xo(this)}}let Ta=0,Yn,Zn;function Sa(t,e=!1){if(t.flags|=8,e){t.next=Zn,Zn=t;return}t.next=Yn,Yn=t}function xi(){Ta++}function Ei(){if(--Ta>0)return;if(Zn){let e=Zn;for(Zn=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Yn;){let e=Yn;for(Yn=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function xa(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ea(t){let e,n=t.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Ci(s),jc(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}t.deps=e,t.depsTail=n}function Xo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ca(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ca(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===is)||(t.globalVersion=is,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xo(t))))return;t.flags|=2;const e=t.dep,n=ue,s=rt;ue=t,rt=!0;try{xa(t);const o=t.fn(t._value);(e.version===0||Zt(o,t._value))&&(t.flags|=128,t._value=o,e.version++)}catch(o){throw e.version++,o}finally{ue=n,rt=s,Ea(t),t.flags&=-3}}function Ci(t,e=!1){const{dep:n,prevSub:s,nextSub:o}=t;if(s&&(s.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=s,t.nextSub=void 0),n.subsHead===t&&(n.subsHead=o),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ci(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function jc(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let rt=!0;const Pa=[];function lt(){Pa.push(rt),rt=!1}function ct(){const t=Pa.pop();rt=t===void 0?!0:t}function Qi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ue;ue=void 0;try{e()}finally{ue=n}}}let is=0;class Uc{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0,this.subsHead=void 0}track(e){if(!ue||!rt||ue===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ue)n=this.activeLink=new Uc(ue,this),ue.deps?(n.prevDep=ue.depsTail,ue.depsTail.nextDep=n,ue.depsTail=n):ue.deps=ue.depsTail=n,Ma(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ue.depsTail,n.nextDep=void 0,ue.depsTail.nextDep=n,ue.depsTail=n,ue.deps===n&&(ue.deps=s)}return ue.onTrack&&ue.onTrack(xe({effect:ue},e)),n}trigger(e){this.version++,is++,this.notify(e)}notify(e){xi();try{for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(xe({effect:n.sub},e));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ei()}}}function Ma(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Ma(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}}const Yo=new WeakMap,dn=Symbol("Object iterate"),Zo=Symbol("Map keys iterate"),rs=Symbol("Array iterate");function Me(t,e,n){if(rt&&ue){let s=Yo.get(t);s||Yo.set(t,s=new Map);let o=s.get(n);o||(s.set(n,o=new Pi),o.map=s,o.key=n),o.track({target:t,type:e,key:n})}}function bt(t,e,n,s,o,i){const r=Yo.get(t);if(!r){is++;return}const a=l=>{l&&l.trigger({target:t,type:e,key:n,newValue:s,oldValue:o,oldTarget:i})};if(xi(),e==="clear")r.forEach(a);else{const l=Z(t),u=l&&Si(n);if(l&&n==="length"){const c=Number(s);r.forEach((f,d)=>{(d==="length"||d===rs||!Pt(d)&&d>=c)&&a(f)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),u&&a(r.get(rs)),e){case"add":l?u&&a(r.get("length")):(a(r.get(dn)),fn(t)&&a(r.get(Zo)));break;case"delete":l||(a(r.get(dn)),fn(t)&&a(r.get(Zo)));break;case"set":fn(t)&&a(r.get(dn));break}}Ei()}function bn(t){const e=ne(t);return e===t?e:(Me(e,"iterate",rs),Ue(t)?e:e.map(Re))}function ho(t){return Me(t=ne(t),"iterate",rs),t}const $c={__proto__:null,[Symbol.iterator](){return Co(this,Symbol.iterator,Re)},concat(...t){return bn(this).concat(...t.map(e=>Z(e)?bn(e):e))},entries(){return Co(this,"entries",t=>(t[1]=Re(t[1]),t))},every(t,e){return It(this,"every",t,e,void 0,arguments)},filter(t,e){return It(this,"filter",t,e,n=>n.map(Re),arguments)},find(t,e){return It(this,"find",t,e,Re,arguments)},findIndex(t,e){return It(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return It(this,"findLast",t,e,Re,arguments)},findLastIndex(t,e){return It(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return It(this,"forEach",t,e,void 0,arguments)},includes(...t){return Po(this,"includes",t)},indexOf(...t){return Po(this,"indexOf",t)},join(t){return bn(this).join(t)},lastIndexOf(...t){return Po(this,"lastIndexOf",t)},map(t,e){return It(this,"map",t,e,void 0,arguments)},pop(){return jn(this,"pop")},push(...t){return jn(this,"push",t)},reduce(t,...e){return er(this,"reduce",t,e)},reduceRight(t,...e){return er(this,"reduceRight",t,e)},shift(){return jn(this,"shift")},some(t,e){return It(this,"some",t,e,void 0,arguments)},splice(...t){return jn(this,"splice",t)},toReversed(){return bn(this).toReversed()},toSorted(t){return bn(this).toSorted(t)},toSpliced(...t){return bn(this).toSpliced(...t)},unshift(...t){return jn(this,"unshift",t)},values(){return Co(this,"values",Re)}};function Co(t,e,n){const s=ho(t),o=s[e]();return s!==t&&!Ue(t)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const Vc=Array.prototype;function It(t,e,n,s,o,i){const r=ho(t),a=r!==t&&!Ue(t),l=r[e];if(l!==Vc[e]){const f=l.apply(t,i);return a?Re(f):f}let u=n;r!==t&&(a?u=function(f,d){return n.call(this,Re(f),d,t)}:n.length>2&&(u=function(f,d){return n.call(this,f,d,t)}));const c=l.call(r,u,s);return a&&o?o(c):c}function er(t,e,n,s){const o=ho(t);let i=n;return o!==t&&(Ue(t)?n.length>3&&(i=function(r,a,l){return n.call(this,r,a,l,t)}):i=function(r,a,l){return n.call(this,r,Re(a),l,t)}),o[e](i,...s)}function Po(t,e,n){const s=ne(t);Me(s,"iterate",rs);const o=s[e](...n);return(o===-1||o===!1)&&Bs(n[0])?(n[0]=ne(n[0]),s[e](...n)):o}function jn(t,e,n=[]){lt(),xi();const s=ne(t)[e].apply(t,n);return Ei(),ct(),s}const Bc=$t("__proto__,__v_isRef,__isVue"),Aa=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pt));function Gc(t){Pt(t)||(t=String(t));const e=ne(this);return Me(e,"has",t),e.hasOwnProperty(t)}class Ra{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?Na:Da:i?Oa:La).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const r=Z(e);if(!o){let l;if(r&&(l=$c[n]))return l;if(n==="hasOwnProperty")return Gc}const a=Reflect.get(e,n,Ce(e)?e:s);if((Pt(n)?Aa.has(n):Bc(n))||(o||Me(e,"get",n),i))return a;if(Ce(a)){const l=r&&Si(n)?a:a.value;return o&&ce(l)?Qo(l):l}return ce(a)?o?Qo(a):Mi(a):a}}class ka extends Ra{constructor(e=!1){super(!1,e)}set(e,n,s,o){let i=e[n];if(!this._isShallow){const l=Mt(i);if(!Ue(s)&&!Mt(s)&&(i=ne(i),s=ne(s)),!Z(e)&&Ce(i)&&!Ce(s))return l?(at(`Set operation on key "${String(n)}" failed: target is readonly.`,e[n]),!0):(i.value=s,!0)}const r=Z(e)&&Si(n)?Number(n)<e.length:le(e,n),a=Reflect.set(e,n,s,Ce(e)?e:o);return e===ne(o)&&(r?Zt(s,i)&&bt(e,"set",n,s,i):bt(e,"add",n,s)),a}deleteProperty(e,n){const s=le(e,n),o=e[n],i=Reflect.deleteProperty(e,n);return i&&s&&bt(e,"delete",n,void 0,o),i}has(e,n){const s=Reflect.has(e,n);return(!Pt(n)||!Aa.has(n))&&Me(e,"has",n),s}ownKeys(e){return Me(e,"iterate",Z(e)?"length":dn),Reflect.ownKeys(e)}}class Ia extends Ra{constructor(e=!1){super(!0,e)}set(e,n){return at(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0}deleteProperty(e,n){return at(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}}const Kc=new ka,zc=new Ia,Wc=new ka(!0),qc=new Ia(!0),Jo=t=>t,vs=t=>Reflect.getPrototypeOf(t);function Xc(t,e,n){return function(...s){const o=this.__v_raw,i=ne(o),r=fn(i),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,u=o[t](...s),c=n?Jo:e?Gs:Re;return!e&&Me(i,"iterate",l?Zo:dn),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:a?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function ws(t){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";at(`${uo(t)} operation ${n}failed: target is readonly.`,ne(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Yc(t,e){const n={get(o){const i=this.__v_raw,r=ne(i),a=ne(o);t||(Zt(o,a)&&Me(r,"get",o),Me(r,"get",a));const{has:l}=vs(r),u=e?Jo:t?Gs:Re;if(l.call(r,o))return u(i.get(o));if(l.call(r,a))return u(i.get(a));i!==r&&i.get(o)},get size(){const o=this.__v_raw;return!t&&Me(ne(o),"iterate",dn),o.size},has(o){const i=this.__v_raw,r=ne(i),a=ne(o);return t||(Zt(o,a)&&Me(r,"has",o),Me(r,"has",a)),o===a?i.has(o):i.has(o)||i.has(a)},forEach(o,i){const r=this,a=r.__v_raw,l=ne(a),u=e?Jo:t?Gs:Re;return!t&&Me(l,"iterate",dn),a.forEach((c,f)=>o.call(i,u(c),u(f),r))}};return xe(n,t?{add:ws("add"),set:ws("set"),delete:ws("delete"),clear:ws("clear")}:{add(o){!e&&!Ue(o)&&!Mt(o)&&(o=ne(o));const i=ne(this);return vs(i).has.call(i,o)||(i.add(o),bt(i,"add",o,o)),this},set(o,i){!e&&!Ue(i)&&!Mt(i)&&(i=ne(i));const r=ne(this),{has:a,get:l}=vs(r);let u=a.call(r,o);u?tr(r,a,o):(o=ne(o),u=a.call(r,o));const c=l.call(r,o);return r.set(o,i),u?Zt(i,c)&&bt(r,"set",o,i,c):bt(r,"add",o,i),this},delete(o){const i=ne(this),{has:r,get:a}=vs(i);let l=r.call(i,o);l?tr(i,r,o):(o=ne(o),l=r.call(i,o));const u=a?a.call(i,o):void 0,c=i.delete(o);return l&&bt(i,"delete",o,void 0,u),c},clear(){const o=ne(this),i=o.size!==0,r=fn(o)?new Map(o):new Set(o),a=o.clear();return i&&bt(o,"clear",void 0,void 0,r),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Xc(o,t,e)}),n}function po(t,e){const n=Yc(t,e);return(s,o,i)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?s:Reflect.get(le(n,o)&&o in s?n:s,o,i)}const Zc={get:po(!1,!1)},Jc={get:po(!1,!0)},Qc={get:po(!0,!1)},eu={get:po(!0,!0)};function tr(t,e,n){const s=ne(n);if(s!==n&&e.call(t,s)){const o=Ti(t);at(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const La=new WeakMap,Oa=new WeakMap,Da=new WeakMap,Na=new WeakMap;function tu(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nu(t){return t.__v_skip||!Object.isExtensible(t)?0:tu(Ti(t))}function Mi(t){return Mt(t)?t:mo(t,!1,Kc,Zc,La)}function su(t){return mo(t,!1,Wc,Jc,Oa)}function Qo(t){return mo(t,!0,zc,Qc,Da)}function Tt(t){return mo(t,!0,qc,eu,Na)}function mo(t,e,n,s,o){if(!ce(t))return at(`value cannot be made ${e?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=nu(t);if(i===0)return t;const r=o.get(t);if(r)return r;const a=new Proxy(t,i===2?s:n);return o.set(t,a),a}function hn(t){return Mt(t)?hn(t.__v_raw):!!(t&&t.__v_isReactive)}function Mt(t){return!!(t&&t.__v_isReadonly)}function Ue(t){return!!(t&&t.__v_isShallow)}function Bs(t){return t?!!t.__v_raw:!1}function ne(t){const e=t&&t.__v_raw;return e?ne(e):t}function ou(t){return!le(t,"__v_skip")&&Object.isExtensible(t)&&$s(t,"__v_skip",!0),t}const Re=t=>ce(t)?Mi(t):t,Gs=t=>ce(t)?Qo(t):t;function Ce(t){return t?t.__v_isRef===!0:!1}function X(t){return iu(t,!1)}function iu(t,e){return Ce(t)?t:new ru(t,e)}class ru{constructor(e,n){this.dep=new Pi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ne(e),this._value=n?e:Re(e),this.__v_isShallow=n}get value(){return this.dep.track({target:this,type:"get",key:"value"}),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ue(e)||Mt(e);e=s?e:ne(e),Zt(e,n)&&(this._rawValue=e,this._value=s?e:Re(e),this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:n}))}}function au(t){return Ce(t)?t.value:t}const lu={get:(t,e,n)=>e==="__v_raw"?t:au(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const o=t[e];return Ce(o)&&!Ce(n)?(o.value=n,!0):Reflect.set(t,e,n,s)}};function Fa(t){return hn(t)?t:new Proxy(t,lu)}class cu{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Pi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ue!==this)return Sa(this,!0),!0}get value(){const e=this.dep.track({target:this,type:"get",key:"value"});return Ca(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):at("Write operation failed: computed value is readonly")}}function uu(t,e,n=!1){let s,o;return ee(t)?s=t:(s=t.get,o=t.set),new cu(s,o,n)}const Ts={},Ks=new WeakMap;let rn;function fu(t,e=!1,n=rn){if(n){let s=Ks.get(n);s||Ks.set(n,s=[]),s.push(t)}else e||at("onWatcherCleanup() was called when there was no active watcher to associate with.")}function du(t,e,n=fe){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:a,call:l}=n,u=P=>{(n.onWarn||at)("Invalid watch source: ",P,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},c=P=>o?P:Ue(P)||o===!1||o===0?Ht(P,1):Ht(P);let f,d,m,v,T=!1,S=!1;if(Ce(t)?(d=()=>t.value,T=Ue(t)):hn(t)?(d=()=>c(t),T=!0):Z(t)?(S=!0,T=t.some(P=>hn(P)||Ue(P)),d=()=>t.map(P=>{if(Ce(P))return P.value;if(hn(P))return c(P);if(ee(P))return l?l(P,2):P();u(P)})):ee(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){lt();try{m()}finally{ct()}}const P=rn;rn=f;try{return l?l(t,3,[v]):t(v)}finally{rn=P}}:(d=Le,u(t)),e&&o){const P=d,w=o===!0?1/0:o;d=()=>Ht(P(),w)}const k=Hc(),N=()=>{f.stop(),k&&k.active&&vi(k.effects,f)};if(i&&e){const P=e;e=(...w)=>{P(...w),N()}}let C=S?new Array(t.length).fill(Ts):Ts;const F=P=>{if(!(!(f.flags&1)||!f.dirty&&!P))if(e){const w=f.run();if(o||T||(S?w.some((K,z)=>Zt(K,C[z])):Zt(w,C))){m&&m();const K=rn;rn=f;try{const z=[w,C===Ts?void 0:S&&C[0]===Ts?[]:C,v];C=w,l?l(e,3,z):e(...z)}finally{rn=K}}}else f.run()};return a&&a(F),f=new wa(d),f.scheduler=r?()=>r(F,!1):F,v=P=>fu(P,!1,f),m=f.onStop=()=>{const P=Ks.get(f);if(P){if(l)l(P,4);else for(const w of P)w();Ks.delete(f)}},f.onTrack=n.onTrack,f.onTrigger=n.onTrigger,e?s?F(!0):C=f.run():r?r(F.bind(null,!0),!0):f.run(),N.pause=f.pause.bind(f),N.resume=f.resume.bind(f),N.stop=N,N}function Ht(t,e=1/0,n){if(e<=0||!ce(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ce(t))Ht(t.value,e,n);else if(Z(t))for(let s=0;s<t.length;s++)Ht(t[s],e,n);else if(lo(t)||fn(t))t.forEach(s=>{Ht(s,e,n)});else if(_a(t)){for(const s in t)Ht(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ht(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const pn=[];function Ms(t){pn.push(t)}function As(){pn.pop()}let Mo=!1;function H(t,...e){if(Mo)return;Mo=!0,lt();const n=pn.length?pn[pn.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=hu();if(s)Dn(s,n,11,[t+e.map(i=>{var r,a;return(a=(r=i.toString)==null?void 0:r.call(i))!=null?a:JSON.stringify(i)}).join(""),n&&n.proxy,o.map(({vnode:i})=>`at <${vo(n,i.type)}>`).join(`
`),o]);else{const i=[`[Vue warn]: ${t}`,...e];o.length&&i.push(`
`,...pu(o)),console.warn(...i)}ct(),Mo=!1}function hu(){let t=pn[pn.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const s=t.component&&t.component.parent;t=s&&s.vnode}return e}function pu(t){const e=[];return t.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...mu(n))}),e}function mu({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=t.component?t.component.parent==null:!1,o=` at <${vo(t.component,t.type,s)}`,i=">"+n;return t.props?[o,...gu(t.props),i]:[o+i]}function gu(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(s=>{e.push(...Ha(s,t[s]))}),n.length>3&&e.push(" ..."),e}function Ha(t,e,n){return ye(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:Ce(e)?(e=Ha(t,ne(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):ee(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=ne(e),n?e:[`${t}=`,e])}function _u(t,e){t!==void 0&&(typeof t!="number"?H(`${e} is not a valid number - got ${JSON.stringify(t)}.`):isNaN(t)&&H(`${e} is NaN - the duration expression might be incorrect.`))}const Ai={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Dn(t,e,n,s){try{return s?t(...s):t()}catch(o){ms(o,e,n)}}function ut(t,e,n,s){if(ee(t)){const o=Dn(t,e,n,s);return o&&wi(o)&&o.catch(i=>{ms(i,e,n)}),o}if(Z(t)){const o=[];for(let i=0;i<t.length;i++)o.push(ut(t[i],e,n,s));return o}else H(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof t}`)}function ms(t,e,n,s=!0){const o=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||fe;if(e){let a=e.parent;const l=e.proxy,u=Ai[n];for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](t,l,u)===!1)return}a=a.parent}if(i){lt(),Dn(i,null,10,[t,l,u]),ct();return}}yu(t,n,o,s,r)}function yu(t,e,n,s=!0,o=!1){{const i=Ai[e];if(n&&Ms(n),H(`Unhandled error${i?` during execution of ${i}`:""}`),n&&As(),s)throw t;console.error(t)}}const He=[];let _t=-1;const An=[];let zt=null,Sn=0;const ja=Promise.resolve();let zs=null;const bu=100;function Ut(t){const e=zs||ja;return t?e.then(this?t.bind(this):t):e}function vu(t){let e=_t+1,n=He.length;for(;e<n;){const s=e+n>>>1,o=He[s],i=as(o);i<t||i===t&&o.flags&2?e=s+1:n=s}return e}function go(t){if(!(t.flags&1)){const e=as(t),n=He[He.length-1];!n||!(t.flags&2)&&e>=as(n)?He.push(t):He.splice(vu(e),0,t),t.flags|=1,Ua()}}function Ua(){zs||(zs=ja.then(Ba))}function $a(t){Z(t)?An.push(...t):zt&&t.id===-1?zt.splice(Sn+1,0,t):t.flags&1||(An.push(t),t.flags|=1),Ua()}function nr(t,e,n=_t+1){for(e=e||new Map;n<He.length;n++){const s=He[n];if(s&&s.flags&2){if(t&&s.id!==t.uid||Ri(e,s))continue;He.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Va(t){if(An.length){const e=[...new Set(An)].sort((n,s)=>as(n)-as(s));if(An.length=0,zt){zt.push(...e);return}for(zt=e,t=t||new Map,Sn=0;Sn<zt.length;Sn++){const n=zt[Sn];Ri(t,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}zt=null,Sn=0}}const as=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ba(t){t=t||new Map;const e=n=>Ri(t,n);try{for(_t=0;_t<He.length;_t++){const n=He[_t];if(n&&!(n.flags&8)){if(e(n))continue;n.flags&4&&(n.flags&=-2),Dn(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;_t<He.length;_t++){const n=He[_t];n&&(n.flags&=-2)}_t=-1,He.length=0,Va(t),zs=null,(He.length||An.length)&&Ba(t)}}function Ri(t,e){const n=t.get(e)||0;if(n>bu){const s=e.i,o=s&&Ml(s.type);return ms(`Maximum recursive updates exceeded${o?` in component <${o}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return t.set(e,n+1),!1}let St=!1;const Rs=new Map;ps().__VUE_HMR_RUNTIME__={createRecord:Ao(Ga),rerender:Ao(Su),reload:Ao(xu)};const _n=new Map;function wu(t){const e=t.type.__hmrId;let n=_n.get(e);n||(Ga(e,t.type),n=_n.get(e)),n.instances.add(t)}function Tu(t){_n.get(t.type.__hmrId).instances.delete(t)}function Ga(t,e){return _n.has(t)?!1:(_n.set(t,{initialDef:Ws(e),instances:new Set}),!0)}function Ws(t){return Al(t)?t.__vccOpts:t}function Su(t,e){const n=_n.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(s=>{e&&(s.render=e,Ws(s.type).render=e),s.renderCache=[],St=!0,s.job.flags&8||s.update(),St=!1}))}function xu(t,e){const n=_n.get(t);if(!n)return;e=Ws(e),sr(n.initialDef,e);const s=[...n.instances];for(let o=0;o<s.length;o++){const i=s[o],r=Ws(i.type);let a=Rs.get(r);a||(r!==n.initialDef&&sr(r,e),Rs.set(r,a=new Set)),a.add(i),i.appContext.propsCache.delete(i.type),i.appContext.emitsCache.delete(i.type),i.appContext.optionsCache.delete(i.type),i.ceReload?(a.add(i),i.ceReload(e.styles),a.delete(i)):i.parent?go(()=>{i.job.flags&8||(St=!0,i.parent.update(),St=!1,a.delete(i))}):i.appContext.reload?i.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),i.root.ce&&i!==i.root&&i.root.ce._removeChildStyle(r)}$a(()=>{Rs.clear()})}function sr(t,e){xe(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function Ao(t){return(e,n)=>{try{return t(e,n)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let vt,Kn=[],ei=!1;function gs(t,...e){vt?vt.emit(t,...e):ei||Kn.push({event:t,args:e})}function Ka(t,e){var n,s;vt=t,vt?(vt.enabled=!0,Kn.forEach(({event:o,args:i})=>vt.emit(o,...i)),Kn=[]):typeof window<"u"&&window.HTMLElement&&!((s=(n=window.navigator)==null?void 0:n.userAgent)!=null&&s.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{Ka(i,e)}),setTimeout(()=>{vt||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,ei=!0,Kn=[])},3e3)):(ei=!0,Kn=[])}function Eu(t,e){gs("app:init",t,e,{Fragment:be,Text:ys,Comment:Ee,Static:es})}function Cu(t){gs("app:unmount",t)}const Pu=ki("component:added"),za=ki("component:updated"),Mu=ki("component:removed"),Au=t=>{vt&&typeof vt.cleanupBuffer=="function"&&!vt.cleanupBuffer(t)&&Mu(t)};function ki(t){return e=>{gs(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const Ru=Wa("perf:start"),ku=Wa("perf:end");function Wa(t){return(e,n,s)=>{gs(t,e.appContext.app,e.uid,e,n,s)}}function Iu(t,e,n){gs("component:emit",t.appContext.app,t,e,n)}let je=null,qa=null;function qs(t){const e=je;return je=t,qa=t&&t.type.__scopeId||null,e}function Ii(t,e=je,n){if(!e||t._n)return t;const s=(...o)=>{s._d&&Qs(-1);const i=qs(e);let r;try{r=t(...o)}finally{qs(i),s._d&&Qs(1)}return za(e),r};return s._n=!0,s._c=!0,s._d=!0,s}function Xa(t){bc(t)&&H("Do not use built-in directive ids as custom directive id: "+t)}function Ge(t,e){if(je===null)return H("withDirectives can only be used inside render functions."),t;const n=bo(je),s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[i,r,a,l=fe]=e[o];i&&(ee(i)&&(i={mounted:i,updated:i}),i.deep&&Ht(r),s.push({dir:i,instance:n,value:r,oldValue:void 0,arg:a,modifiers:l}))}return t}function Qt(t,e,n,s){const o=t.dirs,i=e&&e.dirs;for(let r=0;r<o.length;r++){const a=o[r];i&&(a.oldValue=i[r].value);let l=a.dir[s];l&&(lt(),ut(l,n,8,[t.el,a,t,e]),ct())}}const Lu=Symbol("_vte"),Ya=t=>t.__isTeleport,Nt=Symbol("_leaveCb"),Ss=Symbol("_enterCb");function Ou(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Oe(()=>{t.isMounted=!0}),At(()=>{t.isUnmounting=!0}),t}const Qe=[Function,Array],Za={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qe,onEnter:Qe,onAfterEnter:Qe,onEnterCancelled:Qe,onBeforeLeave:Qe,onLeave:Qe,onAfterLeave:Qe,onLeaveCancelled:Qe,onBeforeAppear:Qe,onAppear:Qe,onAfterAppear:Qe,onAppearCancelled:Qe},Ja=t=>{const e=t.subTree;return e.component?Ja(e.component):e},Du={name:"BaseTransition",props:Za,setup(t,{slots:e}){const n=Hi(),s=Ou();return()=>{const o=e.default&&tl(e.default(),!0);if(!o||!o.length)return;const i=Qa(o),r=ne(t),{mode:a}=r;if(a&&a!=="in-out"&&a!=="out-in"&&a!=="default"&&H(`invalid <transition> mode: ${a}`),s.isLeaving)return Ro(i);const l=or(i);if(!l)return Ro(i);let u=ti(l,r,s,n,f=>u=f);l.type!==Ee&&ls(l,u);let c=n.subTree&&or(n.subTree);if(c&&c.type!==Ee&&!cn(c,l)&&Ja(n).type!==Ee){let f=ti(c,r,s,n);if(ls(c,f),a==="out-in"&&l.type!==Ee)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},Ro(i);a==="in-out"&&l.type!==Ee?f.delayLeave=(d,m,v)=>{const T=el(s,c);T[String(c.key)]=c,d[Nt]=()=>{m(),d[Nt]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function Qa(t){let e=t[0];if(t.length>1){let n=!1;for(const s of t)if(s.type!==Ee){if(n){H("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}e=s,n=!0}}return e}const Nu=Du;function el(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function ti(t,e,n,s,o){const{appear:i,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:d,onLeave:m,onAfterLeave:v,onLeaveCancelled:T,onBeforeAppear:S,onAppear:k,onAfterAppear:N,onAppearCancelled:C}=e,F=String(t.key),P=el(n,t),w=(E,W)=>{E&&ut(E,s,9,W)},K=(E,W)=>{const b=W[1];w(E,W),Z(E)?E.every(g=>g.length<=1)&&b():E.length<=1&&b()},z={mode:r,persisted:a,beforeEnter(E){let W=l;if(!n.isMounted)if(i)W=S||l;else return;E[Nt]&&E[Nt](!0);const b=P[F];b&&cn(t,b)&&b.el[Nt]&&b.el[Nt](),w(W,[E])},enter(E){let W=u,b=c,g=f;if(!n.isMounted)if(i)W=k||u,b=N||c,g=C||f;else return;let p=!1;const M=E[Ss]=A=>{p||(p=!0,A?w(g,[E]):w(b,[E]),z.delayedLeave&&z.delayedLeave(),E[Ss]=void 0)};W?K(W,[E,M]):M()},leave(E,W){const b=String(t.key);if(E[Ss]&&E[Ss](!0),n.isUnmounting)return W();w(d,[E]);let g=!1;const p=E[Nt]=M=>{g||(g=!0,W(),M?w(T,[E]):w(v,[E]),E[Nt]=void 0,P[b]===t&&delete P[b])};P[b]=t,m?K(m,[E,p]):p()},clone(E){const W=ti(E,e,n,s,o);return o&&o(W),W}};return z}function Ro(t){if(_s(t))return t=Rt(t),t.children=null,t}function or(t){if(!_s(t))return Ya(t.type)&&t.children?Qa(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ee(n.default))return n.default()}}function ls(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ls(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tl(t,e=!1,n){let s=[],o=0;for(let i=0;i<t.length;i++){let r=t[i];const a=n==null?r.key:String(n)+String(r.key!=null?r.key:i);r.type===be?(r.patchFlag&128&&o++,s=s.concat(tl(r.children,e,a))):(e||r.type!==Ee)&&s.push(a!=null?Rt(r,{key:a}):r)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function nl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ir=new WeakSet,Xs=new WeakMap;function Jn(t,e,n,s,o=!1){if(Z(t)){t.forEach((T,S)=>Jn(T,e&&(Z(e)?e[S]:e),n,s,o));return}if(Qn(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Jn(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?bo(s.component):s.el,r=o?null:i,{i:a,r:l}=t;if(!a){H("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const u=e&&e.r,c=a.refs===fe?a.refs={}:a.refs,f=a.setupState,d=ne(f),m=f===fe?ma:T=>(le(d,T)&&!Ce(d[T])&&H(`Template ref "${T}" used on a non-ref value. It will not work in the production build.`),ir.has(d[T])?!1:le(d,T)),v=T=>!ir.has(T);if(u!=null&&u!==l){if(rr(e),ye(u))c[u]=null,m(u)&&(f[u]=null);else if(Ce(u)){v(u)&&(u.value=null);const T=e;T.k&&(c[T.k]=null)}}if(ee(l))Dn(l,a,12,[r,c]);else{const T=ye(l),S=Ce(l);if(T||S){const k=()=>{if(t.f){const N=T?m(l)?f[l]:c[l]:v(l)||!t.k?l.value:c[t.k];if(o)Z(N)&&vi(N,i);else if(Z(N))N.includes(i)||N.push(i);else if(T)c[l]=[i],m(l)&&(f[l]=c[l]);else{const C=[i];v(l)&&(l.value=C),t.k&&(c[t.k]=C)}}else T?(c[l]=r,m(l)&&(f[l]=r)):S?(v(l)&&(l.value=r),t.k&&(c[t.k]=r)):H("Invalid template ref type:",l,`(${typeof l})`)};if(r){const N=()=>{k(),Xs.delete(t)};N.id=-1,Xs.set(t,N),qe(N,n)}else rr(t),k()}else H("Invalid template ref type:",l,`(${typeof l})`)}}function rr(t){const e=Xs.get(t);e&&(e.flags|=8,Xs.delete(t))}ps().requestIdleCallback;ps().cancelIdleCallback;const Qn=t=>!!t.type.__asyncLoader,_s=t=>t.type.__isKeepAlive;function Fu(t,e){sl(t,"a",e)}function Hu(t,e){sl(t,"da",e)}function sl(t,e,n=ke){const s=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(_o(e,s,n),n){let o=n.parent;for(;o&&o.parent;)_s(o.parent.vnode)&&ju(s,e,n,o),o=o.parent}}function ju(t,e,n,s){const o=_o(e,t,s,!0);ol(()=>{vi(s[e],o)},n)}function _o(t,e,n=ke,s=!1){if(n){const o=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...r)=>{lt();const a=bs(n),l=ut(e,n,t,r);return a(),ct(),l});return s?o.unshift(i):o.push(i),i}else{const o=on(Ai[t].replace(/ hook$/,""));H(`${o} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Vt=t=>(e,n=ke)=>{(!us||t==="sp")&&_o(t,(...s)=>e(...s),n)},Uu=Vt("bm"),Oe=Vt("m"),$u=Vt("bu"),Vu=Vt("u"),At=Vt("bum"),ol=Vt("um"),Bu=Vt("sp"),Gu=Vt("rtg"),Ku=Vt("rtc");function zu(t,e=ke){_o("ec",t,e)}const Wu=Symbol.for("v-ndc");function Xt(t,e,n,s){let o;const i=n,r=Z(t);if(r||ye(t)){const a=r&&hn(t);let l=!1,u=!1;a&&(l=!Ue(t),u=Mt(t),t=ho(t)),o=new Array(t.length);for(let c=0,f=t.length;c<f;c++)o[c]=e(l?u?Gs(Re(t[c])):Re(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){Number.isInteger(t)||H(`The v-for range expect an integer value but got ${t}.`),o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,i)}else if(ce(t))if(t[Symbol.iterator])o=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);o=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];o[l]=e(t[c],c,l,i)}}else o=[];return o}const ni=t=>t?Cl(t)?bo(t):ni(t.parent):null,mn=xe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>Tt(t.props),$attrs:t=>Tt(t.attrs),$slots:t=>Tt(t.slots),$refs:t=>Tt(t.refs),$parent:t=>ni(t.parent),$root:t=>ni(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>al(t),$forceUpdate:t=>t.f||(t.f=()=>{go(t.update)}),$nextTick:t=>t.n||(t.n=Ut.bind(t.proxy)),$watch:t=>Pf.bind(t)}),Li=t=>t==="_"||t==="$",ko=(t,e)=>t!==fe&&!t.__isScriptSetup&&le(t,e),il={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:a,appContext:l}=t;if(e==="__isVue")return!0;let u;if(e[0]!=="$"){const m=r[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return i[e]}else{if(ko(s,e))return r[e]=1,s[e];if(o!==fe&&le(o,e))return r[e]=2,o[e];if((u=t.propsOptions[0])&&le(u,e))return r[e]=3,i[e];if(n!==fe&&le(n,e))return r[e]=4,n[e];si&&(r[e]=0)}}const c=mn[e];let f,d;if(c)return e==="$attrs"?(Me(t.attrs,"get",""),Js()):e==="$slots"&&Me(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==fe&&le(n,e))return r[e]=4,n[e];if(d=l.config.globalProperties,le(d,e))return d[e];je&&(!ye(e)||e.indexOf("__v")!==0)&&(o!==fe&&Li(e[0])&&le(o,e)?H(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===je&&H(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:s,setupState:o,ctx:i}=t;return ko(o,e)?(o[e]=n,!0):o.__isScriptSetup&&le(o,e)?(H(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):s!==fe&&le(s,e)?(s[e]=n,!0):le(t.props,e)?(H(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(H(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(e in t.appContext.config.globalProperties?Object.defineProperty(i,e,{enumerable:!0,configurable:!0,value:n}):i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:o,propsOptions:i,type:r}},a){let l,u;return!!(n[a]||t!==fe&&a[0]!=="$"&&le(t,a)||ko(e,a)||(l=i[0])&&le(l,a)||le(s,a)||le(mn,a)||le(o.config.globalProperties,a)||(u=r.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};il.ownKeys=t=>(H("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t));function qu(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(mn).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>mn[n](t),set:Le})}),e}function Xu(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(s=>{Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>t.props[s],set:Le})})}function Yu(t){const{ctx:e,setupState:n}=t;Object.keys(ne(n)).forEach(s=>{if(!n.__isScriptSetup){if(Li(s[0])){H(`setup() return property ${JSON.stringify(s)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n[s],set:Le})}})}function ar(t){return Z(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Zu(){const t=Object.create(null);return(e,n)=>{t[n]?H(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let si=!0;function Ju(t){const e=al(t),n=t.proxy,s=t.ctx;si=!1,e.beforeCreate&&lr(e.beforeCreate,t,"bc");const{data:o,computed:i,methods:r,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:m,updated:v,activated:T,deactivated:S,beforeDestroy:k,beforeUnmount:N,destroyed:C,unmounted:F,render:P,renderTracked:w,renderTriggered:K,errorCaptured:z,serverPrefetch:E,expose:W,inheritAttrs:b,components:g,directives:p,filters:M}=e,A=Zu();{const[$]=t.propsOptions;if($)for(const V in $)A("Props",V)}if(u&&Qu(u,s,A),r)for(const $ in r){const V=r[$];ee(V)?(Object.defineProperty(s,$,{value:V.bind(n),configurable:!0,enumerable:!0,writable:!0}),A("Methods",$)):H(`Method "${$}" has type "${typeof V}" in the component definition. Did you reference the function correctly?`)}if(o){ee(o)||H("The data option must be a function. Plain object usage is no longer supported.");const $=o.call(n,n);if(wi($)&&H("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!ce($))H("data() should return an object.");else{t.data=Mi($);for(const V in $)A("Data",V),Li(V[0])||Object.defineProperty(s,V,{configurable:!0,enumerable:!0,get:()=>$[V],set:Le})}}if(si=!0,i)for(const $ in i){const V=i[$],se=ee(V)?V.bind(n,n):ee(V.get)?V.get.bind(n,n):Le;se===Le&&H(`Computed property "${$}" has no getter.`);const oe=!ee(V)&&ee(V.set)?V.set.bind(n):()=>{H(`Write operation failed: computed property "${$}" is readonly.`)},ve=Qf({get:se,set:oe});Object.defineProperty(s,$,{enumerable:!0,configurable:!0,get:()=>ve.value,set:De=>ve.value=De}),A("Computed",$)}if(a)for(const $ in a)rl(a[$],s,n,$);if(l){const $=ee(l)?l.call(n):l;Reflect.ownKeys($).forEach(V=>{rf(V,$[V])})}c&&lr(c,t,"c");function D($,V){Z(V)?V.forEach(se=>$(se.bind(n))):V&&$(V.bind(n))}if(D(Uu,f),D(Oe,d),D($u,m),D(Vu,v),D(Fu,T),D(Hu,S),D(zu,z),D(Ku,w),D(Gu,K),D(At,N),D(ol,F),D(Bu,E),Z(W))if(W.length){const $=t.exposed||(t.exposed={});W.forEach(V=>{Object.defineProperty($,V,{get:()=>n[V],set:se=>n[V]=se,enumerable:!0})})}else t.exposed||(t.exposed={});P&&t.render===Le&&(t.render=P),b!=null&&(t.inheritAttrs=b),g&&(t.components=g),p&&(t.directives=p),E&&nl(t)}function Qu(t,e,n=Le){Z(t)&&(t=oi(t));for(const s in t){const o=t[s];let i;ce(o)?"default"in o?i=ks(o.from||s,o.default,!0):i=ks(o.from||s):i=ks(o),Ce(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):e[s]=i,n("Inject",s)}}function lr(t,e,n){ut(Z(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function rl(t,e,n,s){let o=s.includes(".")?bl(n,s):()=>n[s];if(ye(t)){const i=e[t];ee(i)?gn(o,i):H(`Invalid watch handler specified by key "${t}"`,i)}else if(ee(t))gn(o,t.bind(n));else if(ce(t))if(Z(t))t.forEach(i=>rl(i,e,n,s));else{const i=ee(t.handler)?t.handler.bind(n):e[t.handler];ee(i)?gn(o,i,t):H(`Invalid watch handler specified by key "${t.handler}"`,i)}else H(`Invalid watch option: "${s}"`,t)}function al(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=t.appContext,a=i.get(e);let l;return a?l=a:!o.length&&!n&&!s?l=e:(l={},o.length&&o.forEach(u=>Ys(l,u,r,!0)),Ys(l,e,r)),ce(e)&&i.set(e,l),l}function Ys(t,e,n,s=!1){const{mixins:o,extends:i}=e;i&&Ys(t,i,n,!0),o&&o.forEach(r=>Ys(t,r,n,!0));for(const r in e)if(s&&r==="expose")H('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=ef[r]||n&&n[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const ef={data:cr,props:ur,emits:ur,methods:zn,computed:zn,beforeCreate:Fe,created:Fe,beforeMount:Fe,mounted:Fe,beforeUpdate:Fe,updated:Fe,beforeDestroy:Fe,beforeUnmount:Fe,destroyed:Fe,unmounted:Fe,activated:Fe,deactivated:Fe,errorCaptured:Fe,serverPrefetch:Fe,components:zn,directives:zn,watch:nf,provide:cr,inject:tf};function cr(t,e){return e?t?function(){return xe(ee(t)?t.call(this,this):t,ee(e)?e.call(this,this):e)}:e:t}function tf(t,e){return zn(oi(t),oi(e))}function oi(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Fe(t,e){return t?[...new Set([].concat(t,e))]:e}function zn(t,e){return t?xe(Object.create(null),t,e):e}function ur(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:xe(Object.create(null),ar(t),ar(e??{})):e}function nf(t,e){if(!t)return e;if(!e)return t;const n=xe(Object.create(null),t);for(const s in e)n[s]=Fe(t[s],e[s]);return n}function ll(){return{app:null,config:{isNativeTag:ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sf=0;function of(t,e){return function(s,o=null){ee(s)||(s=xe({},s)),o!=null&&!ce(o)&&(H("root props passed to app.mount() must be an object."),o=null);const i=ll(),r=new WeakSet,a=[];let l=!1;const u=i.app={_uid:sf++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:vr,get config(){return i.config},set config(c){H("app.config cannot be replaced. Modify individual options instead.")},use(c,...f){return r.has(c)?H("Plugin has already been applied to target app."):c&&ee(c.install)?(r.add(c),c.install(u,...f)):ee(c)?(r.add(c),c(u,...f)):H('A plugin must either be a function or an object with an "install" function.'),u},mixin(c){return i.mixins.includes(c)?H("Mixin has already been applied to target app"+(c.name?`: ${c.name}`:"")):i.mixins.push(c),u},component(c,f){return ui(c,i.config),f?(i.components[c]&&H(`Component "${c}" has already been registered in target app.`),i.components[c]=f,u):i.components[c]},directive(c,f){return Xa(c),f?(i.directives[c]&&H(`Directive "${c}" has already been registered in target app.`),i.directives[c]=f,u):i.directives[c]},mount(c,f,d){if(l)H("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{c.__vue_app__&&H("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const m=u._ceVNode||Se(s,o);return m.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),i.reload=()=>{const v=Rt(m);v.el=null,t(v,c,d)},t(m,c,d),l=!0,u._container=c,c.__vue_app__=u,u._instance=m.component,Eu(u,vr),bo(m.component)}},onUnmount(c){typeof c!="function"&&H(`Expected function as first argument to app.onUnmount(), but got ${typeof c}`),a.push(c)},unmount(){l?(ut(a,u._instance,16),t(null,u._container),u._instance=null,Cu(u),delete u._container.__vue_app__):H("Cannot unmount an app that is not mounted.")},provide(c,f){return c in i.provides&&(le(i.provides,c)?H(`App already provides property with key "${String(c)}". It will be overwritten with the new value.`):H(`App already provides property with key "${String(c)}" inherited from its parent element. It will be overwritten with the new value.`)),i.provides[c]=f,u},runWithContext(c){const f=Rn;Rn=u;try{return c()}finally{Rn=f}}};return u}}let Rn=null;function rf(t,e){if(!ke)H("provide() can only be used inside setup().");else{let n=ke.provides;const s=ke.parent&&ke.parent.provides;s===n&&(n=ke.provides=Object.create(s)),n[t]=e}}function ks(t,e,n=!1){const s=Hi();if(s||Rn){let o=Rn?Rn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&ee(e)?e.call(s&&s.proxy):e;H(`injection "${String(t)}" not found.`)}else H("inject() can only be used inside setup() or functional components.")}const cl={},ul=()=>Object.create(cl),fl=t=>Object.getPrototypeOf(t)===cl;function af(t,e,n,s=!1){const o={},i=ul();t.propsDefaults=Object.create(null),dl(t,e,o,i);for(const r in t.propsOptions[0])r in o||(o[r]=void 0);pl(e||{},o,t),n?t.props=s?o:su(o):t.type.props?t.props=o:t.props=i,t.attrs=i}function lf(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function cf(t,e,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=t,a=ne(o),[l]=t.propsOptions;let u=!1;if(!lf(t)&&(s||r>0)&&!(r&16)){if(r&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(yo(t.emitsOptions,d))continue;const m=e[d];if(l)if(le(i,d))m!==i[d]&&(i[d]=m,u=!0);else{const v=it(d);o[v]=ii(l,a,v,m,t,!1)}else m!==i[d]&&(i[d]=m,u=!0)}}}else{dl(t,e,o,i)&&(u=!0);let c;for(const f in a)(!e||!le(e,f)&&((c=Jt(f))===f||!le(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(o[f]=ii(l,a,f,void 0,t,!0)):delete o[f]);if(i!==a)for(const f in i)(!e||!le(e,f))&&(delete i[f],u=!0)}u&&bt(t.attrs,"set",""),pl(e||{},o,t)}function dl(t,e,n,s){const[o,i]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(Xn(l))continue;const u=e[l];let c;o&&le(o,c=it(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:yo(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,r=!0)}if(i){const l=ne(n),u=a||fe;for(let c=0;c<i.length;c++){const f=i[c];n[f]=ii(o,l,f,u[f],t,!le(u,f))}}return r}function ii(t,e,n,s,o,i){const r=t[n];if(r!=null){const a=le(r,"default");if(a&&s===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ee(l)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const c=bs(o);s=u[n]=l.call(null,e),c()}}else s=l;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!a?s=!1:r[1]&&(s===""||s===Jt(n))&&(s=!0))}return s}const uf=new WeakMap;function hl(t,e,n=!1){const s=n?uf:e.propsCache,o=s.get(t);if(o)return o;const i=t.props,r={},a=[];let l=!1;if(!ee(t)){const c=f=>{l=!0;const[d,m]=hl(f,e,!0);xe(r,d),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return ce(t)&&s.set(t,Mn),Mn;if(Z(i))for(let c=0;c<i.length;c++){ye(i[c])||H("props must be strings when using array syntax.",i[c]);const f=it(i[c]);fr(f)&&(r[f]=fe)}else if(i){ce(i)||H("invalid props options",i);for(const c in i){const f=it(c);if(fr(f)){const d=i[c],m=r[f]=Z(d)||ee(d)?{type:d}:xe({},d),v=m.type;let T=!1,S=!0;if(Z(v))for(let k=0;k<v.length;++k){const N=v[k],C=ee(N)&&N.name;if(C==="Boolean"){T=!0;break}else C==="String"&&(S=!1)}else T=ee(v)&&v.name==="Boolean";m[0]=T,m[1]=S,(T||le(m,"default"))&&a.push(f)}}}const u=[r,a];return ce(t)&&s.set(t,u),u}function fr(t){return t[0]!=="$"&&!Xn(t)?!0:(H(`Invalid prop name: "${t}" is a reserved property.`),!1)}function ff(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function pl(t,e,n){const s=ne(e),o=n.propsOptions[0],i=Object.keys(t).map(r=>it(r));for(const r in o){let a=o[r];a!=null&&df(r,s[r],a,Tt(s),!i.includes(r))}}function df(t,e,n,s,o){const{type:i,required:r,validator:a,skipCheck:l}=n;if(r&&o){H('Missing required prop: "'+t+'"');return}if(!(e==null&&!r)){if(i!=null&&i!==!0&&!l){let u=!1;const c=Z(i)?i:[i],f=[];for(let d=0;d<c.length&&!u;d++){const{valid:m,expectedType:v}=pf(e,c[d]);f.push(v||""),u=m}if(!u){H(mf(t,e,f));return}}a&&!a(e,s)&&H('Invalid prop: custom validator check failed for prop "'+t+'".')}}const hf=$t("String,Number,Boolean,Function,Symbol,BigInt");function pf(t,e){let n;const s=ff(e);if(s==="null")n=t===null;else if(hf(s)){const o=typeof t;n=o===s.toLowerCase(),!n&&o==="object"&&(n=t instanceof e)}else s==="Object"?n=ce(t):s==="Array"?n=Z(t):n=t instanceof e;return{valid:n,expectedType:s}}function mf(t,e,n){if(n.length===0)return`Prop type [] for prop "${t}" won't match anything. Did you mean to use type Array instead?`;let s=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(uo).join(" | ")}`;const o=n[0],i=Ti(e),r=dr(e,o),a=dr(e,i);return n.length===1&&hr(o)&&!gf(o,i)&&(s+=` with value ${r}`),s+=`, got ${i} `,hr(i)&&(s+=`with value ${a}.`),s}function dr(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function hr(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function gf(...t){return t.some(e=>e.toLowerCase()==="boolean")}const Oi=t=>t==="_"||t==="_ctx"||t==="$stable",Di=t=>Z(t)?t.map(ot):[ot(t)],_f=(t,e,n)=>{if(e._n)return e;const s=Ii((...o)=>(ke&&!(n===null&&je)&&!(n&&n.root!==ke.root)&&H(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),Di(e(...o))),n);return s._c=!1,s},ml=(t,e,n)=>{const s=t._ctx;for(const o in t){if(Oi(o))continue;const i=t[o];if(ee(i))e[o]=_f(o,i,s);else if(i!=null){H(`Non-function value encountered for slot "${o}". Prefer function slots for better performance.`);const r=Di(i);e[o]=()=>r}}},gl=(t,e)=>{_s(t.vnode)||H("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=Di(e);t.slots.default=()=>n},ri=(t,e,n)=>{for(const s in e)(n||!Oi(s))&&(t[s]=e[s])},yf=(t,e,n)=>{const s=t.slots=ul();if(t.vnode.shapeFlag&32){const o=e._;o?(ri(s,e,n),n&&$s(s,"_",o,!0)):ml(e,s)}else e&&gl(t,e)},bf=(t,e,n)=>{const{vnode:s,slots:o}=t;let i=!0,r=fe;if(s.shapeFlag&32){const a=e._;a?St?(ri(o,e,n),bt(t,"set","$slots")):n&&a===1?i=!1:ri(o,e,n):(i=!e.$stable,ml(e,o)),r=e}else e&&(gl(t,e),r={default:1});if(i)for(const a in o)!Oi(a)&&r[a]==null&&delete o[a]};let Un,Ft;function vn(t,e){t.appContext.config.performance&&Zs()&&Ft.mark(`vue-${e}-${t.uid}`),Ru(t,e,Zs()?Ft.now():Date.now())}function wn(t,e){if(t.appContext.config.performance&&Zs()){const n=`vue-${e}-${t.uid}`,s=n+":end",o=`<${vo(t,t.type)}> ${e}`;Ft.mark(s),Ft.measure(o,n,s),Ft.clearMeasures(o),Ft.clearMarks(n),Ft.clearMarks(s)}ku(t,e,Zs()?Ft.now():Date.now())}function Zs(){return Un!==void 0||(typeof window<"u"&&window.performance?(Un=!0,Ft=window.performance):Un=!1),Un}function vf(){const t=[];if(t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const qe=Df;function wf(t){return Tf(t)}function Tf(t,e){vf();const n=ps();n.__VUE__=!0,Ka(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:s,remove:o,patchProp:i,createElement:r,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:m=Le,insertStaticContent:v}=t,T=(h,y,x,L=null,I=null,R=null,B=void 0,U=null,j=St?!1:!!y.dynamicChildren)=>{if(h===y)return;h&&!cn(h,y)&&(L=ft(h),Ae(h,I,R,!0),h=null),y.patchFlag===-2&&(j=!1,y.dynamicChildren=null);const{type:O,ref:Q,shapeFlag:G}=y;switch(O){case ys:S(h,y,x,L);break;case Ee:k(h,y,x,L);break;case es:h==null?N(y,x,L,B):C(h,y,x,B);break;case be:p(h,y,x,L,I,R,B,U,j);break;default:G&1?w(h,y,x,L,I,R,B,U,j):G&6?M(h,y,x,L,I,R,B,U,j):G&64||G&128?O.process(h,y,x,L,I,R,B,U,j,st):H("Invalid VNode type:",O,`(${typeof O})`)}Q!=null&&I?Jn(Q,h&&h.ref,R,y||h,!y):Q==null&&h&&h.ref!=null&&Jn(h.ref,null,R,h,!0)},S=(h,y,x,L)=>{if(h==null)s(y.el=a(y.children),x,L);else{const I=y.el=h.el;y.children!==h.children&&u(I,y.children)}},k=(h,y,x,L)=>{h==null?s(y.el=l(y.children||""),x,L):y.el=h.el},N=(h,y,x,L)=>{[h.el,h.anchor]=v(h.children,y,x,L,h.el,h.anchor)},C=(h,y,x,L)=>{if(y.children!==h.children){const I=d(h.anchor);P(h),[y.el,y.anchor]=v(y.children,x,I,L)}else y.el=h.el,y.anchor=h.anchor},F=({el:h,anchor:y},x,L)=>{let I;for(;h&&h!==y;)I=d(h),s(h,x,L),h=I;s(y,x,L)},P=({el:h,anchor:y})=>{let x;for(;h&&h!==y;)x=d(h),o(h),h=x;o(y)},w=(h,y,x,L,I,R,B,U,j)=>{y.type==="svg"?B="svg":y.type==="math"&&(B="mathml"),h==null?K(y,x,L,I,R,B,U,j):W(h,y,I,R,B,U,j)},K=(h,y,x,L,I,R,B,U)=>{let j,O;const{props:Q,shapeFlag:G,transition:J,dirs:te}=h;if(j=h.el=r(h.type,R,Q&&Q.is,Q),G&8?c(j,h.children):G&16&&E(h.children,j,null,L,I,Io(h,R),B,U),te&&Qt(h,null,L,"created"),z(j,h,h.scopeId,B,L),Q){for(const pe in Q)pe!=="value"&&!Xn(pe)&&i(j,pe,null,Q[pe],R,L);"value"in Q&&i(j,"value",null,Q.value,R),(O=Q.onVnodeBeforeMount)&&mt(O,L,h)}$s(j,"__vnode",h,!0),$s(j,"__vueParentComponent",L,!0),te&&Qt(h,null,L,"beforeMount");const ae=Sf(I,J);ae&&J.beforeEnter(j),s(j,y,x),((O=Q&&Q.onVnodeMounted)||ae||te)&&qe(()=>{O&&mt(O,L,h),ae&&J.enter(j),te&&Qt(h,null,L,"mounted")},I)},z=(h,y,x,L,I)=>{if(x&&m(h,x),L)for(let R=0;R<L.length;R++)m(h,L[R]);if(I){let R=I.subTree;if(R.patchFlag>0&&R.patchFlag&2048&&(R=Ni(R.children)||R),y===R||Tl(R.type)&&(R.ssContent===y||R.ssFallback===y)){const B=I.vnode;z(h,B,B.scopeId,B.slotScopeIds,I.parent)}}},E=(h,y,x,L,I,R,B,U,j=0)=>{for(let O=j;O<h.length;O++){const Q=h[O]=U?Wt(h[O]):ot(h[O]);T(null,Q,y,x,L,I,R,B,U)}},W=(h,y,x,L,I,R,B)=>{const U=y.el=h.el;U.__vnode=y;let{patchFlag:j,dynamicChildren:O,dirs:Q}=y;j|=h.patchFlag&16;const G=h.props||fe,J=y.props||fe;let te;if(x&&en(x,!1),(te=J.onVnodeBeforeUpdate)&&mt(te,x,y,h),Q&&Qt(y,h,x,"beforeUpdate"),x&&en(x,!0),St&&(j=0,B=!1,O=null),(G.innerHTML&&J.innerHTML==null||G.textContent&&J.textContent==null)&&c(U,""),O?(b(h.dynamicChildren,O,U,x,L,Io(y,I),R),ai(h,y)):B||se(h,y,U,null,x,L,Io(y,I),R,!1),j>0){if(j&16)g(U,G,J,x,I);else if(j&2&&G.class!==J.class&&i(U,"class",null,J.class,I),j&4&&i(U,"style",G.style,J.style,I),j&8){const ae=y.dynamicProps;for(let pe=0;pe<ae.length;pe++){const de=ae[pe],$e=G[de],Ve=J[de];(Ve!==$e||de==="value")&&i(U,de,$e,Ve,I,x)}}j&1&&h.children!==y.children&&c(U,y.children)}else!B&&O==null&&g(U,G,J,x,I);((te=J.onVnodeUpdated)||Q)&&qe(()=>{te&&mt(te,x,y,h),Q&&Qt(y,h,x,"updated")},L)},b=(h,y,x,L,I,R,B)=>{for(let U=0;U<y.length;U++){const j=h[U],O=y[U],Q=j.el&&(j.type===be||!cn(j,O)||j.shapeFlag&198)?f(j.el):x;T(j,O,Q,null,L,I,R,B,!0)}},g=(h,y,x,L,I)=>{if(y!==x){if(y!==fe)for(const R in y)!Xn(R)&&!(R in x)&&i(h,R,y[R],null,I,L);for(const R in x){if(Xn(R))continue;const B=x[R],U=y[R];B!==U&&R!=="value"&&i(h,R,U,B,I,L)}"value"in x&&i(h,"value",y.value,x.value,I)}},p=(h,y,x,L,I,R,B,U,j)=>{const O=y.el=h?h.el:a(""),Q=y.anchor=h?h.anchor:a("");let{patchFlag:G,dynamicChildren:J,slotScopeIds:te}=y;(St||G&2048)&&(G=0,j=!1,J=null),te&&(U=U?U.concat(te):te),h==null?(s(O,x,L),s(Q,x,L),E(y.children||[],x,Q,I,R,B,U,j)):G>0&&G&64&&J&&h.dynamicChildren?(b(h.dynamicChildren,J,x,I,R,B,U),ai(h,y)):se(h,y,x,Q,I,R,B,U,j)},M=(h,y,x,L,I,R,B,U,j)=>{y.slotScopeIds=U,h==null?y.shapeFlag&512?I.ctx.activate(y,x,L,B,j):A(y,x,L,I,R,B,j):D(h,y,j)},A=(h,y,x,L,I,R,B)=>{const U=h.component=Bf(h,L,I);if(U.type.__hmrId&&wu(U),Ms(h),vn(U,"mount"),_s(h)&&(U.ctx.renderer=st),vn(U,"init"),Kf(U,!1,B),wn(U,"init"),St&&(h.el=null),U.asyncDep){if(I&&I.registerDep(U,$,B),!h.el){const j=U.subTree=Se(Ee);k(null,j,y,x),h.placeholder=j.el}}else $(U,h,y,x,I,R,B);As(),wn(U,"mount")},D=(h,y,x)=>{const L=y.component=h.component;if(Lf(h,y,x))if(L.asyncDep&&!L.asyncResolved){Ms(y),V(L,y,x),As();return}else L.next=y,L.update();else y.el=h.el,L.vnode=y},$=(h,y,x,L,I,R,B)=>{const U=()=>{if(h.isMounted){let{next:G,bu:J,u:te,parent:ae,vnode:pe}=h;{const ht=_l(h);if(ht){G&&(G.el=pe.el,V(h,G,B)),ht.asyncDep.then(()=>{h.isUnmounted||U()});return}}let de=G,$e;Ms(G||h.vnode),en(h,!1),G?(G.el=pe.el,V(h,G,B)):G=pe,J&&Tn(J),($e=G.props&&G.props.onVnodeBeforeUpdate)&&mt($e,ae,G,pe),en(h,!0),vn(h,"render");const Ve=mr(h);wn(h,"render");const dt=h.subTree;h.subTree=Ve,vn(h,"patch"),T(dt,Ve,f(dt.el),ft(dt),h,I,R),wn(h,"patch"),G.el=Ve.el,de===null&&Of(h,Ve.el),te&&qe(te,I),($e=G.props&&G.props.onVnodeUpdated)&&qe(()=>mt($e,ae,G,pe),I),za(h),As()}else{let G;const{el:J,props:te}=y,{bm:ae,m:pe,parent:de,root:$e,type:Ve}=h,dt=Qn(y);en(h,!1),ae&&Tn(ae),!dt&&(G=te&&te.onVnodeBeforeMount)&&mt(G,de,y),en(h,!0);{$e.ce&&$e.ce._def.shadowRoot!==!1&&$e.ce._injectChildStyle(Ve),vn(h,"render");const ht=h.subTree=mr(h);wn(h,"render"),vn(h,"patch"),T(null,ht,x,L,h,I,R),wn(h,"patch"),y.el=ht.el}if(pe&&qe(pe,I),!dt&&(G=te&&te.onVnodeMounted)){const ht=y;qe(()=>mt(G,de,ht),I)}(y.shapeFlag&256||de&&Qn(de.vnode)&&de.vnode.shapeFlag&256)&&h.a&&qe(h.a,I),h.isMounted=!0,Pu(h),y=x=L=null}};h.scope.on();const j=h.effect=new wa(U);h.scope.off();const O=h.update=j.run.bind(j),Q=h.job=j.runIfDirty.bind(j);Q.i=h,Q.id=h.uid,j.scheduler=()=>go(Q),en(h,!0),j.onTrack=h.rtc?G=>Tn(h.rtc,G):void 0,j.onTrigger=h.rtg?G=>Tn(h.rtg,G):void 0,O()},V=(h,y,x)=>{y.component=h;const L=h.vnode.props;h.vnode=y,h.next=null,cf(h,y.props,L,x),bf(h,y.children,x),lt(),nr(h),ct()},se=(h,y,x,L,I,R,B,U,j=!1)=>{const O=h&&h.children,Q=h?h.shapeFlag:0,G=y.children,{patchFlag:J,shapeFlag:te}=y;if(J>0){if(J&128){ve(O,G,x,L,I,R,B,U,j);return}else if(J&256){oe(O,G,x,L,I,R,B,U,j);return}}te&8?(Q&16&&Ze(O,I,R),G!==O&&c(x,G)):Q&16?te&16?ve(O,G,x,L,I,R,B,U,j):Ze(O,I,R,!0):(Q&8&&c(x,""),te&16&&E(G,x,L,I,R,B,U,j))},oe=(h,y,x,L,I,R,B,U,j)=>{h=h||Mn,y=y||Mn;const O=h.length,Q=y.length,G=Math.min(O,Q);let J;for(J=0;J<G;J++){const te=y[J]=j?Wt(y[J]):ot(y[J]);T(h[J],te,x,null,I,R,B,U,j)}O>Q?Ze(h,I,R,!0,!1,G):E(y,x,L,I,R,B,U,j,G)},ve=(h,y,x,L,I,R,B,U,j)=>{let O=0;const Q=y.length;let G=h.length-1,J=Q-1;for(;O<=G&&O<=J;){const te=h[O],ae=y[O]=j?Wt(y[O]):ot(y[O]);if(cn(te,ae))T(te,ae,x,null,I,R,B,U,j);else break;O++}for(;O<=G&&O<=J;){const te=h[G],ae=y[J]=j?Wt(y[J]):ot(y[J]);if(cn(te,ae))T(te,ae,x,null,I,R,B,U,j);else break;G--,J--}if(O>G){if(O<=J){const te=J+1,ae=te<Q?y[te].el:L;for(;O<=J;)T(null,y[O]=j?Wt(y[O]):ot(y[O]),x,ae,I,R,B,U,j),O++}}else if(O>J)for(;O<=G;)Ae(h[O],I,R,!0),O++;else{const te=O,ae=O,pe=new Map;for(O=ae;O<=J;O++){const Ne=y[O]=j?Wt(y[O]):ot(y[O]);Ne.key!=null&&(pe.has(Ne.key)&&H("Duplicate keys found during update:",JSON.stringify(Ne.key),"Make sure keys are unique."),pe.set(Ne.key,O))}let de,$e=0;const Ve=J-ae+1;let dt=!1,ht=0;const Hn=new Array(Ve);for(O=0;O<Ve;O++)Hn[O]=0;for(O=te;O<=G;O++){const Ne=h[O];if($e>=Ve){Ae(Ne,I,R,!0);continue}let pt;if(Ne.key!=null)pt=pe.get(Ne.key);else for(de=ae;de<=J;de++)if(Hn[de-ae]===0&&cn(Ne,y[de])){pt=de;break}pt===void 0?Ae(Ne,I,R,!0):(Hn[pt-ae]=O+1,pt>=ht?ht=pt:dt=!0,T(Ne,y[pt],x,null,I,R,B,U,j),$e++)}const Ui=dt?xf(Hn):Mn;for(de=Ui.length-1,O=Ve-1;O>=0;O--){const Ne=ae+O,pt=y[Ne],$i=y[Ne+1],Vi=Ne+1<Q?$i.el||$i.placeholder:L;Hn[O]===0?T(null,pt,x,Vi,I,R,B,U,j):dt&&(de<0||O!==Ui[de]?De(pt,x,Vi,2):de--)}}},De=(h,y,x,L,I=null)=>{const{el:R,type:B,transition:U,children:j,shapeFlag:O}=h;if(O&6){De(h.component.subTree,y,x,L);return}if(O&128){h.suspense.move(y,x,L);return}if(O&64){B.move(h,y,x,st);return}if(B===be){s(R,y,x);for(let G=0;G<j.length;G++)De(j[G],y,x,L);s(h.anchor,y,x);return}if(B===es){F(h,y,x);return}if(L!==2&&O&1&&U)if(L===0)U.beforeEnter(R),s(R,y,x),qe(()=>U.enter(R),I);else{const{leave:G,delayLeave:J,afterLeave:te}=U,ae=()=>{h.ctx.isUnmounted?o(R):s(R,y,x)},pe=()=>{R._isLeaving&&R[Nt](!0),G(R,()=>{ae(),te&&te()})};J?J(R,ae,pe):pe()}else s(R,y,x)},Ae=(h,y,x,L=!1,I=!1)=>{const{type:R,props:B,ref:U,children:j,dynamicChildren:O,shapeFlag:Q,patchFlag:G,dirs:J,cacheIndex:te}=h;if(G===-2&&(I=!1),U!=null&&(lt(),Jn(U,null,x,h,!0),ct()),te!=null&&(y.renderCache[te]=void 0),Q&256){y.ctx.deactivate(h);return}const ae=Q&1&&J,pe=!Qn(h);let de;if(pe&&(de=B&&B.onVnodeBeforeUnmount)&&mt(de,y,h),Q&6)Fn(h.component,x,L);else{if(Q&128){h.suspense.unmount(x,L);return}ae&&Qt(h,null,y,"beforeUnmount"),Q&64?h.type.remove(h,y,x,st,L):O&&!O.hasOnce&&(R!==be||G>0&&G&64)?Ze(O,y,x,!1,!0):(R===be&&G&384||!I&&Q&16)&&Ze(j,y,x),L&&Ye(h)}(pe&&(de=B&&B.onVnodeUnmounted)||ae)&&qe(()=>{de&&mt(de,y,h),ae&&Qt(h,null,y,"unmounted")},x)},Ye=h=>{const{type:y,el:x,anchor:L,transition:I}=h;if(y===be){h.patchFlag>0&&h.patchFlag&2048&&I&&!I.persisted?h.children.forEach(B=>{B.type===Ee?o(B.el):Ye(B)}):Nn(x,L);return}if(y===es){P(h);return}const R=()=>{o(x),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(h.shapeFlag&1&&I&&!I.persisted){const{leave:B,delayLeave:U}=I,j=()=>B(x,R);U?U(h.el,R,j):j()}else R()},Nn=(h,y)=>{let x;for(;h!==y;)x=d(h),o(h),h=x;o(y)},Fn=(h,y,x)=>{h.type.__hmrId&&Tu(h);const{bum:L,scope:I,job:R,subTree:B,um:U,m:j,a:O}=h;pr(j),pr(O),L&&Tn(L),I.stop(),R&&(R.flags|=8,Ae(B,h,y,x)),U&&qe(U,y),qe(()=>{h.isUnmounted=!0},y),Au(h)},Ze=(h,y,x,L=!1,I=!1,R=0)=>{for(let B=R;B<h.length;B++)Ae(h[B],y,x,L,I)},ft=h=>{if(h.shapeFlag&6)return ft(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const y=d(h.anchor||h.el),x=y&&y[Lu];return x?d(x):y};let Je=!1;const ze=(h,y,x)=>{h==null?y._vnode&&Ae(y._vnode,null,null,!0):T(y._vnode||null,h,y,null,null,null,x),y._vnode=h,Je||(Je=!0,nr(),Va(),Je=!1)},st={p:T,um:Ae,m:De,r:Ye,mt:A,mc:E,pc:se,pbc:b,n:ft,o:t};return{render:ze,hydrate:void 0,createApp:of(ze)}}function Io({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function en({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Sf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ai(t,e,n=!1){const s=t.children,o=e.children;if(Z(s)&&Z(o))for(let i=0;i<s.length;i++){const r=s[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=Wt(o[i]),a.el=r.el),!n&&a.patchFlag!==-2&&ai(r,a)),a.type===ys&&a.patchFlag!==-1&&(a.el=r.el),a.type===Ee&&!a.el&&(a.el=r.el),a.el&&(a.el.__vnode=a)}}function xf(t){const e=t.slice(),n=[0];let s,o,i,r,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(o=n[n.length-1],t[o]<u){e[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)a=i+r>>1,t[n[a]]<u?i=a+1:r=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=e[r];return n}function _l(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_l(e)}function pr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ef=Symbol.for("v-scx"),Cf=()=>{{const t=ks(Ef);return t||H("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function gn(t,e,n){return ee(e)||H("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),yl(t,e,n)}function yl(t,e,n=fe){const{immediate:s,deep:o,flush:i,once:r}=n;e||(s!==void 0&&H('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&H('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&H('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const a=xe({},n);a.onWarn=H;const l=e&&s||!e&&i!=="post";let u;if(us){if(i==="sync"){const m=Cf();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Le,m.resume=Le,m.pause=Le,m}}const c=ke;a.call=(m,v,T)=>ut(m,c,v,T);let f=!1;i==="post"?a.scheduler=m=>{qe(m,c&&c.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,v)=>{v?m():go(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,c&&(m.id=c.uid,m.i=c))};const d=du(t,e,a);return us&&(u?u.push(d):l&&d()),d}function Pf(t,e,n){const s=this.proxy,o=ye(t)?t.includes(".")?bl(s,t):()=>s[t]:t.bind(s,s);let i;ee(e)?i=e:(i=e.handler,n=e);const r=bs(this),a=yl(o,i.bind(s),n);return r(),a}function bl(t,e){const n=e.split(".");return()=>{let s=t;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const Mf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${it(e)}Modifiers`]||t[`${Jt(e)}Modifiers`];function Af(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||fe;{const{emitsOptions:c,propsOptions:[f]}=t;if(c)if(!(e in c))(!f||!(on(it(e))in f))&&H(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${on(it(e))}" prop.`);else{const d=c[e];ee(d)&&(d(...n)||H(`Invalid event arguments: event validation failed for event "${e}".`))}}let o=n;const i=e.startsWith("update:"),r=i&&Mf(s,e.slice(7));r&&(r.trim&&(o=n.map(c=>ye(c)?c.trim():c)),r.number&&(o=n.map(Vs))),Iu(t,e,o);{const c=e.toLowerCase();c!==e&&s[on(c)]&&H(`Event "${c}" is emitted in component ${vo(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Jt(e)}" instead of "${e}".`)}let a,l=s[a=on(e)]||s[a=on(it(e))];!l&&i&&(l=s[a=on(Jt(e))]),l&&ut(l,t,6,o);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ut(u,t,6,o)}}const Rf=new WeakMap;function vl(t,e,n=!1){const s=n?Rf:e.emitsCache,o=s.get(t);if(o!==void 0)return o;const i=t.emits;let r={},a=!1;if(!ee(t)){const l=u=>{const c=vl(u,e,!0);c&&(a=!0,xe(r,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ce(t)&&s.set(t,null),null):(Z(i)?i.forEach(l=>r[l]=null):xe(r,i),ce(t)&&s.set(t,r),r)}function yo(t,e){return!t||!ds(e)?!1:(e=e.slice(2).replace(/Once$/,""),le(t,e[0].toLowerCase()+e.slice(1))||le(t,Jt(e))||le(t,e))}let li=!1;function Js(){li=!0}function mr(t){const{type:e,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:a,emit:l,render:u,renderCache:c,props:f,data:d,setupState:m,ctx:v,inheritAttrs:T}=t,S=qs(t);let k,N;li=!1;try{if(n.shapeFlag&4){const P=o||s,w=m.__isScriptSetup?new Proxy(P,{get(K,z,E){return H(`Property '${String(z)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(K,z,E)}}):P;k=ot(u.call(w,P,c,Tt(f),m,d,v)),N=a}else{const P=e;a===f&&Js(),k=ot(P.length>1?P(Tt(f),{get attrs(){return Js(),Tt(a)},slots:r,emit:l}):P(Tt(f),null)),N=e.props?a:kf(a)}}catch(P){ts.length=0,ms(P,t,1),k=Se(Ee)}let C=k,F;if(k.patchFlag>0&&k.patchFlag&2048&&([C,F]=wl(k)),N&&T!==!1){const P=Object.keys(N),{shapeFlag:w}=C;if(P.length){if(w&7)i&&P.some(Us)&&(N=If(N,i)),C=Rt(C,N,!1,!0);else if(!li&&C.type!==Ee){const K=Object.keys(a),z=[],E=[];for(let W=0,b=K.length;W<b;W++){const g=K[W];ds(g)?Us(g)||z.push(g[2].toLowerCase()+g.slice(3)):E.push(g)}E.length&&H(`Extraneous non-props attributes (${E.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),z.length&&H(`Extraneous non-emits event listeners (${z.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(gr(C)||H("Runtime directive used on component with non-element root node. The directives will not function as intended."),C=Rt(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(gr(C)||H("Component inside <Transition> renders non-element root node that cannot be animated."),ls(C,n.transition)),F?F(C):k=C,qs(S),k}const wl=t=>{const e=t.children,n=t.dynamicChildren,s=Ni(e,!1);if(s){if(s.patchFlag>0&&s.patchFlag&2048)return wl(s)}else return[t,void 0];const o=e.indexOf(s),i=n?n.indexOf(s):-1,r=a=>{e[o]=a,n&&(i>-1?n[i]=a:a.patchFlag>0&&(t.dynamicChildren=[...n,a]))};return[ot(s),r]};function Ni(t,e=!0){let n;for(let s=0;s<t.length;s++){const o=t[s];if(On(o)){if(o.type!==Ee||o.children==="v-if"){if(n)return;if(n=o,e&&n.patchFlag>0&&n.patchFlag&2048)return Ni(n.children)}}else return}return n}const kf=t=>{let e;for(const n in t)(n==="class"||n==="style"||ds(n))&&((e||(e={}))[n]=t[n]);return e},If=(t,e)=>{const n={};for(const s in t)(!Us(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n},gr=t=>t.shapeFlag&7||t.type===Ee;function Lf(t,e,n){const{props:s,children:o,component:i}=t,{props:r,children:a,patchFlag:l}=e,u=i.emitsOptions;if((o||a)&&St||e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?_r(s,r,u):!!r;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(r[d]!==s[d]&&!yo(u,d))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===r?!1:s?r?_r(s,r,u):!0:!!r;return!1}function _r(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(e[i]!==t[i]&&!yo(n,i))return!0}return!1}function Of({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Tl=t=>t.__isSuspense;function Df(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):$a(t)}const be=Symbol.for("v-fgt"),ys=Symbol.for("v-txt"),Ee=Symbol.for("v-cmt"),es=Symbol.for("v-stc"),ts=[];let Xe=null;function q(t=!1){ts.push(Xe=t?null:[])}function Nf(){ts.pop(),Xe=ts[ts.length-1]||null}let cs=1;function Qs(t,e=!1){cs+=t,t<0&&Xe&&e&&(Xe.hasOnce=!0)}function Sl(t){return t.dynamicChildren=cs>0?Xe||Mn:null,Nf(),cs>0&&Xe&&Xe.push(t),t}function Y(t,e,n,s,o,i){return Sl(_(t,e,n,s,o,i,!0))}function En(t,e,n,s,o){return Sl(Se(t,e,n,s,o,!0))}function On(t){return t?t.__v_isVNode===!0:!1}function cn(t,e){if(e.shapeFlag&6&&t.component){const n=Rs.get(e.type);if(n&&n.has(t.component))return t.shapeFlag&=-257,e.shapeFlag&=-513,!1}return t.type===e.type&&t.key===e.key}const Ff=(...t)=>Hf(...t),xl=({key:t})=>t??null,Is=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ye(t)||Ce(t)||ee(t)?{i:je,r:t,k:e,f:!!n}:t:null);function _(t,e=null,n=null,s=0,o=null,i=t===be?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xl(e),ref:e&&Is(e),scopeId:qa,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:je};return a?(Fi(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ye(n)?8:16),l.key!==l.key&&H("VNode created with invalid key (NaN). VNode type:",l.type),cs>0&&!r&&Xe&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Xe.push(l),l}const Se=Ff;function Hf(t,e=null,n=null,s=0,o=null,i=!1){if((!t||t===Wu)&&(t||H(`Invalid vnode type when creating vnode: ${t}.`),t=Ee),On(t)){const a=Rt(t,e,!0);return n&&Fi(a,n),cs>0&&!i&&Xe&&(a.shapeFlag&6?Xe[Xe.indexOf(t)]=a:Xe.push(a)),a.patchFlag=-2,a}if(Al(t)&&(t=t.__vccOpts),e){e=jf(e);let{class:a,style:l}=e;a&&!ye(a)&&(e.class=Ie(a)),ce(l)&&(Bs(l)&&!Z(l)&&(l=xe({},l)),e.style=Yt(l))}const r=ye(t)?1:Tl(t)?128:Ya(t)?64:ce(t)?4:ee(t)?2:0;return r&4&&Bs(t)&&(t=ne(t),H("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),_(t,e,n,s,o,r,i,!0)}function jf(t){return t?Bs(t)||fl(t)?xe({},t):t:null}function Rt(t,e,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:a,transition:l}=t,u=e?Uf(o||{},e):o,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&xl(u),ref:e&&e.ref?n&&i?Z(i)?i.concat(Is(e)):[i,Is(e)]:Is(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r===-1&&Z(a)?a.map(El):a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==be?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Rt(t.ssContent),ssFallback:t.ssFallback&&Rt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&ls(c,l.clone(c)),c}function El(t){const e=Rt(t);return Z(t.children)&&(e.children=t.children.map(El)),e}function an(t=" ",e=0){return Se(ys,null,t,e)}function Ls(t,e){const n=Se(es,null,t);return n.staticCount=e,n}function Te(t="",e=!1){return e?(q(),En(Ee,null,t)):Se(Ee,null,t)}function ot(t){return t==null||typeof t=="boolean"?Se(Ee):Z(t)?Se(be,null,t.slice()):On(t)?Wt(t):Se(ys,null,String(t))}function Wt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Rt(t)}function Fi(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Z(e))n=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),Fi(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!fl(e)?e._ctx=je:o===3&&je&&(je.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ee(e)?(e={default:e,_ctx:je},n=32):(e=String(e),s&64?(n=16,e=[an(e)]):n=8);t.children=e,t.shapeFlag|=n}function Uf(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=Ie([e.class,s.class]));else if(o==="style")e.style=Yt([e.style,s.style]);else if(ds(o)){const i=e[o],r=s[o];r&&i!==r&&!(Z(i)&&i.includes(r))&&(e[o]=i?[].concat(i,r):r)}else o!==""&&(e[o]=s[o])}return e}function mt(t,e,n,s=null){ut(t,e,7,[n,s])}const $f=ll();let Vf=0;function Bf(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||$f,i={uid:Vf++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hl(s,o),emitsOptions:vl(s,o),emit:null,emitted:null,propsDefaults:fe,inheritAttrs:s.inheritAttrs,ctx:fe,data:fe,props:fe,attrs:fe,slots:fe,refs:fe,setupState:fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx=qu(i),i.root=e?e.root:i,i.emit=Af.bind(null,i),t.ce&&t.ce(i),i}let ke=null;const Hi=()=>ke||je;let eo,ci;{const t=ps(),e=(n,s)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(s),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};eo=e("__VUE_INSTANCE_SETTERS__",n=>ke=n),ci=e("__VUE_SSR_SETTERS__",n=>us=n)}const bs=t=>{const e=ke;return eo(t),t.scope.on(),()=>{t.scope.off(),eo(e)}},yr=()=>{ke&&ke.scope.off(),eo(null)},Gf=$t("slot,component");function ui(t,{isNativeTag:e}){(Gf(t)||e(t))&&H("Do not use built-in or reserved HTML elements as component id: "+t)}function Cl(t){return t.vnode.shapeFlag&4}let us=!1;function Kf(t,e=!1,n=!1){e&&ci(e);const{props:s,children:o}=t.vnode,i=Cl(t);af(t,s,i,e),yf(t,o,n||e);const r=i?zf(t,e):void 0;return e&&ci(!1),r}function zf(t,e){var n;const s=t.type;{if(s.name&&ui(s.name,t.appContext.config),s.components){const i=Object.keys(s.components);for(let r=0;r<i.length;r++)ui(i[r],t.appContext.config)}if(s.directives){const i=Object.keys(s.directives);for(let r=0;r<i.length;r++)Xa(i[r])}s.compilerOptions&&Wf()&&H('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,il),Xu(t);const{setup:o}=s;if(o){lt();const i=t.setupContext=o.length>1?Yf(t):null,r=bs(t),a=Dn(o,t,0,[Tt(t.props),i]),l=wi(a);if(ct(),r(),(l||t.sp)&&!Qn(t)&&nl(t),l){if(a.then(yr,yr),e)return a.then(u=>{br(t,u,e)}).catch(u=>{ms(u,t,0)});if(t.asyncDep=a,!t.suspense){const u=(n=s.name)!=null?n:"Anonymous";H(`Component <${u}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else br(t,a,e)}else Pl(t,e)}function br(t,e,n){ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ce(e)?(On(e)&&H("setup() should not return VNodes directly - return a render function instead."),t.devtoolsRawSetupState=e,t.setupState=Fa(e),Yu(t)):e!==void 0&&H(`setup() should return an object. Received: ${e===null?"null":typeof e}`),Pl(t,n)}const Wf=()=>!0;function Pl(t,e,n){const s=t.type;t.render||(t.render=s.render||Le);{const o=bs(t);lt();try{Ju(t)}finally{ct(),o()}}!s.render&&t.render===Le&&!e&&(s.template?H('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):H("Component is missing template or render function: ",s))}const qf={get(t,e){return Js(),Me(t,"get",""),t[e]},set(){return H("setupContext.attrs is readonly."),!1},deleteProperty(){return H("setupContext.attrs is readonly."),!1}};function Xf(t){return new Proxy(t.slots,{get(e,n){return Me(t,"get","$slots"),e[n]}})}function Yf(t){const e=n=>{if(t.exposed&&H("expose() should be called only once per setup()."),n!=null){let s=typeof n;s==="object"&&(Z(n)?s="array":Ce(n)&&(s="ref")),s!=="object"&&H(`expose() should be passed a plain object, received ${s}.`)}t.exposed=n||{}};{let n,s;return Object.freeze({get attrs(){return n||(n=new Proxy(t.attrs,qf))},get slots(){return s||(s=Xf(t))},get emit(){return(o,...i)=>t.emit(o,...i)},expose:e})}}function bo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fa(ou(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in mn)return mn[n](t)},has(e,n){return n in e||n in mn}})):t.proxy}const Zf=/(?:^|[-_])\w/g,Jf=t=>t.replace(Zf,e=>e.toUpperCase()).replace(/[-_]/g,"");function Ml(t,e=!0){return ee(t)?t.displayName||t.name:t.name||e&&t.__name}function vo(t,e,n=!1){let s=Ml(e);if(!s&&e.__file){const o=e.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&t&&t.parent){const o=i=>{for(const r in i)if(i[r]===e)return r};s=o(t.components||t.parent.type.components)||o(t.appContext.components)}return s?Jf(s):n?"App":"Anonymous"}function Al(t){return ee(t)&&"__vccOpts"in t}const Qf=(t,e)=>{const n=uu(t,e,us);{const s=Hi();s&&s.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function ed(t,e,n){try{Qs(-1);const s=arguments.length;return s===2?ce(e)&&!Z(e)?On(e)?Se(t,null,[e]):Se(t,e):Se(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&On(n)&&(n=[n]),Se(t,e,n))}finally{Qs(1)}}function td(){if(typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#1677ff"},n={style:"color:#f5222d"},s={style:"color:#eb2f96"},o={__vue_custom_formatter:!0,header(f){if(!ce(f))return null;if(f.__isVue)return["div",t,"VueInstance"];if(Ce(f)){lt();const d=f.value;return ct(),["div",{},["span",t,c(f)],"<",a(d),">"]}else{if(hn(f))return["div",{},["span",t,Ue(f)?"ShallowReactive":"Reactive"],"<",a(f),`>${Mt(f)?" (readonly)":""}`];if(Mt(f))return["div",{},["span",t,Ue(f)?"ShallowReadonly":"Readonly"],"<",a(f),">"]}return null},hasBody(f){return f&&f.__isVue},body(f){if(f&&f.__isVue)return["div",{},...i(f.$)]}};function i(f){const d=[];f.type.props&&f.props&&d.push(r("props",ne(f.props))),f.setupState!==fe&&d.push(r("setup",f.setupState)),f.data!==fe&&d.push(r("data",ne(f.data)));const m=l(f,"computed");m&&d.push(r("computed",m));const v=l(f,"inject");return v&&d.push(r("injected",v)),d.push(["div",{},["span",{style:s.style+";opacity:0.66"},"$ (internal): "],["object",{object:f}]]),d}function r(f,d){return d=xe({},d),Object.keys(d).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},f],["div",{style:"padding-left:1.25em"},...Object.keys(d).map(m=>["div",{},["span",s,m+": "],a(d[m],!1)])]]:["span",{}]}function a(f,d=!0){return typeof f=="number"?["span",e,f]:typeof f=="string"?["span",n,JSON.stringify(f)]:typeof f=="boolean"?["span",s,f]:ce(f)?["object",{object:d?ne(f):f}]:["span",n,String(f)]}function l(f,d){const m=f.type;if(ee(m))return;const v={};for(const T in f.ctx)u(m,T,d)&&(v[T]=f.ctx[T]);return v}function u(f,d,m){const v=f[m];if(Z(v)&&v.includes(d)||ce(v)&&d in v||f.extends&&u(f.extends,d,m)||f.mixins&&f.mixins.some(T=>u(T,d,m)))return!0}function c(f){return Ue(f)?"ShallowRef":f.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(o):window.devtoolsFormatters=[o]}const vr="3.5.22",xt=H;/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fi;const wr=typeof window<"u"&&window.trustedTypes;if(wr)try{fi=wr.createPolicy("vue",{createHTML:t=>t})}catch(t){xt(`Error creating trusted types policy: ${t}`)}const Rl=fi?t=>fi.createHTML(t):t=>t,nd="http://www.w3.org/2000/svg",sd="http://www.w3.org/1998/Math/MathML",Ot=typeof document<"u"?document:null,Tr=Ot&&Ot.createElement("template"),od={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const o=e==="svg"?Ot.createElementNS(nd,t):e==="mathml"?Ot.createElementNS(sd,t):n?Ot.createElement(t,{is:n}):Ot.createElement(t);return t==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:t=>Ot.createTextNode(t),createComment:t=>Ot.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ot.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,o,i){const r=n?n.previousSibling:e.lastChild;if(o&&(o===i||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Tr.innerHTML=Rl(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=Tr.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Gt="transition",$n="animation",fs=Symbol("_vtc"),kl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},id=xe({},Za,kl),rd=t=>(t.displayName="Transition",t.props=id,t),Il=rd((t,{slots:e})=>ed(Nu,ad(t),e)),tn=(t,e=[])=>{Z(t)?t.forEach(n=>n(...e)):t&&t(...e)},Sr=t=>t?Z(t)?t.some(e=>e.length>1):t.length>1:!1;function ad(t){const e={};for(const g in t)g in kl||(e[g]=t[g]);if(t.css===!1)return e;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=r,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,v=ld(o),T=v&&v[0],S=v&&v[1],{onBeforeEnter:k,onEnter:N,onEnterCancelled:C,onLeave:F,onLeaveCancelled:P,onBeforeAppear:w=k,onAppear:K=N,onAppearCancelled:z=C}=e,E=(g,p,M,A)=>{g._enterCancelled=A,nn(g,p?c:a),nn(g,p?u:r),M&&M()},W=(g,p)=>{g._isLeaving=!1,nn(g,f),nn(g,m),nn(g,d),p&&p()},b=g=>(p,M)=>{const A=g?K:N,D=()=>E(p,g,M);tn(A,[p,D]),xr(()=>{nn(p,g?l:i),Lt(p,g?c:a),Sr(A)||Er(p,s,T,D)})};return xe(e,{onBeforeEnter(g){tn(k,[g]),Lt(g,i),Lt(g,r)},onBeforeAppear(g){tn(w,[g]),Lt(g,l),Lt(g,u)},onEnter:b(!1),onAppear:b(!0),onLeave(g,p){g._isLeaving=!0;const M=()=>W(g,p);Lt(g,f),g._enterCancelled?(Lt(g,d),Mr(g)):(Mr(g),Lt(g,d)),xr(()=>{g._isLeaving&&(nn(g,f),Lt(g,m),Sr(F)||Er(g,s,S,M))}),tn(F,[g,M])},onEnterCancelled(g){E(g,!1,void 0,!0),tn(C,[g])},onAppearCancelled(g){E(g,!0,void 0,!0),tn(z,[g])},onLeaveCancelled(g){W(g),tn(P,[g])}})}function ld(t){if(t==null)return null;if(ce(t))return[Lo(t.enter),Lo(t.leave)];{const e=Lo(t);return[e,e]}}function Lo(t){const e=Tc(t);return _u(e,"<transition> explicit duration"),e}function Lt(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[fs]||(t[fs]=new Set)).add(e)}function nn(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[fs];n&&(n.delete(e),n.size||(t[fs]=void 0))}function xr(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let cd=0;function Er(t,e,n,s){const o=t._endId=++cd,i=()=>{o===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:r,timeout:a,propCount:l}=ud(t,e);if(!r)return s();const u=r+"end";let c=0;const f=()=>{t.removeEventListener(u,d),i()},d=m=>{m.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,d)}function ud(t,e){const n=window.getComputedStyle(t),s=v=>(n[v]||"").split(", "),o=s(`${Gt}Delay`),i=s(`${Gt}Duration`),r=Cr(o,i),a=s(`${$n}Delay`),l=s(`${$n}Duration`),u=Cr(a,l);let c=null,f=0,d=0;e===Gt?r>0&&(c=Gt,f=r,d=i.length):e===$n?u>0&&(c=$n,f=u,d=l.length):(f=Math.max(r,u),c=f>0?r>u?Gt:$n:null,d=c?c===Gt?i.length:l.length:0);const m=c===Gt&&/\b(?:transform|all)(?:,|$)/.test(s(`${Gt}Property`).toString());return{type:c,timeout:f,propCount:d,hasTransform:m}}function Cr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Pr(n)+Pr(t[s])))}function Pr(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Mr(t){return(t?t.ownerDocument:document).body.offsetHeight}function fd(t,e,n){const s=t[fs];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const to=Symbol("_vod"),Ll=Symbol("_vsh"),Ol={name:"show",beforeMount(t,{value:e},{transition:n}){t[to]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Vn(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Vn(t,!0),s.enter(t)):s.leave(t,()=>{Vn(t,!1)}):Vn(t,e))},beforeUnmount(t,{value:e}){Vn(t,e)}};function Vn(t,e){t.style.display=e?t[to]:"none",t[Ll]=!e}const dd=Symbol("CSS_VAR_TEXT"),hd=/(?:^|;)\s*display\s*:/;function pd(t,e,n){const s=t.style,o=ye(n);let i=!1;if(n&&!o){if(e)if(ye(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&Os(s,a,"")}else for(const r in e)n[r]==null&&Os(s,r,"");for(const r in n)r==="display"&&(i=!0),Os(s,r,n[r])}else if(o){if(e!==n){const r=s[dd];r&&(n+=";"+r),s.cssText=n,i=hd.test(n)}}else e&&t.removeAttribute("style");to in t&&(t[to]=i?s.display:"",t[Ll]&&(s.display="none"))}const md=/[^\\];\s*$/,Ar=/\s*!important$/;function Os(t,e,n){if(Z(n))n.forEach(s=>Os(t,e,s));else if(n==null&&(n=""),md.test(n)&&xt(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const s=gd(t,e);Ar.test(n)?t.setProperty(Jt(s),n.replace(Ar,""),"important"):t[s]=n}}const Rr=["Webkit","Moz","ms"],Oo={};function gd(t,e){const n=Oo[e];if(n)return n;let s=it(e);if(s!=="filter"&&s in t)return Oo[e]=s;s=uo(s);for(let o=0;o<Rr.length;o++){const i=Rr[o]+s;if(i in t)return Oo[e]=i}return e}const kr="http://www.w3.org/1999/xlink";function Ir(t,e,n,s,o,i=Oc(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kr,e.slice(6,e.length)):t.setAttributeNS(kr,e,n):n==null||i&&!ya(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Pt(n)?String(n):n)}function Lr(t,e,n,s,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Rl(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let r=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ya(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{t[e]=n}catch(a){r||xt(`Failed setting prop "${e}" on <${i.toLowerCase()}>: value ${n} is invalid.`,a)}r&&t.removeAttribute(o||e)}function un(t,e,n,s){t.addEventListener(e,n,s)}function _d(t,e,n,s){t.removeEventListener(e,n,s)}const Or=Symbol("_vei");function yd(t,e,n,s,o=null){const i=t[Or]||(t[Or]={}),r=i[e];if(s&&r)r.value=Nr(s,e);else{const[a,l]=bd(e);if(s){const u=i[e]=Td(Nr(s,e),o);un(t,a,u,l)}else r&&(_d(t,a,r,l),i[e]=void 0)}}const Dr=/(?:Once|Passive|Capture)$/;function bd(t){let e;if(Dr.test(t)){e={};let s;for(;s=t.match(Dr);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jt(t.slice(2)),e]}let Do=0;const vd=Promise.resolve(),wd=()=>Do||(vd.then(()=>Do=0),Do=Date.now());function Td(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ut(Sd(s,n.value),e,5,[s])};return n.value=t,n.attached=wd(),n}function Nr(t,e){return ee(t)||Z(t)?t:(xt(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof t}.`),Le)}function Sd(t,e){if(Z(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const Fr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xd=(t,e,n,s,o,i)=>{const r=o==="svg";e==="class"?fd(t,s,r):e==="style"?pd(t,n,s):ds(e)?Us(e)||yd(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ed(t,e,s,r))?(Lr(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ir(t,e,s,r,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ye(s))?Lr(t,it(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Ir(t,e,s,r))};function Ed(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Fr(e)&&ee(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Fr(e)&&ye(n)?!1:e in t}const no=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?n=>Tn(e,n):e};function Cd(t){t.target.composing=!0}function Hr(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const kn=Symbol("_assign"),gt={created(t,{modifiers:{lazy:e,trim:n,number:s}},o){t[kn]=no(o);const i=s||o.props&&o.props.type==="number";un(t,e?"change":"input",r=>{if(r.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Vs(a)),t[kn](a)}),n&&un(t,"change",()=>{t.value=t.value.trim()}),e||(un(t,"compositionstart",Cd),un(t,"compositionend",Hr),un(t,"change",Hr))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},r){if(t[kn]=no(r),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Vs(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||o&&t.value.trim()===l)||(t.value=l))}},jr={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const o=lo(e);un(t,"change",()=>{const i=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>n?Vs(so(r)):so(r));t[kn](t.multiple?o?new Set(i):i:i[0]),t._assigning=!0,Ut(()=>{t._assigning=!1})}),t[kn]=no(s)},mounted(t,{value:e}){Ur(t,e)},beforeUpdate(t,e,n){t[kn]=no(n)},updated(t,{value:e}){t._assigning||Ur(t,e)}};function Ur(t,e){const n=t.multiple,s=Z(e);if(n&&!s&&!lo(e)){xt(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(e).slice(8,-1)}.`);return}for(let o=0,i=t.options.length;o<i;o++){const r=t.options[o],a=so(r);if(n)if(s){const l=typeof a;l==="string"||l==="number"?r.selected=e.some(u=>String(u)===String(a)):r.selected=Nc(e,a)>-1}else r.selected=e.has(a);else if(fo(so(r),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}function so(t){return"_value"in t?t._value:t.value}const Pd=["ctrl","shift","alt","meta"],Md={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Pd.some(n=>t[`${n}Key`]&&!e.includes(n))},No=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(o,...i)=>{for(let r=0;r<e.length;r++){const a=Md[e[r]];if(a&&a(o,e))return}return t(o,...i)})},Ad=xe({patchProp:xd},od);let $r;function Rd(){return $r||($r=wf(Ad))}const Vr=(...t)=>{const e=Rd().createApp(...t);Id(e),Ld(e);const{mount:n}=e;return e.mount=s=>{const o=Od(s);if(!o)return;const i=e._component;!ee(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,kd(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},e};function kd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Id(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>Rc(e)||kc(e)||Ic(e),writable:!1})}function Ld(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){xt("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,s='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(t.config,"compilerOptions",{get(){return xt(s),n},set(){xt(s)}})}}function Od(t){if(ye(t)){const e=document.querySelector(t);return e||xt(`Failed to mount app: mount target selector "${t}" returned null.`),e}return window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&xt('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}/**
* vue v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Dd(){td()}Dd();const Ds={maxRetries:3,retryDelay:1e3,timeout:1e4};let Fo=null;const In={enabled:!0,maxCacheSize:50*1024*1024,cachePrefix:"mgpic_",version:"1.0.0",loadInterval:50,batchSize:3};class Nd{constructor(){this.cache=new Map,this.totalSize=0}isSupported(){return"caches"in window}getCacheName(){return`${In.cachePrefix}${In.version}`}async isCached(e){if(!this.isSupported())return!1;try{return await(await caches.open(this.getCacheName())).match(e)!==void 0}catch(n){return console.warn("检查缓存失败:",n.message),!1}}async cacheResource(e,n){if(!this.isSupported())return!1;try{const s=await caches.open(this.getCacheName());if(await s.match(e))return console.log(`资源已存在于缓存，跳过: ${e}`),!0;await s.put(e,n.clone());const i=n.headers.get("content-length");return i&&(this.totalSize+=parseInt(i)),console.log(`资源已缓存: ${e}`),!0}catch(s){return console.warn("缓存资源失败:",s.message),!1}}async getCachedResource(e){if(!this.isSupported())return null;try{return await(await caches.open(this.getCacheName())).match(e)}catch(n){return console.warn("获取缓存资源失败:",n.message),null}}async cleanupCache(){if(this.isSupported())try{const e=await caches.keys(),n=this.getCacheName();for(const s of e)s.startsWith(In.cachePrefix)&&s!==n&&(await caches.delete(s),console.log(`清理过期缓存: ${s}`))}catch(e){console.warn("清理缓存失败:",e.message)}}}const nt=new Nd;let xs=null;function Fd(){return xs||(console.log("使用默认R2 URL"),xs="https://pub-6f9181bda40946ea92b5e87fe84e27d4.r2.dev",xs)}function _e(t){let e=t;t.startsWith("/assets/")&&(e=t.slice(7));const n=Fd(),s=e.startsWith("/")?e.slice(1):e;return`${n}/${s}`}async function di(t,e={}){if(nt.isSupported()){const o=await nt.getCachedResource(t);if(o)return console.log(`从 Cache Storage 加载: ${t}`),o}const{maxRetries:n=Ds.maxRetries,retryDelay:s=Ds.retryDelay}=e;for(let o=1;o<=n;o++)try{console.log(`尝试加载资源 (${o}/${n}): ${t}`);const i=new AbortController,r=setTimeout(()=>i.abort(),Ds.timeout),a=await fetch(t,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:i.signal,...e});if(clearTimeout(r),a.ok)return nt.isSupported()&&await nt.cacheResource(t,a),console.log(`资源加载并缓存成功: ${t}`),a;throw new Error(`HTTP ${a.status}: ${a.statusText}`)}catch(i){if(console.warn(`资源加载失败 (${o}/${n}): ${t}`,i.message),o===n)throw console.error(`资源加载最终失败: ${t}`,i.message),i;const r=s*o;console.log(`等待 ${r}ms 后重试...`),await new Promise(a=>setTimeout(a,r))}}async function Hd(t=["high","medium"]){try{if(Fo){console.log("使用内存缓存的资源列表");const i=Br(Fo,t);return console.log(`从缓存的资源列表加载 ${i.length} 个资源 (优先级: ${t.join(", ")})`),i}const e=_e("asset-list.json");console.log(`从 R2 CDN 加载资源列表: ${e}`);const n=await di(e);if(!n.ok)throw new Error(`资源列表加载失败: HTTP ${n.status}`);const s=await n.json();Fo=s,console.log("资源列表已缓存到内存");const o=Br(s,t);return console.log(`从资源列表加载 ${o.length} 个资源 (优先级: ${t.join(", ")})`),o}catch(e){return console.warn("无法加载自动生成的资源列表，使用备用列表:",e.message),["logo.glb","frontend_resource/start_game.webp","frontend_resource/copper_warehouse.webp","frontend_resource/game_wiki.webp","frontend_resource/Tutorial.webp","frontend_resource/gacha.webp"]}}function Br(t,e){const n=[];for(const s of e)if(t.categories&&t.categories[s]){const o=t.categories[s].resources||[];n.push(...o.map(i=>i.path))}return n}async function oo(t=null,e=["high","medium"]){console.log("开始预缓存游戏资源..."),await nt.cleanupCache();const n=await Hd(e),s=In.batchSize,o=In.loadInterval,i=n.length;let r=0;t&&t(0,i,0);for(let a=0;a<n.length;a+=s){const l=n.slice(a,a+s);console.log(`处理批次 ${Math.floor(a/s)+1}/${Math.ceil(n.length/s)}: ${l.length} 个资源`);const u=l.map(async(S,k)=>{const N=_e(S);try{if(await nt.isCached(N))return console.log(`资源已在Cache Storage中，跳过: ${S}`),{success:!0,path:S,cached:!0,source:"cache"};const F=new AbortController,P=setTimeout(()=>F.abort(),Ds.timeout),w=await fetch(N,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:F.signal});if(clearTimeout(P),w.ok){const K=w.headers.get("x-cache")||w.headers.get("cf-cache-status")||w.type==="basic"&&!w.redirected;return nt.isSupported()&&await nt.cacheResource(N,w),console.log(`资源预缓存成功: ${S}${K?" (使用浏览器缓存)":""}`),{success:!0,path:S,cached:!1,fromBrowserCache:!!K}}else throw new Error(`HTTP ${w.status}: ${w.statusText}`)}catch(C){return console.warn(`资源预缓存失败: ${S}`,C.message),{success:!1,path:S,error:C.message}}}),c=await Promise.all(u);r+=l.length;const f=Math.round(r/i*100);t&&t(r,i,f);const d=c.filter(S=>S.success).length,m=c.filter(S=>S.cached).length,v=c.filter(S=>S.fromBrowserCache).length,T=c.filter(S=>!S.success).length;console.log(`批次完成: 成功 ${d}, Cache Storage已有 ${m}, 浏览器缓存 ${v}, 失败 ${T}`),a+s<n.length&&(console.log(`等待 ${o}ms 后处理下一批...`),await new Promise(S=>setTimeout(S,o)))}console.log("所有资源预缓存完成"),t&&t(i,i,100)}async function Gr(){if(!nt.isSupported())return{supported:!1,message:"浏览器不支持缓存API"};try{const e=await(await caches.open(nt.getCacheName())).keys();return{supported:!0,cacheName:nt.getCacheName(),resourceCount:e.length,totalSize:nt.totalSize,maxSize:In.maxCacheSize}}catch(t){return{supported:!0,error:t.message}}}const Bt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n},jd={__name:"Hall",emits:["startGame","openWarehouse","openTutorial","openEncyclopedia"],setup(t,{expose:e,emit:n}){e();const s=n;function o(){s("startGame")}function i(){s("openWarehouse")}function r(){s("openTutorial")}function a(){s("openEncyclopedia")}const l=X(_e("frontend_resource/start_game.webp")),u=X(_e("frontend_resource/copper_warehouse.webp")),c=X(_e("frontend_resource/game_wiki.webp")),f=X(_e("frontend_resource/Tutorial.webp"));Oe(async()=>{try{if(window.getCacheStatus){const v=await window.getCacheStatus();console.log("缓存状态:",v)}const m=[l.value,u.value,c.value,f.value];for(let v=0;v<m.length;v++){const T=m[v];try{const S=new Image;S.crossOrigin="anonymous",S.src=T,await new Promise((k,N)=>{S.onload=k,S.onerror=N}),console.log("背景图片预加载成功:",T),v<m.length-1&&await new Promise(k=>setTimeout(k,100))}catch(S){console.warn("背景图片预加载失败:",T,S.message)}}}catch(m){console.warn("背景图片预加载过程中出现错误:",m.message)}});const d={emit:s,startGame:o,openWarehouse:i,openTutorial:r,openEncyclopedia:a,bgStart:l,bgWarehouse:u,bgWiki:c,bgTutorial:f,ref:X,onMounted:Oe,get getAssetUrl(){return _e}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Ud={class:"menu"};function $d(t,e,n,s,o,i){return q(),Y("div",Ud,[_("button",{class:"tile tile--start",style:Yt({backgroundImage:`url('${s.bgStart}')`}),onClick:s.startGame},[...e[0]||(e[0]=[_("div",{class:"tile__mask"},null,-1),_("div",{class:"tile__caption tile__caption--bottom"},[_("div",{class:"tile__title"},"开始游戏"),_("div",{class:"tile__subtitle"},"Start Game")],-1)])],4),_("button",{class:"tile tile--warehouse",style:Yt({backgroundImage:`url('${s.bgWarehouse}')`}),onClick:s.openWarehouse},[...e[1]||(e[1]=[_("div",{class:"tile__mask"},null,-1),_("div",{class:"tile__caption tile__caption--top"},[_("div",{class:"tile__title"},"铜偶仓库"),_("div",{class:"tile__subtitle"},"Copper Warehouse")],-1)])],4),_("button",{class:"tile tile--wiki",style:Yt({backgroundImage:`url('${s.bgWiki}')`}),onClick:s.openEncyclopedia},[...e[2]||(e[2]=[_("div",{class:"tile__mask"},null,-1),_("div",{class:"tile__caption tile__caption--bottom"},[_("div",{class:"tile__title"},"游戏百科"),_("div",{class:"tile__subtitle"},"Game Wiki")],-1)])],4),_("button",{class:"tile tile--tutorial",style:Yt({backgroundImage:`url('${s.bgTutorial}')`}),onClick:s.openTutorial},[...e[3]||(e[3]=[_("div",{class:"tile__mask"},null,-1),_("div",{class:"tile__caption tile__caption--top"},[_("div",{class:"tile__title"},"新手教程"),_("div",{class:"tile__subtitle"},"Tutorial")],-1)])],4)])}const Vd=Bt(jd,[["render",$d],["__scopeId","data-v-7603db95"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/Hall.vue"]]),Bd="modulepreload",Gd=function(t){return"/MGPIC-2025/"+t},Kr={},Dt=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=Gd(l),l in Kr)return;Kr[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Bd,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((d,m)=>{f.addEventListener("load",d),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return o.then(r=>{for(const a of r||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class Kd{constructor(){this.queue=[],this.isProcessing=!1,this.handlers=new Map,this.sceneContext=null}setSceneContext(e){this.sceneContext=e}registerHandler(e,n){this.handlers.set(e,n)}enqueue(e){e.type_msg!=="put_map_block"&&console.log("[MessageQueue] 收到消息:",e),this.queue.push(e),this.isProcessing||this.processNext()}async processNext(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;const e=10;let n=0;for(;this.queue.length>0&&n<e;){const s=this.queue.shift();n++;try{const{type_msg:o,content:i}=s,r=this.handlers.get(o);if(r){o!=="put_map_block"&&console.log("[MessageQueue] 处理消息:",o,i);const a=JSON.parse(i);await r(a,this.sceneContext||{})}else console.warn("[MessageQueue] 未找到处理器:",o),console.log("[MessageQueue] 当前已注册的处理器:",Array.from(this.handlers.keys()))}catch(o){console.error("[MessageQueue] 处理消息失败:",o),console.error("[MessageQueue] 错误详情:",o.message)}}this.queue.length>0?requestAnimationFrame(()=>this.processNext()):this.isProcessing=!1}}const we=new Kd;function Es(t,e){return t.find(n=>n.id===e)}function zr(t){return new Promise(e=>setTimeout(e,t))}function Dl(){console.log("[MessageQueue] 开始注册消息处理器..."),we.registerHandler("handle_on_click_copper",async(o,i)=>{var a;const{copper:r}=o;console.log(`[Handler] 点击铜偶: ${((a=r.copper.copper_info)==null?void 0:a.name)||"Unknown"} (ID=${r.id})`),console.log(`[Handler] 铜偶状态: HP=${r.now_health}/${r.copper.attribute.health}, 可移动=${r.can_move}, 可攻击=${r.can_attack}`),i.highlightSelectedCopper&&i.highlightSelectedCopper(r.id),i.onShowCopperInfo&&i.onShowCopperInfo(r)}),we.registerHandler("set_copper",async(o,i)=>{const{id:r,position:a,copper:l}=o;console.log(`[Handler] set_copper at ${a}, id=${r}`),console.log(`[Handler] 实际铜偶ID: copper.id=${l.id}`),window.__ACTUAL_COPPER_IDS__?(window.__ACTUAL_COPPER_IDS__.push(l.id),console.log(`[Handler] 已添加铜偶ID到数组，当前数量: ${window.__ACTUAL_COPPER_IDS__.length}`)):console.error("[Handler] window.__ACTUAL_COPPER_IDS__ 未初始化！"),i.onSetCopper&&i.onSetCopper(r,a,l)}),we.registerHandler("set_enemy",async(o,i)=>{const{id:r,position:a,enemy:l}=o;console.log(`[Handler] set_enemy at ${a}, id=${r}`),i.onSetEnemy&&i.onSetEnemy(r,a,l)}),we.registerHandler("remove_unit",async(o,i)=>{const{id:r}=o;console.log(`[Handler] remove_unit id=${r}`);const a=Es(i.models||[],r);if(a&&a.object){const u=performance.now();if(await new Promise(c=>{function f(){const d=performance.now()-u,m=Math.min(d/500,1);a.object&&a.object.traverse(v=>{v.material&&(v.material.transparent=!0,v.material.opacity=1-m)}),m<1?requestAnimationFrame(f):c()}f()}),i.scene&&i.scene.remove(a.object),i.models){const c=i.models.indexOf(a);c>-1&&i.models.splice(c,1)}}}),we.registerHandler("change_direction",async(o,i)=>{const{id:r,direction:a}=o;console.log(`[Handler] change_direction id=${r}, direction=${a}`);const l=Es(i.models||[],r);if(l&&l.object){let u=0;switch(a){case"PositiveX":u=Math.PI/2;break;case"NegativeX":u=-Math.PI/2;break;case"PositiveY":u=0;break;case"NegativeY":u=Math.PI;break}const c=300,f=l.object.rotation.y,d=performance.now();await new Promise(m=>{function v(){const T=performance.now()-d,S=Math.min(T/c,1),k=1-Math.pow(1-S,2);l.object&&(l.object.rotation.y=f+(u-f)*k),S<1?requestAnimationFrame(v):m()}v()})}}),we.registerHandler("move_to",async(o,i)=>{const{id:r,to:a}=o;console.log(`[Handler] move_to id=${r}, to=${a}`);const l=Es(i.models||[],r);if(l&&l.object&&i.gridCellSize){const[u,c]=a,f=i.gridCellSize,d=(u-7)*f,m=(c-7)*f,v=l.object.position.y;i.animateModelMove&&await new Promise(T=>{i.animateModelMove(l,{x:d,y:v,z:m},T)})}}),we.registerHandler("display_can_move",async(o,i)=>{const{id:r,can_move:a}=o,l=a==="true"||a===!0;console.log(`[Handler] display_can_move id=${r}, can_move=${l}`),i.onDisplayCanMove&&i.onDisplayCanMove(r,l)}),we.registerHandler("display_can_attack",async(o,i)=>{const{id:r,can_attack:a}=o,l=a==="true"||a===!0;console.log(`[Handler] display_can_attack id=${r}, can_attack=${l}`),i.onDisplayCanAttack&&i.onDisplayCanAttack(r,l)}),we.registerHandler("clear_state",async(o,i)=>{const{id:r}=o;console.log(`[Handler] clear_state id=${r}`),i.onClearState&&i.onClearState(r)}),we.registerHandler("animate_move",async(o,i)=>{const{id:r}=o;console.log(`[Handler] animate_move id=${r}`);const a=Es(i.models||[],r);if(a&&i.camera&&i.controls&&i.focusOnModel){const l=i.focusOnModel(a.object,i.camera,i.controls);i.focusState&&(i.focusState.focusPosition=l.focusPosition,i.focusState.focusTarget=l.focusTarget,i.focusState.lerpFactor=l.lerpFactor),await zr(1e3)}}),we.registerHandler("animate_reset",async(o,i)=>{if(console.log("[Handler] animate_reset"),i.camera&&i.controls){const r={x:0,y:2,z:5},a={x:0,y:0,z:0};i.focusState&&(i.focusState.focusPosition=r,i.focusState.focusTarget=a,i.focusState.lerpFactor=.08),await zr(1e3)}}),we.registerHandler("put_map_block",async(o,i)=>{const{position:r}=o;i.onPutMapBlock&&i.onPutMapBlock(r)});let t=0,e=0;we.registerHandler("set_move_block",async(o,i)=>{const{position:r}=o;t++,i.onSetMoveBlock&&i.onSetMoveBlock(r),console.log(`[Handler] 移动范围 #${t}: [${r}]`)}),we.registerHandler("set_attack_block",async(o,i)=>{const{position:r}=o;e++,i.onSetAttackBlock&&i.onSetAttackBlock(r),(e===1||e%10===0)&&console.log(`[Handler] 攻击范围已显示 ${e} 个地块`)});let n=0,s=Date.now();we.registerHandler("clear_block",async(o,i)=>{const{position:r}=o;i.onClearBlock&&i.onClearBlock(r),n++;const a=Date.now();a-s>500&&(n>1&&console.log(`[Handler] ⬜ 已清除 ${n} 个地板块`),n=0,t>0&&(console.log(`[Handler] 移动范围已清除（共 ${t} 个）`),t=0),e>0&&(console.log(`[Handler] 攻击范围已清除（共 ${e} 个）`),e=0)),s=a}),console.log("[MessageQueue] 已注册所有消息处理器，共",we.handlers.size,"个"),console.log("[MessageQueue] 已注册的处理器列表:",Array.from(we.handlers.keys()))}const Ns=Object.freeze(Object.defineProperty({__proto__:null,messageQueue:we,registerAllHandlers:Dl},Symbol.toStringTag,{value:"Module"}));Dl();let ge=null,yn=null;yn=(async()=>{try{return ge=await Dt(()=>import("./main-tCo2ph2Z.js"),[]),console.log("[Glue] main.js 加载成功"),ge}catch(t){return console.warn("[Glue] main.js 导入失败，使用模拟模式:",t.message),null}})();async function Wr(){return await yn,ge!=null&&ge.global_gacha?JSON.parse(ge.global_gacha()):{type:"error",content:"后端未加载"}}async function Cn(){return await yn,ge!=null&&ge.global_get_resource?JSON.parse(ge.global_get_resource()):{}}async function Cs(){return await yn,ge!=null&&ge.global_get_copper_list?JSON.parse(ge.global_get_copper_list()):[]}async function qr(t){return await yn,ge!=null&&ge.global_upgrade_copper?JSON.parse(ge.global_upgrade_copper(t)):{type:"error",content:"后端未加载"}}async function io(t){await yn,ge!=null&&ge.global_info_subscribe?(ge.global_info_subscribe(e=>{const n=JSON.parse(e);t(n),we.enqueue(n)}),console.log("[Glue] global_info_subscribe 已注册")):console.warn("[Glue] global_info_subscribe 不可用，使用模拟模式")}async function Ho(t){await yn,ge!=null&&ge.eventloop?ge.eventloop(t):console.warn("[Glue] eventloop 不可用")}const zd={__name:"DrawScreen",emits:["draw"],setup(t,{expose:e,emit:n}){e();const s=n,o=X(!1),i=X(!0),r=X(!1),a=X("抽卡展示"),l=X("✨"),u=X(""),c=X({left:0,top:0,width:0,height:0});function f(P){return P?typeof P=="string"&&P.startsWith("/")?P:_e(P):""}const d=X(!1),m=X(!1),v=X(!1),T=X("");function S(P){T.value=P||"提示",v.value=!0,setTimeout(()=>{v.value=!1},1800)}async function k(){try{const w=await Cn(),K=Number((w==null?void 0:w.SpiritalSpark)??0);i.value=K>=10}catch{i.value=!1}}function N(){r.value=!1,d.value=!1,m.value=!1}function C(){if(o.value)return;if(k(),!i.value){S("资源不足");return}o.value=!0,console.log("[DrawScreen] runDrawSequence start");const P=document.querySelector(".draw-card");if(P){P.classList.add("is-shaking"),setTimeout(()=>P.classList.remove("is-shaking"),500);const w=P.getBoundingClientRect();c.value={left:Math.round(w.left),top:Math.round(w.top),width:Math.round(w.width),height:Math.round(w.height)}}setTimeout(async()=>{r.value=!0,d.value=!1,m.value=!0;try{const w=await Wr();if(w&&w.type==="success"&&w.copper&&w.copper.copper_info){const K=w.copper.copper_info;a.value=K.name||"新铜偶",l.value="",u.value=_e(K.icon_url||""),console.log("[DrawScreen] tempImage resolved:",u.value),await Ut(),setTimeout(()=>{m.value=!1,setTimeout(()=>{d.value=!0},350)},450),s("draw",{name:K.name,image:K.icon_url||""}),k()}else w&&w.type==="error"&&(r.value=!1,d.value=!1,m.value=!1,S(w.content||"资源不足"),s("draw",{error:!0}),k())}catch{r.value=!1,d.value=!1,m.value=!1,S("抽卡失败"),s("draw",{error:!0}),k()}finally{setTimeout(()=>{o.value=!1},800)}},600)}const F={emit:s,isDrawing:o,canDraw:i,showTempCard:r,tempName:a,tempIcon:l,tempImage:u,tempRect:c,resolveAssetUrl:f,infoVisible:d,cardFlipped:m,toastVisible:v,toastText:T,showToast:S,refreshCanDraw:k,onCloseResult:N,runDrawSequence:C,ref:X,nextTick:Ut,get getAssetUrl(){return _e},get gacha(){return Wr},get get_resource(){return Cn}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},Wd={class:"draw-screen"},qd={class:"draw-screen__body"},Xd={class:"draw-card"},Yd={class:"card-face card-back"},Zd=["src"],Jd={class:"card-face card-front"},Qd=["src"],eh={key:1,class:"card-icon"},th=["src"],nh={class:"draw-cost"},sh=["src"],oh=["disabled","title"],ih={key:0,class:"toast"};function rh(t,e,n,s,o,i){return q(),Y("div",Wd,[_("div",qd,[_("div",Xd,[s.showTempCard?(q(),Y("div",{key:0,class:"draw-temp",onClick:s.onCloseResult},[e[3]||(e[3]=_("div",{class:"dim-backdrop"},null,-1)),_("div",{class:"temp-stack",style:Yt({left:s.tempRect.left+"px",top:s.tempRect.top+"px",width:s.tempRect.width+"px",height:s.tempRect.height+"px"}),onClick:e[2]||(e[2]=No(()=>{},["stop"]))},[_("div",{class:Ie(["card",{flipped:s.cardFlipped}]),onClick:e[0]||(e[0]=No(r=>s.cardFlipped=!s.cardFlipped,["stop"]))},[_("div",Yd,[_("img",{src:s.getAssetUrl("frontend_resource/gacha.webp"),alt:"back"},null,8,Zd)]),_("div",Jd,[s.tempImage?(q(),Y("img",{key:0,src:s.tempImage,alt:"copper",class:"card-front-img"},null,8,Qd)):(q(),Y("div",eh,re(s.tempIcon||"🎴"),1))])],2),_("div",{class:Ie(["card-name-below",{show:s.infoVisible}]),onClick:e[1]||(e[1]=No(()=>{},["stop"]))},re(s.tempName),3)],4)])):Te("",!0),_("img",{class:"draw-card__img",src:s.getAssetUrl("frontend_resource/gacha.webp"),alt:"card"},null,8,th)]),_("div",nh,[_("img",{class:"draw-cost__icon",src:s.getAssetUrl("resource/spiritual_spark.webp"),alt:"cost"},null,8,sh),e[4]||(e[4]=_("span",{class:"draw-cost__times"},"X 10",-1))]),_("button",{class:"draw-action",disabled:s.isDrawing||!s.canDraw,title:s.canDraw?"":"资源不足",onClick:s.runDrawSequence},"抽取卡牌",8,oh),s.toastVisible?(q(),Y("div",ih,re(s.toastText),1)):Te("",!0)])])}const ah=Bt(zd,[["render",rh],["__scopeId","data-v-0c4022d9"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/DrawScreen.vue"]]);function Xr(t,e){if(e===Ul)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Ko||e===ia){let n=t.getIndex();if(n===null){const r=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)r.push(l);t.setIndex(r),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const s=n.count-2,o=[];if(e===Ko)for(let r=1;r<=s;r++)o.push(n.getX(0)),o.push(n.getX(r)),o.push(n.getX(r+1));else for(let r=0;r<s;r++)r%2===0?(o.push(n.getX(r)),o.push(n.getX(r+1)),o.push(n.getX(r+2))):(o.push(n.getX(r+2)),o.push(n.getX(r+1)),o.push(n.getX(r)));o.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=t.clone();return i.setIndex(o),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class ns extends ra{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new dh(n)}),this.register(function(n){return new hh(n)}),this.register(function(n){return new Th(n)}),this.register(function(n){return new Sh(n)}),this.register(function(n){return new xh(n)}),this.register(function(n){return new mh(n)}),this.register(function(n){return new gh(n)}),this.register(function(n){return new _h(n)}),this.register(function(n){return new yh(n)}),this.register(function(n){return new fh(n)}),this.register(function(n){return new bh(n)}),this.register(function(n){return new ph(n)}),this.register(function(n){return new wh(n)}),this.register(function(n){return new vh(n)}),this.register(function(n){return new ch(n)}),this.register(function(n){return new Eh(n)}),this.register(function(n){return new Ch(n)})}load(e,n,s,o){const i=this;let r;if(this.resourcePath!=="")r=this.resourcePath;else if(this.path!==""){const u=Wn.extractUrlBase(e);r=Wn.resolveURL(u,this.path)}else r=Wn.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){o?o(u):console.error(u),i.manager.itemError(e),i.manager.itemEnd(e)},l=new Fs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{i.parse(u,r,function(c){n(c),i.manager.itemEnd(e)},a)}catch(c){a(c)}},s,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,s,o){let i;const r={},a={},l=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Nl){try{r[ie.KHR_BINARY_GLTF]=new Ph(e)}catch(f){o&&o(f);return}i=JSON.parse(r[ie.KHR_BINARY_GLTF].content)}else i=JSON.parse(l.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new Uh(i,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const f=this.pluginCallbacks[c](u);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,r[f.name]=!0}if(i.extensionsUsed)for(let c=0;c<i.extensionsUsed.length;++c){const f=i.extensionsUsed[c],d=i.extensionsRequired||[];switch(f){case ie.KHR_MATERIALS_UNLIT:r[f]=new uh;break;case ie.KHR_DRACO_MESH_COMPRESSION:r[f]=new Mh(i,this.dracoLoader);break;case ie.KHR_TEXTURE_TRANSFORM:r[f]=new Ah;break;case ie.KHR_MESH_QUANTIZATION:r[f]=new Rh;break;default:d.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(r),u.setPlugins(a),u.parse(s,o)}parseAsync(e,n){const s=this;return new Promise(function(o,i){s.parse(e,n,o,i)})}}function lh(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const ie={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ch{constructor(e){this.parser=e,this.name=ie.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let s=0,o=n.length;s<o;s++){const i=n[s];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const n=this.parser,s="light:"+e;let o=n.cache.get(s);if(o)return o;const i=n.json,l=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let u;const c=new Et(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],Ct);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new os(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new aa(c),u.distance=f;break;case"spot":u=new $l(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),yt(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=n.createUniqueName(l.name||"light_"+e),o=Promise.resolve(u),n.cache.add(s,o),o}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,s=this.parser,i=s.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return s._getNodeRef(n.cache,a,l)})}}class uh{constructor(){this.name=ie.KHR_MATERIALS_UNLIT}getMaterialType(){return wt}extendParams(e,n,s){const o=[];e.color=new Et(1,1,1),e.opacity=1;const i=n.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const r=i.baseColorFactor;e.color.setRGB(r[0],r[1],r[2],Ct),e.opacity=r[3]}i.baseColorTexture!==void 0&&o.push(s.assignTexture(e,"map",i.baseColorTexture,jt))}return Promise.all(o)}}class fh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name].emissiveStrength;return i!==void 0&&(n.emissiveIntensity=i),Promise.resolve()}}class dh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];if(r.clearcoatFactor!==void 0&&(n.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(i.push(s.assignTexture(n,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new We(a,a)}return Promise.all(i)}}class hh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_DISPERSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class ph{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.iridescenceFactor!==void 0&&(n.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(n.iridescenceIOR=r.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(i)}}class mh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[];n.sheenColor=new Et(0,0,0),n.sheenRoughness=0,n.sheen=1;const r=o.extensions[this.name];if(r.sheenColorFactor!==void 0){const a=r.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],Ct)}return r.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&i.push(s.assignTexture(n,"sheenColorMap",r.sheenColorTexture,jt)),r.sheenRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(i)}}class gh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.transmissionFactor!==void 0&&(n.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&i.push(s.assignTexture(n,"transmissionMap",r.transmissionTexture)),Promise.all(i)}}class _h{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&i.push(s.assignTexture(n,"thicknessMap",r.thicknessTexture)),n.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return n.attenuationColor=new Et().setRGB(a[0],a[1],a[2],Ct),Promise.all(i)}}class yh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class bh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&i.push(s.assignTexture(n,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return n.specularColor=new Et().setRGB(a[0],a[1],a[2],Ct),r.specularColorTexture!==void 0&&i.push(s.assignTexture(n,"specularColorMap",r.specularColorTexture,jt)),Promise.all(i)}}class vh{constructor(e){this.parser=e,this.name=ie.EXT_MATERIALS_BUMP}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return n.bumpScale=r.bumpFactor!==void 0?r.bumpFactor:1,r.bumpTexture!==void 0&&i.push(s.assignTexture(n,"bumpMap",r.bumpTexture)),Promise.all(i)}}class wh{constructor(e){this.parser=e,this.name=ie.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:kt}extendMaterialParams(e,n){const s=this.parser,o=s.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.anisotropyStrength!==void 0&&(n.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(n.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&i.push(s.assignTexture(n,"anisotropyMap",r.anisotropyTexture)),Promise.all(i)}}class Th{constructor(e){this.parser=e,this.name=ie.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,s=n.json,o=s.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const i=o.extensions[this.name],r=n.options.ktx2Loader;if(!r){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,i.source,r)}}class Sh{constructor(e){this.parser=e,this.name=ie.EXT_TEXTURE_WEBP}loadTexture(e){const n=this.name,s=this.parser,o=s.json,i=o.textures[e];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],a=o.images[r.source];let l=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(l=u)}return s.loadTextureImage(e,r.source,l)}}class xh{constructor(e){this.parser=e,this.name=ie.EXT_TEXTURE_AVIF}loadTexture(e){const n=this.name,s=this.parser,o=s.json,i=o.textures[e];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],a=o.images[r.source];let l=s.textureLoader;if(a.uri){const u=s.options.manager.getHandler(a.uri);u!==null&&(l=u)}return s.loadTextureImage(e,r.source,l)}}class Eh{constructor(e){this.name=ie.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,s=n.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const o=s.extensions[this.name],i=this.parser.getDependency("buffer",o.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const l=o.byteOffset||0,u=o.byteLength||0,c=o.count,f=o.byteStride,d=new Uint8Array(a,l,u);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(c,f,d,o.mode,o.filter).then(function(m){return m.buffer}):r.ready.then(function(){const m=new ArrayBuffer(c*f);return r.decodeGltfBuffer(new Uint8Array(m),c,f,d,o.mode,o.filter),m})})}else return null}}class Ch{constructor(e){this.name=ie.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,s=n.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const o=n.meshes[s.mesh];for(const u of o.primitives)if(u.mode!==tt.TRIANGLES&&u.mode!==tt.TRIANGLE_STRIP&&u.mode!==tt.TRIANGLE_FAN&&u.mode!==void 0)return null;const r=s.extensions[this.name].attributes,a=[],l={};for(const u in r)a.push(this.parser.getDependency("accessor",r[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],d=u[0].count,m=[];for(const v of f){const T=new Hs,S=new me,k=new js,N=new me(1,1,1),C=new Vl(v.geometry,v.material,d);for(let F=0;F<d;F++)l.TRANSLATION&&S.fromBufferAttribute(l.TRANSLATION,F),l.ROTATION&&k.fromBufferAttribute(l.ROTATION,F),l.SCALE&&N.fromBufferAttribute(l.SCALE,F),C.setMatrixAt(F,T.compose(S,k,N));for(const F in l)if(F==="_COLOR_0"){const P=l[F];C.instanceColor=new Bl(P.array,P.itemSize,P.normalized)}else F!=="TRANSLATION"&&F!=="ROTATION"&&F!=="SCALE"&&v.geometry.setAttribute(F,l[F]);la.prototype.copy.call(C,v),this.parser.assignFinalMaterial(C),m.push(C)}return c.isGroup?(c.clear(),c.add(...m),c):m[0]}))}}const Nl="glTF",Bn=12,Yr={JSON:1313821514,BIN:5130562};class Ph{constructor(e){this.name=ie.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Bn),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Nl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-Bn,i=new DataView(e,Bn);let r=0;for(;r<o;){const a=i.getUint32(r,!0);r+=4;const l=i.getUint32(r,!0);if(r+=4,l===Yr.JSON){const u=new Uint8Array(e,Bn+r,a);this.content=s.decode(u)}else if(l===Yr.BIN){const u=Bn+r;this.body=e.slice(u,u+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mh{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ie.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const s=this.json,o=this.dracoLoader,i=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},l={},u={};for(const c in r){const f=hi[c]||c.toLowerCase();a[f]=r[c]}for(const c in e.attributes){const f=hi[c]||c.toLowerCase();if(r[c]!==void 0){const d=s.accessors[e.attributes[c]],m=Ln[d.componentType];u[f]=m.name,l[f]=d.normalized===!0}}return n.getDependency("bufferView",i).then(function(c){return new Promise(function(f,d){o.decodeDracoFile(c,function(m){for(const v in m.attributes){const T=m.attributes[v],S=l[v];S!==void 0&&(T.normalized=S)}f(m)},a,u,Ct,d)})})}}class Ah{constructor(){this.name=ie.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Rh{constructor(){this.name=ie.KHR_MESH_QUANTIZATION}}class Fl extends fc{constructor(e,n,s,o){super(e,n,s,o)}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,i=e*o*3+o;for(let r=0;r!==o;r++)n[r]=s[i+r];return n}interpolate_(e,n,s,o){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=o-n,f=(s-n)/c,d=f*f,m=d*f,v=e*u,T=v-u,S=-2*m+3*d,k=m-d,N=1-S,C=k-d+f;for(let F=0;F!==a;F++){const P=r[T+F+a],w=r[T+F+l]*c,K=r[v+F+a],z=r[v+F]*c;i[F]=N*P+C*w+S*K+k*z}return i}}const kh=new js;class Ih extends Fl{interpolate_(e,n,s,o){const i=super.interpolate_(e,n,s,o);return kh.fromArray(i).normalize().toArray(i),i}}const tt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ln={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Zr={9728:ua,9729:zo,9984:Xl,9985:ql,9986:Wl,9987:ca},Jr={33071:Zl,33648:Yl,10497:Wo},jo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hi={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Kt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lh={CUBICSPLINE:void 0,LINEAR:pa,STEP:lc},Uo={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Oh(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new qt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:uc})),t.DefaultMaterial}function sn(t,e,n){for(const s in n.extensions)t[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=n.extensions[s])}function yt(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Dh(t,e,n){let s=!1,o=!1,i=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(s=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(i=!0),s&&o&&i)break}if(!s&&!o&&!i)return Promise.resolve(t);const r=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(s){const d=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;r.push(d)}if(o){const d=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(d)}if(i){const d=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(d)}}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],d=u[2];return s&&(t.morphAttributes.position=c),o&&(t.morphAttributes.normal=f),i&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function Nh(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,s=e.weights.length;n<s;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let s=0,o=n.length;s<o;s++)t.morphTargetDictionary[n[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Fh(t){let e;const n=t.extensions&&t.extensions[ie.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+$o(n.attributes):e=t.indices+":"+$o(t.attributes)+":"+t.mode,t.targets!==void 0)for(let s=0,o=t.targets.length;s<o;s++)e+=":"+$o(t.targets[s]);return e}function $o(t){let e="";const n=Object.keys(t).sort();for(let s=0,o=n.length;s<o;s++)e+=n[s]+":"+t[n[s]]+";";return e}function pi(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Hh(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":t.search(/\.ktx2($|\?)/i)>0||t.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const jh=new Hs;class Uh{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new lh,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,o=-1,i=!1,r=-1;if(typeof navigator<"u"){const a=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);o=s&&l?parseInt(l[1],10):-1,i=a.indexOf("Firefox")>-1,r=i?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&o<17||i&&r<98?this.textureLoader=new Gl(this.options.manager):this.textureLoader=new Kl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Fs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const s=this,o=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(r){const a={scene:r[0][o.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:o.asset,parser:s,userData:{}};return sn(i,a,o),yt(a,o),Promise.all(s._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],s=this.json.meshes||[];for(let o=0,i=n.length;o<i;o++){const r=n[o].joints;for(let a=0,l=r.length;a<l;a++)e[r[a]].isBone=!0}for(let o=0,i=e.length;o<i;o++){const r=e[o];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(s[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,s){if(e.refs[n]<=1)return s;const o=s.clone(),i=(r,a)=>{const l=this.associations.get(r);l!=null&&this.associations.set(a,l);for(const[u,c]of r.children.entries())i(c,a.children[u])};return i(s,o),o.name+="_instance_"+e.uses[n]++,o}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let s=0;s<n.length;s++){const o=e(n[s]);if(o)return o}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const s=[];for(let o=0;o<n.length;o++){const i=e(n[o]);i&&s.push(i)}return s}getDependency(e,n){const s=e+":"+n;let o=this.cache.get(s);if(!o){switch(e){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(i){return i.loadNode&&i.loadNode(n)});break;case"mesh":o=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,n)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(s,o)}return o}getDependencies(e){let n=this.cache.get(e);if(!n){const s=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(i,r){return s.getDependency(e,r)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],s=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[ie.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(i,r){s.load(Wn.resolveURL(n.uri,o.path),i,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(s){const o=n.byteLength||0,i=n.byteOffset||0;return s.slice(i,i+o)})}loadAccessor(e){const n=this,s=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){const r=jo[o.type],a=Ln[o.componentType],l=o.normalized===!0,u=new a(o.count*r);return Promise.resolve(new qn(u,r,l))}const i=[];return o.bufferView!==void 0?i.push(this.getDependency("bufferView",o.bufferView)):i.push(null),o.sparse!==void 0&&(i.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(i).then(function(r){const a=r[0],l=jo[o.type],u=Ln[o.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,d=o.byteOffset||0,m=o.bufferView!==void 0?s.bufferViews[o.bufferView].byteStride:void 0,v=o.normalized===!0;let T,S;if(m&&m!==f){const k=Math.floor(d/m),N="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+k+":"+o.count;let C=n.cache.get(N);C||(T=new u(a,k*m,o.count*m/c),C=new zl(T,m/c),n.cache.add(N,C)),S=new cc(C,l,d%m/c,v)}else a===null?T=new u(o.count*l):T=new u(a,d,o.count*l),S=new qn(T,l,v);if(o.sparse!==void 0){const k=jo.SCALAR,N=Ln[o.sparse.indices.componentType],C=o.sparse.indices.byteOffset||0,F=o.sparse.values.byteOffset||0,P=new N(r[1],C,o.sparse.count*k),w=new u(r[2],F,o.sparse.count*l);a!==null&&(S=new qn(S.array.slice(),S.itemSize,S.normalized)),S.normalized=!1;for(let K=0,z=P.length;K<z;K++){const E=P[K];if(S.setX(E,w[K*l]),l>=2&&S.setY(E,w[K*l+1]),l>=3&&S.setZ(E,w[K*l+2]),l>=4&&S.setW(E,w[K*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}S.normalized=v}return S})}loadTexture(e){const n=this.json,s=this.options,i=n.textures[e].source,r=n.images[i];let a=this.textureLoader;if(r.uri){const l=s.manager.getHandler(r.uri);l!==null&&(a=l)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,n,s){const o=this,i=this.json,r=i.textures[e],a=i.images[n],l=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(n,s).then(function(c){c.flipY=!1,c.name=r.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const d=(i.samplers||{})[r.sampler]||{};return c.magFilter=Zr[d.magFilter]||zo,c.minFilter=Zr[d.minFilter]||ca,c.wrapS=Jr[d.wrapS]||Wo,c.wrapT=Jr[d.wrapT]||Wo,c.generateMipmaps=!c.isCompressedTexture&&c.minFilter!==ua&&c.minFilter!==zo,o.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,n){const s=this,o=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const r=o.images[e],a=self.URL||self.webkitURL;let l=r.uri||"",u=!1;if(r.bufferView!==void 0)l=s.getDependency("bufferView",r.bufferView).then(function(f){u=!0;const d=new Blob([f],{type:r.mimeType});return l=a.createObjectURL(d),l});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(d,m){let v=d;n.isImageBitmapLoader===!0&&(v=function(T){const S=new Bi(T);S.needsUpdate=!0,d(S)}),n.load(Wn.resolveURL(f,i.path),v,void 0,m)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),yt(f,r),f.userData.mimeType=r.mimeType||Hh(r.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,n,s,o){const i=this;return this.getDependency("texture",s.index).then(function(r){if(!r)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(r=r.clone(),r.channel=s.texCoord),i.extensions[ie.KHR_TEXTURE_TRANSFORM]){const a=s.extensions!==void 0?s.extensions[ie.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=i.associations.get(r);r=i.extensions[ie.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),i.associations.set(r,l)}}return o!==void 0&&(r.colorSpace=o),e[n]=r,r})}assignFinalMaterial(e){const n=e.geometry;let s=e.material;const o=n.attributes.tangent===void 0,i=n.attributes.color!==void 0,r=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+s.uuid;let l=this.cache.get(a);l||(l=new Jl,To.prototype.copy.call(l,s),l.color.copy(s.color),l.map=s.map,l.sizeAttenuation=!1,this.cache.add(a,l)),s=l}else if(e.isLine){const a="LineBasicMaterial:"+s.uuid;let l=this.cache.get(a);l||(l=new fa,To.prototype.copy.call(l,s),l.color.copy(s.color),l.map=s.map,this.cache.add(a,l)),s=l}if(o||i||r){let a="ClonedMaterial:"+s.uuid+":";o&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=s.clone(),i&&(l.vertexColors=!0),r&&(l.flatShading=!0),o&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(s))),s=l}e.material=s}getMaterialType(){return qt}loadMaterial(e){const n=this,s=this.json,o=this.extensions,i=s.materials[e];let r;const a={},l=i.extensions||{},u=[];if(l[ie.KHR_MATERIALS_UNLIT]){const f=o[ie.KHR_MATERIALS_UNLIT];r=f.getMaterialType(),u.push(f.extendParams(a,i,n))}else{const f=i.pbrMetallicRoughness||{};if(a.color=new Et(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],Ct),a.opacity=d[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",f.baseColorTexture,jt)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),r=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=Gn);const c=i.alphaMode||Uo.OPAQUE;if(c===Uo.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Uo.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&r!==wt&&(u.push(n.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new We(1,1),i.normalTexture.scale!==void 0)){const f=i.normalTexture.scale;a.normalScale.set(f,f)}if(i.occlusionTexture!==void 0&&r!==wt&&(u.push(n.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&r!==wt){const f=i.emissiveFactor;a.emissive=new Et().setRGB(f[0],f[1],f[2],Ct)}return i.emissiveTexture!==void 0&&r!==wt&&u.push(n.assignTexture(a,"emissiveMap",i.emissiveTexture,jt)),Promise.all(u).then(function(){const f=new r(a);return i.name&&(f.name=i.name),yt(f,i),n.associations.set(f,{materials:e}),i.extensions&&sn(o,f,i),f})}createUniqueName(e){const n=Ql.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,s=this.extensions,o=this.primitiveCache;function i(a){return s[ie.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return Qr(l,a,n)})}const r=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=Fh(u),f=o[c];if(f)r.push(f.promise);else{let d;u.extensions&&u.extensions[ie.KHR_DRACO_MESH_COMPRESSION]?d=i(u):d=Qr(new mi,u,n),o[c]={primitive:u,promise:d},r.push(d)}}return Promise.all(r)}loadMesh(e){const n=this,s=this.json,o=this.extensions,i=s.meshes[e],r=i.primitives,a=[];for(let l=0,u=r.length;l<u;l++){const c=r[l].material===void 0?Oh(this.cache):this.getDependency("material",r[l].material);a.push(c)}return a.push(n.loadGeometries(r)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let m=0,v=c.length;m<v;m++){const T=c[m],S=r[m];let k;const N=u[m];if(S.mode===tt.TRIANGLES||S.mode===tt.TRIANGLE_STRIP||S.mode===tt.TRIANGLE_FAN||S.mode===void 0)k=i.isSkinnedMesh===!0?new ec(T,N):new et(T,N),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),S.mode===tt.TRIANGLE_STRIP?k.geometry=Xr(k.geometry,ia):S.mode===tt.TRIANGLE_FAN&&(k.geometry=Xr(k.geometry,Ko));else if(S.mode===tt.LINES)k=new tc(T,N);else if(S.mode===tt.LINE_STRIP)k=new da(T,N);else if(S.mode===tt.LINE_LOOP)k=new nc(T,N);else if(S.mode===tt.POINTS)k=new sc(T,N);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(k.geometry.morphAttributes).length>0&&Nh(k,i),k.name=n.createUniqueName(i.name||"mesh_"+e),yt(k,i),S.extensions&&sn(o,k,S),n.assignFinalMaterial(k),f.push(k)}for(let m=0,v=f.length;m<v;m++)n.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return i.extensions&&sn(o,f[0],i),f[0];const d=new So;i.extensions&&sn(o,d,i),n.associations.set(d,{meshes:e});for(let m=0,v=f.length;m<v;m++)d.add(f[m]);return d})}loadCamera(e){let n;const s=this.json.cameras[e],o=s[s.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?n=new ro(ha.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):s.type==="orthographic"&&(n=new oc(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),s.name&&(n.name=this.createUniqueName(s.name)),yt(n,s),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],s=[];for(let o=0,i=n.joints.length;o<i;o++)s.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",n.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(o){const i=o.pop(),r=o,a=[],l=[];for(let u=0,c=r.length;u<c;u++){const f=r[u];if(f){a.push(f);const d=new Hs;i!==null&&d.fromArray(i.array,u*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new ic(a,l)})}loadAnimation(e){const n=this.json,s=this,o=n.animations[e],i=o.name?o.name:"animation_"+e,r=[],a=[],l=[],u=[],c=[];for(let f=0,d=o.channels.length;f<d;f++){const m=o.channels[f],v=o.samplers[m.sampler],T=m.target,S=T.node,k=o.parameters!==void 0?o.parameters[v.input]:v.input,N=o.parameters!==void 0?o.parameters[v.output]:v.output;T.node!==void 0&&(r.push(this.getDependency("node",S)),a.push(this.getDependency("accessor",k)),l.push(this.getDependency("accessor",N)),u.push(v),c.push(T))}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(f){const d=f[0],m=f[1],v=f[2],T=f[3],S=f[4],k=[];for(let C=0,F=d.length;C<F;C++){const P=d[C],w=m[C],K=v[C],z=T[C],E=S[C];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();const W=s._createAnimationTracks(P,w,K,z,E);if(W)for(let b=0;b<W.length;b++)k.push(W[b])}const N=new rc(i,void 0,k);return yt(N,o),N})}createNodeMesh(e){const n=this.json,s=this,o=n.nodes[e];return o.mesh===void 0?null:s.getDependency("mesh",o.mesh).then(function(i){const r=s._getNodeRef(s.meshCache,o.mesh,i);return o.weights!==void 0&&r.traverse(function(a){if(a.isMesh)for(let l=0,u=o.weights.length;l<u;l++)a.morphTargetInfluences[l]=o.weights[l]}),r})}loadNode(e){const n=this.json,s=this,o=n.nodes[e],i=s._loadNodeShallow(e),r=[],a=o.children||[];for(let u=0,c=a.length;u<c;u++)r.push(s.getDependency("node",a[u]));const l=o.skin===void 0?Promise.resolve(null):s.getDependency("skin",o.skin);return Promise.all([i,Promise.all(r),l]).then(function(u){const c=u[0],f=u[1],d=u[2];d!==null&&c.traverse(function(m){m.isSkinnedMesh&&m.bind(d,jh)});for(let m=0,v=f.length;m<v;m++)c.add(f[m]);return c})}_loadNodeShallow(e){const n=this.json,s=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=n.nodes[e],r=i.name?o.createUniqueName(i.name):"",a=[],l=o._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),i.camera!==void 0&&a.push(o.getDependency("camera",i.camera).then(function(u){return o._getNodeRef(o.cameraCache,i.camera,u)})),o._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(i.isBone===!0?c=new ac:u.length>1?c=new So:u.length===1?c=u[0]:c=new la,c!==u[0])for(let f=0,d=u.length;f<d;f++)c.add(u[f]);if(i.name&&(c.userData.name=i.name,c.name=r),yt(c,i),i.extensions&&sn(s,c,i),i.matrix!==void 0){const f=new Hs;f.fromArray(i.matrix),c.applyMatrix4(f)}else i.translation!==void 0&&c.position.fromArray(i.translation),i.rotation!==void 0&&c.quaternion.fromArray(i.rotation),i.scale!==void 0&&c.scale.fromArray(i.scale);if(!o.associations.has(c))o.associations.set(c,{});else if(i.mesh!==void 0&&o.meshCache.refs[i.mesh]>1){const f=o.associations.get(c);o.associations.set(c,{...f})}return o.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const n=this.extensions,s=this.json.scenes[e],o=this,i=new So;s.name&&(i.name=o.createUniqueName(s.name)),yt(i,s),s.extensions&&sn(n,i,s);const r=s.nodes||[],a=[];for(let l=0,u=r.length;l<u;l++)a.push(o.getDependency("node",r[l]));return Promise.all(a).then(function(l){for(let c=0,f=l.length;c<f;c++)i.add(l[c]);const u=c=>{const f=new Map;for(const[d,m]of o.associations)(d instanceof To||d instanceof Bi)&&f.set(d,m);return c.traverse(d=>{const m=o.associations.get(d);m!=null&&f.set(d,m)}),f};return o.associations=u(i),i})}_createAnimationTracks(e,n,s,o,i){const r=[],a=e.name?e.name:e.uuid,l=[];Kt[i.path]===Kt.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let u;switch(Kt[i.path]){case Kt.weights:u=Ki;break;case Kt.rotation:u=zi;break;case Kt.translation:case Kt.scale:u=Gi;break;default:switch(s.itemSize){case 1:u=Ki;break;case 2:case 3:default:u=Gi;break}break}const c=o.interpolation!==void 0?Lh[o.interpolation]:pa,f=this._getArrayFromAccessor(s);for(let d=0,m=l.length;d<m;d++){const v=new u(l[d]+"."+Kt[i.path],n.array,f,c);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),r.push(v)}return r}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const s=pi(n.constructor),o=new Float32Array(n.length);for(let i=0,r=n.length;i<r;i++)o[i]=n[i]*s;n=o}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(s){const o=this instanceof zi?Ih:Fl;return new o(this.times,this.values,this.getValueSize()/3,s)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function $h(t,e,n){const s=e.attributes,o=new ao;if(s.POSITION!==void 0){const a=n.json.accessors[s.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(o.set(new me(l[0],l[1],l[2]),new me(u[0],u[1],u[2])),a.normalized){const c=pi(Ln[a.componentType]);o.min.multiplyScalar(c),o.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new me,l=new me;for(let u=0,c=i.length;u<c;u++){const f=i[u];if(f.POSITION!==void 0){const d=n.json.accessors[f.POSITION],m=d.min,v=d.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),d.normalized){const T=pi(Ln[d.componentType]);l.multiplyScalar(T)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(a)}t.boundingBox=o;const r=new dc;o.getCenter(r.center),r.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=r}function Qr(t,e,n){const s=e.attributes,o=[];function i(r,a){return n.getDependency("accessor",r).then(function(l){t.setAttribute(a,l)})}for(const r in s){const a=hi[r]||r.toLowerCase();a in t.attributes||o.push(i(s[r],a))}if(e.indices!==void 0&&!t.index){const r=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});o.push(r)}return qo.workingColorSpace!==Ct&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${qo.workingColorSpace}" not supported.`),yt(t,e),$h(t,e,n),Promise.all(o).then(function(){return e.targets!==void 0?Dh(t,e.targets,n):t})}const Vo=new WeakMap;class ss extends ra{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,s,o){const i=new Fs(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,r=>{this.parse(r,n,o)},s,o)}parse(e,n,s=()=>{}){this.decodeDracoFile(e,n,null,null,jt,s).catch(s)}decodeDracoFile(e,n,s,o,i=Ct,r=()=>{}){const a={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:i};return this.decodeGeometry(e,a).then(n).catch(r)}decodeGeometry(e,n){const s=JSON.stringify(n);if(Vo.has(e)){const l=Vo.get(e);if(l.key===s)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const i=this.workerNextTaskID++,r=e.byteLength,a=this._getWorker(i,r).then(l=>(o=l,new Promise((u,c)=>{o._callbacks[i]={resolve:u,reject:c},o.postMessage({type:"decode",id:i,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{o&&i&&this._releaseTask(o,i)}),Vo.set(e,{key:s,promise:a}),a}_createGeometry(e){const n=new mi;e.index&&n.setIndex(new qn(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const o=e.attributes[s],i=o.name,r=o.array,a=o.itemSize,l=new qn(r,a);i==="color"&&(this._assignVertexColorSpace(l,o.vertexColorSpace),l.normalized=!(r instanceof Float32Array)),n.setAttribute(i,l)}return n}_assignVertexColorSpace(e,n){if(n!==jt)return;const s=new Et;for(let o=0,i=e.count;o<i;o++)s.fromBufferAttribute(e,o),qo.colorSpaceToWorking(s,jt),e.setXYZ(o,s.r,s.g,s.b)}_loadLibrary(e,n){const s=new Fs(this.manager);return s.setPath(this.decoderPath),s.setResponseType(n),s.setWithCredentials(this.withCredentials),new Promise((o,i)=>{s.load(e,o,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(s=>{const o=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const i=Vh.toString(),r=["/* draco decoder */",o,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(i){const r=i.data;switch(r.type){case"decode":o._callbacks[r.id].resolve(r);break;case"error":o._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,i){return o._taskLoad>i._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=n,s._taskLoad+=n,s})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Vh(){let t,e;onmessage=function(r){const a=r.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(c){t.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,d=new f.Decoder;try{const m=n(f,d,new Int8Array(l),u),v=m.attributes.map(T=>T.array.buffer);m.index&&v.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},v)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{f.destroy(d)}});break}};function n(r,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let d,m;const v=a.GetEncodedGeometryType(l);if(v===r.TRIANGULAR_MESH)d=new r.Mesh,m=a.DecodeArrayToMesh(l,l.byteLength,d);else if(v===r.POINT_CLOUD)d=new r.PointCloud,m=a.DecodeArrayToPointCloud(l,l.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const T={index:null,attributes:[]};for(const S in c){const k=self[f[S]];let N,C;if(u.useUniqueIDs)C=c[S],N=a.GetAttributeByUniqueId(d,C);else{if(C=a.GetAttributeId(d,r[c[S]]),C===-1)continue;N=a.GetAttribute(d,C)}const F=o(r,a,d,S,k,N);S==="color"&&(F.vertexColorSpace=u.vertexColorSpace),T.attributes.push(F)}return v===r.TRIANGULAR_MESH&&(T.index=s(r,a,d)),r.destroy(d),T}function s(r,a,l){const c=l.num_faces()*3,f=c*4,d=r._malloc(f);a.GetTrianglesUInt32Array(l,f,d);const m=new Uint32Array(r.HEAPF32.buffer,d,c).slice();return r._free(d),{array:m,itemSize:1}}function o(r,a,l,u,c,f){const d=f.num_components(),v=l.num_points()*d,T=v*c.BYTES_PER_ELEMENT,S=i(r,c),k=r._malloc(T);a.GetAttributeDataArrayForAllPoints(l,f,S,T,k);const N=new c(r.HEAPF32.buffer,k,v).slice();return r._free(k),{name:u,array:N,itemSize:d}}function i(r,a){switch(a){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}const Bh={__name:"PuppetModelView",props:{puppet:{type:Object,default:null}},setup(t,{expose:e}){e();const n=t,s=X(null),o=X(!1);let i=null,r=null,a=null,l=0,u=null,c=null,f=new hc,d=null,m=null,v=0,T=!1;window.__GLTF_MEMORY_CACHE__||(window.__GLTF_MEMORY_CACHE__=new Map,console.log("[PuppetModelView] Initialized global GLTF memory cache"));const S=window.__GLTF_MEMORY_CACHE__;function k(){if(T)return;const w=s.value;if(!w){console.warn("[PuppetModelView] Container not ready for Three.js initialization");return}console.log("[PuppetModelView] Initializing Three.js..."),r=new _i,a=new ro(45,1,.1,1e3),a.position.set(0,1,3),i=new yi({antialias:!0,alpha:!0}),i.setPixelRatio(window.devicePixelRatio||1),i.outputColorSpace=jt,m=new ss,m.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),m.setCrossOrigin("anonymous"),console.log("[PuppetModelView] Draco loader initialized:",!!m),w.innerHTML="",w.appendChild(i.domElement);const K=new bi(16777215,1.2),z=new os(16777215,1.5);z.position.set(3,5,2);const E=new os(16777215,.8);E.position.set(-2,3,4);const W=new aa(16777215,1,10);W.position.set(0,2,3),r.add(K,z,E,W);const b=()=>{if(!w||!i)return;let p=w.clientWidth,M=w.clientHeight;if(!p||!M){const A=w.getBoundingClientRect();if(p=A.width||200,M=A.height||200,!A.width||!A.height){requestAnimationFrame(b);return}}i.setSize(p,M,!1),a.aspect=p/Math.max(1,M),a.updateProjectionMatrix()};b(),d=new ResizeObserver(b),d.observe(w),requestAnimationFrame(()=>{b(),requestAnimationFrame(()=>{b(),requestAnimationFrame(b)})});const g=()=>{if(!i||!r||!a)return;l=requestAnimationFrame(g);const p=f.getDelta();c&&c.update(p),u&&(u.rotation.y+=p*.6),i.render(r,a)};g(),T=!0,console.log("[PuppetModelView] Three.js initialized successfully, container size:",w.clientWidth,"x",w.clientHeight)}function N(){c&&(c.stopAllAction(),c=null),u&&(r.remove(u),u.traverse(w=>{w.isMesh&&(w.geometry&&w.geometry.dispose(),Array.isArray(w.material)?w.material.forEach(K=>{K.map&&K.map.dispose(),K&&K.dispose&&K.dispose()}):w.material&&(w.material.map&&w.material.map.dispose(),w.material.dispose&&w.material.dispose()))}),u=null)}function C(w){const K=new ao().setFromObject(w),z=new me,E=new me;K.getSize(z),K.getCenter(E),w.position.sub(E);const W=-.3,b=.3,g=0;w.position.add(new me(W,b,g)),w.scale.multiplyScalar(.55);const M=i==null?void 0:i.domElement,A=M?M.clientWidth||M.width:200,D=M?M.clientHeight||M.height:200,$=Math.max(1e-6,A/Math.max(1,D)),V=a.fov*(Math.PI/180),se=2*Math.atan(Math.tan(V/2)*$),oe=1.2,ve=z.y/2/Math.tan(V/2),De=z.x/2/Math.tan(se/2),Ae=oe*Math.max(ve,De,.1);a.position.set(0,0,Ae),a.lookAt(0,0,0)}async function F(w){var W,b;if(!w)return;console.log("[PuppetModelView] Loading puppet:",w.name),o.value=!0,k(),N();const K=++v,z=new ns;z.setCrossOrigin("anonymous"),m||(console.log("[PuppetModelView] Creating Draco loader..."),m=new ss,m.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),m.setCrossOrigin("anonymous")),z.setDRACOLoader(m),console.log("[PuppetModelView] Draco loader set:",!!m);let E=w.modelUrl||"";if(console.log("[PuppetModelView] Original modelUrl:",E),console.log("[PuppetModelView] Puppet image:",w.image),!E&&w.image&&/.webp($|\?)/i.test(w.image)&&(E=w.image.replace(/\.webp(\?.*)?$/i,".glb"),console.log("[PuppetModelView] Generated modelUrl from image:",E)),E&&!/^https?:\/\//i.test(E)&&!E.startsWith("/assets/")){const g=E;E=_e(E),console.log("[PuppetModelView] Converted URL:",g,"->",E)}if(console.log("[PuppetModelView] Model URL:",E),!E){console.log("[PuppetModelView] No model URL found");return}try{console.log("[PuppetModelView] Starting to load:",E),console.log("[PuppetModelView] Memory cache size:",S.size,"entries"),console.log("[PuppetModelView] Memory cache has this URL?",S.has(E));let g;if(S.has(E)){console.log("[PuppetModelView] Loading from memory cache (instant):",E);const p=S.get(E);g={scene:p.scene.clone(!0),scenes:p.scenes,animations:p.animations,cameras:p.cameras,asset:p.asset,parser:p.parser,userData:p.userData},console.log("[PuppetModelView] GLTF cloned from memory cache:",g)}else try{console.log("[PuppetModelView] Checking Cache Storage for:",E);const p=await di(E);if(p){console.log("[PuppetModelView] Loading from Cache Storage:",E);const M=await p.arrayBuffer();g=await new Promise((D,$)=>{z.parse(M,"",D,$)}),console.log("[PuppetModelView] GLTF loaded from Cache Storage:",g);const A={scene:g.scene.clone(!0),scenes:g.scenes,animations:g.animations,cameras:g.cameras,asset:g.asset,parser:g.parser,userData:g.userData};S.set(E,A),console.log("[PuppetModelView] Original GLTF saved to memory cache")}else throw new Error("No cached response available")}catch{console.log("[PuppetModelView] Cache miss, loading from network:",E),g=await z.loadAsync(E),console.log("[PuppetModelView] GLTF loaded from network:",g);const M={scene:g.scene.clone(!0),scenes:g.scenes,animations:g.animations,cameras:g.cameras,asset:g.asset,parser:g.parser,userData:g.userData};S.set(E,M),console.log("[PuppetModelView] Original GLTF saved to memory cache")}if(K!==v){console.log("[PuppetModelView] Ignoring outdated load result for:",w.name),g&&g.scene&&g.scene.traverse(p=>{p.isMesh&&(p.geometry&&p.geometry.dispose(),Array.isArray(p.material)?p.material.forEach(M=>{M.map&&M.map.dispose(),M.dispose&&M.dispose()}):p.material&&(p.material.map&&p.material.map.dispose(),p.material.dispose&&p.material.dispose()))});return}if(console.log("[PuppetModelView] Applying model for:",w.name),!r){console.log("[PuppetModelView] Scene not ready, initializing..."),k();let p=0;for(;!r&&p<40;)await new Promise(M=>setTimeout(M,50)),p++;if(!r){console.error("[PuppetModelView] Scene initialization timeout");return}}if(u=g.scene||((W=g.scenes)==null?void 0:W[0]),!u){console.error("[PuppetModelView] No scene found in GLTF");return}r.add(u),g.animations&&g.animations.length&&(c=new Wi(u),c.clipAction(g.animations[0]).play()),C(u),console.log("[PuppetModelView] Model loaded successfully:",w.name,"Scene children:",r.children.length),o.value=!1}catch(g){if(console.error("[PuppetModelView] Load failed:",g),console.error("[PuppetModelView] Failed URL:",E),console.error("[PuppetModelView] Puppet data:",w),g.message.includes("DRACOLoader")){console.log("[PuppetModelView] Retrying without Draco decoder...");try{const p=new ns;p.setCrossOrigin("anonymous");const M=await p.loadAsync(E);if(K===v&&(u=M.scene||((b=M.scenes)==null?void 0:b[0]),u)){r.add(u),M.animations&&M.animations.length&&(c=new Wi(u),c.clipAction(M.animations[0]).play()),C(u),console.log("[PuppetModelView] Model loaded successfully without Draco:",w.name);return}}catch(p){console.error("[PuppetModelView] Fallback load also failed:",p)}}if(K===v){const p=new ln(1,1,1),M=new qt({color:8947967});u=new et(p,M),r.add(u),C(u)}o.value=!1}}gn(()=>n.puppet,async w=>{await Ut(),F(w)},{immediate:!1}),Oe(()=>{console.log("[PuppetModelView] Component mounted"),Ut(()=>{s.value&&(k(),n.puppet&&setTimeout(()=>{F(n.puppet)},0))})}),At(()=>{if(console.log("[PuppetModelView] Cleaning up..."),cancelAnimationFrame(l),N(),d&&s.value)try{d.unobserve(s.value)}catch{}const w=r,K=i;i=null,r=null,a=null,T=!1,v=0;const z=()=>{if(console.log("[PuppetModelView] Starting deferred cleanup..."),w&&w.traverse(E=>{if(E.isMesh)try{if(E.geometry&&E.geometry.dispose(),Array.isArray(E.material))E.material.forEach(W=>{try{W.map&&W.map.dispose(),W.dispose&&W.dispose()}catch{}});else if(E.material)try{E.material.map&&E.material.map.dispose(),E.material.dispose&&E.material.dispose()}catch{}}catch{}}),K)try{K.dispose(),K.forceContextLoss&&K.forceContextLoss()}catch{}console.log("[PuppetModelView] Deferred cleanup completed")};typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback(z,{timeout:1e3}):setTimeout(z,100),console.log("[PuppetModelView] Quick cleanup completed, heavy cleanup deferred")});const P={props:n,mountEl:s,isLoading:o,get renderer(){return i},set renderer(w){i=w},get scene(){return r},set scene(w){r=w},get camera(){return a},set camera(w){a=w},get animationId(){return l},set animationId(w){l=w},get currentModel(){return u},set currentModel(w){u=w},get currentMixer(){return c},set currentMixer(w){c=w},get clock(){return f},set clock(w){f=w},get resizeObserver(){return d},set resizeObserver(w){d=w},get dracoLoader(){return m},set dracoLoader(w){m=w},get loadSequence(){return v},set loadSequence(w){v=w},get isInitialized(){return T},set isInitialized(w){T=w},gltfMemoryCache:S,initThreeIfNeeded:k,clearCurrentModel:N,fitCameraToObject:C,loadPuppetModel:F,ref:X,watch:gn,onMounted:Oe,onBeforeUnmount:At,nextTick:Ut,get THREE(){return gi},get GLTFLoader(){return ns},get DRACOLoader(){return ss},get getAssetUrl(){return _e},get loadResourceWithCache(){return di}};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}},Gh={class:"model-wrapper"},Kh={ref:"mountEl",class:"model-canvas"},zh={key:0,class:"model-loading"};function Wh(t,e,n,s,o,i){return q(),Y("div",Gh,[_("div",Kh,null,512),s.isLoading?(q(),Y("div",zh,[...e[0]||(e[0]=[_("div",{class:"loading-spinner"},null,-1)])])):Te("",!0)])}const qh=Bt(Bh,[["render",Wh],["__scopeId","data-v-c3e07470"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/PuppetModelView.vue"]]),Xh={__name:"Warehouse",setup(t,{expose:e}){const n=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],s={SpiritalSpark:{name:"灵性火花",icon:_e("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:_e("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:_e("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:_e("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:_e("resource/heart_crystal_dust.webp")}};function o(g){return n.map(p=>({icon:s[p].icon,name:s[p].name,value:Number((g==null?void 0:g[p])??0)}))}const i={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};function r(g){const p=Number(g??1);return p===1?5:p===2?10:p===3?20:p===4?30:0}function a(g){return(g||[]).map((p,M)=>{var ft,Je,ze,st,wo,h;const A=(p==null?void 0:p.copper_info)||{},D=(A==null?void 0:A.skill)||{},$=(p==null?void 0:p.equipment_slot)||{},V=($==null?void 0:$.slot1)||null,se=($==null?void 0:$.slot2)||null,oe=(p==null?void 0:p.attribute)||{},ve=((ft=V==null?void 0:V.equipment_base)==null?void 0:ft.attribute)||{},De=((Je=se==null?void 0:se.equipment_base)==null?void 0:Je.attribute)||{},Ae=Number(ve.attack||0)+Number(De.attack||0),Ye=Number(ve.defense||0)+Number(De.defense||0),Nn=Number(ve.dodge||0)+Number(De.dodge||0),Fn=p==null?void 0:p.copper_type,Ze=(p==null?void 0:p.level)??1;return{id:Number((p==null?void 0:p.id)??M+1),name:(A==null?void 0:A.name)??"未知铜偶",level:Ze,suffix:(p==null?void 0:p.suffix)??0,image:_e((A==null?void 0:A.icon_url)||""),modelUrl:_e((A==null?void 0:A.model_url)||""),quantity:1,description:(A==null?void 0:A.description)||"",stats:{level:`${Ze}/5`,health:Number(oe.health||0),live_left:Number((p==null?void 0:p.live_left)??0),attack:{base:Number(oe.attack||0),bonus:Ae},defense:{base:Number(oe.defense||0),bonus:Ye},dodge:{base:Number(oe.dodge||0),bonus:Nn},class:i[Fn]||"未知"},equipment:[V?{name:((ze=V.equipment_base)==null?void 0:ze.name)||"装备",icon:_e(((st=V.equipment_base)==null?void 0:st.resource_url)||""),equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},$!=null&&$.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:se?{name:((wo=se.equipment_base)==null?void 0:wo.name)||"装备",icon:_e(((h=se.equipment_base)==null?void 0:h.resource_url)||""),equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(D==null?void 0:D.name)||"——",cooldown:(D==null?void 0:D.cool_down)!=null?`${D.cool_down}回合`:"——",effect:(D==null?void 0:D.description)||"——",icon:_e((D==null?void 0:D.resource_url)||"")},upgradeCost:r(Ze)}})}function l(g,p,M=[]){if(!g||typeof g!="object")return null;if(Object.prototype.hasOwnProperty.call(g,p))return[...M,p];if(Array.isArray(g)){for(let A=0;A<g.length;A++){const D=l(g[A],p,[...M,A]);if(D)return D}return null}for(const A of Object.keys(g)){const D=l(g[A],p,[...M,A]);if(D)return D}return null}function u(g,p){return p.reduce((M,A)=>M!=null?M[A]:void 0,g)}const c=X([]);Oe(async()=>{try{const g=await Cn();c.value=o(g)}catch{c.value=o({})}});function f(g){let p=g;if(typeof g=="string")try{p=JSON.parse(g)}catch{}p&&p.type_msg&&(p.type_msg==="upgrade_cost_error"?alert(p.content||"升级等级错误"):console.log("[GlobalInfo]",p))}Oe(()=>{try{io(f)}catch{}});const d=X([]);Oe(async()=>{try{const g=await Cs();let p=g&&Array.isArray(g.coppers)?g.coppers:[];if(!Array.isArray(p)){const M=l(g,"coppers");if(console.log("[Warehouse] copper key path:",M),M){const A=u(g,M);console.log("[Warehouse] copper found by path:",A),Array.isArray(A)&&(p=A)}!Array.isArray(p)&&g&&g.entries&&console.log("[Warehouse] copper entries sample:",g.entries)}console.log("[Warehouse] copper array length:",Array.isArray(p)?p.length:"not array"),d.value=a(p),Array.isArray(d.value)&&d.value.length>0&&(m.value=d.value[0]),!m.value&&Array.isArray(d.value)&&d.value.length>0&&(m.value=d.value[0])}catch{d.value=[]}});const m=X(null),v=X([]),T=X(null),S=X(null),k=X(null);function N(g,p){g&&(v.value[p]=g)}async function C(g,p){m.value=g,await Ut();const M=v.value[p];if(M&&typeof M.scrollIntoView=="function"&&M.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),T.value=p,S.value)try{S.value.scrollTo({top:0,behavior:"smooth"})}catch{S.value.scrollTop=0}setTimeout(()=>{T.value===p&&(T.value=null)},320)}const F=X(!1);function P(){F.value=!0}function w(){F.value=!1}function K(){const g=Math.max(0,c.value.length-1),p=c.value;if(!p[g]||p[g].value<10){alert("资源不足");return}p[g].value-=10;const M=d.value,A=Math.floor(Math.random()*M.length),D=M[A];D.quantity=(D.quantity||0)+1,m.value=D,drawResult.value={name:D.name,image:D.image}}function z(){return F.value?(F.value=!1,!0):!1}e({handleBack:z});async function E(g){try{const p=await Cn();c.value=o(p);const M=await Cs(),A=Array.isArray(M==null?void 0:M.coppers)?M.coppers:[];d.value=a(A)}catch{}}async function W(){if(!m.value)return;if(Number(m.value.level||0)>=5){alert("已达满级");return}const g=m.value.id,p=await qr(g);if(!p||p.type!=="success"){alert(p&&p.content?p.content:"升级失败");return}try{const M=await Cn();c.value=o(M);const A=await Cs(),D=Array.isArray(A==null?void 0:A.coppers)?A.coppers:[];d.value=a(D);const $=d.value.find(V=>V.id===g);$&&(m.value=$)}catch{}}const b={ORDERED_RESOURCE_KEYS:n,RESOURCE_META:s,mapResources:o,TYPE_MAP:i,getUpgradeCostByLevel:r,mapPuppets:a,findKeyPath:l,getByPath:u,resources:c,handleGlobalInfo:f,puppets:d,selectedPuppet:m,puppetItemRefs:v,highlightedIndex:T,detailWrap:S,hoveredIndex:k,setPuppetItemRef:N,selectPuppet:C,showDrawScreen:F,drawMore:P,closeDrawScreen:w,drawTen:K,handleBack:z,onGachaResult:E,upgradeSelected:W,ref:X,onMounted:Oe,nextTick:Ut,get getAssetUrl(){return _e},DrawScreen:ah,PuppetModelView:qh,get get_resource(){return Cn},get get_copper_list(){return Cs},get upgrade_copper(){return qr},get info_subscribe(){return io}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},Yh={class:"warehouse"},Zh={class:"warehouse__resources"},Jh={class:"resource-icon"},Qh=["src","alt"],ep={class:"resource-value"},tp={key:0,class:"warehouse__main"},np={class:"warehouse__sidebar"},sp={class:"puppet-list"},op=["onClick","onMouseenter"],ip={class:"puppet-card__quantity"},rp={class:"puppet-card__image"},ap=["src","alt"],lp={class:"puppet-card__info"},cp={class:"puppet-card__name"},up={class:"puppet-card__level"},fp={class:"warehouse__detail",ref:"detailWrap"},dp={class:"puppet-detail__header"},hp={class:"puppet-detail__name"},pp={class:"puppet-detail__content"},mp={class:"puppet-detail__row"},gp={class:"puppet-detail__model"},_p={class:"puppet-detail__description"},yp={class:"puppet-detail__row"},bp={class:"puppet-detail__stats"},vp={class:"stats-section"},wp={class:"stat-item"},Tp={class:"stat-value"},Sp={class:"stat-item"},xp={class:"stat-value"},Ep={class:"stat-item"},Cp={class:"stat-value"},Pp={class:"stat-item"},Mp={class:"stat-value"},Ap={class:"stat-item"},Rp={class:"stat-value"},kp={class:"stat-item"},Ip={class:"stat-value"},Lp={class:"stat-item"},Op={class:"stat-value"},Dp={class:"equipment-section"},Np={class:"equipment-slots"},Fp=["src","alt"],Hp={key:1,class:"equipment-icon"},jp={key:0,class:"skill-section"},Up={class:"skill-info"},$p={class:"skill-text"},Vp={class:"skill-name"},Bp={class:"skill-cooldown"},Gp={class:"skill-effect"},Kp={class:"skill-icon"},zp=["src","alt"],Wp={key:1},qp={class:"puppet-detail__upgrade"},Xp={class:"upgrade-cost"},Yp={class:"cost-amount"},Zp=["disabled"],Jp={class:"warehouse__placeholder",key:"placeholder"};function Qp(t,e,n,s,o,i){return q(),Y("div",Yh,[_("div",Zh,[(q(!0),Y(be,null,Xt(s.resources,r=>(q(),Y("div",{class:"resource-item",key:r.name},[_("div",Jh,[_("img",{src:r.icon,alt:r.name},null,8,Qh)]),_("div",ep,re(r.value),1)]))),128))]),s.showDrawScreen?Te("",!0):(q(),Y("div",tp,[_("div",np,[e[2]||(e[2]=_("div",{class:"warehouse__title"},"铜偶仓库",-1)),_("div",sp,[(q(!0),Y(be,null,Xt(s.puppets,(r,a)=>{var l;return q(),Y("div",{class:Ie(["puppet-card",{"puppet-card--selected":((l=s.selectedPuppet)==null?void 0:l.id)===r.id,"puppet-card--pulse":s.highlightedIndex===a,"puppet-card--hover":s.hoveredIndex===a}]),key:r.id,ref_for:!0,ref:u=>s.setPuppetItemRef(u,a),onClick:u=>s.selectPuppet(r,a),onMouseenter:u=>s.hoveredIndex=a,onMouseleave:e[0]||(e[0]=u=>s.hoveredIndex=null)},[_("div",ip,re(r.level),1),_("div",rp,[_("img",{src:r.image,alt:r.name},null,8,ap)]),_("div",lp,[_("div",cp,re(r.name)+re(r.suffix),1),_("div",up,re(r.level)+"级",1)])],42,op)}),128)),_("div",{class:"puppet-card puppet-card--add",onClick:s.drawMore},[...e[1]||(e[1]=[_("div",{class:"puppet-card__add-icon"},"+",-1),_("div",{class:"puppet-card__add-text"},"抽取更多",-1)])])])]),_("div",fp,[Se(Il,{name:"fade-slide",mode:"out-in"},{default:Ii(()=>{var r,a,l,u;return[s.selectedPuppet?(q(),Y("div",{class:"puppet-detail",key:((r=s.selectedPuppet)==null?void 0:r.id)||"none"},[_("div",dp,[_("h2",hp,re(s.selectedPuppet.name),1)]),_("div",pp,[_("div",mp,[_("div",gp,[Se(s.PuppetModelView,{puppet:s.selectedPuppet},null,8,["puppet"])]),_("div",_p,re(s.selectedPuppet.description),1)]),_("div",yp,[_("div",bp,[_("div",vp,[_("div",wp,[e[3]||(e[3]=_("span",{class:"stat-label"},"生命:",-1)),_("span",Tp,re(s.selectedPuppet.stats.health),1)]),_("div",Sp,[e[4]||(e[4]=_("span",{class:"stat-label"},"等级:",-1)),_("span",xp,re(s.selectedPuppet.stats.level),1)]),_("div",Ep,[e[5]||(e[5]=_("span",{class:"stat-label"},"剩余上场次数:",-1)),_("span",Cp,re(s.selectedPuppet.stats.live_left),1)]),_("div",Pp,[e[6]||(e[6]=_("span",{class:"stat-label"},"攻击力:",-1)),_("span",Mp,re(s.selectedPuppet.stats.attack.base),1)]),_("div",Ap,[e[7]||(e[7]=_("span",{class:"stat-label"},"防御力:",-1)),_("span",Rp,re(s.selectedPuppet.stats.defense.base),1)]),_("div",kp,[e[8]||(e[8]=_("span",{class:"stat-label"},"闪避:",-1)),_("span",Ip,re(s.selectedPuppet.stats.dodge.base)+"% ",1)]),_("div",Lp,[e[9]||(e[9]=_("span",{class:"stat-label"},"职业:",-1)),_("span",Op,re(s.selectedPuppet.stats.class),1)])])]),_("div",Dp,[e[10]||(e[10]=_("h4",{class:"section-title"},"装备",-1)),_("div",Np,[(q(!0),Y(be,null,Xt(s.selectedPuppet.equipment,(c,f)=>(q(),Y("div",{key:f,class:Ie(["equipment-slot",{"equipment-slot--empty":!c.equipped&&!c.locked,"equipment-slot--locked":c.locked}])},[c.equipped&&c.icon&&(c.icon.startsWith("/")||c.icon.startsWith("http"))?(q(),Y("img",{key:0,src:c.icon,alt:c.name,class:"equipment-icon"},null,8,Fp)):(q(),Y("span",Hp,re(c.locked?"🔒":c.icon),1))],2))),128))])])]),((l=(a=s.selectedPuppet)==null?void 0:a.stats)==null?void 0:l.class)!=="工匠"?(q(),Y("div",jp,[e[11]||(e[11]=_("h4",{class:"section-title"},"技能",-1)),_("div",Up,[_("div",$p,[_("div",Vp,re(s.selectedPuppet.skill.name),1),_("div",Bp,"冷却: "+re(s.selectedPuppet.skill.cooldown),1),_("div",Gp,re(s.selectedPuppet.skill.effect),1)]),_("div",Kp,[s.selectedPuppet.skill.icon&&(s.selectedPuppet.skill.icon.startsWith("/")||s.selectedPuppet.skill.icon.startsWith("http"))?(q(),Y("img",{key:0,src:s.selectedPuppet.skill.icon,alt:s.selectedPuppet.skill.name,class:"skill-icon-img"},null,8,zp)):(q(),Y("span",Wp,re(s.selectedPuppet.skill.icon),1))])])])):Te("",!0)]),_("div",qp,[_("div",Xp,[_("span",Yp,re(s.selectedPuppet.level>=5?"已满级":"X "+s.selectedPuppet.upgradeCost),1)]),_("button",{class:"upgrade-btn",onClick:s.upgradeSelected,disabled:((u=s.selectedPuppet)==null?void 0:u.level)>=5},[...e[12]||(e[12]=[_("span",{class:"upgrade-icon"},"⏫",-1)])],8,Zp)])])):(q(),Y("div",Jp,[...e[13]||(e[13]=[_("p",null,"请选择英雄以浏览",-1)])]))]}),_:1})],512)])),s.showDrawScreen?(q(),En(s.DrawScreen,{key:1,onDraw:s.onGachaResult})):Te("",!0)])}const em=Bt(Xh,[["render",Qp],["__scopeId","data-v-58eda787"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/Warehouse.vue"]]),tm={__name:"TopLeftPanel",emits:["back","open-settings"],setup(t,{expose:e,emit:n}){e();const o={emit:n};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},nm={class:"panel",style:{left:"24px",right:"auto"}};function sm(t,e,n,s,o,i){return q(),Y("div",nm,[_("button",{class:"btn",onClick:e[0]||(e[0]=r=>t.$emit("back")),title:"返回"},[...e[2]||(e[2]=[_("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[_("path",{d:"M15 18L9 12L15 6",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),_("span",{class:"sr-only"},"返回",-1)])]),_("button",{class:"btn",onClick:e[1]||(e[1]=r=>t.$emit("open-settings")),title:"设置"},[...e[3]||(e[3]=[_("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[_("path",{d:"M12 15.5C13.933 15.5 15.5 13.933 15.5 12C15.5 10.067 13.933 8.5 12 8.5C10.067 8.5 8.5 10.067 8.5 12C8.5 13.933 10.067 15.5 12 15.5Z",stroke:"#ffffff","stroke-width":"2"}),_("path",{d:"M19.4 15A7.964 7.964 0 0 0 20 12C20 11.49 19.95 10.99 19.86 10.5L22 8.5L20 5.5L17.34 6.07C16.78 5.58 16.14 5.18 15.44 4.9L15 2H9L8.56 4.9C7.86 5.18 7.22 5.58 6.66 6.07L4 5.5L2 8.5L4.14 10.5C4.05 10.99 4 11.49 4 12C4 12.51 4.05 13.01 4.14 13.5L2 15.5L4 18.5L6.66 17.93C7.22 18.42 7.86 18.82 8.56 19.1L9 22H15L15.44 19.1C16.14 18.82 16.78 18.42 17.34 17.93L20 18.5L22 15.5L19.86 13.5C19.95 13.01 20 12.51 20 12",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),_("span",{class:"sr-only"},"设置",-1)])])])}const om=Bt(tm,[["render",sm],["__scopeId","data-v-fb6ccffd"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/TopLeftPanel.vue"]]),im={__name:"StartMenu",props:{visible:{type:Boolean,default:!0}},emits:["started"],setup(t,{expose:e,emit:n}){e();const s=t,o=X(null),i=X(null);let r=null,a=null,l=null,u=null,c=null,f=1.2;const d=X(!1),m=X(!0),v=X(!1),T=X(!1),S=n;gn(()=>s.visible,b=>{b&&r&&c?F():b||C()});function k(){if(u=requestAnimationFrame(k),c){const b=Date.now()*.001;c.position.y=Math.sin(b*.8)*.1,c.rotation.y=Math.sin(b*.6)*.1;const g=f+Math.sin(b*1.2)*.04;c.scale.setScalar(g)}l&&l.render(r,a)}function N(){!l||!a||(a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight))}function C(){u&&(cancelAnimationFrame(u),u=null),l&&l.setAnimationLoop(null)}function F(){u||k()}function P(){try{C()}catch{}try{window.removeEventListener("resize",N)}catch{}try{r&&(r.traverse(b=>{if(b.isMesh){b.geometry&&b.geometry.dispose&&b.geometry.dispose();const g=b.material;Array.isArray(g)?g.forEach(p=>p&&p.dispose&&p.dispose()):g&&g.dispose&&g.dispose()}}),r.clear())}catch{}try{if(l){l.clear(!0,!0,!0),l.dispose();const b=l.getContext&&l.getContext(),g=b&&b.getExtension&&b.getExtension("WEBGL_lose_context");g&&g.loseContext&&g.loseContext()}}catch{}r=null,a=null,l=null,c=null}async function w(b=null){try{window.getAssetUrl=_e,window.precacheAllResources=oo,window.getCacheStatus=Gr}catch{}if(!r||!l){console.error("[StartMenu] Scene or renderer not initialized in onMounted");return}b&&b(0,100,20);const g=new bi(4210752,.4);r.add(g);const p=new os(16777215,12.5);p.position.set(-5,-2,1),r.add(p),b&&b(0,100,40);const M=new ss;M.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/");const A=new ns;A.setDRACOLoader(M),b&&b(0,100,50);const D=window.getAssetUrl?window.getAssetUrl("logo.glb"):"./assets/logo.glb",$=()=>new Promise((V,se)=>{A.load(D,oe=>V(oe),void 0,oe=>se(oe))});try{b&&b(0,100,60);const V=await $();b&&b(0,100,80),V.scene.position.set(0,0,0),r.add(V.scene);const oe=new ao().setFromObject(V.scene).getCenter(new me);V.scene.position.set(-oe.x,-oe.y,-oe.z);try{V.scene.scale.setScalar(f)}catch{}c=V.scene,b&&b(0,100,100),d.value=!0,console.log("[StartMenu] Logo 加载完成"),m.value=!1,v.value=!0}catch(V){console.warn("[StartMenu] 3D模型加载失败，使用占位符",V);const se=new ln(1,1,1),oe=new wt({color:16096779}),ve=new et(se,oe);r.add(ve),c=ve,b&&b(0,100,100),d.value=!0,m.value=!1,v.value=!0}window.__START_MENU_PAUSE__=()=>C(),window.__START_MENU_RESUME__=()=>F()}function K(){S("started"),C()}function z(){T.value=!0}function E(){T.value=!1}Oe(()=>{m.value=!0,v.value=!1,d.value=!1,console.log("[StartMenu] 组件挂载，开始加载..."),!r&&o.value?(r=new _i,r.background=new Et("#a0a0a0"),a=new ro(50,1.333,.1,1e3),a.position.set(-3.655,.2,-.006),a.rotation.set(-1.618275,-1.538307,-1.6183,"XYZ"),l=new yi({antialias:!0,canvas:o.value}),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),window.addEventListener("resize",N),k(),w().catch(b=>{console.warn("[StartMenu] 场景初始化失败",b),m.value=!1,v.value=!0})):r&&!c?(console.log("[StartMenu] 场景已存在，重新加载logo..."),w().catch(b=>{console.warn("[StartMenu] Logo重新加载失败",b),m.value=!1,v.value=!0})):c&&(console.log("[StartMenu] Logo已存在，直接显示"),m.value=!1,v.value=!0,d.value=!0),window.__INIT_THREE_SCENE__=async b=>{if(r&&c){console.log("[StartMenu] 场景已初始化，跳过重复加载");return}r||await w(b)}}),At(()=>{P()});const W={props:s,canvasRef:o,uiRootRef:i,get scene(){return r},set scene(b){r=b},get camera(){return a},set camera(b){a=b},get renderer(){return l},set renderer(b){l=b},get animationId(){return u},set animationId(b){u=b},get logoObject(){return c},set logoObject(b){c=b},get baseScale(){return f},set baseScale(b){f=b},isReady:d,showLoading:m,showButtons:v,showSettings:T,emit:S,renderLoop:k,handleResize:N,pause:C,resume:F,destroyScene:P,initScene:w,onStart:K,onOpenSettings:z,onCloseSettings:E,onMounted:Oe,onBeforeUnmount:At,ref:X,watch:gn,get THREE(){return gi},get GLTFLoader(){return ns},get DRACOLoader(){return ss},get getAssetUrl(){return _e},get precacheAllResources(){return oo},get getCacheStatus(){return Gr}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}},rm={class:"startmenu"},am={ref:"canvasRef",class:"startmenu__canvas"},lm={key:0,class:"loading-overlay"},cm={key:0,class:"settings-local"};function um(t,e,n,s,o,i){return q(),Y("div",rm,[_("canvas",am,null,512),Se(Il,{name:"fade"},{default:Ii(()=>[s.showLoading?(q(),Y("div",lm,[...e[0]||(e[0]=[_("div",{class:"loading-spinner"},[_("div",{class:"spinner"}),_("div",{class:"loading-text"},"加载中...")],-1)])])):Te("",!0)]),_:1}),Ge(_("div",{ref:"uiRootRef",class:Ie(["startmenu-ui",{"fade-in":s.showButtons}])},[_("button",{id:"start-btn",class:"startmenu-btn","aria-label":"开始",onClick:s.onStart},"开始"),_("button",{id:"settings-btn",class:"startmenu-btn","aria-label":"设置",onClick:s.onOpenSettings},"设置")],2),[[Ol,s.showButtons]]),s.showSettings?(q(),Y("div",cm,[_("div",{class:"settings-local__card"},[_("div",{class:"settings-local__header"},[e[1]||(e[1]=_("div",{class:"settings-local__title"},"设置",-1)),_("button",{class:"settings-local__close",onClick:s.onCloseSettings,"aria-label":"关闭"},"✕")]),e[2]||(e[2]=_("div",{class:"settings-local__content"},[_("div",{class:"settings-local__row"},"此处放置开始界面相关设置（占位）。")],-1))])])):Te("",!0)])}const fm=Bt(im,[["render",um],["__scopeId","data-v-00070bd8"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/StartMenu.vue"]]),dm={__name:"TestPanel",emits:["enter-scene"],setup(t,{expose:e,emit:n}){e();const s=n,o=X([{name:"简单移动",key:"test_simple_move",desc:"移动单位到(2,2)并改变朝向"},{name:"显示状态",key:"test_display_states",desc:"显示可移动和可攻击圈圈"},{name:"清除状态",key:"test_clear_states",desc:"清除所有状态指示器"},{name:"移除单位",key:"test_remove",desc:"移除ID为2的单位（带淡出动画）"},{name:"聚焦单位",key:"test_camera_control",desc:"相机聚焦到单位1"},{name:"复位视角",key:"test_camera_reset",desc:"相机复位到默认位置"},{name:"地图块",key:"test_blocks",desc:"放置并设置地图块状态"},{name:"完整序列",key:"test_sequence",desc:"演示完整的交互流程（8步）"}]),i=X([]),r=X([{name:"🎮 游戏开始",key:"on_game_start",desc:"⚠️ 必须先执行！初始化游戏并放置铜偶[1,2,3]",params:{ids:["1","2","3"]},required:!0},{name:"🎯 点击铜偶",key:"on_click_copper",desc:"点击并高亮选中铜偶，显示状态信息",get params(){return{id:String(i.value[0]||"1")}}},{name:"🟢 开始移动",key:"on_move_start",desc:"显示绿色移动范围（可移动的地块）",get params(){return{id:String(i.value[0]||"1")}}},{name:"实施移动",key:"on_move_apply",desc:"移动到位置(3,3)",get params(){return{id:String(i.value[0]||"1"),position:{x:"3",y:"3"}}}},{name:"🔴 开始攻击",key:"on_attack_start",desc:"显示红色攻击范围（可攻击的敌人）",get params(){return{id:String(i.value[0]||"1")}}},{name:"⬜ 取消攻击",key:"on_attack_end",desc:"清除所有红色攻击范围地块",params:{}},{name:"实施攻击",key:"on_attack_apply",desc:"攻击位置(4,4)的目标",get params(){return{id:String(i.value[0]||"1"),position:{x:"4",y:"4"}}}}]),a=X(!1),l=X(!1),u=X(null),c=X(!1),f=X(!1),d=X("eventloop"),m=X({moveId:1,moveX:0,moveZ:0,rotateId:1,rotateDir:"PositiveX",removeId:2}),v=["PositiveX","NegativeX","PositiveY","NegativeY"];async function T(p){try{u.value=p,console.log(`[TestPanel] 执行后端测试: ${p}`);const M=await Dt(()=>import("./main-tCo2ph2Z.js"),[]),A=M[p];A&&typeof A=="function"?(A(),console.log(`[TestPanel] 后端测试执行成功: ${p}`)):(console.error(`[TestPanel] 后端测试函数不存在: ${p}`),console.log("[TestPanel] 可用的后端函数:",Object.keys(M).filter(D=>D.startsWith("test_"))))}catch(M){console.error("[TestPanel] 后端测试执行失败:",M),console.error("[TestPanel] 请确保已编译后端代码: moon build")}finally{setTimeout(()=>{u.value=null},500)}}function S(){l.value=!l.value,c.value=!1}function k(){c.value=!c.value}async function N(p){var A;d.value=p,console.log(`[TestPanel] 切换到${p==="backend"?"后端测试":"EventLoop测试"}模式`);const{messageQueue:M}=await Dt(async()=>{const{messageQueue:D}=await Promise.resolve().then(()=>Ns);return{messageQueue:D}},void 0);(A=M.sceneContext)!=null&&A.setTestMode&&M.sceneContext.setTestMode(p)}async function C(){try{u.value="custom_move",console.log(`[TestPanel] 自定义移动: ID=${m.value.moveId} 到 (${m.value.moveX}, ${m.value.moveZ})`);const p=await Dt(()=>import("./main-tCo2ph2Z.js"),[]);p.move_to_xy?(p.move_to_xy(m.value.moveId,m.value.moveX,m.value.moveZ),console.log("[TestPanel] 自定义移动命令已发送")):console.error("[TestPanel] move_to_xy 函数不存在")}catch(p){console.error("[TestPanel] 执行失败:",p)}finally{setTimeout(()=>{u.value=null},500)}}async function F(){try{u.value="custom_rotate",console.log(`[TestPanel] 自定义旋转: ID=${m.value.rotateId} 方向=${m.value.rotateDir}`);const p=await Dt(()=>import("./main-tCo2ph2Z.js"),[]);p.change_direction_str?(p.change_direction_str(m.value.rotateId,m.value.rotateDir),console.log("[TestPanel] 自定义旋转命令已发送")):console.error("[TestPanel] change_direction_str 函数不存在")}catch(p){console.error("[TestPanel] 执行失败:",p)}finally{setTimeout(()=>{u.value=null},500)}}async function P(){try{u.value="custom_remove",console.log(`[TestPanel] 自定义移除: ID=${m.value.removeId}`);const p=await Dt(()=>import("./main-tCo2ph2Z.js"),[]);p.remove_unit?(p.remove_unit(m.value.removeId),console.log("[TestPanel] 自定义移除命令已发送")):console.error("[TestPanel] remove_unit 函数不存在")}catch(p){console.error("[TestPanel] 执行失败:",p)}finally{setTimeout(()=>{u.value=null},500)}}function w(){f.value=!f.value,c.value=!1}async function K(p){var M;try{if(u.value=p.key,console.log(`[TestPanel] 执行EventLoop测试: ${p.name}`),!a.value&&p.key!=="on_game_start"){console.warn('[TestPanel] ⚠️ 游戏未初始化，请先点击 "🎮 游戏开始"'),alert('⚠️ 请先点击 "🎮 游戏开始" 按钮初始化游戏！');return}p.key==="on_game_start"&&(window.__ACTUAL_COPPER_IDS__=[],console.log("[TestPanel] ✅ 已初始化ID收集器"),Dt(()=>Promise.resolve().then(()=>Ns),void 0).then(D=>{const $=D.messageQueue.sceneContext;$!=null&&$.onSetCopper?console.log("[TestPanel] ✅ 已检测到3D场景，模型将正常创建"):(console.warn("[TestPanel] ⚠️ 当前不在3D场景中，模型不会显示"),console.warn('[TestPanel] 💡 点击"🎮 进入3D场景"按钮查看3D效果'))}));const A=JSON.stringify({type:p.key,content:p.params});if(console.log("[TestPanel] 发送消息:",A),p.key==="on_attack_apply"){const D=p.params.id,$=[parseInt(p.params.position.x),parseInt(p.params.position.y)];Dt(()=>Promise.resolve().then(()=>Ns),void 0).then(V=>{const se=V.messageQueue.sceneContext;se!=null&&se.createAttackEffect&&(se.createAttackEffect(parseInt(D),$),console.log("[TestPanel] 💥 触发攻击特效"))})}if(await Ho(A),p.key==="on_game_start"){console.log("[TestPanel] ⏳ 等待游戏初始化完成..."),await new Promise(V=>setTimeout(V,300));let D=0;const $=100;for(;D<$;){if(window.__ACTUAL_COPPER_IDS__&&window.__ACTUAL_COPPER_IDS__.length>=3){console.log(`[TestPanel] 在第 ${D} 次尝试时捕获到ID`);break}await new Promise(V=>setTimeout(V,100)),D++}if(console.log(`[TestPanel] 轮询结束，尝试次数: ${D}`),window.__ACTUAL_COPPER_IDS__&&window.__ACTUAL_COPPER_IDS__.length>=3)i.value=[...window.__ACTUAL_COPPER_IDS__],console.log("[TestPanel] ✅ 捕获到实际的铜偶ID:",i.value),a.value=!0,console.log("[TestPanel] ✅ 游戏已初始化，可以进行其他操作");else{console.error("[TestPanel] ❌ 未能捕获铜偶ID！"),console.log("[TestPanel] 当前捕获的ID数量:",((M=window.__ACTUAL_COPPER_IDS__)==null?void 0:M.length)||0),console.log("[TestPanel] ID内容:",window.__ACTUAL_COPPER_IDS__),console.error("[TestPanel] ⚠️ 这是一个严重错误，可能是："),console.error("[TestPanel]   1. 后端没有发送set_copper消息"),console.error("[TestPanel]   2. messageQueue处理消息太慢"),console.error("[TestPanel]   3. 需要重新编译后端：moon build --target js"),console.error("[TestPanel] 💡 请检查上方日志："),console.error("[TestPanel]   - 是否看到 [App] 🔥 收到set_copper消息？"),console.error("[TestPanel]   - 是否看到 [Handler] set_copper at ... ？"),console.error("[TestPanel]   - 如果都没有，说明后端未发送消息，需要重新编译"),a.value=!1,u.value=null,alert("❌ 未能捕获铜偶ID！");return}}console.log("[TestPanel] EventLoop测试执行成功")}catch(A){console.error("[TestPanel] EventLoop测试失败:",A),console.error("[TestPanel] 错误详情:",A.message),console.error("[TestPanel] 当前使用的铜偶ID:",i.value),A.message&&A.message.includes("panic")&&(console.error('[TestPanel] 💡 提示: 大部分操作需要先初始化游戏（点击"🎮 游戏开始"）'),i.value.length===0&&(console.error("[TestPanel] ⚠️ 未能捕获铜偶ID！请刷新页面重试"),alert('⚠️ 未能捕获铜偶ID，请刷新页面后重新点击"🎮 游戏开始"')))}finally{setTimeout(()=>{u.value=null},500)}}const z=X({type:"on_click_copper",copperId:"",positionX:"3",positionY:"3",ids:"1,2,3"});function E(){i.value.length>0?z.value.copperId=String(i.value[0]):alert('⚠️ 请先执行"🎮 游戏开始"来创建铜偶')}const W=["on_click_copper","on_attack_start","on_attack_end","on_attack_apply","on_move_start","on_move_apply","on_game_start"];async function b(){try{u.value="custom_eventloop";const p=z.value.type;let M={};switch(p){case"on_click_copper":case"on_attack_start":case"on_move_start":M={id:z.value.copperId};break;case"on_attack_end":M={};break;case"on_attack_apply":case"on_move_apply":M={id:z.value.copperId,position:{x:z.value.positionX,y:z.value.positionY}};break;case"on_game_start":M={ids:z.value.ids.split(",").map(D=>D.trim()).filter(D=>D)};break}const A=JSON.stringify({type:p,content:M});console.log("[TestPanel] 自定义EventLoop:",A),await Ho(A),console.log("[TestPanel] 自定义EventLoop执行成功")}catch(p){console.error("[TestPanel] 自定义EventLoop失败:",p)}finally{setTimeout(()=>{u.value=null},500)}}const g={emit:s,testFunctions:o,actualCopperIds:i,eventloopTests:r,gameInitialized:a,isOpen:l,executing:u,showCustom:c,showEventloop:f,testMode:d,customParams:m,directions:v,runTest:T,togglePanel:S,toggleCustom:k,switchTestMode:N,runCustomMove:C,runCustomRotate:F,runCustomRemove:P,toggleEventloop:w,runEventloopTest:K,customEventloopParams:z,fillActualCopperId:E,eventloopTypes:W,runCustomEventloop:b,ref:X,get eventloop(){return Ho}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}},hm=["title"],pm={key:0,class:"test-panel__content"},mm={class:"test-panel__header"},gm={class:"test-panel__tabs"},_m={key:0,class:"test-panel__list"},ym={class:"game-status__icon"},bm={class:"game-status__text"},vm={key:0,style:{opacity:"0.8","font-size":"0.9em"}},wm=["disabled","onClick"],Tm={class:"test-item__name"},Sm={class:"test-item__desc"},xm={class:"custom-eventloop"},Em={key:0,class:"copper-ids-hint"},Cm={key:0},Pm={key:1,class:"copper-ids-hint warning"},Mm={class:"custom-inputs"},Am=["value"],Rm={key:2,class:"custom-inputs"},km={style:{display:"flex",gap:"8px"}},Im=["disabled"],Lm={key:3,class:"custom-inputs"},Om={style:{display:"flex",gap:"8px","margin-bottom":"8px"}},Dm=["disabled"],Nm={style:{display:"flex",gap:"8px"}},Fm={key:4,class:"custom-inputs"},Hm=["disabled"],jm={key:1,class:"test-panel__custom"},Um={class:"custom-group"},$m={class:"custom-inputs"},Vm=["disabled"],Bm={class:"custom-group"},Gm={class:"custom-inputs"},Km=["value"],zm=["disabled"],Wm={class:"custom-group"},qm={class:"custom-inputs"},Xm=["disabled"],Ym={key:2,class:"test-panel__list"},Zm=["disabled","onClick"],Jm={class:"test-item__name"},Qm={class:"test-item__desc"},eg={class:"test-panel__footer"},tg={key:0},ng={key:1},sg={key:2};function og(t,e,n,s,o,i){return q(),Y("div",{class:Ie(["test-panel",{"test-panel--open":s.isOpen}])},[_("button",{class:"test-panel__toggle",onClick:s.togglePanel,title:s.isOpen?"关闭测试面板":"打开测试面板"},re(s.isOpen?"✕":"🧪"),9,hm),s.isOpen?(q(),Y("div",pm,[_("div",mm,[e[16]||(e[16]=_("h3",null,"消息交互测试",-1)),e[17]||(e[17]=_("p",{class:"test-panel__subtitle"},"测试后端到前端的消息通信",-1)),_("button",{class:"test-panel__scene-btn",onClick:e[0]||(e[0]=r=>s.emit("enter-scene")),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}," 🎮 进入3D场景 (查看模型效果) "),_("div",gm,[_("button",{class:Ie(["test-panel__tab",{"test-panel__tab--active":!s.showCustom&&!s.showEventloop}]),onClick:e[1]||(e[1]=r=>{s.showCustom=!1,s.showEventloop=!1,s.switchTestMode("backend")})}," 🧪 后端测试 ",2),_("button",{class:Ie(["test-panel__tab",{"test-panel__tab--active":s.showEventloop}]),onClick:e[2]||(e[2]=r=>{s.toggleEventloop(),s.switchTestMode("eventloop")})}," 🎮 EventLoop ",2),_("button",{class:Ie(["test-panel__tab",{"test-panel__tab--active":s.showCustom}]),onClick:e[3]||(e[3]=r=>{s.toggleCustom(),s.switchTestMode("backend")})}," ⚙️ 自定义 ",2)])]),s.showEventloop?(q(),Y("div",_m,[_("div",{class:Ie(["game-status",{"game-status--initialized":s.gameInitialized,"game-status--initializing":s.executing==="on_game_start"}])},[_("span",ym,re(s.gameInitialized?"✅":s.executing==="on_game_start"?"⏳":"⚠️"),1),_("span",bm,[s.gameInitialized?(q(),Y(be,{key:0},[e[18]||(e[18]=an(" 游戏已初始化 ",-1)),s.actualCopperIds.length>0?(q(),Y("span",vm," (铜偶ID: "+re(s.actualCopperIds.join(", "))+") ",1)):Te("",!0)],64)):s.executing==="on_game_start"?(q(),Y(be,{key:1},[an(" 正在初始化游戏... ")],64)):(q(),Y(be,{key:2},[an(' 游戏未初始化 - 请先点击"🎮 游戏开始" ')],64))])],2),(q(!0),Y(be,null,Xt(s.eventloopTests,r=>(q(),Y("button",{key:r.key,class:Ie(["test-item",{"test-item--executing":s.executing===r.key,"test-item--required":r.required,"test-item--disabled":!s.gameInitialized&&r.key!=="on_game_start"}]),disabled:s.executing===r.key||!s.gameInitialized&&r.key!=="on_game_start",onClick:a=>s.runEventloopTest(r)},[_("div",Tm,re(r.name),1),_("div",Sm,re(r.desc),1)],10,wm))),128)),_("div",xm,[e[20]||(e[20]=_("h4",null,"自定义EventLoop调用",-1)),s.actualCopperIds.length>0?(q(),Y("div",Em,[e[19]||(e[19]=an(" 💡 可用铜偶ID: ",-1)),(q(!0),Y(be,null,Xt(s.actualCopperIds,(r,a)=>(q(),Y("span",{key:r,class:"copper-id-tag"},[an(re(r),1),a<s.actualCopperIds.length-1?(q(),Y("span",Cm,", ")):Te("",!0)]))),128))])):(q(),Y("div",Pm,' ⚠️ 未检测到铜偶，请先执行"🎮 游戏开始" ')),_("div",Mm,[Ge(_("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>s.customEventloopParams.type=r),class:"custom-select"},[(q(),Y(be,null,Xt(s.eventloopTypes,r=>_("option",{key:r,value:r},re(r),9,Am)),64))],512),[[jr,s.customEventloopParams.type]])]),["on_click_copper","on_attack_start","on_move_start"].includes(s.customEventloopParams.type)?(q(),Y("div",Rm,[_("div",km,[Ge(_("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s.customEventloopParams.copperId=r),placeholder:"铜偶ID（使用上面显示的ID）",class:"custom-input",style:{flex:"1"}},null,512),[[gt,s.customEventloopParams.copperId]]),_("button",{class:"fill-id-btn",onClick:s.fillActualCopperId,disabled:s.actualCopperIds.length===0,title:"自动填充第一个铜偶的ID"}," 📋 ",8,Im)])])):Te("",!0),["on_attack_apply","on_move_apply"].includes(s.customEventloopParams.type)?(q(),Y("div",Lm,[_("div",Om,[Ge(_("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>s.customEventloopParams.copperId=r),placeholder:"铜偶ID（使用上面显示的ID）",class:"custom-input",style:{flex:"1"}},null,512),[[gt,s.customEventloopParams.copperId]]),_("button",{class:"fill-id-btn",onClick:s.fillActualCopperId,disabled:s.actualCopperIds.length===0,title:"自动填充第一个铜偶的ID"}," 📋 ",8,Dm)]),_("div",Nm,[Ge(_("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>s.customEventloopParams.positionX=r),placeholder:"X坐标",class:"custom-input"},null,512),[[gt,s.customEventloopParams.positionX]]),Ge(_("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s.customEventloopParams.positionY=r),placeholder:"Y坐标",class:"custom-input"},null,512),[[gt,s.customEventloopParams.positionY]])])])):Te("",!0),s.customEventloopParams.type==="on_game_start"?(q(),Y("div",Fm,[Ge(_("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>s.customEventloopParams.ids=r),placeholder:"IDs (逗号分隔, 如: 1,2,3)",class:"custom-input"},null,512),[[gt,s.customEventloopParams.ids]])])):Te("",!0),_("button",{class:"custom-btn",onClick:s.runCustomEventloop,disabled:s.executing},"发送",8,Hm)])])):s.showCustom?(q(),Y("div",jm,[_("div",Um,[e[21]||(e[21]=_("h4",null,"移动单位",-1)),_("div",$m,[Ge(_("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>s.customParams.moveId=r),type:"number",placeholder:"单位ID",class:"custom-input"},null,512),[[gt,s.customParams.moveId,void 0,{number:!0}]]),Ge(_("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>s.customParams.moveX=r),type:"number",placeholder:"X坐标",class:"custom-input"},null,512),[[gt,s.customParams.moveX,void 0,{number:!0}]]),Ge(_("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>s.customParams.moveZ=r),type:"number",placeholder:"Z坐标",class:"custom-input"},null,512),[[gt,s.customParams.moveZ,void 0,{number:!0}]]),_("button",{class:"custom-btn",onClick:s.runCustomMove,disabled:s.executing},"移动",8,Vm)])]),_("div",Bm,[e[22]||(e[22]=_("h4",null,"改变朝向",-1)),_("div",Gm,[Ge(_("input",{"onUpdate:modelValue":e[13]||(e[13]=r=>s.customParams.rotateId=r),type:"number",placeholder:"单位ID",class:"custom-input"},null,512),[[gt,s.customParams.rotateId,void 0,{number:!0}]]),Ge(_("select",{"onUpdate:modelValue":e[14]||(e[14]=r=>s.customParams.rotateDir=r),class:"custom-select"},[(q(),Y(be,null,Xt(s.directions,r=>_("option",{key:r,value:r},re(r),9,Km)),64))],512),[[jr,s.customParams.rotateDir]]),_("button",{class:"custom-btn",onClick:s.runCustomRotate,disabled:s.executing},"旋转",8,zm)])]),_("div",Wm,[e[23]||(e[23]=_("h4",null,"移除单位",-1)),_("div",qm,[Ge(_("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>s.customParams.removeId=r),type:"number",placeholder:"单位ID",class:"custom-input"},null,512),[[gt,s.customParams.removeId,void 0,{number:!0}]]),_("button",{class:"custom-btn custom-btn--danger",onClick:s.runCustomRemove,disabled:s.executing},"移除",8,Xm)])])])):(q(),Y("div",Ym,[(q(!0),Y(be,null,Xt(s.testFunctions,r=>(q(),Y("button",{key:r.key,class:Ie(["test-item",{"test-item--executing":s.executing===r.key}]),disabled:s.executing===r.key,onClick:a=>s.runTest(r.key)},[_("div",Jm,re(r.name),1),_("div",Qm,re(r.desc),1)],10,Zm))),128))])),_("div",eg,[s.showEventloop?(q(),Y("p",tg,[...e[24]||(e[24]=[an(' 💡 点击"🎮 游戏开始"后等待状态变为"✅ 游戏已初始化" ',-1),_("br",null,null,-1),_("small",{style:{opacity:"0.7",color:"rgba(255, 200, 100, 1)"}},' ⚠️ 想看3D效果？点击上方"🎮 进入3D场景"按钮！ ',-1)])])):s.showCustom?(q(),Y("p",ng,"💡 在3D场景中：蓝色=ID:1，红色=ID:2")):(q(),Y("p",sg,"💡 提示：确保场景中已有模型ID=1和ID=2"))])])):Te("",!0)],2)}const Hl=Bt(dm,[["render",og],["__scopeId","data-v-1af2d306"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/TestPanel.vue"]]),ea={type:"change"},ji={type:"start"},jl={type:"end"},Ps=new mc,ta=new gc,ig=Math.cos(70*ha.DEG2RAD),Pe=new me,Be=2*Math.PI,he={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Bo=1e-6;class na extends pc{constructor(e,n=null){super(e,n),this.state=he.NONE,this.target=new me,this.cursor=new me,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Pn.ROTATE,MIDDLE:Pn.DOLLY,RIGHT:Pn.PAN},this.touches={ONE:xn.ROTATE,TWO:xn.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new me,this._lastQuaternion=new js,this._lastTargetPosition=new me,this._quat=new js().setFromUnitVectors(e.up,new me(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new qi,this._sphericalDelta=new qi,this._scale=1,this._panOffset=new me,this._rotateStart=new We,this._rotateEnd=new We,this._rotateDelta=new We,this._panStart=new We,this._panEnd=new We,this._panDelta=new We,this._dollyStart=new We,this._dollyEnd=new We,this._dollyDelta=new We,this._dollyDirection=new me,this._mouse=new We,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ag.bind(this),this._onPointerDown=rg.bind(this),this._onPointerUp=lg.bind(this),this._onContextMenu=mg.bind(this),this._onMouseWheel=fg.bind(this),this._onKeyDown=dg.bind(this),this._onTouchStart=hg.bind(this),this._onTouchMove=pg.bind(this),this._onMouseDown=cg.bind(this),this._onMouseMove=ug.bind(this),this._interceptControlDown=gg.bind(this),this._interceptControlUp=_g.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(ea),this.update(),this.state=he.NONE}update(e=null){const n=this.object.position;Pe.copy(n).sub(this.target),Pe.applyQuaternion(this._quat),this._spherical.setFromVector3(Pe),this.autoRotate&&this.state===he.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(s)&&isFinite(o)&&(s<-Math.PI?s+=Be:s>Math.PI&&(s-=Be),o<-Math.PI?o+=Be:o>Math.PI&&(o-=Be),s<=o?this._spherical.theta=Math.max(s,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(s+o)/2?Math.max(s,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let i=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const r=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),i=r!=this._spherical.radius}if(Pe.setFromSpherical(this._spherical),Pe.applyQuaternion(this._quatInverse),n.copy(this.target).add(Pe),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let r=null;if(this.object.isPerspectiveCamera){const a=Pe.length();r=this._clampDistance(a*this._scale);const l=a-r;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),i=!!l}else if(this.object.isOrthographicCamera){const a=new me(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),i=l!==this.object.zoom;const u=new me(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),r=Pe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;r!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(r).add(this.object.position):(Ps.origin.copy(this.object.position),Ps.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Ps.direction))<ig?this.object.lookAt(this.target):(ta.setFromNormalAndCoplanarPoint(this.object.up,this.target),Ps.intersectPlane(ta,this.target))))}else if(this.object.isOrthographicCamera){const r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),r!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this._scale=1,this._performCursorZoom=!1,i||this._lastPosition.distanceToSquared(this.object.position)>Bo||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Bo||this._lastTargetPosition.distanceToSquared(this.target)>Bo?(this.dispatchEvent(ea),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Be/60*this.autoRotateSpeed*e:Be/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){Pe.setFromMatrixColumn(n,0),Pe.multiplyScalar(-e),this._panOffset.add(Pe)}_panUp(e,n){this.screenSpacePanning===!0?Pe.setFromMatrixColumn(n,1):(Pe.setFromMatrixColumn(n,0),Pe.crossVectors(this.object.up,Pe)),Pe.multiplyScalar(e),this._panOffset.add(Pe)}_pan(e,n){const s=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;Pe.copy(o).sub(this.target);let i=Pe.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*i/s.clientHeight,this.object.matrix),this._panUp(2*n*i/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),o=e-s.left,i=n-s.top,r=s.width,a=s.height;this._mouse.x=o/r*2-1,this._mouse.y=-(i/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Be*this._rotateDelta.x/n.clientHeight),this._rotateUp(Be*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Be*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Be*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Be*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Be*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),s=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._rotateStart.set(s,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),s=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._panStart.set(s,o)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),s=e.pageX-n.x,o=e.pageY-n.y,i=Math.sqrt(s*s+o*o);this._dollyStart.set(0,i)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const s=this._getSecondPointerPosition(e),o=.5*(e.pageX+s.x),i=.5*(e.pageY+s.y);this._rotateEnd.set(o,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Be*this._rotateDelta.x/n.clientHeight),this._rotateUp(Be*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),s=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._panEnd.set(s,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),s=e.pageX-n.x,o=e.pageY-n.y,i=Math.sqrt(s*s+o*o);this._dollyEnd.set(0,i),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const r=(e.pageX+n.x)*.5,a=(e.pageY+n.y)*.5;this._updateZoomParameters(r,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new We,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,s={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function rg(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function ag(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function lg(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(jl),this.state=he.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function cg(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Pn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=he.DOLLY;break;case Pn.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=he.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=he.ROTATE}break;case Pn.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=he.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=he.PAN}break;default:this.state=he.NONE}this.state!==he.NONE&&this.dispatchEvent(ji)}function ug(t){switch(this.state){case he.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case he.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case he.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function fg(t){this.enabled===!1||this.enableZoom===!1||this.state!==he.NONE||(t.preventDefault(),this.dispatchEvent(ji),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(jl))}function dg(t){this.enabled!==!1&&this._handleKeyDown(t)}function hg(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case xn.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=he.TOUCH_ROTATE;break;case xn.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=he.TOUCH_PAN;break;default:this.state=he.NONE}break;case 2:switch(this.touches.TWO){case xn.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=he.TOUCH_DOLLY_PAN;break;case xn.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=he.TOUCH_DOLLY_ROTATE;break;default:this.state=he.NONE}break;default:this.state=he.NONE}this.state!==he.NONE&&this.dispatchEvent(ji)}function pg(t){switch(this._trackPointer(t),this.state){case he.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case he.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case he.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case he.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=he.NONE}}function mg(t){this.enabled!==!1&&t.preventDefault()}function gg(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function _g(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const yg={__name:"TestScene",emits:["back"],setup(t,{expose:e,emit:n}){e();const s=X(null),o=n;let i,r,a,l,u=[],c={focusPosition:null,focusTarget:null,lerpFactor:.08};Oe(async()=>{var F;f(),m();const{messageQueue:C}=await Dt(async()=>{const{messageQueue:P}=await Promise.resolve().then(()=>Ns);return{messageQueue:P}},void 0);(F=C.sceneContext)!=null&&F.setTestMode&&C.sceneContext.setTestMode("eventloop"),S()}),At(()=>{a&&a.dispose(),l&&l.dispose()});function f(){i=new _i,i.background=new Et(2236962),r=new ro(60,window.innerWidth/window.innerHeight,.1,2e3),r.position.set(0,5,10),a=new yi({antialias:!0}),a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(window.devicePixelRatio),s.value.appendChild(a.domElement),l=new na(r,a.domElement),l.enableDamping=!0;const C=new bi(16777215,.8);i.add(C);const F=new os(16777215,1);F.position.set(5,10,5),i.add(F);const P=20,w=1,K=new Xi(P,P),z=new qt({color:3355443,side:Gn}),E=new et(K,z);E.rotation.x=-Math.PI/2,E.position.y=0,i.add(E);const W=new _c(P,P/w,0,0);W.position.y=.01,W.material.opacity=.5,W.material.transparent=!0,i.add(W),d(),console.log("[TestScene] 场景初始化完成"),console.log('[TestScene] - 蓝/红立方体(ID=1,2)用于"后端测试"'),console.log("[TestScene] - EventLoop测试会动态创建新模型"),window.addEventListener("resize",T)}function d(){const C=new ln(.8,.8,.8),F=new qt({color:4491519}),P=new et(C,F);P.position.set(.5,.4,.5),i.add(P),u.push({id:1,object:P,name:"单位1",type:"test"});const w=new ln(.8,.8,.8),K=new qt({color:16729156}),z=new et(w,K);z.position.set(4.5,.4,4.5),i.add(z),u.push({id:2,object:z,name:"单位2",type:"test"}),console.log("[TestScene] 创建了测试单位:",u.map(E=>`ID=${E.id}`))}function m(){const C=new Map,F=new Map;function P(b,g,p){const M=u.find(V=>V.id===b);if(!M||!M.object)return;const A=g==="move"?65280:16711680,D=g==="move"?.8:1;C.has(b)||C.set(b,{});const $=C.get(b);if($[g]&&(i.remove($[g]),$[g].geometry.dispose(),$[g].material.dispose(),$[g]=null),p){const V=new Yi(D-.1,D,32),se=new wt({color:A,side:Gn,transparent:!0,opacity:.6}),oe=new et(V,se);oe.rotation.x=-Math.PI/2,oe.position.copy(M.object.position),oe.position.y=.01,i.add(oe),$[g]=oe}}const w=new Map,K=b=>{var g;if(u.forEach(p=>{var M;p.type==="copper"&&(p.object.scale.set(1,1,1),p.object.material&&((M=p.object.material.emissive)==null||M.setHex(0)))}),b!==null){const p=u.find(M=>M.id===b);p&&(p.object.scale.set(1.1,1.1,1.1),p.object.material&&((g=p.object.material.emissive)==null||g.setHex(16776960),p.object.material.emissiveIntensity=.3),console.log(`[TestScene] ✨ 高亮铜偶: ${p.name} (ID=${b})`))}},z=(b,g,p)=>{const M=`${b[0]},${b[1]}`;if(w.has(M)){const V=w.get(M);V.material.color.setHex(g),V.userData.type=p;return}const A=new Xi(.9,.9),D=new wt({color:g,side:Gn,transparent:!0,opacity:.6}),$=new et(A,D);$.rotation.x=-Math.PI/2,$.position.set((b[0]-7)*1,.08,(b[1]-7)*1),$.userData={type:p,position:b},i.add($),w.set(M,$)},E=b=>{const g=`${b[0]},${b[1]}`,p=w.get(g);p&&(i.remove(p),w.delete(g))},W=(b,g)=>{var ft;const p=u.find(Je=>Je.id===b);if(!p)return;const M=((ft=p.object.material.emissive)==null?void 0:ft.getHex())||0,A=p.object.material.emissiveIntensity||0;p.object.material.emissive&&(p.object.material.emissive.setHex(16711680),p.object.material.emissiveIntensity=.8,setTimeout(()=>{var Je,ze;(ze=(Je=p.object)==null?void 0:Je.material)!=null&&ze.emissive&&(p.object.material.emissive.setHex(M),p.object.material.emissiveIntensity=A)},500));const D=p.object.position,$=new me((g[0]-7)*1,.4,(g[1]-7)*1),V=[D,$],se=new mi().setFromPoints(V),oe=new fa({color:16729156,linewidth:3,transparent:!0,opacity:.8}),ve=new da(se,oe);i.add(ve);const De=new Yi(.2,.4,32),Ae=new wt({color:16711680,side:Gn,transparent:!0,opacity:.8}),Ye=new et(De,Ae);Ye.rotation.x=-Math.PI/2,Ye.position.copy($),Ye.position.y=.5,i.add(Ye);const Nn=performance.now(),Fn=300;function Ze(){const ze=(performance.now()-Nn)/Fn;if(ze<1){const st=1-ze;oe&&(oe.opacity=st),Ae&&(Ae.opacity=st),Ye.scale.set(1+ze*2,1+ze*2,1),requestAnimationFrame(Ze)}else i.remove(ve),i.remove(Ye),se.dispose(),oe.dispose(),De.dispose(),Ae.dispose()}Ze(),console.log(`[TestScene] 💥 攻击特效: 攻击者ID=${b} → 目标位置${g}`)};we.setSceneContext({scene:i,camera:r,controls:l,models:u,gridCellSize:1,focusState:c,focusOnModel:v,highlightSelectedCopper:K,floorBlocks:w,createAttackEffect:W,onSetMoveBlock:b=>{z(b,4521796,"move"),console.log(`[TestScene] 显示移动范围: ${b}`)},onSetAttackBlock:b=>{z(b,16729156,"attack"),console.log(`[TestScene] 显示攻击范围: ${b}`)},onClearBlock:b=>{E(b)},onSetCopper:(b,g,p)=>{var oe;if(console.log(`[TestScene] 创建铜偶模型: id=${p.id}, pos=${g}`),u.find(ve=>ve.id===p.id)){console.log(`[TestScene] 铜偶ID=${p.id}已存在，跳过`);return}const A=new ln(.8,.8,.8);let D=4491519;switch(p.copper.copper_type){case"IronWall":D=8947848;break;case"Arcanist":D=16729224;break;case"Mechanic":D=4521864;break;case"Resonator":D=16755268;break;case"CraftsMan":D=4474111;break}const $=new qt({color:D}),V=new et(A,$);V.position.set((g[0]-7)*1,.4,(g[1]-7)*1),i.add(V);const se={id:p.id,object:V,name:((oe=p.copper.copper_info)==null?void 0:oe.name)||`Copper_${p.id}`,type:"copper"};u.push(se),console.log(`[TestScene] 铜偶创建成功: ${se.name} (ID=${p.id})`)},onSetEnemy:(b,g,p)=>{console.log(`[TestScene] 创建敌人模型: id=${p.id}, pos=${g}`);const M=new ln(.8,.8,.8),A=new qt({color:16711680}),D=new et(M,A);D.position.set((g[0]-7)*1,.4,(g[1]-7)*1),i.add(D),u.push({id:p.id,object:D,name:`Enemy_${p.id}`,type:"enemy"}),console.log(`[TestScene] 敌人创建成功: Enemy_${p.id}`)},onDisplayCanMove:(b,g)=>{console.log(`[TestScene] 显示可移动状态: id=${b}, show=${g}`),P(b,"move",g)},onDisplayCanAttack:(b,g)=>{console.log(`[TestScene] 显示可攻击状态: id=${b}, show=${g}`),P(b,"attack",g)},onClearState:b=>{if(console.log(`[TestScene] 清除状态: id=${b}`),C.has(b)){const g=C.get(b);g.move&&(i.remove(g.move),g.move.geometry.dispose(),g.move.material.dispose(),g.move=null),g.attack&&(i.remove(g.attack),g.attack.geometry.dispose(),g.attack.material.dispose(),g.attack=null),C.delete(b)}},onPutMapBlock:b=>{const g=`${b[0]},${b[1]}`;if(F.has(g)){const D=F.get(g);i.remove(D),D.geometry.dispose(),D.material.dispose()}const p=new ln(.9,.05,.9),M=new wt({color:8421504}),A=new et(p,M);A.position.set((b[0]-7)*1,.025,(b[1]-7)*1),i.add(A),F.set(g,A)},animateModelMove:(b,g,p)=>{if(!b||!b.object)return;b.isMoving=!0;const M=b.object.position.clone(),A=new me(g.x,g.y,g.z),D=500,$=performance.now();function V(){if(!b||!b.object){p&&p();return}const se=performance.now()-$,oe=Math.min(se/D,1),ve=1-Math.pow(1-oe,2);b.object.position.lerpVectors(M,A,ve),oe<1?requestAnimationFrame(V):(b.object.position.copy(A),b.isMoving=!1,p&&p())}V()},setTestMode:b=>{console.log(`[TestScene] 切换到${b==="backend"?"后端测试":"EventLoop测试"}模式`),u.forEach(g=>{g.type==="test"?g.object.visible=b==="backend":(g.type==="copper"||g.type==="enemy")&&(g.object.visible=b==="eventloop")}),console.log(`[TestScene] 已${b==="backend"?"显示":"隐藏"}测试模型，${b==="eventloop"?"显示":"隐藏"}EventLoop模型`)}}),console.log("[TestScene] 消息队列已配置")}function v(C,F,P){const w=new me(0,0,0);C.localToWorld(w);const z=new ao().setFromObject(C).getSize(new me),E=Math.max(z.x,z.y,z.z),W=F.fov*(Math.PI/180);let b=E/(2*Math.tan(W/2));b=Math.max(b*1.5,2);const g=new me;return F.getWorldDirection(g),g.y=0,g.normalize(),{focusPosition:new me().copy(w).sub(g.clone().multiplyScalar(b)).clone(),focusTarget:w.clone(),lerpFactor:.08}}function T(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)}function S(){requestAnimationFrame(S),c.focusPosition&&c.focusTarget?(r.position.lerp(c.focusPosition,c.lerpFactor),l.target.lerp(c.focusTarget,c.lerpFactor),l.update(),r.position.distanceTo(c.focusPosition)<.01&&l.target.distanceTo(c.focusTarget)<.01&&(c.focusPosition=null,c.focusTarget=null)):l.update(),a.render(i,r)}function k(){o("back")}const N={container:s,emit:o,get scene(){return i},set scene(C){i=C},get camera(){return r},set camera(C){r=C},get renderer(){return a},set renderer(C){a=C},get controls(){return l},set controls(C){l=C},get models(){return u},set models(C){u=C},get focusState(){return c},set focusState(C){c=C},initScene:f,createTestUnits:d,setupMessageQueue:m,focusOnModelFunc:v,onWindowResize:T,animate:S,goBack:k,ref:X,onMounted:Oe,onBeforeUnmount:At,get THREE(){return gi},get OrbitControls(){return na},get messageQueue(){return we},TestPanel:Hl};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},bg={class:"test-scene"},vg={ref:"container",class:"scene-container"};function wg(t,e,n,s,o,i){return q(),Y("div",bg,[_("div",vg,null,512),_("button",{class:"back-btn",onClick:s.goBack,title:"返回主菜单"}," ← 返回 "),Se(s.TestPanel),e[0]||(e[0]=Ls('<div class="info-panel" data-v-b1e811a6><h3 data-v-b1e811a6>3D测试场景</h3><p style="color:#ffd700;font-weight:600;" data-v-b1e811a6>💡 两种测试模式：</p><div style="margin:8px 0;padding:8px;background:rgba(255,255,255,0.1);border-radius:6px;" data-v-b1e811a6><p style="font-weight:600;" data-v-b1e811a6>📌 后端测试（旧）</p><p style="font-size:12px;" data-v-b1e811a6>🟦 蓝色立方体 = ID:1</p><p style="font-size:12px;" data-v-b1e811a6>🟥 红色立方体 = ID:2</p></div><div style="margin:8px 0;padding:8px;background:rgba(255,255,255,0.1);border-radius:6px;" data-v-b1e811a6><p style="font-weight:600;" data-v-b1e811a6>🎮 EventLoop测试（新）</p><p style="font-size:12px;" data-v-b1e811a6>1. 点击🧪 → EventLoop</p><p style="font-size:12px;" data-v-b1e811a6>2. 点击&quot;🎮 游戏开始&quot;</p><p style="font-size:12px;" data-v-b1e811a6>3. 会创建3个新铜偶：</p><p style="font-size:11px;" data-v-b1e811a6>⬜ 灰色=IronWall 🟪 粉红=Arcanist 🟦 蓝色=CraftsMan</p></div></div>',1))])}const Tg=Bt(yg,[["render",wg],["__scopeId","data-v-b1e811a6"],["__file","D:/Project/MGPIC/MGPIC-2025/src/vue/TestScene.vue"]]),Sg={__name:"App",setup(t,{expose:e}){e();const n=X(!1),s=X(null),o=X(!1),i=X(null),r=X([]),a=X(0),l=X(!0),u=X(!1),c=X(!1);let f=null;function d(){const b=!n.value;n.value=b,b?window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__():window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__()}function m(b){s.value!==b&&(r.value.push(s.value),s.value=b),window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__(),n.value=!0}function v(){u.value=!1}function T(){l.value=!1,f&&clearTimeout(f),f=setTimeout(()=>{l.value||(console.log("[App] 销毁StartMenu以释放内存"),c.value=!0)},5*60*1e3)}function S(){s.value=null,r.value=[],window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1}function k(){o.value=!0,n.value=!0}function N(){o.value=!1,s.value||(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),n.value=!1)}function C(){if(o.value){N();return}if(s.value){if(s.value==="warehouse"&&i.value&&i.value.handleBack&&i.value.handleBack())return;const b=r.value.pop()??null;s.value=b,b||(n.value=!1);return}if(!l.value){f&&(clearTimeout(f),f=null),c.value&&(c.value=!1,console.log("[App] 重新创建StartMenu")),l.value=!0,setTimeout(()=>{window.__INIT_THREE_SCENE__?window.__INIT_THREE_SCENE__().then(()=>{window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__()}).catch(()=>{window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__()}):window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__()},100),n.value=!1;return}}const F=X(!0),P=X(null);function w(){F.value=!F.value}function K(){try{const b={version:1,savedAt:Date.now(),payload:{}},g=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),p=document.createElement("a");p.href=URL.createObjectURL(g),p.download="save.json",p.click(),URL.revokeObjectURL(p.href)}catch{}}function z(){try{P.value&&P.value.click()}catch{}}function E(b){try{const g=b.target&&b.target.files&&b.target.files[0];if(!g)return;const p=new FileReader;p.onload=()=>{try{JSON.parse(String(p.result||"{}"))}catch{}b.target.value=""},p.readAsText(g)}catch{}}Oe(()=>{io(b=>{})}),At(()=>{f&&(clearTimeout(f),f=null)});const W={isPaused:n,overlay:s,showSettingsOverlay:o,warehouseRef:i,overlayHistory:r,currentPuppetIndex:a,showStartMenu:l,showTestScene:u,destroyStartMenu:c,get startMenuDestroyTimer(){return f},set startMenuDestroyTimer(b){f=b},togglePause:d,openOverlay:m,closeTestScene:v,onStartMenuStarted:T,closeOverlay:S,openSettings:k,closeSettings:N,goBack:C,musicOn:F,fileInput:P,onToggleMusic:w,onDownloadSave:K,onUploadSave:z,onFileChange:E,ref:X,onMounted:Oe,onBeforeUnmount:At,Hall:Vd,Warehouse:em,TopLeftPanel:om,StartMenu:fm,TestPanel:Hl,TestScene:Tg,get info_subscribe(){return io}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}},xg={class:"stage"},Eg={key:0,style:{position:"relative",width:"100%",height:"100%"}},Cg={key:1,class:"modal"},Pg={class:"modal-title"},Mg={key:2,class:"overlay",style:{"z-index":"30000","align-items":"flex-start","justify-content":"flex-start",background:"rgba(0,0,0,0.25)"}},Ag={class:"settings"},Rg={class:"settings__content"},kg={class:"settings__state"};function Ig(t,e,n,s,o,i){return q(),Y("div",xg,[s.showTestScene?(q(),En(s.TestScene,{key:0,onBack:s.closeTestScene})):Te("",!0),s.showTestScene?Te("",!0):(q(),Y(be,{key:1},[s.destroyStartMenu?Te("",!0):Ge((q(),En(s.StartMenu,{key:0,visible:s.showStartMenu,onStarted:s.onStartMenuStarted},null,8,["visible"])),[[Ol,s.showStartMenu]]),s.showStartMenu?Te("",!0):(q(),En(s.TopLeftPanel,{key:1,onBack:s.goBack,onOpenSettings:s.openSettings})),s.showStartMenu?Te("",!0):(q(),En(s.TestPanel,{key:2,onEnterScene:e[0]||(e[0]=r=>s.showTestScene=!0)})),Se(s.Hall,{onStartGame:e[1]||(e[1]=r=>s.openOverlay("start")),onOpenWarehouse:e[2]||(e[2]=r=>s.openOverlay("warehouse")),onOpenTutorial:e[3]||(e[3]=r=>s.openOverlay("tutorial")),onOpenEncyclopedia:e[4]||(e[4]=r=>s.openOverlay("encyclopedia"))}),s.overlay?(q(),Y("div",{key:3,class:Ie(["overlay",{"overlay--warehouse":s.overlay==="warehouse"}])},[s.overlay==="warehouse"?(q(),Y("div",Eg,[Se(s.TopLeftPanel,{onBack:s.goBack,onOpenSettings:s.openSettings}),Se(s.Warehouse,{ref:"warehouseRef"},null,512)])):(q(),Y("div",Cg,[_("h2",Pg,re(s.overlay==="warehouse"?"铜偶仓库 · Copper Warehouse":s.overlay==="tutorial"?"新手教程 · Tutorial":s.overlay==="encyclopedia"?"游戏百科 · Game Encyclopedia":"开始游戏 · Start Game"),1),e[5]||(e[5]=_("p",{class:"modal-body"},"占位内容（后续替换为实际功能界面）。",-1)),_("button",{class:"close-btn",onClick:s.closeOverlay},"关闭")]))],2)):Te("",!0)],64)),s.showSettingsOverlay?(q(),Y("div",Mg,[_("div",Ag,[_("div",{class:"settings__header"},[e[7]||(e[7]=_("div",{class:"settings__title"},"设置",-1)),_("button",{class:"settings__close",onClick:s.closeSettings,"aria-label":"关闭"},[...e[6]||(e[6]=[_("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[_("path",{d:"M18 6L6 18M6 6l12 12",stroke:"#fff","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),_("div",Rg,[_("button",{class:"settings__item",onClick:s.onToggleMusic},[e[8]||(e[8]=Ls('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M9 18V5l10-2v9" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M9 18a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm10-6a3 3 0 1 1-6 0" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>音乐</span>',2)),_("span",kg,re(s.musicOn?"开":"关"),1)]),_("button",{class:"settings__item",onClick:s.onDownloadSave},[...e[9]||(e[9]=[Ls('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M12 3v12m0 0l-4-4m4 4l4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M4 19h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>下载存档</span>',2)])]),_("button",{class:"settings__item",onClick:s.onUploadSave},[...e[10]||(e[10]=[Ls('<span class="settings__icon" data-v-7a7a37b1><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a7a37b1><path d="M12 21V9m0 0l4 4m-4-4L8 13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7a7a37b1></path><path d="M4 5h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-7a7a37b1></path></svg></span><span class="settings__label" data-v-7a7a37b1>上传存档</span>',2)])]),_("input",{ref:"fileInput",type:"file",accept:".json",onChange:s.onFileChange,style:{display:"none"}},null,544)])])])):Te("",!0)])}const sa=Bt(Sg,[["render",Ig],["__scopeId","data-v-7a7a37b1"],["__file","D:/Project/MGPIC/MGPIC-2025/src/App.vue"]]);function Go(t,e,n,s=""){const o=document.getElementById("progress-bar"),i=document.getElementById("progress-text"),r=document.querySelector(".loading-subtitle");o&&(o.style.width=n+"%"),i&&(t===0&&e===0?i.textContent=`${n}%`:i.textContent=`${t} / ${e} (${n}%)`),r&&s&&(r.textContent=s)}function oa(){const t=document.getElementById("loading-screen");t&&(t.classList.add("fade-out"),setTimeout(()=>{t.style.display="none"},500))}async function Lg(){try{console.log("开始预缓存资源..."),await oo(Go,["high"]),console.log("关键资源预缓存完成！"),Go(0,100,100,"初始化应用界面..."),Vr(sa).mount("#app"),await new Promise(e=>setTimeout(e,200)),window.__INIT_THREE_SCENE__&&await window.__INIT_THREE_SCENE__((e,n,s)=>{Go(0,0,s,`3D场景加载中... ${s}%`)}),console.log("所有初始化完成！"),setTimeout(()=>{oa()},300),setTimeout(async()=>{try{console.log("开始后台预缓存其他资源..."),await oo(null,["medium"]),console.log("后台预缓存完成！")}catch(e){console.warn("后台预缓存失败:",e)}},1e3)}catch(t){console.error("初始化失败:",t),Vr(sa).mount("#app"),oa()}}Lg();
