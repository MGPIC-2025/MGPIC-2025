import{T as ua,a as to,b as cr,L as ar,c as wn,F as cs,M as ft,V as lr,C as bt,d as ut,S as gt,e as fa,P as pa,D as xo,f as as,g as Je,I as da,Q as ur,h as $a,O as fr,i as ha,j as _a,B as vn,k as ma,l as pr,N as ga,m as ba,n as ya,o as no,p as dr,R as so,q as wa,r as va,s as Ta,t as Es,u as Ma,v as Co,w as xa,x as bn,y as Ca,z as $r,A as Sa,E as hr,G as La,H as Aa,J as Ia,K as Ra,U as ks,W as So,X as Ea,Y as ka,Z as Pa,_ as Na,$ as Oa,a0 as Da,a1 as _r,a2 as Ga,a3 as Qo,a4 as ei,a5 as ti,a6 as ni,a7 as oo,a8 as Fa,a9 as Ha,aa as ls,ab as Ua,ac as si,ad as ja,ae as mr,af as gr,ag as br,ah as Ba}from"./three-C2K7cSXS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const le={},en=[],lt=()=>{},yr=()=>!1,ys=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ao=e=>e.startsWith("onUpdate:"),we=Object.assign,Io=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Va=Object.prototype.hasOwnProperty,ie=(e,t)=>Va.call(e,t),W=Array.isArray,tn=e=>ws(e)==="[object Map]",wr=e=>ws(e)==="[object Set]",Y=e=>typeof e=="function",he=e=>typeof e=="string",Gt=e=>typeof e=="symbol",de=e=>e!==null&&typeof e=="object",vr=e=>(de(e)||Y(e))&&Y(e.then)&&Y(e.catch),Tr=Object.prototype.toString,ws=e=>Tr.call(e),Ka=e=>ws(e).slice(8,-1),Mr=e=>ws(e)==="[object Object]",Ro=e=>he(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tn=Lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Wa=/-\w/g,Pt=vs(e=>e.replace(Wa,t=>t.slice(1).toUpperCase())),qa=/\B([A-Z])/g,zt=vs(e=>e.replace(qa,"-$1").toLowerCase()),xr=vs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ps=vs(e=>e?`on${xr(e)}`:""),Et=(e,t)=>!Object.is(e,t),Ns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Cr=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},za=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Xa=e=>{const t=he(e)?Number(e):NaN;return isNaN(t)?e:t};let oi;const Ts=()=>oi||(oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function It(e){if(W(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=he(s)?Qa(s):It(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(he(e)||de(e))return e}const Ja=/;(?![^(]*\))/g,Ya=/:([^]+)/,Za=/\/\*[^]*?\*\//g;function Qa(e){const t={};return e.replace(Za,"").split(Ja).forEach(n=>{if(n){const s=n.split(Ya);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Nt(e){let t="";if(he(e))t=e;else if(W(e))for(let n=0;n<e.length;n++){const s=Nt(e[n]);s&&(t+=s+" ")}else if(de(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const el="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tl=Lo(el);function Sr(e){return!!e||e===""}const Lr=e=>!!(e&&e.__v_isRef===!0),fe=e=>he(e)?e:e==null?"":W(e)||de(e)&&(e.toString===Tr||!Y(e.toString))?Lr(e)?fe(e.value):JSON.stringify(e,Ar,2):String(e),Ar=(e,t)=>Lr(t)?Ar(e,t.value):tn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[Os(s,i)+" =>"]=o,n),{})}:wr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Os(n))}:Gt(t)?Os(t):de(t)&&!W(t)&&!Mr(t)?String(t):t,Os=(e,t="")=>{var n;return Gt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class nl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ee;try{return Ee=this,t()}finally{Ee=n}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function sl(){return Ee}let pe;const Ds=new WeakSet;class Ir{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ds.has(this)&&(Ds.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Er(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ii(this),kr(this);const t=pe,n=Ye;pe=this,Ye=!0;try{return this.fn()}finally{Pr(this),pe=t,Ye=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Po(t);this.deps=this.depsTail=void 0,ii(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ds.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){io(this)&&this.run()}get dirty(){return io(this)}}let Rr=0,Mn,xn;function Er(e,t=!1){if(e.flags|=8,t){e.next=xn,xn=e;return}e.next=Mn,Mn=e}function Eo(){Rr++}function ko(){if(--Rr>0)return;if(xn){let t=xn;for(xn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Mn;){let t=Mn;for(Mn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function kr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pr(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Po(s),ol(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function io(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pn)||(e.globalVersion=Pn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!io(e))))return;e.flags|=2;const t=e.dep,n=pe,s=Ye;pe=e,Ye=!0;try{kr(e);const o=e.fn(e._value);(t.version===0||Et(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{pe=n,Ye=s,Pr(e),e.flags&=-3}}function Po(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Po(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ol(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ye=!0;const Or=[];function yt(){Or.push(Ye),Ye=!1}function wt(){const e=Or.pop();Ye=e===void 0?!0:e}function ii(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=pe;pe=void 0;try{t()}finally{pe=n}}}let Pn=0;class il{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class No{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!pe||!Ye||pe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==pe)n=this.activeLink=new il(pe,this),pe.deps?(n.prevDep=pe.depsTail,pe.depsTail.nextDep=n,pe.depsTail=n):pe.deps=pe.depsTail=n,Dr(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=pe.depsTail,n.nextDep=void 0,pe.depsTail.nextDep=n,pe.depsTail=n,pe.deps===n&&(pe.deps=s)}return n}trigger(t){this.version++,Pn++,this.notify(t)}notify(t){Eo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ko()}}}function Dr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Dr(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ro=new WeakMap,Wt=Symbol(""),co=Symbol(""),Nn=Symbol("");function Te(e,t,n){if(Ye&&pe){let s=ro.get(e);s||ro.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new No),o.map=s,o.key=n),o.track()}}function _t(e,t,n,s,o,i){const r=ro.get(e);if(!r){Pn++;return}const c=a=>{a&&a.trigger()};if(Eo(),t==="clear")r.forEach(c);else{const a=W(e),u=a&&Ro(n);if(a&&n==="length"){const l=Number(s);r.forEach((f,p)=>{(p==="length"||p===Nn||!Gt(p)&&p>=l)&&c(f)})}else switch((n!==void 0||r.has(void 0))&&c(r.get(n)),u&&c(r.get(Nn)),t){case"add":a?u&&c(r.get("length")):(c(r.get(Wt)),tn(e)&&c(r.get(co)));break;case"delete":a||(c(r.get(Wt)),tn(e)&&c(r.get(co)));break;case"set":tn(e)&&c(r.get(Wt));break}}ko()}function Jt(e){const t=oe(e);return t===e?t:(Te(t,"iterate",Nn),Ve(e)?t:t.map(ye))}function Ms(e){return Te(e=oe(e),"iterate",Nn),e}const rl={__proto__:null,[Symbol.iterator](){return Gs(this,Symbol.iterator,ye)},concat(...e){return Jt(this).concat(...e.map(t=>W(t)?Jt(t):t))},entries(){return Gs(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return pt(this,"every",e,t,void 0,arguments)},filter(e,t){return pt(this,"filter",e,t,n=>n.map(ye),arguments)},find(e,t){return pt(this,"find",e,t,ye,arguments)},findIndex(e,t){return pt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return pt(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return pt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return pt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fs(this,"includes",e)},indexOf(...e){return Fs(this,"indexOf",e)},join(e){return Jt(this).join(e)},lastIndexOf(...e){return Fs(this,"lastIndexOf",e)},map(e,t){return pt(this,"map",e,t,void 0,arguments)},pop(){return pn(this,"pop")},push(...e){return pn(this,"push",e)},reduce(e,...t){return ri(this,"reduce",e,t)},reduceRight(e,...t){return ri(this,"reduceRight",e,t)},shift(){return pn(this,"shift")},some(e,t){return pt(this,"some",e,t,void 0,arguments)},splice(...e){return pn(this,"splice",e)},toReversed(){return Jt(this).toReversed()},toSorted(e){return Jt(this).toSorted(e)},toSpliced(...e){return Jt(this).toSpliced(...e)},unshift(...e){return pn(this,"unshift",e)},values(){return Gs(this,"values",ye)}};function Gs(e,t,n){const s=Ms(e),o=s[t]();return s!==e&&!Ve(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const cl=Array.prototype;function pt(e,t,n,s,o,i){const r=Ms(e),c=r!==e&&!Ve(e),a=r[t];if(a!==cl[t]){const f=a.apply(e,i);return c?ye(f):f}let u=n;r!==e&&(c?u=function(f,p){return n.call(this,ye(f),p,e)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,e)}));const l=a.call(r,u,s);return c&&o?o(l):l}function ri(e,t,n,s){const o=Ms(e);let i=n;return o!==e&&(Ve(e)?n.length>3&&(i=function(r,c,a){return n.call(this,r,c,a,e)}):i=function(r,c,a){return n.call(this,r,ye(c),a,e)}),o[t](i,...s)}function Fs(e,t,n){const s=oe(e);Te(s,"iterate",Nn);const o=s[t](...n);return(o===-1||o===!1)&&Fo(n[0])?(n[0]=oe(n[0]),s[t](...n)):o}function pn(e,t,n=[]){yt(),Eo();const s=oe(e)[t].apply(e,n);return ko(),wt(),s}const al=Lo("__proto__,__v_isRef,__isVue"),Gr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gt));function ll(e){Gt(e)||(e=String(e));const t=oe(this);return Te(t,"has",e),t.hasOwnProperty(e)}class Fr{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?bl:Br:i?jr:Ur).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=W(t);if(!o){let a;if(r&&(a=rl[n]))return a;if(n==="hasOwnProperty")return ll}const c=Reflect.get(t,n,Me(t)?t:s);if((Gt(n)?Gr.has(n):al(n))||(o||Te(t,"get",n),i))return c;if(Me(c)){const a=r&&Ro(n)?c:c.value;return o&&de(a)?lo(a):a}return de(c)?o?lo(c):Do(c):c}}class Hr extends Fr{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];if(!this._isShallow){const a=Ot(i);if(!Ve(s)&&!Ot(s)&&(i=oe(i),s=oe(s)),!W(t)&&Me(i)&&!Me(s))return a||(i.value=s),!0}const r=W(t)&&Ro(n)?Number(n)<t.length:ie(t,n),c=Reflect.set(t,n,s,Me(t)?t:o);return t===oe(o)&&(r?Et(s,i)&&_t(t,"set",n,s):_t(t,"add",n,s)),c}deleteProperty(t,n){const s=ie(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&_t(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!Gt(n)||!Gr.has(n))&&Te(t,"has",n),s}ownKeys(t){return Te(t,"iterate",W(t)?"length":Wt),Reflect.ownKeys(t)}}class ul extends Fr{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const fl=new Hr,pl=new ul,dl=new Hr(!0);const ao=e=>e,Wn=e=>Reflect.getPrototypeOf(e);function $l(e,t,n){return function(...s){const o=this.__v_raw,i=oe(o),r=tn(i),c=e==="entries"||e===Symbol.iterator&&r,a=e==="keys"&&r,u=o[e](...s),l=n?ao:t?us:ye;return!t&&Te(i,"iterate",a?co:Wt),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:c?[l(f[0]),l(f[1])]:l(f),done:p}},[Symbol.iterator](){return this}}}}function qn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function hl(e,t){const n={get(o){const i=this.__v_raw,r=oe(i),c=oe(o);e||(Et(o,c)&&Te(r,"get",o),Te(r,"get",c));const{has:a}=Wn(r),u=t?ao:e?us:ye;if(a.call(r,o))return u(i.get(o));if(a.call(r,c))return u(i.get(c));i!==r&&i.get(o)},get size(){const o=this.__v_raw;return!e&&Te(oe(o),"iterate",Wt),o.size},has(o){const i=this.__v_raw,r=oe(i),c=oe(o);return e||(Et(o,c)&&Te(r,"has",o),Te(r,"has",c)),o===c?i.has(o):i.has(o)||i.has(c)},forEach(o,i){const r=this,c=r.__v_raw,a=oe(c),u=t?ao:e?us:ye;return!e&&Te(a,"iterate",Wt),c.forEach((l,f)=>o.call(i,u(l),u(f),r))}};return we(n,e?{add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear")}:{add(o){!t&&!Ve(o)&&!Ot(o)&&(o=oe(o));const i=oe(this);return Wn(i).has.call(i,o)||(i.add(o),_t(i,"add",o,o)),this},set(o,i){!t&&!Ve(i)&&!Ot(i)&&(i=oe(i));const r=oe(this),{has:c,get:a}=Wn(r);let u=c.call(r,o);u||(o=oe(o),u=c.call(r,o));const l=a.call(r,o);return r.set(o,i),u?Et(i,l)&&_t(r,"set",o,i):_t(r,"add",o,i),this},delete(o){const i=oe(this),{has:r,get:c}=Wn(i);let a=r.call(i,o);a||(o=oe(o),a=r.call(i,o)),c&&c.call(i,o);const u=i.delete(o);return a&&_t(i,"delete",o,void 0),u},clear(){const o=oe(this),i=o.size!==0,r=o.clear();return i&&_t(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=$l(o,e,t)}),n}function Oo(e,t){const n=hl(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(ie(n,o)&&o in s?n:s,o,i)}const _l={get:Oo(!1,!1)},ml={get:Oo(!1,!0)},gl={get:Oo(!0,!1)};const Ur=new WeakMap,jr=new WeakMap,Br=new WeakMap,bl=new WeakMap;function yl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wl(e){return e.__v_skip||!Object.isExtensible(e)?0:yl(Ka(e))}function Do(e){return Ot(e)?e:Go(e,!1,fl,_l,Ur)}function vl(e){return Go(e,!1,dl,ml,jr)}function lo(e){return Go(e,!0,pl,gl,Br)}function Go(e,t,n,s,o){if(!de(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=wl(e);if(i===0)return e;const r=o.get(e);if(r)return r;const c=new Proxy(e,i===2?s:n);return o.set(e,c),c}function nn(e){return Ot(e)?nn(e.__v_raw):!!(e&&e.__v_isReactive)}function Ot(e){return!!(e&&e.__v_isReadonly)}function Ve(e){return!!(e&&e.__v_isShallow)}function Fo(e){return e?!!e.__v_raw:!1}function oe(e){const t=e&&e.__v_raw;return t?oe(t):e}function Tl(e){return!ie(e,"__v_skip")&&Object.isExtensible(e)&&Cr(e,"__v_skip",!0),e}const ye=e=>de(e)?Do(e):e,us=e=>de(e)?lo(e):e;function Me(e){return e?e.__v_isRef===!0:!1}function Q(e){return Ml(e,!1)}function Ml(e,t){return Me(e)?e:new xl(e,t)}class xl{constructor(t,n){this.dep=new No,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:oe(t),this._value=n?t:ye(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Ve(t)||Ot(t);t=s?t:oe(t),Et(t,n)&&(this._rawValue=t,this._value=s?t:ye(t),this.dep.trigger())}}function Cn(e){return Me(e)?e.value:e}const Cl={get:(e,t,n)=>t==="__v_raw"?e:Cn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Me(o)&&!Me(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Vr(e){return nn(e)?e:new Proxy(e,Cl)}class Sl{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new No(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&pe!==this)return Er(this,!0),!0}get value(){const t=this.dep.track();return Nr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ll(e,t,n=!1){let s,o;return Y(e)?s=e:(s=e.get,o=e.set),new Sl(s,o,n)}const zn={},fs=new WeakMap;let Vt;function Al(e,t=!1,n=Vt){if(n){let s=fs.get(n);s||fs.set(n,s=[]),s.push(e)}}function Il(e,t,n=le){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:c,call:a}=n,u=_=>o?_:Ve(_)||o===!1||o===0?mt(_,1):mt(_);let l,f,p,$,y=!1,x=!1;if(Me(e)?(f=()=>e.value,y=Ve(e)):nn(e)?(f=()=>u(e),y=!0):W(e)?(x=!0,y=e.some(_=>nn(_)||Ve(_)),f=()=>e.map(_=>{if(Me(_))return _.value;if(nn(_))return u(_);if(Y(_))return a?a(_,2):_()})):Y(e)?t?f=a?()=>a(e,2):e:f=()=>{if(p){yt();try{p()}finally{wt()}}const _=Vt;Vt=l;try{return a?a(e,3,[$]):e($)}finally{Vt=_}}:f=lt,t&&o){const _=f,w=o===!0?1/0:o;f=()=>mt(_(),w)}const C=sl(),L=()=>{l.stop(),C&&C.active&&Io(C.effects,l)};if(i&&t){const _=t;t=(...w)=>{_(...w),L()}}let g=x?new Array(e.length).fill(zn):zn;const h=_=>{if(!(!(l.flags&1)||!l.dirty&&!_))if(t){const w=l.run();if(o||y||(x?w.some((A,T)=>Et(A,g[T])):Et(w,g))){p&&p();const A=Vt;Vt=l;try{const T=[w,g===zn?void 0:x&&g[0]===zn?[]:g,$];g=w,a?a(t,3,T):t(...T)}finally{Vt=A}}}else l.run()};return c&&c(h),l=new Ir(f),l.scheduler=r?()=>r(h,!1):h,$=_=>Al(_,!1,l),p=l.onStop=()=>{const _=fs.get(l);if(_){if(a)a(_,4);else for(const w of _)w();fs.delete(l)}},t?s?h(!0):g=l.run():r?r(h.bind(null,!0),!0):l.run(),L.pause=l.pause.bind(l),L.resume=l.resume.bind(l),L.stop=L,L}function mt(e,t=1/0,n){if(t<=0||!de(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Me(e))mt(e.value,t,n);else if(W(e))for(let s=0;s<e.length;s++)mt(e[s],t,n);else if(wr(e)||tn(e))e.forEach(s=>{mt(s,t,n)});else if(Mr(e)){for(const s in e)mt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&mt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vn(e,t,n,s){try{return s?e(...s):e()}catch(o){xs(o,t,n)}}function Ze(e,t,n,s){if(Y(e)){const o=Vn(e,t,n,s);return o&&vr(o)&&o.catch(i=>{xs(i,t,n)}),o}if(W(e)){const o=[];for(let i=0;i<e.length;i++)o.push(Ze(e[i],t,n,s));return o}}function xs(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||le;if(t){let c=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const l=c.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](e,a,u)===!1)return}c=c.parent}if(i){yt(),Vn(i,null,10,[e,a,u]),wt();return}}Rl(e,n,o,s,r)}function Rl(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const Ce=[];let rt=-1;const sn=[];let Lt=null,Yt=0;const Kr=Promise.resolve();let ps=null;function On(e){const t=ps||Kr;return e?t.then(this?e.bind(this):e):t}function El(e){let t=rt+1,n=Ce.length;for(;t<n;){const s=t+n>>>1,o=Ce[s],i=Dn(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function Ho(e){if(!(e.flags&1)){const t=Dn(e),n=Ce[Ce.length-1];!n||!(e.flags&2)&&t>=Dn(n)?Ce.push(e):Ce.splice(El(t),0,e),e.flags|=1,Wr()}}function Wr(){ps||(ps=Kr.then(zr))}function kl(e){W(e)?sn.push(...e):Lt&&e.id===-1?Lt.splice(Yt+1,0,e):e.flags&1||(sn.push(e),e.flags|=1),Wr()}function ci(e,t,n=rt+1){for(;n<Ce.length;n++){const s=Ce[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ce.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function qr(e){if(sn.length){const t=[...new Set(sn)].sort((n,s)=>Dn(n)-Dn(s));if(sn.length=0,Lt){Lt.push(...t);return}for(Lt=t,Yt=0;Yt<Lt.length;Yt++){const n=Lt[Yt];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,Yt=0}}const Dn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zr(e){try{for(rt=0;rt<Ce.length;rt++){const t=Ce[rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Vn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;rt<Ce.length;rt++){const t=Ce[rt];t&&(t.flags&=-2)}rt=-1,Ce.length=0,qr(),ps=null,(Ce.length||sn.length)&&zr()}}let Be=null,Xr=null;function ds(e){const t=Be;return Be=e,Xr=e&&e.type.__scopeId||null,t}function Jr(e,t=Be,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&_s(-1);const i=ds(t);let r;try{r=e(...o)}finally{ds(i),s._d&&_s(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function Yr(e,t){if(Be===null)return e;const n=Rs(Be),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,r,c,a=le]=t[o];i&&(Y(i)&&(i={mounted:i,updated:i}),i.deep&&mt(r),s.push({dir:i,instance:n,value:r,oldValue:void 0,arg:c,modifiers:a}))}return e}function Ft(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const c=o[r];i&&(c.oldValue=i[r].value);let a=c.dir[s];a&&(yt(),Ze(a,n,8,[e.el,c,e,t]),wt())}}const Pl=Symbol("_vte"),Zr=e=>e.__isTeleport,ht=Symbol("_leaveCb"),Xn=Symbol("_enterCb");function Nl(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qt(()=>{e.isMounted=!0}),Ls(()=>{e.isUnmounting=!0}),e}const He=[Function,Array],Qr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:He,onEnter:He,onAfterEnter:He,onEnterCancelled:He,onBeforeLeave:He,onLeave:He,onAfterLeave:He,onLeaveCancelled:He,onBeforeAppear:He,onAppear:He,onAfterAppear:He,onAppearCancelled:He},ec=e=>{const t=e.subTree;return t.component?ec(t.component):t},Ol={name:"BaseTransition",props:Qr,setup(e,{slots:t}){const n=Cc(),s=Nl();return()=>{const o=t.default&&sc(t.default(),!0);if(!o||!o.length)return;const i=tc(o),r=oe(e),{mode:c}=r;if(s.isLeaving)return Hs(i);const a=ai(i);if(!a)return Hs(i);let u=uo(a,r,s,n,f=>u=f);a.type!==Se&&Gn(a,u);let l=n.subTree&&ai(n.subTree);if(l&&l.type!==Se&&!Kt(l,a)&&ec(n).type!==Se){let f=uo(l,r,s,n);if(Gn(l,f),c==="out-in"&&a.type!==Se)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,l=void 0},Hs(i);c==="in-out"&&a.type!==Se?f.delayLeave=(p,$,y)=>{const x=nc(s,l);x[String(l.key)]=l,p[ht]=()=>{$(),p[ht]=void 0,delete u.delayedLeave,l=void 0},u.delayedLeave=()=>{y(),delete u.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return i}}};function tc(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Se){t=n;break}}return t}const Dl=Ol;function nc(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function uo(e,t,n,s,o){const{appear:i,mode:r,persisted:c=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:p,onLeave:$,onAfterLeave:y,onLeaveCancelled:x,onBeforeAppear:C,onAppear:L,onAfterAppear:g,onAppearCancelled:h}=t,_=String(e.key),w=nc(n,e),A=(S,P)=>{S&&Ze(S,s,9,P)},T=(S,P)=>{const U=P[1];A(S,P),W(S)?S.every(R=>R.length<=1)&&U():S.length<=1&&U()},I={mode:r,persisted:c,beforeEnter(S){let P=a;if(!n.isMounted)if(i)P=C||a;else return;S[ht]&&S[ht](!0);const U=w[_];U&&Kt(e,U)&&U.el[ht]&&U.el[ht](),A(P,[S])},enter(S){let P=u,U=l,R=f;if(!n.isMounted)if(i)P=L||u,U=g||l,R=h||f;else return;let j=!1;const K=S[Xn]=q=>{j||(j=!0,q?A(R,[S]):A(U,[S]),I.delayedLeave&&I.delayedLeave(),S[Xn]=void 0)};P?T(P,[S,K]):K()},leave(S,P){const U=String(e.key);if(S[Xn]&&S[Xn](!0),n.isUnmounting)return P();A(p,[S]);let R=!1;const j=S[ht]=K=>{R||(R=!0,P(),K?A(x,[S]):A(y,[S]),S[ht]=void 0,w[U]===e&&delete w[U])};w[U]=e,$?T($,[S,j]):j()},clone(S){const P=uo(S,t,n,s,o);return o&&o(P),P}};return I}function Hs(e){if(Cs(e))return e=Dt(e),e.children=null,e}function ai(e){if(!Cs(e))return Zr(e.type)&&e.children?tc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Y(n.default))return n.default()}}function Gn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Gn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sc(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let r=e[i];const c=n==null?r.key:String(n)+String(r.key!=null?r.key:i);r.type===De?(r.patchFlag&128&&o++,s=s.concat(sc(r.children,t,c))):(t||r.type!==Se)&&s.push(c!=null?Dt(r,{key:c}):r)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function oc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const $s=new WeakMap;function Sn(e,t,n,s,o=!1){if(W(e)){e.forEach((y,x)=>Sn(y,t&&(W(t)?t[x]:t),n,s,o));return}if(Ln(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Sn(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Rs(s.component):s.el,r=o?null:i,{i:c,r:a}=e,u=t&&t.r,l=c.refs===le?c.refs={}:c.refs,f=c.setupState,p=oe(f),$=f===le?yr:y=>ie(p,y);if(u!=null&&u!==a){if(li(t),he(u))l[u]=null,$(u)&&(f[u]=null);else if(Me(u)){u.value=null;const y=t;y.k&&(l[y.k]=null)}}if(Y(a))Vn(a,c,12,[r,l]);else{const y=he(a),x=Me(a);if(y||x){const C=()=>{if(e.f){const L=y?$(a)?f[a]:l[a]:a.value;if(o)W(L)&&Io(L,i);else if(W(L))L.includes(i)||L.push(i);else if(y)l[a]=[i],$(a)&&(f[a]=l[a]);else{const g=[i];a.value=g,e.k&&(l[e.k]=g)}}else y?(l[a]=r,$(a)&&(f[a]=r)):x&&(a.value=r,e.k&&(l[e.k]=r))};if(r){const L=()=>{C(),$s.delete(e)};L.id=-1,$s.set(e,L),Oe(L,n)}else li(e),C()}}}function li(e){const t=$s.get(e);t&&(t.flags|=8,$s.delete(e))}Ts().requestIdleCallback;Ts().cancelIdleCallback;const Ln=e=>!!e.type.__asyncLoader,Cs=e=>e.type.__isKeepAlive;function Gl(e,t){ic(e,"a",t)}function Fl(e,t){ic(e,"da",t)}function ic(e,t,n=Le){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ss(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Cs(o.parent.vnode)&&Hl(s,t,n,o),o=o.parent}}function Hl(e,t,n,s){const o=Ss(t,e,s,!0);rc(()=>{Io(s[t],o)},n)}function Ss(e,t,n=Le,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{yt();const c=Kn(n),a=Ze(t,n,e,r);return c(),wt(),a});return s?o.unshift(i):o.push(i),i}}const vt=e=>(t,n=Le)=>{(!Hn||e==="sp")&&Ss(e,(...s)=>t(...s),n)},Ul=vt("bm"),qt=vt("m"),jl=vt("bu"),Bl=vt("u"),Ls=vt("bum"),rc=vt("um"),Vl=vt("sp"),Kl=vt("rtg"),Wl=vt("rtc");function ql(e,t=Le){Ss("ec",e,t)}const zl=Symbol.for("v-ndc");function Us(e,t,n,s){let o;const i=n,r=W(e);if(r||he(e)){const c=r&&nn(e);let a=!1,u=!1;c&&(a=!Ve(e),u=Ot(e),e=Ms(e)),o=new Array(e.length);for(let l=0,f=e.length;l<f;l++)o[l]=t(a?u?us(ye(e[l])):ye(e[l]):e[l],l,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,i)}else if(de(e))if(e[Symbol.iterator])o=Array.from(e,(c,a)=>t(c,a,void 0,i));else{const c=Object.keys(e);o=new Array(c.length);for(let a=0,u=c.length;a<u;a++){const l=c[a];o[a]=t(e[l],l,a,i)}}else o=[];return o}const fo=e=>e?Sc(e)?Rs(e):fo(e.parent):null,An=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fo(e.parent),$root:e=>fo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ac(e),$forceUpdate:e=>e.f||(e.f=()=>{Ho(e.update)}),$nextTick:e=>e.n||(e.n=On.bind(e.proxy)),$watch:e=>_u.bind(e)}),js=(e,t)=>e!==le&&!e.__isScriptSetup&&ie(e,t),Xl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:c,appContext:a}=e;let u;if(t[0]!=="$"){const $=r[t];if($!==void 0)switch($){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(js(s,t))return r[t]=1,s[t];if(o!==le&&ie(o,t))return r[t]=2,o[t];if((u=e.propsOptions[0])&&ie(u,t))return r[t]=3,i[t];if(n!==le&&ie(n,t))return r[t]=4,n[t];po&&(r[t]=0)}}const l=An[t];let f,p;if(l)return t==="$attrs"&&Te(e.attrs,"get",""),l(e);if((f=c.__cssModules)&&(f=f[t]))return f;if(n!==le&&ie(n,t))return r[t]=4,n[t];if(p=a.config.globalProperties,ie(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return js(o,t)?(o[t]=n,!0):s!==le&&ie(s,t)?(s[t]=n,!0):ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i,type:r}},c){let a,u;return!!(n[c]||e!==le&&c[0]!=="$"&&ie(e,c)||js(t,c)||(a=i[0])&&ie(a,c)||ie(s,c)||ie(An,c)||ie(o.config.globalProperties,c)||(u=r.__cssModules)&&u[c])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ui(e){return W(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let po=!0;function Jl(e){const t=ac(e),n=e.proxy,s=e.ctx;po=!1,t.beforeCreate&&fi(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:r,watch:c,provide:a,inject:u,created:l,beforeMount:f,mounted:p,beforeUpdate:$,updated:y,activated:x,deactivated:C,beforeDestroy:L,beforeUnmount:g,destroyed:h,unmounted:_,render:w,renderTracked:A,renderTriggered:T,errorCaptured:I,serverPrefetch:S,expose:P,inheritAttrs:U,components:R,directives:j,filters:K}=t;if(u&&Yl(u,s,null),r)for(const X in r){const J=r[X];Y(J)&&(s[X]=J.bind(n))}if(o){const X=o.call(n,n);de(X)&&(e.data=Do(X))}if(po=!0,i)for(const X in i){const J=i[X],$e=Y(J)?J.bind(n,n):Y(J.get)?J.get.bind(n,n):lt,Ae=!Y(J)&&Y(J.set)?J.set.bind(n):lt,ge=Du({get:$e,set:Ae});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>ge.value,set:be=>ge.value=be})}if(c)for(const X in c)cc(c[X],s,n,X);if(a){const X=Y(a)?a.call(n):a;Reflect.ownKeys(X).forEach(J=>{su(J,X[J])})}l&&fi(l,e,"c");function Z(X,J){W(J)?J.forEach($e=>X($e.bind(n))):J&&X(J.bind(n))}if(Z(Ul,f),Z(qt,p),Z(jl,$),Z(Bl,y),Z(Gl,x),Z(Fl,C),Z(ql,I),Z(Wl,A),Z(Kl,T),Z(Ls,g),Z(rc,_),Z(Vl,S),W(P))if(P.length){const X=e.exposed||(e.exposed={});P.forEach(J=>{Object.defineProperty(X,J,{get:()=>n[J],set:$e=>n[J]=$e,enumerable:!0})})}else e.exposed||(e.exposed={});w&&e.render===lt&&(e.render=w),U!=null&&(e.inheritAttrs=U),R&&(e.components=R),j&&(e.directives=j),S&&oc(e)}function Yl(e,t,n=lt){W(e)&&(e=$o(e));for(const s in e){const o=e[s];let i;de(o)?"default"in o?i=es(o.from||s,o.default,!0):i=es(o.from||s):i=es(o),Me(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[s]=i}}function fi(e,t,n){Ze(W(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function cc(e,t,n,s){let o=s.includes(".")?wc(n,s):()=>n[s];if(he(e)){const i=t[e];Y(i)&&ts(o,i)}else if(Y(e))ts(o,e.bind(n));else if(de(e))if(W(e))e.forEach(i=>cc(i,t,n,s));else{const i=Y(e.handler)?e.handler.bind(n):t[e.handler];Y(i)&&ts(o,i,e)}}function ac(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,c=i.get(t);let a;return c?a=c:!o.length&&!n&&!s?a=t:(a={},o.length&&o.forEach(u=>hs(a,u,r,!0)),hs(a,t,r)),de(t)&&i.set(t,a),a}function hs(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&hs(e,i,n,!0),o&&o.forEach(r=>hs(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const c=Zl[r]||n&&n[r];e[r]=c?c(e[r],t[r]):t[r]}return e}const Zl={data:pi,props:di,emits:di,methods:yn,computed:yn,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:yn,directives:yn,watch:eu,provide:pi,inject:Ql};function pi(e,t){return t?e?function(){return we(Y(e)?e.call(this,this):e,Y(t)?t.call(this,this):t)}:t:e}function Ql(e,t){return yn($o(e),$o(t))}function $o(e){if(W(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xe(e,t){return e?[...new Set([].concat(e,t))]:t}function yn(e,t){return e?we(Object.create(null),e,t):t}function di(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:we(Object.create(null),ui(e),ui(t??{})):t}function eu(e,t){if(!e)return t;if(!t)return e;const n=we(Object.create(null),e);for(const s in t)n[s]=xe(e[s],t[s]);return n}function lc(){return{app:null,config:{isNativeTag:yr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tu=0;function nu(e,t){return function(s,o=null){Y(s)||(s=we({},s)),o!=null&&!de(o)&&(o=null);const i=lc(),r=new WeakSet,c=[];let a=!1;const u=i.app={_uid:tu++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:Fu,get config(){return i.config},set config(l){},use(l,...f){return r.has(l)||(l&&Y(l.install)?(r.add(l),l.install(u,...f)):Y(l)&&(r.add(l),l(u,...f))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,f){return f?(i.components[l]=f,u):i.components[l]},directive(l,f){return f?(i.directives[l]=f,u):i.directives[l]},mount(l,f,p){if(!a){const $=u._ceVNode||_e(s,o);return $.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),e($,l,p),a=!0,u._container=l,l.__vue_app__=u,Rs($.component)}},onUnmount(l){c.push(l)},unmount(){a&&(Ze(c,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(l,f){return i.provides[l]=f,u},runWithContext(l){const f=on;on=u;try{return l()}finally{on=f}}};return u}}let on=null;function su(e,t){if(Le){let n=Le.provides;const s=Le.parent&&Le.parent.provides;s===n&&(n=Le.provides=Object.create(s)),n[e]=t}}function es(e,t,n=!1){const s=Cc();if(s||on){let o=on?on._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Y(t)?t.call(s&&s.proxy):t}}const uc={},fc=()=>Object.create(uc),pc=e=>Object.getPrototypeOf(e)===uc;function ou(e,t,n,s=!1){const o={},i=fc();e.propsDefaults=Object.create(null),dc(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:vl(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function iu(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,c=oe(o),[a]=e.propsOptions;let u=!1;if((s||r>0)&&!(r&16)){if(r&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let p=l[f];if(As(e.emitsOptions,p))continue;const $=t[p];if(a)if(ie(i,p))$!==i[p]&&(i[p]=$,u=!0);else{const y=Pt(p);o[y]=ho(a,c,y,$,e,!1)}else $!==i[p]&&(i[p]=$,u=!0)}}}else{dc(e,t,o,i)&&(u=!0);let l;for(const f in c)(!t||!ie(t,f)&&((l=zt(f))===f||!ie(t,l)))&&(a?n&&(n[f]!==void 0||n[l]!==void 0)&&(o[f]=ho(a,c,f,void 0,e,!0)):delete o[f]);if(i!==c)for(const f in i)(!t||!ie(t,f))&&(delete i[f],u=!0)}u&&_t(e.attrs,"set","")}function dc(e,t,n,s){const[o,i]=e.propsOptions;let r=!1,c;if(t)for(let a in t){if(Tn(a))continue;const u=t[a];let l;o&&ie(o,l=Pt(a))?!i||!i.includes(l)?n[l]=u:(c||(c={}))[l]=u:As(e.emitsOptions,a)||(!(a in s)||u!==s[a])&&(s[a]=u,r=!0)}if(i){const a=oe(n),u=c||le;for(let l=0;l<i.length;l++){const f=i[l];n[f]=ho(o,a,f,u[f],e,!ie(u,f))}}return r}function ho(e,t,n,s,o,i){const r=e[n];if(r!=null){const c=ie(r,"default");if(c&&s===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&Y(a)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const l=Kn(o);s=u[n]=a.call(null,t),l()}}else s=a;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!c?s=!1:r[1]&&(s===""||s===zt(n))&&(s=!0))}return s}const ru=new WeakMap;function $c(e,t,n=!1){const s=n?ru:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,r={},c=[];let a=!1;if(!Y(e)){const l=f=>{a=!0;const[p,$]=$c(f,t,!0);we(r,p),$&&c.push(...$)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!i&&!a)return de(e)&&s.set(e,en),en;if(W(i))for(let l=0;l<i.length;l++){const f=Pt(i[l]);$i(f)&&(r[f]=le)}else if(i)for(const l in i){const f=Pt(l);if($i(f)){const p=i[l],$=r[f]=W(p)||Y(p)?{type:p}:we({},p),y=$.type;let x=!1,C=!0;if(W(y))for(let L=0;L<y.length;++L){const g=y[L],h=Y(g)&&g.name;if(h==="Boolean"){x=!0;break}else h==="String"&&(C=!1)}else x=Y(y)&&y.name==="Boolean";$[0]=x,$[1]=C,(x||ie($,"default"))&&c.push(f)}}const u=[r,c];return de(e)&&s.set(e,u),u}function $i(e){return e[0]!=="$"&&!Tn(e)}const Uo=e=>e==="_"||e==="_ctx"||e==="$stable",jo=e=>W(e)?e.map(at):[at(e)],cu=(e,t,n)=>{if(t._n)return t;const s=Jr((...o)=>jo(t(...o)),n);return s._c=!1,s},hc=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Uo(o))continue;const i=e[o];if(Y(i))t[o]=cu(o,i,s);else if(i!=null){const r=jo(i);t[o]=()=>r}}},_c=(e,t)=>{const n=jo(t);e.slots.default=()=>n},mc=(e,t,n)=>{for(const s in t)(n||!Uo(s))&&(e[s]=t[s])},au=(e,t,n)=>{const s=e.slots=fc();if(e.vnode.shapeFlag&32){const o=t._;o?(mc(s,t,n),n&&Cr(s,"_",o,!0)):hc(t,s)}else t&&_c(e,t)},lu=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,r=le;if(s.shapeFlag&32){const c=t._;c?n&&c===1?i=!1:mc(o,t,n):(i=!t.$stable,hc(t,o)),r=t}else t&&(_c(e,t),r={default:1});if(i)for(const c in o)!Uo(c)&&r[c]==null&&delete o[c]},Oe=Mu;function uu(e){return fu(e)}function fu(e,t){const n=Ts();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:r,createText:c,createComment:a,setText:u,setElementText:l,parentNode:f,nextSibling:p,setScopeId:$=lt,insertStaticContent:y}=e,x=(d,m,M,O=null,k=null,E=null,F=void 0,G=null,D=!!m.dynamicChildren)=>{if(d===m)return;d&&!Kt(d,m)&&(O=Fe(d),be(d,k,E,!0),d=null),m.patchFlag===-2&&(D=!1,m.dynamicChildren=null);const{type:N,ref:V,shapeFlag:H}=m;switch(N){case Is:C(d,m,M,O);break;case Se:L(d,m,M,O);break;case ns:d==null&&g(m,M,O,F);break;case De:R(d,m,M,O,k,E,F,G,D);break;default:H&1?w(d,m,M,O,k,E,F,G,D):H&6?j(d,m,M,O,k,E,F,G,D):(H&64||H&128)&&N.process(d,m,M,O,k,E,F,G,D,Pe)}V!=null&&k?Sn(V,d&&d.ref,E,m||d,!m):V==null&&d&&d.ref!=null&&Sn(d.ref,null,E,d,!0)},C=(d,m,M,O)=>{if(d==null)s(m.el=c(m.children),M,O);else{const k=m.el=d.el;m.children!==d.children&&u(k,m.children)}},L=(d,m,M,O)=>{d==null?s(m.el=a(m.children||""),M,O):m.el=d.el},g=(d,m,M,O)=>{[d.el,d.anchor]=y(d.children,m,M,O,d.el,d.anchor)},h=({el:d,anchor:m},M,O)=>{let k;for(;d&&d!==m;)k=p(d),s(d,M,O),d=k;s(m,M,O)},_=({el:d,anchor:m})=>{let M;for(;d&&d!==m;)M=p(d),o(d),d=M;o(m)},w=(d,m,M,O,k,E,F,G,D)=>{m.type==="svg"?F="svg":m.type==="math"&&(F="mathml"),d==null?A(m,M,O,k,E,F,G,D):S(d,m,k,E,F,G,D)},A=(d,m,M,O,k,E,F,G)=>{let D,N;const{props:V,shapeFlag:H,transition:B,dirs:z}=d;if(D=d.el=r(d.type,E,V&&V.is,V),H&8?l(D,d.children):H&16&&I(d.children,D,null,O,k,Bs(d,E),F,G),z&&Ft(d,null,O,"created"),T(D,d,d.scopeId,F,O),V){for(const ue in V)ue!=="value"&&!Tn(ue)&&i(D,ue,null,V[ue],E,O);"value"in V&&i(D,"value",null,V.value,E),(N=V.onVnodeBeforeMount)&&it(N,O,d)}z&&Ft(d,null,O,"beforeMount");const te=pu(k,B);te&&B.beforeEnter(D),s(D,m,M),((N=V&&V.onVnodeMounted)||te||z)&&Oe(()=>{N&&it(N,O,d),te&&B.enter(D),z&&Ft(d,null,O,"mounted")},k)},T=(d,m,M,O,k)=>{if(M&&$(d,M),O)for(let E=0;E<O.length;E++)$(d,O[E]);if(k){let E=k.subTree;if(m===E||Tc(E.type)&&(E.ssContent===m||E.ssFallback===m)){const F=k.vnode;T(d,F,F.scopeId,F.slotScopeIds,k.parent)}}},I=(d,m,M,O,k,E,F,G,D=0)=>{for(let N=D;N<d.length;N++){const V=d[N]=G?At(d[N]):at(d[N]);x(null,V,m,M,O,k,E,F,G)}},S=(d,m,M,O,k,E,F)=>{const G=m.el=d.el;let{patchFlag:D,dynamicChildren:N,dirs:V}=m;D|=d.patchFlag&16;const H=d.props||le,B=m.props||le;let z;if(M&&Ht(M,!1),(z=B.onVnodeBeforeUpdate)&&it(z,M,m,d),V&&Ft(m,d,M,"beforeUpdate"),M&&Ht(M,!0),(H.innerHTML&&B.innerHTML==null||H.textContent&&B.textContent==null)&&l(G,""),N?P(d.dynamicChildren,N,G,M,O,Bs(m,k),E):F||J(d,m,G,null,M,O,Bs(m,k),E,!1),D>0){if(D&16)U(G,H,B,M,k);else if(D&2&&H.class!==B.class&&i(G,"class",null,B.class,k),D&4&&i(G,"style",H.style,B.style,k),D&8){const te=m.dynamicProps;for(let ue=0;ue<te.length;ue++){const re=te[ue],Ie=H[re],Re=B[re];(Re!==Ie||re==="value")&&i(G,re,Ie,Re,k,M)}}D&1&&d.children!==m.children&&l(G,m.children)}else!F&&N==null&&U(G,H,B,M,k);((z=B.onVnodeUpdated)||V)&&Oe(()=>{z&&it(z,M,m,d),V&&Ft(m,d,M,"updated")},O)},P=(d,m,M,O,k,E,F)=>{for(let G=0;G<m.length;G++){const D=d[G],N=m[G],V=D.el&&(D.type===De||!Kt(D,N)||D.shapeFlag&198)?f(D.el):M;x(D,N,V,null,O,k,E,F,!0)}},U=(d,m,M,O,k)=>{if(m!==M){if(m!==le)for(const E in m)!Tn(E)&&!(E in M)&&i(d,E,m[E],null,k,O);for(const E in M){if(Tn(E))continue;const F=M[E],G=m[E];F!==G&&E!=="value"&&i(d,E,G,F,k,O)}"value"in M&&i(d,"value",m.value,M.value,k)}},R=(d,m,M,O,k,E,F,G,D)=>{const N=m.el=d?d.el:c(""),V=m.anchor=d?d.anchor:c("");let{patchFlag:H,dynamicChildren:B,slotScopeIds:z}=m;z&&(G=G?G.concat(z):z),d==null?(s(N,M,O),s(V,M,O),I(m.children||[],M,V,k,E,F,G,D)):H>0&&H&64&&B&&d.dynamicChildren?(P(d.dynamicChildren,B,M,k,E,F,G),(m.key!=null||k&&m===k.subTree)&&gc(d,m,!0)):J(d,m,M,V,k,E,F,G,D)},j=(d,m,M,O,k,E,F,G,D)=>{m.slotScopeIds=G,d==null?m.shapeFlag&512?k.ctx.activate(m,M,O,F,D):K(m,M,O,k,E,F,D):q(d,m,D)},K=(d,m,M,O,k,E,F)=>{const G=d.component=Ru(d,O,k);if(Cs(d)&&(G.ctx.renderer=Pe),Eu(G,!1,F),G.asyncDep){if(k&&k.registerDep(G,Z,F),!d.el){const D=G.subTree=_e(Se);L(null,D,m,M),d.placeholder=D.el}}else Z(G,d,m,M,k,E,F)},q=(d,m,M)=>{const O=m.component=d.component;if(vu(d,m,M))if(O.asyncDep&&!O.asyncResolved){X(O,m,M);return}else O.next=m,O.update();else m.el=d.el,O.vnode=m},Z=(d,m,M,O,k,E,F)=>{const G=()=>{if(d.isMounted){let{next:H,bu:B,u:z,parent:te,vnode:ue}=d;{const st=bc(d);if(st){H&&(H.el=ue.el,X(d,H,F)),st.asyncDep.then(()=>{d.isUnmounted||G()});return}}let re=H,Ie;Ht(d,!1),H?(H.el=ue.el,X(d,H,F)):H=ue,B&&Ns(B),(Ie=H.props&&H.props.onVnodeBeforeUpdate)&&it(Ie,te,H,ue),Ht(d,!0);const Re=_i(d),nt=d.subTree;d.subTree=Re,x(nt,Re,f(nt.el),Fe(nt),d,k,E),H.el=Re.el,re===null&&Tu(d,Re.el),z&&Oe(z,k),(Ie=H.props&&H.props.onVnodeUpdated)&&Oe(()=>it(Ie,te,H,ue),k)}else{let H;const{el:B,props:z}=m,{bm:te,m:ue,parent:re,root:Ie,type:Re}=d,nt=Ln(m);Ht(d,!1),te&&Ns(te),!nt&&(H=z&&z.onVnodeBeforeMount)&&it(H,re,m),Ht(d,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Re);const st=d.subTree=_i(d);x(null,st,M,O,d,k,E),m.el=st.el}if(ue&&Oe(ue,k),!nt&&(H=z&&z.onVnodeMounted)){const st=m;Oe(()=>it(H,re,st),k)}(m.shapeFlag&256||re&&Ln(re.vnode)&&re.vnode.shapeFlag&256)&&d.a&&Oe(d.a,k),d.isMounted=!0,m=M=O=null}};d.scope.on();const D=d.effect=new Ir(G);d.scope.off();const N=d.update=D.run.bind(D),V=d.job=D.runIfDirty.bind(D);V.i=d,V.id=d.uid,D.scheduler=()=>Ho(V),Ht(d,!0),N()},X=(d,m,M)=>{m.component=d;const O=d.vnode.props;d.vnode=m,d.next=null,iu(d,m.props,O,M),lu(d,m.children,M),yt(),ci(d),wt()},J=(d,m,M,O,k,E,F,G,D=!1)=>{const N=d&&d.children,V=d?d.shapeFlag:0,H=m.children,{patchFlag:B,shapeFlag:z}=m;if(B>0){if(B&128){Ae(N,H,M,O,k,E,F,G,D);return}else if(B&256){$e(N,H,M,O,k,E,F,G,D);return}}z&8?(V&16&&ve(N,k,E),H!==N&&l(M,H)):V&16?z&16?Ae(N,H,M,O,k,E,F,G,D):ve(N,k,E,!0):(V&8&&l(M,""),z&16&&I(H,M,O,k,E,F,G,D))},$e=(d,m,M,O,k,E,F,G,D)=>{d=d||en,m=m||en;const N=d.length,V=m.length,H=Math.min(N,V);let B;for(B=0;B<H;B++){const z=m[B]=D?At(m[B]):at(m[B]);x(d[B],z,M,null,k,E,F,G,D)}N>V?ve(d,k,E,!0,!1,H):I(m,M,O,k,E,F,G,D,H)},Ae=(d,m,M,O,k,E,F,G,D)=>{let N=0;const V=m.length;let H=d.length-1,B=V-1;for(;N<=H&&N<=B;){const z=d[N],te=m[N]=D?At(m[N]):at(m[N]);if(Kt(z,te))x(z,te,M,null,k,E,F,G,D);else break;N++}for(;N<=H&&N<=B;){const z=d[H],te=m[B]=D?At(m[B]):at(m[B]);if(Kt(z,te))x(z,te,M,null,k,E,F,G,D);else break;H--,B--}if(N>H){if(N<=B){const z=B+1,te=z<V?m[z].el:O;for(;N<=B;)x(null,m[N]=D?At(m[N]):at(m[N]),M,te,k,E,F,G,D),N++}}else if(N>B)for(;N<=H;)be(d[N],k,E,!0),N++;else{const z=N,te=N,ue=new Map;for(N=te;N<=B;N++){const Ne=m[N]=D?At(m[N]):at(m[N]);Ne.key!=null&&ue.set(Ne.key,N)}let re,Ie=0;const Re=B-te+1;let nt=!1,st=0;const fn=new Array(Re);for(N=0;N<Re;N++)fn[N]=0;for(N=z;N<=H;N++){const Ne=d[N];if(Ie>=Re){be(Ne,k,E,!0);continue}let ot;if(Ne.key!=null)ot=ue.get(Ne.key);else for(re=te;re<=B;re++)if(fn[re-te]===0&&Kt(Ne,m[re])){ot=re;break}ot===void 0?be(Ne,k,E,!0):(fn[ot-te]=N+1,ot>=st?st=ot:nt=!0,x(Ne,m[ot],M,null,k,E,F,G,D),Ie++)}const Jo=nt?du(fn):en;for(re=Jo.length-1,N=Re-1;N>=0;N--){const Ne=te+N,ot=m[Ne],Yo=m[Ne+1],Zo=Ne+1<V?Yo.el||Yo.placeholder:O;fn[N]===0?x(null,ot,M,Zo,k,E,F,G,D):nt&&(re<0||N!==Jo[re]?ge(ot,M,Zo,2):re--)}}},ge=(d,m,M,O,k=null)=>{const{el:E,type:F,transition:G,children:D,shapeFlag:N}=d;if(N&6){ge(d.component.subTree,m,M,O);return}if(N&128){d.suspense.move(m,M,O);return}if(N&64){F.move(d,m,M,Pe);return}if(F===De){s(E,m,M);for(let H=0;H<D.length;H++)ge(D[H],m,M,O);s(d.anchor,m,M);return}if(F===ns){h(d,m,M);return}if(O!==2&&N&1&&G)if(O===0)G.beforeEnter(E),s(E,m,M),Oe(()=>G.enter(E),k);else{const{leave:H,delayLeave:B,afterLeave:z}=G,te=()=>{d.ctx.isUnmounted?o(E):s(E,m,M)},ue=()=>{E._isLeaving&&E[ht](!0),H(E,()=>{te(),z&&z()})};B?B(E,te,ue):ue()}else s(E,m,M)},be=(d,m,M,O=!1,k=!1)=>{const{type:E,props:F,ref:G,children:D,dynamicChildren:N,shapeFlag:V,patchFlag:H,dirs:B,cacheIndex:z}=d;if(H===-2&&(k=!1),G!=null&&(yt(),Sn(G,null,M,d,!0),wt()),z!=null&&(m.renderCache[z]=void 0),V&256){m.ctx.deactivate(d);return}const te=V&1&&B,ue=!Ln(d);let re;if(ue&&(re=F&&F.onVnodeBeforeUnmount)&&it(re,m,d),V&6)qe(d.component,M,O);else{if(V&128){d.suspense.unmount(M,O);return}te&&Ft(d,null,m,"beforeUnmount"),V&64?d.type.remove(d,m,M,Pe,O):N&&!N.hasOnce&&(E!==De||H>0&&H&64)?ve(N,m,M,!1,!0):(E===De&&H&384||!k&&V&16)&&ve(D,m,M),O&&et(d)}(ue&&(re=F&&F.onVnodeUnmounted)||te)&&Oe(()=>{re&&it(re,m,d),te&&Ft(d,null,m,"unmounted")},M)},et=d=>{const{type:m,el:M,anchor:O,transition:k}=d;if(m===De){We(M,O);return}if(m===ns){_(d);return}const E=()=>{o(M),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(d.shapeFlag&1&&k&&!k.persisted){const{leave:F,delayLeave:G}=k,D=()=>F(M,E);G?G(d.el,E,D):D()}else E()},We=(d,m)=>{let M;for(;d!==m;)M=p(d),o(d),d=M;o(m)},qe=(d,m,M)=>{const{bum:O,scope:k,job:E,subTree:F,um:G,m:D,a:N}=d;hi(D),hi(N),O&&Ns(O),k.stop(),E&&(E.flags|=8,be(F,d,m,M)),G&&Oe(G,m),Oe(()=>{d.isUnmounted=!0},m)},ve=(d,m,M,O=!1,k=!1,E=0)=>{for(let F=E;F<d.length;F++)be(d[F],m,M,O,k)},Fe=d=>{if(d.shapeFlag&6)return Fe(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const m=p(d.anchor||d.el),M=m&&m[Pl];return M?p(M):m};let ze=!1;const tt=(d,m,M)=>{d==null?m._vnode&&be(m._vnode,null,null,!0):x(m._vnode||null,d,m,null,null,null,M),m._vnode=d,ze||(ze=!0,ci(),qr(),ze=!1)},Pe={p:x,um:be,m:ge,r:et,mt:K,mc:I,pc:J,pbc:P,n:Fe,o:e};return{render:tt,hydrate:void 0,createApp:nu(tt)}}function Bs({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ht({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function gc(e,t,n=!1){const s=e.children,o=t.children;if(W(s)&&W(o))for(let i=0;i<s.length;i++){const r=s[i];let c=o[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[i]=At(o[i]),c.el=r.el),!n&&c.patchFlag!==-2&&gc(r,c)),c.type===Is&&c.patchFlag!==-1&&(c.el=r.el),c.type===Se&&!c.el&&(c.el=r.el)}}function du(e){const t=e.slice(),n=[0];let s,o,i,r,c;const a=e.length;for(s=0;s<a;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)c=i+r>>1,e[n[c]]<u?i=c+1:r=c;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function bc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bc(t)}function hi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $u=Symbol.for("v-scx"),hu=()=>es($u);function ts(e,t,n){return yc(e,t,n)}function yc(e,t,n=le){const{immediate:s,deep:o,flush:i,once:r}=n,c=we({},n),a=t&&s||!t&&i!=="post";let u;if(Hn){if(i==="sync"){const $=hu();u=$.__watcherHandles||($.__watcherHandles=[])}else if(!a){const $=()=>{};return $.stop=lt,$.resume=lt,$.pause=lt,$}}const l=Le;c.call=($,y,x)=>Ze($,l,y,x);let f=!1;i==="post"?c.scheduler=$=>{Oe($,l&&l.suspense)}:i!=="sync"&&(f=!0,c.scheduler=($,y)=>{y?$():Ho($)}),c.augmentJob=$=>{t&&($.flags|=4),f&&($.flags|=2,l&&($.id=l.uid,$.i=l))};const p=Il(e,t,c);return Hn&&(u?u.push(p):a&&p()),p}function _u(e,t,n){const s=this.proxy,o=he(e)?e.includes(".")?wc(s,e):()=>s[e]:e.bind(s,s);let i;Y(t)?i=t:(i=t.handler,n=t);const r=Kn(this),c=yc(o,i.bind(s),n);return r(),c}function wc(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Pt(t)}Modifiers`]||e[`${zt(t)}Modifiers`];function gu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||le;let o=n;const i=t.startsWith("update:"),r=i&&mu(s,t.slice(7));r&&(r.trim&&(o=n.map(l=>he(l)?l.trim():l)),r.number&&(o=n.map(za)));let c,a=s[c=Ps(t)]||s[c=Ps(Pt(t))];!a&&i&&(a=s[c=Ps(zt(t))]),a&&Ze(a,e,6,o);const u=s[c+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Ze(u,e,6,o)}}const bu=new WeakMap;function vc(e,t,n=!1){const s=n?bu:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let r={},c=!1;if(!Y(e)){const a=u=>{const l=vc(u,t,!0);l&&(c=!0,we(r,l))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!i&&!c?(de(e)&&s.set(e,null),null):(W(i)?i.forEach(a=>r[a]=null):we(r,i),de(e)&&s.set(e,r),r)}function As(e,t){return!e||!ys(t)?!1:(t=t.slice(2).replace(/Once$/,""),ie(e,t[0].toLowerCase()+t.slice(1))||ie(e,zt(t))||ie(e,t))}function _i(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:c,emit:a,render:u,renderCache:l,props:f,data:p,setupState:$,ctx:y,inheritAttrs:x}=e,C=ds(e);let L,g;try{if(n.shapeFlag&4){const _=o||s,w=_;L=at(u.call(w,_,l,f,$,p,y)),g=c}else{const _=t;L=at(_.length>1?_(f,{attrs:c,slots:r,emit:a}):_(f,null)),g=t.props?c:yu(c)}}catch(_){In.length=0,xs(_,e,1),L=_e(Se)}let h=L;if(g&&x!==!1){const _=Object.keys(g),{shapeFlag:w}=h;_.length&&w&7&&(i&&_.some(Ao)&&(g=wu(g,i)),h=Dt(h,g,!1,!0))}return n.dirs&&(h=Dt(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(n.dirs):n.dirs),n.transition&&Gn(h,n.transition),L=h,ds(C),L}const yu=e=>{let t;for(const n in e)(n==="class"||n==="style"||ys(n))&&((t||(t={}))[n]=e[n]);return t},wu=(e,t)=>{const n={};for(const s in e)(!Ao(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function vu(e,t,n){const{props:s,children:o,component:i}=e,{props:r,children:c,patchFlag:a}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?mi(s,r,u):!!r;if(a&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const p=l[f];if(r[p]!==s[p]&&!As(u,p))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:s===r?!1:s?r?mi(s,r,u):!0:!!r;return!1}function mi(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!As(n,i))return!0}return!1}function Tu({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Tc=e=>e.__isSuspense;function Mu(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):kl(e)}const De=Symbol.for("v-fgt"),Is=Symbol.for("v-txt"),Se=Symbol.for("v-cmt"),ns=Symbol.for("v-stc"),In=[];let Ge=null;function ne(e=!1){In.push(Ge=e?null:[])}function xu(){In.pop(),Ge=In[In.length-1]||null}let Fn=1;function _s(e,t=!1){Fn+=e,e<0&&Ge&&t&&(Ge.hasOnce=!0)}function Mc(e){return e.dynamicChildren=Fn>0?Ge||en:null,xu(),Fn>0&&Ge&&Ge.push(e),e}function ce(e,t,n,s,o,i){return Mc(v(e,t,n,s,o,i,!0))}function Bo(e,t,n,s,o){return Mc(_e(e,t,n,s,o,!0))}function ms(e){return e?e.__v_isVNode===!0:!1}function Kt(e,t){return e.type===t.type&&e.key===t.key}const xc=({key:e})=>e??null,ss=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?he(e)||Me(e)||Y(e)?{i:Be,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,s=0,o=null,i=e===De?0:1,r=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xc(t),ref:t&&ss(t),scopeId:Xr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Be};return c?(Vo(a,n),i&128&&e.normalize(a)):n&&(a.shapeFlag|=he(n)?8:16),Fn>0&&!r&&Ge&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Ge.push(a),a}const _e=Cu;function Cu(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===zl)&&(e=Se),ms(e)){const c=Dt(e,t,!0);return n&&Vo(c,n),Fn>0&&!i&&Ge&&(c.shapeFlag&6?Ge[Ge.indexOf(e)]=c:Ge.push(c)),c.patchFlag=-2,c}if(Ou(e)&&(e=e.__vccOpts),t){t=Su(t);let{class:c,style:a}=t;c&&!he(c)&&(t.class=Nt(c)),de(a)&&(Fo(a)&&!W(a)&&(a=we({},a)),t.style=It(a))}const r=he(e)?1:Tc(e)?128:Zr(e)?64:de(e)?4:Y(e)?2:0;return v(e,t,n,s,o,r,i,!0)}function Su(e){return e?Fo(e)||pc(e)?we({},e):e:null}function Dt(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:c,transition:a}=e,u=t?Lu(o||{},t):o,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&xc(u),ref:t&&t.ref?n&&i?W(i)?i.concat(ss(t)):[i,ss(t)]:ss(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==De?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dt(e.ssContent),ssFallback:e.ssFallback&&Dt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&Gn(l,a.clone(l)),l}function os(e=" ",t=0){return _e(Is,null,e,t)}function Vs(e,t){const n=_e(ns,null,e);return n.staticCount=t,n}function kt(e="",t=!1){return t?(ne(),Bo(Se,null,e)):_e(Se,null,e)}function at(e){return e==null||typeof e=="boolean"?_e(Se):W(e)?_e(De,null,e.slice()):ms(e)?At(e):_e(Is,null,String(e))}function At(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dt(e)}function Vo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(W(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Vo(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!pc(t)?t._ctx=Be:o===3&&Be&&(Be.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Y(t)?(t={default:t,_ctx:Be},n=32):(t=String(t),s&64?(n=16,t=[os(t)]):n=8);e.children=t,e.shapeFlag|=n}function Lu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Nt([t.class,s.class]));else if(o==="style")t.style=It([t.style,s.style]);else if(ys(o)){const i=t[o],r=s[o];r&&i!==r&&!(W(i)&&i.includes(r))&&(t[o]=i?[].concat(i,r):r)}else o!==""&&(t[o]=s[o])}return t}function it(e,t,n,s=null){Ze(e,t,7,[n,s])}const Au=lc();let Iu=0;function Ru(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Au,i={uid:Iu++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$c(s,o),emitsOptions:vc(s,o),emit:null,emitted:null,propsDefaults:le,inheritAttrs:s.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=gu.bind(null,i),e.ce&&e.ce(i),i}let Le=null;const Cc=()=>Le||Be;let gs,_o;{const e=Ts(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(r=>r(i)):o[0](i)}};gs=t("__VUE_INSTANCE_SETTERS__",n=>Le=n),_o=t("__VUE_SSR_SETTERS__",n=>Hn=n)}const Kn=e=>{const t=Le;return gs(e),e.scope.on(),()=>{e.scope.off(),gs(t)}},gi=()=>{Le&&Le.scope.off(),gs(null)};function Sc(e){return e.vnode.shapeFlag&4}let Hn=!1;function Eu(e,t=!1,n=!1){t&&_o(t);const{props:s,children:o}=e.vnode,i=Sc(e);ou(e,s,i,t),au(e,o,n||t);const r=i?ku(e,t):void 0;return t&&_o(!1),r}function ku(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Xl);const{setup:s}=n;if(s){yt();const o=e.setupContext=s.length>1?Nu(e):null,i=Kn(e),r=Vn(s,e,0,[e.props,o]),c=vr(r);if(wt(),i(),(c||e.sp)&&!Ln(e)&&oc(e),c){if(r.then(gi,gi),t)return r.then(a=>{bi(e,a)}).catch(a=>{xs(a,e,0)});e.asyncDep=r}else bi(e,r)}else Lc(e)}function bi(e,t,n){Y(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:de(t)&&(e.setupState=Vr(t)),Lc(e)}function Lc(e,t,n){const s=e.type;e.render||(e.render=s.render||lt);{const o=Kn(e);yt();try{Jl(e)}finally{wt(),o()}}}const Pu={get(e,t){return Te(e,"get",""),e[t]}};function Nu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Pu),slots:e.slots,emit:e.emit,expose:t}}function Rs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Vr(Tl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in An)return An[n](e)},has(t,n){return n in t||n in An}})):e.proxy}function Ou(e){return Y(e)&&"__vccOpts"in e}const Du=(e,t)=>Ll(e,t,Hn);function Gu(e,t,n){try{_s(-1);const s=arguments.length;return s===2?de(t)&&!W(t)?ms(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ms(n)&&(n=[n]),_e(e,t,n))}finally{_s(1)}}const Fu="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mo;const yi=typeof window<"u"&&window.trustedTypes;if(yi)try{mo=yi.createPolicy("vue",{createHTML:e=>e})}catch{}const Ac=mo?e=>mo.createHTML(e):e=>e,Hu="http://www.w3.org/2000/svg",Uu="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,wi=$t&&$t.createElement("template"),ju={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?$t.createElementNS(Hu,e):t==="mathml"?$t.createElementNS(Uu,e):n?$t.createElement(e,{is:n}):$t.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const r=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{wi.innerHTML=Ac(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const c=wi.content;if(s==="svg"||s==="mathml"){const a=c.firstChild;for(;a.firstChild;)c.appendChild(a.firstChild);c.removeChild(a)}t.insertBefore(c,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},xt="transition",dn="animation",Un=Symbol("_vtc"),Ic={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Bu=we({},Qr,Ic),Vu=e=>(e.displayName="Transition",e.props=Bu,e),Ku=Vu((e,{slots:t})=>Gu(Dl,Wu(e),t)),Ut=(e,t=[])=>{W(e)?e.forEach(n=>n(...t)):e&&e(...t)},vi=e=>e?W(e)?e.some(t=>t.length>1):e.length>1:!1;function Wu(e){const t={};for(const R in e)R in Ic||(t[R]=e[R]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:a=i,appearActiveClass:u=r,appearToClass:l=c,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:$=`${n}-leave-to`}=e,y=qu(o),x=y&&y[0],C=y&&y[1],{onBeforeEnter:L,onEnter:g,onEnterCancelled:h,onLeave:_,onLeaveCancelled:w,onBeforeAppear:A=L,onAppear:T=g,onAppearCancelled:I=h}=t,S=(R,j,K,q)=>{R._enterCancelled=q,jt(R,j?l:c),jt(R,j?u:r),K&&K()},P=(R,j)=>{R._isLeaving=!1,jt(R,f),jt(R,$),jt(R,p),j&&j()},U=R=>(j,K)=>{const q=R?T:g,Z=()=>S(j,R,K);Ut(q,[j,Z]),Ti(()=>{jt(j,R?a:i),dt(j,R?l:c),vi(q)||Mi(j,s,x,Z)})};return we(t,{onBeforeEnter(R){Ut(L,[R]),dt(R,i),dt(R,r)},onBeforeAppear(R){Ut(A,[R]),dt(R,a),dt(R,u)},onEnter:U(!1),onAppear:U(!0),onLeave(R,j){R._isLeaving=!0;const K=()=>P(R,j);dt(R,f),R._enterCancelled?(dt(R,p),Si(R)):(Si(R),dt(R,p)),Ti(()=>{R._isLeaving&&(jt(R,f),dt(R,$),vi(_)||Mi(R,s,C,K))}),Ut(_,[R,K])},onEnterCancelled(R){S(R,!1,void 0,!0),Ut(h,[R])},onAppearCancelled(R){S(R,!0,void 0,!0),Ut(I,[R])},onLeaveCancelled(R){P(R),Ut(w,[R])}})}function qu(e){if(e==null)return null;if(de(e))return[Ks(e.enter),Ks(e.leave)];{const t=Ks(e);return[t,t]}}function Ks(e){return Xa(e)}function dt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Un]||(e[Un]=new Set)).add(t)}function jt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Un];n&&(n.delete(t),n.size||(e[Un]=void 0))}function Ti(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let zu=0;function Mi(e,t,n,s){const o=e._endId=++zu,i=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:r,timeout:c,propCount:a}=Xu(e,t);if(!r)return s();const u=r+"end";let l=0;const f=()=>{e.removeEventListener(u,p),i()},p=$=>{$.target===e&&++l>=a&&f()};setTimeout(()=>{l<a&&f()},c+1),e.addEventListener(u,p)}function Xu(e,t){const n=window.getComputedStyle(e),s=y=>(n[y]||"").split(", "),o=s(`${xt}Delay`),i=s(`${xt}Duration`),r=xi(o,i),c=s(`${dn}Delay`),a=s(`${dn}Duration`),u=xi(c,a);let l=null,f=0,p=0;t===xt?r>0&&(l=xt,f=r,p=i.length):t===dn?u>0&&(l=dn,f=u,p=a.length):(f=Math.max(r,u),l=f>0?r>u?xt:dn:null,p=l?l===xt?i.length:a.length:0);const $=l===xt&&/\b(?:transform|all)(?:,|$)/.test(s(`${xt}Property`).toString());return{type:l,timeout:f,propCount:p,hasTransform:$}}function xi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ci(n)+Ci(e[s])))}function Ci(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Si(e){return(e?e.ownerDocument:document).body.offsetHeight}function Ju(e,t,n){const s=e[Un];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const bs=Symbol("_vod"),Rc=Symbol("_vsh"),Ec={name:"show",beforeMount(e,{value:t},{transition:n}){e[bs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$n(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),$n(e,!0),s.enter(e)):s.leave(e,()=>{$n(e,!1)}):$n(e,t))},beforeUnmount(e,{value:t}){$n(e,t)}};function $n(e,t){e.style.display=t?e[bs]:"none",e[Rc]=!t}const Yu=Symbol(""),Zu=/(?:^|;)\s*display\s*:/;function Qu(e,t,n){const s=e.style,o=he(n);let i=!1;if(n&&!o){if(t)if(he(t))for(const r of t.split(";")){const c=r.slice(0,r.indexOf(":")).trim();n[c]==null&&is(s,c,"")}else for(const r in t)n[r]==null&&is(s,r,"");for(const r in n)r==="display"&&(i=!0),is(s,r,n[r])}else if(o){if(t!==n){const r=s[Yu];r&&(n+=";"+r),s.cssText=n,i=Zu.test(n)}}else t&&e.removeAttribute("style");bs in e&&(e[bs]=i?s.display:"",e[Rc]&&(s.display="none"))}const Li=/\s*!important$/;function is(e,t,n){if(W(n))n.forEach(s=>is(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ef(e,t);Li.test(n)?e.setProperty(zt(s),n.replace(Li,""),"important"):e[s]=n}}const Ai=["Webkit","Moz","ms"],Ws={};function ef(e,t){const n=Ws[t];if(n)return n;let s=Pt(t);if(s!=="filter"&&s in e)return Ws[t]=s;s=xr(s);for(let o=0;o<Ai.length;o++){const i=Ai[o]+s;if(i in e)return Ws[t]=i}return t}const Ii="http://www.w3.org/1999/xlink";function Ri(e,t,n,s,o,i=tl(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ii,t.slice(6,t.length)):e.setAttributeNS(Ii,t,n):n==null||i&&!Sr(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Gt(n)?String(n):n)}function Ei(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ac(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(c!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Sr(n):n==null&&c==="string"?(n="",r=!0):c==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(o||t)}function tf(e,t,n,s){e.addEventListener(t,n,s)}function nf(e,t,n,s){e.removeEventListener(t,n,s)}const ki=Symbol("_vei");function sf(e,t,n,s,o=null){const i=e[ki]||(e[ki]={}),r=i[t];if(s&&r)r.value=s;else{const[c,a]=of(t);if(s){const u=i[t]=af(s,o);tf(e,c,u,a)}else r&&(nf(e,c,r,a),i[t]=void 0)}}const Pi=/(?:Once|Passive|Capture)$/;function of(e){let t;if(Pi.test(e)){t={};let s;for(;s=e.match(Pi);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):zt(e.slice(2)),t]}let qs=0;const rf=Promise.resolve(),cf=()=>qs||(rf.then(()=>qs=0),qs=Date.now());function af(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ze(lf(s,n.value),t,5,[s])};return n.value=e,n.attached=cf(),n}function lf(e,t){if(W(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,uf=(e,t,n,s,o,i)=>{const r=o==="svg";t==="class"?Ju(e,s,r):t==="style"?Qu(e,n,s):ys(t)?Ao(t)||sf(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ff(e,t,s,r))?(Ei(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ri(e,t,s,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!he(s))?Ei(e,Pt(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ri(e,t,s,r))};function ff(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ni(t)&&Y(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ni(t)&&he(n)?!1:t in e}const pf=["ctrl","shift","alt","meta"],df={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>pf.some(n=>e[`${n}Key`]&&!t.includes(n))},zs=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let r=0;r<t.length;r++){const c=df[t[r]];if(c&&c(o,t))return}return e(o,...i)})},$f=we({patchProp:uf},ju);let Oi;function hf(){return Oi||(Oi=uu($f))}const Di=(...e)=>{const t=hf().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=mf(s);if(!o)return;const i=t._component;!Y(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=n(o,!1,_f(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function _f(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function mf(e){return he(e)?document.querySelector(e):e}const gf={maxRetries:3,retryDelay:1e3,timeout:1e4},rn={enabled:!0,maxCacheSize:50*1024*1024,cachePrefix:"mgpic_",version:"1.0.0",loadInterval:50,batchSize:3};class bf{constructor(){this.cache=new Map,this.totalSize=0}isSupported(){return"caches"in window}getCacheName(){return`${rn.cachePrefix}${rn.version}`}async isCached(t){if(!this.isSupported())return!1;try{return await(await caches.open(this.getCacheName())).match(t)!==void 0}catch(n){return console.warn("检查缓存失败:",n.message),!1}}async cacheResource(t,n){if(!this.isSupported())return!1;try{const s=await caches.open(this.getCacheName());if(await s.match(t))return console.log(`资源已存在于缓存，跳过: ${t}`),!0;await s.put(t,n.clone());const i=n.headers.get("content-length");return i&&(this.totalSize+=parseInt(i)),console.log(`资源已缓存: ${t}`),!0}catch(s){return console.warn("缓存资源失败:",s.message),!1}}async getCachedResource(t){if(!this.isSupported())return null;try{return await(await caches.open(this.getCacheName())).match(t)}catch(n){return console.warn("获取缓存资源失败:",n.message),null}}async cleanupCache(){if(this.isSupported())try{const t=await caches.keys(),n=this.getCacheName();for(const s of t)s.startsWith(rn.cachePrefix)&&s!==n&&(await caches.delete(s),console.log(`清理过期缓存: ${s}`))}catch(t){console.warn("清理缓存失败:",t.message)}}}const Rt=new bf;let Jn=null;function yf(){return Jn||(console.log("使用默认R2 URL"),Jn="https://pub-6f9181bda40946ea92b5e87fe84e27d4.r2.dev",Jn)}function ae(e){const t=yf(),n=e.startsWith("/")?e.slice(1):e;return`${t}/${n}`}async function wf(e=["high","medium"]){try{const t=await fetch("/src/utils/asset-list.json");if(!t.ok)throw new Error("资源列表文件不存在");const n=await t.json(),s=[];for(const o of e)if(n.categories&&n.categories[o]){const i=n.categories[o].resources||[];s.push(...i.map(r=>r.path))}return console.log(`从资源列表加载 ${s.length} 个资源 (优先级: ${e.join(", ")})`),s}catch(t){return console.warn("无法加载自动生成的资源列表，使用备用列表:",t.message),["logo.glb","frontend_resource/start_game.webp","frontend_resource/copper_warehouse.webp","frontend_resource/game_wiki.webp","frontend_resource/Tutorial.webp","frontend_resource/gacha.webp"]}}async function go(e=null,t=["high","medium"]){console.log("开始预缓存游戏资源..."),await Rt.cleanupCache();const n=await wf(t),s=rn.batchSize,o=rn.loadInterval,i=n.length;let r=0;e&&e(0,i,0);for(let c=0;c<n.length;c+=s){const a=n.slice(c,c+s);console.log(`处理批次 ${Math.floor(c/s)+1}/${Math.ceil(n.length/s)}: ${a.length} 个资源`);const u=a.map(async(C,L)=>{const g=ae(C);try{if(await Rt.isCached(g))return console.log(`资源已在Cache Storage中，跳过: ${C}`),{success:!0,path:C,cached:!0,source:"cache"};const _=new AbortController,w=setTimeout(()=>_.abort(),gf.timeout),A=await fetch(g,{method:"GET",mode:"cors",credentials:"omit",cache:"no-cache",signal:_.signal});if(clearTimeout(w),A.ok){const T=A.headers.get("x-cache")||A.headers.get("cf-cache-status")||A.type==="basic"&&!A.redirected;return Rt.isSupported()&&await Rt.cacheResource(g,A),console.log(`资源预缓存成功: ${C}${T?" (使用浏览器缓存)":""}`),{success:!0,path:C,cached:!1,fromBrowserCache:!!T}}else throw new Error(`HTTP ${A.status}: ${A.statusText}`)}catch(h){return console.warn(`资源预缓存失败: ${C}`,h.message),{success:!1,path:C,error:h.message}}}),l=await Promise.all(u);r+=a.length;const f=Math.round(r/i*100);e&&e(r,i,f);const p=l.filter(C=>C.success).length,$=l.filter(C=>C.cached).length,y=l.filter(C=>C.fromBrowserCache).length,x=l.filter(C=>!C.success).length;console.log(`批次完成: 成功 ${p}, Cache Storage已有 ${$}, 浏览器缓存 ${y}, 失败 ${x}`),c+s<n.length&&(console.log(`等待 ${o}ms 后处理下一批...`),await new Promise(C=>setTimeout(C,o)))}console.log("所有资源预缓存完成"),e&&e(i,i,100)}async function vf(){if(!Rt.isSupported())return{supported:!1,message:"浏览器不支持缓存API"};try{const t=await(await caches.open(Rt.getCacheName())).keys();return{supported:!0,cacheName:Rt.getCacheName(),resourceCount:t.length,totalSize:Rt.totalSize,maxSize:rn.maxCacheSize}}catch(e){return{supported:!0,error:e.message}}}const Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Tf={class:"menu"},Mf={__name:"Hall",emits:["startGame","openWarehouse","openTutorial","openEncyclopedia"],setup(e,{emit:t}){const n=t;function s(){n("startGame")}function o(){n("openWarehouse")}function i(){n("openTutorial")}function r(){n("openEncyclopedia")}const c=Q(ae("img/hall/start_game.webp")),a=Q(ae("img/hall/warehouse.webp")),u=Q(ae("img/hall/wiki.webp")),l=Q(ae("img/hall/tutorial.webp"));return qt(async()=>{try{if(window.getCacheStatus){const p=await window.getCacheStatus();console.log("缓存状态:",p)}const f=[c.value,a.value,u.value,l.value];for(let p=0;p<f.length;p++){const $=f[p];try{const y=new Image;y.crossOrigin="anonymous",y.src=$,await new Promise((x,C)=>{y.onload=x,y.onerror=C}),console.log("背景图片预加载成功:",$),p<f.length-1&&await new Promise(x=>setTimeout(x,100))}catch(y){console.warn("背景图片预加载失败:",$,y.message)}}}catch(f){console.warn("背景图片预加载过程中出现错误:",f.message)}}),(f,p)=>(ne(),ce("div",Tf,[v("button",{class:"tile tile--start",style:It({backgroundImage:`url('${c.value}')`}),onClick:s},[...p[0]||(p[0]=[v("div",{class:"tile__mask"},null,-1),v("div",{class:"tile__caption tile__caption--bottom"},[v("div",{class:"tile__title"},"开始游戏"),v("div",{class:"tile__subtitle"},"Start Game")],-1)])],4),v("button",{class:"tile tile--warehouse",style:It({backgroundImage:`url('${a.value}')`}),onClick:o},[...p[1]||(p[1]=[v("div",{class:"tile__mask"},null,-1),v("div",{class:"tile__caption tile__caption--top"},[v("div",{class:"tile__title"},"铜偶仓库"),v("div",{class:"tile__subtitle"},"Copper Warehouse")],-1)])],4),v("button",{class:"tile tile--wiki",style:It({backgroundImage:`url('${u.value}')`}),onClick:r},[...p[2]||(p[2]=[v("div",{class:"tile__mask"},null,-1),v("div",{class:"tile__caption tile__caption--bottom"},[v("div",{class:"tile__title"},"游戏百科"),v("div",{class:"tile__subtitle"},"Game Wiki")],-1)])],4),v("button",{class:"tile tile--tutorial",style:It({backgroundImage:`url('${l.value}')`}),onClick:i},[...p[3]||(p[3]=[v("div",{class:"tile__mask"},null,-1),v("div",{class:"tile__caption tile__caption--top"},[v("div",{class:"tile__title"},"新手教程"),v("div",{class:"tile__subtitle"},"Tutorial")],-1)])],4)]))}},xf=Xt(Mf,[["__scopeId","data-v-10651f23"]]);class Cf extends Error{}function ke(){throw new Cf}const Sf={$tag:1},Lf={$tag:2};function Ko(e,t){this._0=e,this._1=t}Ko.prototype.$tag=3;function me(e){this._0=e}me.prototype.$tag=4;function kc(e){this._0=e}kc.prototype.$tag=5;function Ke(e){this._0=e}Ke.prototype.$tag=6;function b(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}function Tt(e,t){const n=new Array(e);return n.fill(t),n}const Pc=(e,t)=>{e.push(t)},Af=function e(){return e._exports?e._exports:e._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},If=(e,t)=>{const n=e.hi>>>0,s=t.hi>>>0;if(n<s)return-1;if(n>s)return 1;const o=e.lo>>>0,i=t.lo>>>0;return o<i?-1:o>i?1:0},Rf=e=>e.slice(0);function un(e,t,n){this._0=e,this._1=t,this._2=n}un.prototype.$tag=0;function cn(e,t,n){this._0=e,this._1=t,this._2=n}cn.prototype.$tag=1;function jn(e){this._0=e}jn.prototype.$tag=2;const an={$tag:0};function Bn(e,t){this._0=e,this._1=t}Bn.prototype.$tag=1;function Wo(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}const Ef=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]),Xs={hi:0,lo:-1},Gi={hi:0,lo:0},Fi={hi:0,lo:1},kf="阿磐",Pf="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Nf="/assets/copper/iron_wall/rocky/rocky.webp",Of="/assets/copper/iron_wall/rocky/rocky.glb",Df="卫斯理",Gf="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",Ff="/assets/copper/iron_wall/wesley/wesley.webp",Hf="/assets/copper/iron_wall/wesley/wesley.glb",Uf="大贝尔",jf="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",Bf="/assets/copper/iron_wall/bell/bell.webp",Vf="/assets/copper/iron_wall/bell/bell.glb",Kf="团团",Wf="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",qf="/assets/copper/iron_wall/tumble/tumble.webp",zf="/assets/copper/iron_wall/tumble/tumble.glb",Xf="铿铿",Jf="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",Yf="/assets/copper/iron_wall/chief/chief.webp",Zf="/assets/copper/iron_wall/chief/chief.glb",Qf="咝咝",ep="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",tp="/assets/copper/arcanist/spark/spark.webp",np="/assets/copper/arcanist/spark/spark.glb",sp="拉斐尔",op="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",ip="/assets/copper/arcanist/syrup/syrup.webp",rp="/assets/copper/arcanist/syrup/syrup.glb",cp="波普尔",ap="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",lp="/assets/copper/arcanist/bubble/bubble.webp",up="/assets/copper/arcanist/bubble/bubble.glb",fp="菲尼",pp="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",dp="/assets/copper/arcanist/glimmer/glimmer.webp",$p="/assets/copper/arcanist/glimmer/glimmer.glb",hp="卷卷",_p="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",mp="/assets/copper/arcanist/turner/turner.webp",gp="/assets/copper/arcanist/turner/turner.glb",bp="絮絮",yp="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",wp="/assets/copper/resonator/murmur/murmur.webp",vp="/assets/copper/resonator/murmur/murmur.glb",Tp="啾啾",Mp="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",xp="/assets/copper/resonator/melody/melody.webp",Cp="/assets/copper/resonator/melody/melody.glb",Sp="库克",Lp="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",Ap="/assets/copper/resonator/clawsteak/clawsteak.webp",Ip="/assets/copper/resonator/clawsteak/clawsteak.glb",Rp="鼹鼠的地洞",Ep="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",kp="/assets/copper/resonator/diggs/diggs.webp",Pp="/assets/copper/resonator/diggs/diggs.glb",Np="蜜拉",Op="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",Dp="/assets/copper/resonator/hive/hive.webp",Gp="/assets/copper/resonator/hive/hive.glb",Fp="米洛",Hp="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",Up="/assets/copper/mechanic/gyro/gyro.webp",jp="/assets/copper/mechanic/gyro/gyro.glb",Bp="杰克",Vp="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",Kp="/assets/copper/mechanic/tricky/tricky.webp",Wp="/assets/copper/mechanic/tricky/tricky.glb",qp="格洛克",zp="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",Xp="/assets/copper/mechanic/pendulum/pendulum.webp",Jp="/assets/copper/mechanic/pendulum/pendulum.glb",Yp="溜溜",Zp="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",Qp="/assets/copper/mechanic/yoyo/yoyo.webp",ed="/assets/copper/mechanic/yoyo/yoyo.glb",td="卡琳",nd="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",sd="/assets/copper/mechanic/karin/karin.webp",od="/assets/copper/mechanic/karin/karin.glb",id="波波",rd="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",cd="/assets/copper/craftsman/wrench/wrench.webp",ad="/assets/copper/craftsman/wrench/wrench.glb",ld="特斯拉",ud="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",fd="/assets/copper/craftsman/coil/coil.webp",pd="/assets/copper/craftsman/coil/coil.glb",dd="公输",$d="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",hd="/assets/copper/craftsman/artifex/artifex.webp",_d="/assets/copper/craftsman/artifex/artifex.glb",md="丁格",gd="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",bd="/assets/copper/craftsman/drillbit/drillbit.webp",yd="/assets/copper/craftsman/drillbit/drillbit.glb",wd="小卯",vd="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",Td="/assets/copper/craftsman/quickhand/quickhand.webp",Md="/assets/copper/craftsman/quickhand/quickhand.glb",xd={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:10},Cd={name:kf,copper_type:0,description:Pf,icon_url:Nf,model_url:Of,skill:xd},Sd={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:10},Ld={name:Df,copper_type:0,description:Gf,icon_url:Ff,model_url:Hf,skill:Sd},Ad={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},Id={name:Uf,copper_type:0,description:jf,icon_url:Bf,model_url:Vf,skill:Ad},Rd={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},Ed={name:Kf,copper_type:0,description:Wf,icon_url:qf,model_url:zf,skill:Rd},kd={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},Pd={name:Xf,copper_type:0,description:Jf,icon_url:Yf,model_url:Zf,skill:kd},Nd={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:20},Od={name:Qf,copper_type:1,description:ep,icon_url:tp,model_url:np,skill:Nd},Dd={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},Gd={name:sp,copper_type:1,description:op,icon_url:ip,model_url:rp,skill:Dd},Fd={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:10},Hd={name:cp,copper_type:1,description:ap,icon_url:lp,model_url:up,skill:Fd},Ud={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},jd={name:fp,copper_type:1,description:pp,icon_url:dp,model_url:$p,skill:Ud},Bd={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:5},Vd={name:hp,copper_type:1,description:_p,icon_url:mp,model_url:gp,skill:Bd},Kd={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},Wd={name:bp,copper_type:4,description:yp,icon_url:wp,model_url:vp,skill:Kd},qd={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},zd={name:Tp,copper_type:4,description:Mp,icon_url:xp,model_url:Cp,skill:qd},Xd={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawsteak_skill.webp",cool_down:void 0},Jd={name:Sp,copper_type:4,description:Lp,icon_url:Ap,model_url:Ip,skill:Xd},Yd={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},Zd={name:Rp,copper_type:4,description:Ep,icon_url:kp,model_url:Pp,skill:Yd},Qd={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},e$={name:Np,copper_type:4,description:Op,icon_url:Dp,model_url:Gp,skill:Qd},t$={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:10},n$={name:Fp,copper_type:3,description:Hp,icon_url:Up,model_url:jp,skill:t$},s$={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:10},o$={name:Bp,copper_type:3,description:Vp,icon_url:Kp,model_url:Wp,skill:s$},i$={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:5},r$={name:qp,copper_type:3,description:zp,icon_url:Xp,model_url:Jp,skill:i$},c$={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:3},a$={name:Yp,copper_type:3,description:Zp,icon_url:Qp,model_url:ed,skill:c$},l$={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},u$={name:td,copper_type:3,description:nd,icon_url:sd,model_url:od,skill:l$},f$=void 0,p$={name:id,copper_type:2,description:rd,icon_url:cd,model_url:ad,skill:f$},d$=void 0,$$={name:ld,copper_type:2,description:ud,icon_url:fd,model_url:pd,skill:d$},h$=void 0,_$={name:dd,copper_type:2,description:$d,icon_url:hd,model_url:_d,skill:h$},m$=void 0,g$={name:md,copper_type:2,description:gd,icon_url:bd,model_url:yd,skill:m$},b$=void 0,Rn=[Cd,Ld,Id,Ed,Pd,Od,Gd,Hd,jd,Vd,Wd,zd,Jd,Zd,e$,n$,o$,r$,a$,u$,p$,$$,_$,g$,{name:wd,copper_type:2,description:vd,icon_url:Td,model_url:Md,skill:b$}],y$=nh(e=>{const t=Rn.length;let n=0;for(;;){const s=n;if(s<t){const o=Rn[s];if(e({_0:o.name,_1:o})===1){n=s+1|0;continue}else return 0}else return 1}}),Nc=ea(),w$=h_(),Oc=s_(),v$=ea(),T$=Yh();function Dc(e){ke()}function M$(e){return ke()}function x$(e){return ke()}function C$(e){return ke()}function Hi(e,t){return vh(e,t)<0}function S$(e,t,n,s,o){if(e===n&&t<s){let i=0;for(;;){const r=i;if(r<o){const c=t+r|0,a=s+r|0;b(n,a),b(e,c),e[c]=n[a],i=r+1|0;continue}else return}}else{let i=o-1|0;for(;;){const r=i;if(r>=0){const c=t+r|0,a=s+r|0;b(n,a),b(e,c),e[c]=n[a],i=r-1|0;continue}else return}}}function L$(e,t,n,s,o){if(e===n&&t<s){let i=0;for(;;){const r=i;if(r<o){const c=t+r|0,a=s+r|0;b(n,a),b(e,c),e[c]=n[a],i=r+1|0;continue}else return}}else{let i=o-1|0;for(;;){const r=i;if(r>=0){const c=t+r|0,a=s+r|0;b(n,a),b(e,c),e[c]=n[a],i=r-1|0;continue}else return}}}function A$(e){return{val:""}}function I$(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function R$(e,t){const n=e;n.val=`${n.val}${t}`}function E$(e,t){Lh(t,e)}function k$(e,t){t_(t,e)}function P$(e){let t=e.acc;return t=t^(t>>>15|0),t=Math.imul(t,-2048144777)|0,t=t^(t>>>13|0),t=Math.imul(t,-1028477379)|0,t=t^(t>>>16|0),t}function Gc(e){return P$(e)}function Fc(e){return{acc:(e>>>0)+374761393|0}}function qo(e){const t=Fc(0);return E$(t,e),Gc(t)}function Hc(e){const t=Fc(0);return k$(t,e),Gc(t)}function Uc(e,t){const n=e._1,s=e._0,o=t/s|0;o!==0&&Uc(e,o);const i=t%s|0,r=i<0?0-i|0:i;b("0123456789abcdefghijklmnopqrstuvwxyz",r),n.method_2(n.self,"0123456789abcdefghijklmnopqrstuvwxyz".charCodeAt(r))}function N$(e,t,n){e<0&&t.method_2(t.self,45),Uc({_0:n,_1:t},e<0?0-e|0:e)}function O$(e){return e>=2&&e<7?36:e>=8&&e<15?18:e>=16&&e<=36?10:x$()}function D$(e,t){const n=A$(O$(t));return N$(e,{self:n,method_0:R$,method_1:H$,method_2:I$},t),n.val}function je(e){return D$(e,10)}function G$(e){return e.lo}function F$(e,t,n){const s=e.length;let o;return n===void 0?o=s:o=n,t>=0&&t<=o&&o<=s?e.substring(t,o):ke()}function H$(e,t,n,s){const o=e;o.val=`${o.val}${F$(t,n,n+s|0)}`}function zo(e){return e>=0?e<=1?1:e>1073741824?1073741824:(2147483647>>(Math.clz32(e-1|0)-1|0))+1|0:ke()}function U$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function j$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function B$(e){const t=zo(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Tt(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function V$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let c;r===void 0?c=ke():c=r,c.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function K$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let c;r===void 0?c=ke():c=r,c.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function W$(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const i=e.entries;b(i,s);const r=i[s];let c;r===void 0?c=ke():c=r,c.next=n}e.tail=t;const o=e.entries;b(o,t),o[t]=n,e.size=e.size+1|0}function Ui(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function ji(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function Bi(e,t,n){const s=e.entries;b(s,n),s[n]=t;const o=t.next;if(o===void 0){e.tail=n;return}else{const r=o;r.prev=n;return}}function q$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,c=o,a=i,u=e.entries;b(u,c);const l=u[c];if(l===void 0){a.psl=r,Ui(e,a,c);break}else{const p=l;if(r>p.psl){a.psl=r,Ui(e,a,c),s=p.psl+1|0,o=c+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=c+1&e.capacity_mask;continue}}}}function z$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,c=o,a=i,u=e.entries;b(u,c);const l=u[c];if(l===void 0){a.psl=r,ji(e,a,c);break}else{const p=l;if(r>p.psl){a.psl=r,ji(e,a,c),s=p.psl+1|0,o=c+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=c+1&e.capacity_mask;continue}}}}function X$(e,t,n){let s=n.psl+1|0,o=t+1&e.capacity_mask,i=n;for(;;){const r=s,c=o,a=i,u=e.entries;b(u,c);const l=u[c];if(l===void 0){a.psl=r,Bi(e,a,c);break}else{const p=l;if(r>p.psl){a.psl=r,Bi(e,a,c),s=p.psl+1|0,o=c+1&e.capacity_mask,i=p;continue}else{s=r+1|0,o=c+1&e.capacity_mask;continue}}}}function jc(e,t,n,s){e.size>=e.grow_at&&J$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const x=y[$];if(x===void 0){o={_0:$,_1:p};break}else{const L=x;if(L.hash===s&&L.key===t){L.value=n;return}if(p>L.psl){q$(e,$,L),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const c=o._0,a=o._1,f={prev:e.tail,next:void 0,psl:a,hash:s,key:t,value:n};V$(e,c,f)}function Bc(e,t,n,s){e.size>=e.grow_at&&Y$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const x=y[$];if(x===void 0){o={_0:$,_1:p};break}else{const L=x;if(L.hash===s&&ta(L.key,t)){L.value=n;return}if(p>L.psl){z$(e,$,L),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const c=o._0,a=o._1,f={prev:e.tail,next:void 0,psl:a,hash:s,key:t,value:n};K$(e,c,f)}function Vc(e,t,n,s){e.size>=e.grow_at&&Z$(e);let o,i=0,r=s&e.capacity_mask;for(;;){const p=i,$=r,y=e.entries;b(y,$);const x=y[$];if(x===void 0){o={_0:$,_1:p};break}else{const L=x;if(L.hash===s&&L.key===t){L.value=n;return}if(p>L.psl){X$(e,$,L),o={_0:$,_1:p};break}i=p+1|0,r=$+1&e.capacity_mask;continue}}const c=o._0,a=o._1,f={prev:e.tail,next:void 0,psl:a,hash:s,key:t,value:n};W$(e,c,f)}function J$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const c=i,a=c.next,u=c.key,l=c.value,f=c.hash;jc(e,u,l,f),o=a;continue}}}function Y$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const c=i,a=c.next,u=c.key,l=c.value,f=c.hash;Bc(e,u,l,f),o=a;continue}}}function Z$(e){const t=e.head,n=e.capacity<<1;e.entries=Tt(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let o=t;for(;;){const i=o;if(i===void 0)return;{const c=i,a=c.next,u=c.key,l=c.value,f=c.hash;Vc(e,u,l,f),o=a;continue}}}function se(e,t,n){jc(e,t,n,qo(t))}function Kc(e,t,n){Bc(e,t,n,Hc(t))}function Wc(e,t,n){Vc(e,t,n,qo(t))}function Qe(e){const t=U$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];se(t,i._0,i._1),s=o+1|0;continue}else break}return t}function Q$(e){const t=j$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];Kc(t,i._0,i._1),s=o+1|0;continue}else break}return t}function eh(e){const t=B$(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];Wc(t,i._0,i._1),s=o+1|0;continue}else break}return t}function qc(e,t){const n=Hc(t);let s=0,o=n&e.capacity_mask;for(;;){const i=s,r=o,c=e.entries;b(c,r);const a=c[r];if(a===void 0)return;{const l=a;if(l.hash===n&&ta(l.key,t))return l.value;if(i>l.psl)return;s=i+1|0,o=r+1&e.capacity_mask;continue}}}function th(e,t){const n=qo(t);let s=0,o=n&e.capacity_mask;for(;;){const i=s,r=o,c=e.entries;b(c,r);const a=c[r];if(a===void 0)ke();else{const l=a;if(l.hash===n&&l.key===t)return l.value;if(i<=l.psl){s=i+1|0,o=r+1&e.capacity_mask;continue}else ke()}}}function nh(e){const t=eh([]);return e(n=>(Wc(t,n._0,n._1),1)),t}function sh(e){return e?Sf:Lf}function Xe(e){const t=e+0,n=void 0;return new Ko(t,n)}function oh(e){return{hi:0,lo:e}}function ih(e){return oh(e)}function bo(e){return ih(e)}function Yn(e){const t=e,n=void 0;return new Ko(t,n)}function rh(e){const t=new Array(e.length),n=e.length;let s=0;for(;;){const o=s;if(o<n){const i=e[o];t[o]=oa(i),s=o+1|0;continue}else break}return new kc(t)}function ch(e,t){Pc(e,t)}function ah(e,t){Pc(e,t)}function lh(){return e=>1}function Vi(e){return t=>t(e)}function uh(e,t){return n=>e(n)===1&&t(n)===1?1:0}function fh(e){const t=[];return e(n=>(ch(t,n),1)),t}function zc(e,t,n){const s=e.hi,o=e.lo,i=o+n|0,r=i>>31,c=o>>31,a=n>>31,u=(c&a|~r&(c^a))&1;return{hi:(s+t|0)+u|0,lo:i}}function ph(e,t){return zc(e,t.hi,t.lo)}function dh(e,t){return t.lo===0?{hi:e.hi-t.hi|0,lo:e.lo}:zc(e,-1,-1)}function $h(e,t){const n=e.hi,s=e.lo,o=t.hi,i=t.lo,r=n,c=s,a=o,u=i,l=r>>>16|0,f=r&65535,p=c>>>16|0,$=c&65535,y=a>>>16|0,x=a&65535,C=u>>>16|0,L=u&65535,g=Math.imul($,L)|0,h=g>>>16|0,_=g&65535,w=(h>>>0)+((Math.imul(p,L)|0)>>>0)|0,A=w>>>16|0,I=((w&65535)>>>0)+((Math.imul($,C)|0)>>>0)|0,S=(A>>>0)+((I>>>16|0)>>>0)|0,P=I&65535,U=(S>>>0)+((Math.imul(f,L)|0)>>>0)|0,R=U>>>16|0,K=((U&65535)>>>0)+((Math.imul(p,C)|0)>>>0)|0,q=(R>>>0)+((K>>>16|0)>>>0)|0,X=((K&65535)>>>0)+((Math.imul($,x)|0)>>>0)|0,J=(q>>>0)+((X>>>16|0)>>>0)|0,$e=X&65535;return{hi:(((((((((J>>>0)+((Math.imul(l,L)|0)>>>0)|0)>>>0)+((Math.imul(f,C)|0)>>>0)|0)>>>0)+((Math.imul(p,x)|0)>>>0)|0)>>>0)+((Math.imul($,y)|0)>>>0)|0)&65535)<<16|$e,lo:P<<16|_}}function hh(e,t){const n=Af(),s=e.hi,o=e.lo,i=t.hi,r=t.lo,c=n.rem_u,a=c(o,s,r,i),u=n.get_high;return{hi:u(),lo:a}}function _h(e){return{hi:~e.hi,lo:~e.lo}}function mh(e,t){return{hi:e.hi&t.hi,lo:e.lo&t.lo}}function gh(e,t){return{hi:e.hi|t.hi,lo:e.lo|t.lo}}function bh(e,t){const n=t&63;return{hi:e.lo<<(n-32|0),lo:0}}function yh(e,t){const n=t&63;return n===0?e:n<32?{hi:e.hi>>>n|0,lo:e.lo>>>n|e.hi<<(32-n|0)}:{hi:0,lo:e.hi>>>(n-32|0)|0}}function Zn(e,t){return ph(e,t)}function Ki(e,t){return dh(e,t)}function hn(e,t){return $h(e,t)}function wh(e,t){return hh(e,t)}function Wi(e){return e.lo}function vh(e,t){return If(e,t)}function qi(e,t){const n=e,s=t;return n.hi===s.hi&&n.lo===s.lo}function En(e,t){return mh(e,t)}function Th(e,t){return gh(e,t)}function Mh(e){return _h(e)}function xh(e,t){return bh(e,t)}function Zt(e,t){return yh(e,t)}function Ch(e,t){const n=(e.acc>>>0)+((Math.imul(t,-1028477379)|0)>>>0)|0,s=17;e.acc=Math.imul(n<<s|(n>>>(32-s|0)|0),668265263)|0}function Xc(e,t){e.acc=(e.acc>>>0)+4|0,Ch(e,t)}function _n(e,t){Xc(e,t)}function Sh(e,t){const n=t.length;let s=0;for(;;){const o=s;if(o<n){Xc(e,t.charCodeAt(o)),s=o+1|0;continue}else return}}function Lh(e,t){Sh(t,e)}function Ah(e){const t=e;let n=t^(t>>>17|0);return n=Math.imul(n,-312814405)|0,n=n^(n>>>11|0),n=Math.imul(n,-1404298415)|0,n=n^(n>>>15|0),n=Math.imul(n,830770091)|0,n=n^(n>>>14|0),n}function zi(e,t,n,s,o){if(o>=0&&s>=0&&(o+n|0)<=t.length&&(s+n|0)<=e.length){S$(t,o,e,s,n);return}else{Dc(`bounds check failed: dst_offset = ${je(o)}, src_offset = ${je(s)}, len = ${je(n)}, dst.length = ${je(t.length)}, self.length = ${je(e.length)}`);return}}function Ih(e,t,n,s,o){if((o+n|0)<=t.length&&(s+n|0)<=e.length){L$(t,o,e,s,n);return}else{Dc(`bounds check failed: dst_offset = ${je(o)}, src_offset = ${je(s)}, len = ${je(n)}, dst.length = ${je(t.length)}, self.length = ${je(e.length)}`);return}}function Rh(e,t){{const n=Tt(e,t(0));let s=1;for(;;){const o=s;if(o<e){b(n,o),n[o]=t(o),s=o+1|0;continue}else break}return n}}function Eh(e){return Rf(e)}function Qn(e,t){if(t>=0&&t<e.len){const n=e.bytes,s=e.start+t|0;return b(n,s),n[s]}else return C$(`index out of bounds: the len is from 0 to ${je(e.len)} but the index is ${je(t)}`)}function kh(e,t,n){const s=e.length;let o;if(n===void 0)o=s;else{const c=n;o=c<0?s+c|0:c}const i=t<0?s+t|0:t;return i>=0&&i<=o&&o<=s?{bytes:e,start:i,len:o-i|0}:M$()}function Ph(e){const t=Qn(e,0),n=Qn(e,1),s=(t>>>0)+(n<<8>>>0)|0,o=Qn(e,2),i=(s>>>0)+(o<<16>>>0)|0,r=Qn(e,3);return(i>>>0)+(r<<24>>>0)|0}function Nh(e,t,n){b(t,0),t[0]=1634760805,b(t,1),t[1]=1634760805,b(t,2),t[2]=1634760805,b(t,3),t[3]=1634760805,b(t,4),t[4]=857760878,b(t,5),t[5]=857760878,b(t,6),t[6]=857760878,b(t,7),t[7]=857760878,b(t,8),t[8]=2036477234,b(t,9),t[9]=2036477234,b(t,10),t[10]=2036477234,b(t,11),t[11]=2036477234,b(t,12),t[12]=1797285236,b(t,13),t[13]=1797285236,b(t,14),t[14]=1797285236,b(t,15),t[15]=1797285236,b(e,0),b(t,16),t[16]=e[0],b(e,0),b(t,17),t[17]=e[0],b(e,0),b(t,18),t[18]=e[0],b(e,0),b(t,19),t[19]=e[0],b(e,1),b(t,20),t[20]=e[1],b(e,1),b(t,21),t[21]=e[1],b(e,1),b(t,22),t[22]=e[1],b(e,1),b(t,23),t[23]=e[1],b(e,2),b(t,24),t[24]=e[2],b(e,2),b(t,25),t[25]=e[2],b(e,2),b(t,26),t[26]=e[2],b(e,2),b(t,27),t[27]=e[2],b(e,3),b(t,28),t[28]=e[3],b(e,3),b(t,29),t[29]=e[3],b(e,3),b(t,30),t[30]=e[3],b(e,3),b(t,31),t[31]=e[3],b(e,4),b(t,32),t[32]=e[4],b(e,4),b(t,33),t[33]=e[4],b(e,4),b(t,34),t[34]=e[4],b(e,4),b(t,35),t[35]=e[4],b(e,5),b(t,36),t[36]=e[5],b(e,5),b(t,37),t[37]=e[5],b(e,5),b(t,38),t[38]=e[5],b(e,5),b(t,39),t[39]=e[5],b(e,6),b(t,40),t[40]=e[6],b(e,6),b(t,41),t[41]=e[6],b(e,6),b(t,42),t[42]=e[6],b(e,6),b(t,43),t[43]=e[6],b(e,7),b(t,44),t[44]=e[7],b(e,7),b(t,45),t[45]=e[7],b(e,7),b(t,46),t[46]=e[7],b(e,7),b(t,47),t[47]=e[7],b(t,48),t[48]=n,b(t,49),t[49]=(n>>>0)+1|0,b(t,50),t[50]=(n>>>0)+2|0,b(t,51),t[51]=(n>>>0)+3|0,b(t,52),t[52]=0,b(t,53),t[53]=0,b(t,54),t[54]=0,b(t,55),t[55]=0,b(t,56),t[56]=0,b(t,57),t[57]=0,b(t,58),t[58]=0,b(t,59),t[59]=0,b(t,60),t[60]=0,b(t,61),t[61]=0,b(t,62),t[62]=0,b(t,63),t[63]=0}function Ct(e){const t=e._0,n=e._1,s=e._2,o=e._3,i=(t>>>0)+(n>>>0)|0,r=o^i,c=r<<16|(r>>>16|0),a=(s>>>0)+(c>>>0)|0,u=n^a,l=u<<12|(u>>>20|0),f=(i>>>0)+(l>>>0)|0,p=c^f,$=p<<8|(p>>>24|0),y=(a>>>0)+($>>>0)|0,x=l^y,C=x<<7|(x>>>25|0);return{_0:f,_1:C,_2:y,_3:$}}function Jc(e,t,n){Nh(e,t,n);let s=0;for(;;){const o=s;if(o<4){b(t,o);let i=t[o];const r=4+o|0;b(t,r);let c=t[r];const a=8+o|0;b(t,a);let u=t[a];const l=12+o|0;b(t,l);let f=t[l];const p=16+o|0;b(t,p);let $=t[p];const y=20+o|0;b(t,y);let x=t[y];const C=24+o|0;b(t,C);let L=t[C];const g=28+o|0;b(t,g);let h=t[g];const _=32+o|0;b(t,_);let w=t[_];const A=36+o|0;b(t,A);let T=t[A];const I=40+o|0;b(t,I);let S=t[I];const P=44+o|0;b(t,P);let U=t[P];const R=48+o|0;b(t,R);let j=t[R];const K=52+o|0;b(t,K);let q=t[K];const Z=56+o|0;b(t,Z);let X=t[Z];const J=60+o|0;b(t,J);let $e=t[J],Ae=0;for(;;){const k=Ae;if(k<4){const E=Ct({_0:i,_1:$,_2:w,_3:j});i=E._0,$=E._1,w=E._2,j=E._3;const F=Ct({_0:c,_1:x,_2:T,_3:q});c=F._0,x=F._1,T=F._2,q=F._3;const G=Ct({_0:u,_1:L,_2:S,_3:X});u=G._0,L=G._1,S=G._2,X=G._3;const D=Ct({_0:f,_1:h,_2:U,_3:$e});f=D._0,h=D._1,U=D._2,$e=D._3;const N=Ct({_0:i,_1:x,_2:S,_3:$e});i=N._0,x=N._1,S=N._2,$e=N._3;const V=Ct({_0:c,_1:L,_2:U,_3:j});c=V._0,L=V._1,U=V._2,j=V._3;const H=Ct({_0:u,_1:h,_2:w,_3:q});u=H._0,h=H._1,w=H._2,q=H._3;const B=Ct({_0:f,_1:$,_2:T,_3:X});f=B._0,$=B._1,T=B._2,X=B._3,Ae=k+1|0;continue}else break}b(t,o),t[o]=i;const ge=4+o|0;b(t,ge),t[ge]=c;const be=8+o|0;b(t,be),t[be]=u;const et=12+o|0;b(t,et),t[et]=f;const We=16+o|0;b(t,We),b(t,We),t[We]=(t[We]>>>0)+($>>>0)|0;const qe=20+o|0;b(t,qe),b(t,qe),t[qe]=(t[qe]>>>0)+(x>>>0)|0;const ve=24+o|0;b(t,ve),b(t,ve),t[ve]=(t[ve]>>>0)+(L>>>0)|0;const Fe=28+o|0;b(t,Fe),b(t,Fe),t[Fe]=(t[Fe]>>>0)+(h>>>0)|0;const ze=32+o|0;b(t,ze),b(t,ze),t[ze]=(t[ze]>>>0)+(w>>>0)|0;const tt=36+o|0;b(t,tt),b(t,tt),t[tt]=(t[tt]>>>0)+(T>>>0)|0;const Pe=40+o|0;b(t,Pe),b(t,Pe),t[Pe]=(t[Pe]>>>0)+(S>>>0)|0;const Mt=44+o|0;b(t,Mt),b(t,Mt),t[Mt]=(t[Mt]>>>0)+(U>>>0)|0;const d=48+o|0;b(t,d),t[d]=j;const m=52+o|0;b(t,m),t[m]=q;const M=56+o|0;b(t,M),t[M]=X;const O=60+o|0;b(t,O),t[O]=$e,s=o+1|0;continue}else return}}function Oh(e){const t=Rh(8,o=>Ph(kh(e,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),n=Tt(64,0);return Jc(t,n,0),{buffer:n,seed:t,i:0,n:32,counter:0}}function Dh(e){const t=e.i;if(t>>>0>=e.n>>>0)return;e.i=(t>>>0)+1|0;const n=t&31,s=e.buffer,o=Math.imul(n,2)|0;b(s,o);const i=bo(s[o]),r=e.buffer,c=(Math.imul(n,2)|0)+1|0;b(r,c);const a=bo(r[c]);return Th(xh(a,32),i)}function Gh(e){e.counter=(e.counter>>>0)+4|0,e.counter===16&&(Ih(e.buffer,e.seed,8,56,0),e.counter=0),Jc(e.seed,e.buffer,e.counter),e.i=0,e.n=e.counter===12?28:32}function Yc(e,t,n,s,o,i){const c=n&31,u=i&31;if(c===u){let l;if(n>>>0<=127){const p={_0:e,_1:t};l=new cn(s,o,new Bn(p,an))}else{const $=n>>>5|0;l=Yc(e,t,$,s,o,i>>>5|0)}return new jn(Uh(c,l))}else{let l,f;e:if(n>>>0<=127){const $=new cn(e,t,an),y=new cn(s,o,an);l=$,f=y;break e}else{const $=n,y=new un(e,t,$>>>5|0),x=i,C=new un(s,o,x>>>5|0);l=y,f=C;break e}return new jn(Bh(c,l,u,f))}}function Zc(e,t,n,s){switch(e.$tag){case 1:{const o=e,i=o._0,r=o._1,c=o._2;if(t===i)return new cn(t,n,c);{const a=qh(c,f=>f._0===t);let u;a===void 0?u=c:u=zh(c,a);const l={_0:i,_1:r};return new cn(t,n,new Bn(l,u))}}case 0:{const o=e,i=o._0,r=o._1,c=o._2;return s===c&&t===i?new un(i,n,c):Yc(i,r,c,t,n,s)}default:{const i=e._0,c=s&31,a=jh(i,c);if(a===void 0){const u=s,l=new un(t,n,u>>>5|0);return new jn(Vh(i,c,l))}else{const p=Zc(a,t,n,s>>>5|0);return new jn(Kh(i,c,p))}}}}function rs(e,t,n){const s=e;return s===void 0?new un(t,n,Xi(t)):Zc(s,t,n,Xi(t))}function Qc(e){switch(e.$tag){case 1:{const t=e,n=t._0,s=t._1,o=t._2;return uh(Vi({_0:n,_1:s}),Wh(o))}case 0:{const t=e,n=t._0,s=t._1;return Vi({_0:n,_1:s})}default:{const s=e._0.data;return o=>{const i=s.length;let r=0;for(;;){const c=r;if(c<i){const a=s[c];if(Qc(a)(o)===1){r=c+1|0;continue}else return 0}else return 1}}}}}function Fh(e){const t=e;return t===void 0?lh():Qc(t)}function Hh(e){const t=Fh(e);return n=>t(s=>n(s._1))}function Xi(e){return Ah(e)|-1073741824}function Uh(e,t){return{elem_info:0|1<<e,data:[t]}}function jh(e,t){if(e.elem_info&1<<t){const s=e.data,o=e.elem_info,i=Wo(o&((1<<t>>>0)-1|0));return b(s,i),s[i]}else return}function Bh(e,t,n,s){return{elem_info:0|1<<e|1<<n,data:e<n?[t,s]:[s,t]}}function Vh(e,t,n){const s=e.data,o=s.length,i=o+1|0,r=e.elem_info,c=Wo(r&((1<<t>>>0)-1|0)),a=Tt(i,n);return zi(s,a,c,0,0),zi(s,a,o-c|0,c,c+1|0),{elem_info:e.elem_info|1<<t,data:a}}function Kh(e,t,n){const s=Eh(e.data),o=e.elem_info,i=Wo(o&((1<<t>>>0)-1|0));return b(s,i),s[i]=n,{elem_info:e.elem_info,data:s}}function Wh(e){return n=>{let s=e;for(;;){const o=s;if(o.$tag===0)return 1;{const i=o,r=i._0,c=i._1;if(n(r)===0)return 0;s=c;continue}}}}function qh(e,t){let n=e,s=0;for(;;){const o=n,i=s;if(o.$tag===0)return;{const r=o,c=r._0,a=r._1;if(t(c))return i;n=a,s=i+1|0;continue}}}function zh(e,t){if(e.$tag===0)return an;if(t<0)return e;if(t===0)return e._1;{const n=e,s=n._0,o=n._1,i=new Bn(s,an);let r=i,c=o,a=t-1|0;for(;;){const u=r,l=c,f=a;if(l.$tag===0)break;if(u.$tag===1){const p=u,$=l,y=$._0,x=$._1;if(f===0){p._1=x;break}else{p._1=new Bn(y,an),r=p._1,c=x,a=f-1|0;continue}}else{ke();break}}return i}}function Xh(e){for(;;){const t=Dh(e);if(t!==void 0)return t;Gh(e)}}function Jh(e){return{self:Oh(e),method_0:Xh}}function Yh(e){return Jh(Ef)}function Ji(e,t){const n=En(e,Xs),s=Zt(e,32),o=En(t,Xs),i=Zt(t,32),r=hn(n,o),c=Zn(hn(s,o),Zt(r,32)),a=Zn(hn(n,i),En(c,Xs));return{hi:Zn(Zn(hn(s,i),Zt(c,32)),Zt(a,32)),lo:hn(e,t)}}function Zh(e,t){if(qi(t,Gi)){const o=e;return o.method_0(o.self)}else if(qi(En(t,Ki(t,Fi)),Gi)){const o=e;return En(o.method_0(o.self),Ki(t,Fi))}const n=e;let s=Ji(n.method_0(n.self),t);if(Hi(s.lo,t)){const o=wh(Mh(t),t);for(;Hi(s.lo,o);){const i=e;s=Ji(i.method_0(i.self),t);continue}}return s.hi}function Qh(e,t){if(t===0){const n=e;return Wi(n.method_0(n.self))}return Wi(Zh(e,bo(t)))}function e_(e,t){if(t===0){const n=e;return G$(Zt(n.method_0(n.self),33))}else return Qh(e,t)}function ea(){return{now:0}}function Xo(e){return e.now=e.now+1|0,e.now}function ta(e,t){switch(e){case 0:return t===0;case 1:return t===1;case 2:return t===2;case 3:return t===3;default:return t===4}}function t_(e,t){switch(e){case 0:{_n(t,0);return}case 1:{_n(t,1);return}case 2:{_n(t,2);return}case 3:{_n(t,3);return}default:{_n(t,4);return}}}function na(e){const t=Qe([]);return se(t,"health",Yn(e.health)),se(t,"attack",Yn(e.attack)),se(t,"defense",Yn(e.defense)),se(t,"dodge",Yn(e.dodge)),new Ke(t)}function mn(e,t,n,s){return{health:e,attack:t,defense:n,dodge:s}}function Yi(e){const t=Qe([]);return se(t,"equipment_base",n_(e.equipment_base)),se(t,"id",Xe(e.id)),new Ke(t)}function n_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n));const s=e.description;se(t,"description",new me(s));const o=e.resource_url;return se(t,"resource_url",new me(o)),se(t,"attribute",na(e.attribute)),new Ke(t)}function s_(){return{history:[],callback:e=>{}}}function sa(e,t){const n={id:Xo(v$),type_msg:t.type_msg,content:t.content};ah(e.history,n)}function oa(e){const t=Qe([]);return se(t,"id",Xe(e.id)),se(t,"level",Xe(e.level)),se(t,"suffix",Xe(e.suffix)),se(t,"live_left",Xe(e.live_left)),se(t,"attribute",na(e.attribute)),se(t,"copper_type",ia(e.copper_type)),se(t,"equipment_slot",o_(e.equipment_slot)),se(t,"copper_info",i_(e.copper_info)),new Ke(t)}function ia(e){switch(e){case 0:{const t="IronWall";return new me(t)}case 1:{const t="Arcanist";return new me(t)}case 2:{const t="CraftsMan";return new me(t)}case 3:{const t="Mechanic";return new me(t)}default:{const t="Resonator";return new me(t)}}}function o_(e){const t=Qe([]),n=e.slot1;n===void 0||se(t,"slot1",Yi(n));const s=e.slot2;return s===void 0||se(t,"slot2",Yi(s)),se(t,"is_slot2_locked",sh(e.is_slot2_locked)),new Ke(t)}function i_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n)),se(t,"copper_type",ia(e.copper_type));const s=e.description;se(t,"description",new me(s));const o=e.icon_url;se(t,"icon_url",new me(o));const i=e.model_url;se(t,"model_url",new me(i));const r=e.skill;return r===void 0||se(t,"skill",r_(r)),new Ke(t)}function r_(e){const t=Qe([]),n=e.name;se(t,"name",new me(n));const s=e.description;se(t,"description",new me(s));const o=e.resource_url;se(t,"resource_url",new me(o));const i=e.cool_down;return i===void 0||se(t,"cool_down",Xe(i)),new Ke(t)}function ra(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function ca(e){switch(e){case 0:return mn(Math.fround(100),Math.fround(10),Math.fround(10),Math.fround(10));case 1:return mn(Math.fround(30),Math.fround(20),Math.fround(5),Math.fround(5));case 4:return mn(Math.fround(30),Math.fround(5),Math.fround(5),Math.fround(5));case 3:return mn(Math.fround(50),Math.fround(5),Math.fround(5),Math.fround(5));default:return mn(Math.fround(50),Math.fround(0),Math.fround(5),Math.fround(5))}}function Js(e){const t=th(y$,e),n=Xo(Nc);return{id:n,level:1,suffix:n,live_left:5,attribute:ca(t.copper_type),copper_type:t.copper_type,equipment_slot:ra(),copper_info:t}}function c_(){return Q$([{_0:2,_1:9999},{_0:1,_1:0},{_0:4,_1:0},{_0:3,_1:0},{_0:0,_1:0}])}function Qt(e,t){const n=qc(e,t);return n===void 0?ke():n}function a_(e,t,n){const s=qc(e,t);let o;if(s===void 0?o=ke():o=s,o<n){sa(Oc,{type_msg:"resource_not_enough",content:"资源不足"});return}else{Kc(e,t,o-n|0);return}}function l_(){const e=Js("阿磐"),t=Js("咝咝"),n=Js("波波");return{coppers:rs(rs(rs(void 0,e.id,e),t.id,t),n.id,n)}}function u_(e,t){return{coppers:rs(e.coppers,t.id,t)}}function f_(e){return fh(Hh(e.coppers))}function p_(e,t){return e+e_(T$,(t-e|0)+1|0)|0}function d_(){const e=Xo(Nc),t=p_(0,Rn.length-1|0);b(Rn,t);const n=Rn[t],s=ca(n.copper_type);return{id:e,level:1,suffix:e,live_left:5,attribute:s,copper_type:n.copper_type,equipment_slot:ra(),copper_info:n}}function $_(e){if(Qt(e,2)>10)return a_(e,2,10),d_();sa(Oc,{type_msg:"resource_not_enough",content:"资源不足"})}function h_(){return{resource:c_(),warehouse:l_()}}function __(e){const t=e.resource,n=Qe([{_0:"SpiritalSpark",_1:Xe(Qt(t,2))},{_0:"RecallGear",_1:Xe(Qt(t,1))},{_0:"ResonantCrystal",_1:Xe(Qt(t,4))},{_0:"RefinedCopper",_1:Xe(Qt(t,3))},{_0:"HeartCrystalDust",_1:Xe(Qt(t,0))}]);return new Ke(n)}function m_(e){const t=e.warehouse,n=Qe([{_0:"coppers",_1:rh(f_(t))}]);return new Ke(n)}function g_(e){const t=$_(e.resource);if(t===void 0){const n="error",s={_0:"type",_1:new me(n)},o="资源不足",i=Qe([s,{_0:"content",_1:new me(o)}]);return new Ke(i)}else{const s=t;e.warehouse=u_(e.warehouse,s);const o="success",i=Qe([{_0:"type",_1:new me(o)},{_0:"copper",_1:oa(s)}]);return new Ke(i)}}function kn(){return w$}function yo(e){return __(e)}function Zi(e){return m_(e)}function b_(e){return g_(e)}const y_={class:"draw-screen"},w_={class:"draw-screen__body"},v_={class:"draw-card"},T_={class:"card-face card-back"},M_=["src"],x_={class:"card-face card-front"},C_=["src"],S_={key:1,class:"card-icon"},L_=["src"],A_={class:"draw-cost"},I_=["src"],R_=["disabled","title"],E_={key:0,class:"toast"},k_={__name:"DrawScreen",emits:["draw"],setup(e,{emit:t}){const n=t,s=Q(!1),o=Q(!0),i=Q(!1),r=Q("抽卡展示"),c=Q("✨"),a=Q(""),u=Q({left:0,top:0,width:0,height:0});function l(h){return h?typeof h=="string"&&h.startsWith("/")?h:ae(h):""}const f=Q(!1),p=Q(!1),$=Q(!1),y=Q("");function x(h){y.value=h||"提示",$.value=!0,setTimeout(()=>{$.value=!1},1800)}async function C(){try{const h=await yo(kn()),_=T=>{if(T==null)return T;const I=typeof T=="object"&&"_0"in T&&Object.keys(T).length===1?T._0:T;if(I&&typeof I=="object"&&"_0"in I&&typeof I._0=="number")return I._0;if(I&&typeof I=="object"&&Array.isArray(I.entries)&&typeof I.size=="number"){const S={};for(const P of I.entries){if(!P)continue;const U=P.key??P._0??P[0],R=P.value??P._1??P[1],j=typeof U=="string"?U:U&&U._0?U._0:String(U);S[j]=_(R)}return S}if(Array.isArray(I))return I.map(_);if(I&&typeof I=="object"){const S={};for(const P of Object.keys(I))S[P]=_(I[P]);return S}return I},w=_(h),A=Number((w==null?void 0:w.SpiritalSpark)??0);o.value=A>=10}catch{o.value=!1}}function L(){i.value=!1,f.value=!1,p.value=!1}function g(){if(s.value)return;if(C(),!o.value){x("资源不足");return}s.value=!0,console.log("[DrawScreen] runDrawSequence start");const h=document.querySelector(".draw-card");if(h){h.classList.add("is-shaking"),setTimeout(()=>h.classList.remove("is-shaking"),500);const _=h.getBoundingClientRect();u.value={left:Math.round(_.left),top:Math.round(_.top),width:Math.round(_.width),height:Math.round(_.height)}}setTimeout(async()=>{i.value=!0,f.value=!1,p.value=!0;try{const _=await b_(kn());console.log("[DrawScreen] gacha raw:",_);const w=T=>{if(T==null)return T;const I=typeof T=="object"&&"_0"in T&&Object.keys(T).length===1?T._0:T;if(I&&typeof I=="object"&&"_0"in I&&typeof I._0=="number")return I._0;if(I&&typeof I=="object"&&Array.isArray(I.entries)&&typeof I.size=="number"){const S={};for(const P of I.entries){if(!P)continue;const U=P.key??P._0??P[0],R=P.value??P._1??P[1],j=typeof U=="string"?U:U&&U._0?U._0:String(U);S[j]=w(R)}return S}if(Array.isArray(I))return I.map(w);if(I&&typeof I=="object"){const S={};for(const P of Object.keys(I))S[P]=w(I[P]);return S}return I},A=w(_);if(console.log("[DrawScreen] gacha data:",A),A&&A.type==="success"&&A.copper&&A.copper.copper_info){const T=A.copper.copper_info;console.log("[DrawScreen] gacha info:",T),console.log("[DrawScreen] icon_url:",T.icon_url),r.value=T.name||"新铜偶",c.value="",a.value=l(T.icon_url||""),console.log("[DrawScreen] tempImage resolved:",a.value),await On(),setTimeout(()=>{p.value=!1,setTimeout(()=>{f.value=!0},350)},450),n("draw",{name:T.name,image:T.icon_url||""}),C()}else A&&A.type==="error"&&(i.value=!1,f.value=!1,p.value=!1,x(A.content||"资源不足"),n("draw",{error:!0}),C())}catch{i.value=!1,f.value=!1,p.value=!1,x("抽卡失败"),n("draw",{error:!0}),C()}finally{setTimeout(()=>{s.value=!1},800)}},600)}return(h,_)=>(ne(),ce("div",y_,[v("div",w_,[v("div",v_,[i.value?(ne(),ce("div",{key:0,class:"draw-temp",onClick:L},[_[3]||(_[3]=v("div",{class:"dim-backdrop"},null,-1)),v("div",{class:"temp-stack",style:It({left:u.value.left+"px",top:u.value.top+"px",width:u.value.width+"px",height:u.value.height+"px"}),onClick:_[2]||(_[2]=zs(()=>{},["stop"]))},[v("div",{class:Nt(["card",{flipped:p.value}]),onClick:_[0]||(_[0]=zs(w=>p.value=!p.value,["stop"]))},[v("div",T_,[v("img",{src:Cn(ae)("frontend_resource/gacha.webp"),alt:"back"},null,8,M_)]),v("div",x_,[a.value?(ne(),ce("img",{key:0,src:a.value,alt:"copper",class:"card-front-img"},null,8,C_)):(ne(),ce("div",S_,fe(c.value||"🎴"),1))])],2),v("div",{class:Nt(["card-name-below",{show:f.value}]),onClick:_[1]||(_[1]=zs(()=>{},["stop"]))},fe(r.value),3)],4)])):kt("",!0),v("img",{class:"draw-card__img",src:Cn(ae)("frontend_resource/gacha.webp"),alt:"card"},null,8,L_)]),v("div",A_,[v("img",{class:"draw-cost__icon",src:Cn(ae)("resource/spiritual_spark.webp"),alt:"cost"},null,8,I_),_[4]||(_[4]=v("span",{class:"draw-cost__times"},"X 10",-1))]),v("button",{class:"draw-action",disabled:s.value||!o.value,title:o.value?"":"资源不足",onClick:g},"抽取卡牌",8,R_),$.value?(ne(),ce("div",E_,fe(y.value),1)):kt("",!0)])]))}},P_=Xt(k_,[["__scopeId","data-v-7ccb01a9"]]);function Qi(e,t){if(t===ua)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===to||t===cr){let n=e.getIndex();if(n===null){const r=[],c=e.getAttribute("position");if(c!==void 0){for(let a=0;a<c.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}const s=n.count-2,o=[];if(t===to)for(let r=1;r<=s;r++)o.push(n.getX(0)),o.push(n.getX(r)),o.push(n.getX(r+1));else for(let r=0;r<s;r++)r%2===0?(o.push(n.getX(r)),o.push(n.getX(r+1)),o.push(n.getX(r+2))):(o.push(n.getX(r+2)),o.push(n.getX(r+1)),o.push(n.getX(r)));o.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=e.clone();return i.setIndex(o),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class wo extends ar{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new F_(n)}),this.register(function(n){return new H_(n)}),this.register(function(n){return new X_(n)}),this.register(function(n){return new J_(n)}),this.register(function(n){return new Y_(n)}),this.register(function(n){return new j_(n)}),this.register(function(n){return new B_(n)}),this.register(function(n){return new V_(n)}),this.register(function(n){return new K_(n)}),this.register(function(n){return new G_(n)}),this.register(function(n){return new W_(n)}),this.register(function(n){return new U_(n)}),this.register(function(n){return new z_(n)}),this.register(function(n){return new q_(n)}),this.register(function(n){return new O_(n)}),this.register(function(n){return new Z_(n)}),this.register(function(n){return new Q_(n)})}load(t,n,s,o){const i=this;let r;if(this.resourcePath!=="")r=this.resourcePath;else if(this.path!==""){const u=wn.extractUrlBase(t);r=wn.resolveURL(u,this.path)}else r=wn.extractUrlBase(t);this.manager.itemStart(t);const c=function(u){o?o(u):console.error(u),i.manager.itemError(t),i.manager.itemEnd(t)},a=new cs(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{i.parse(u,r,function(l){n(l),i.manager.itemEnd(t)},c)}catch(l){c(l)}},s,c)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,s,o){let i;const r={},c={},a=new TextDecoder;if(typeof t=="string")i=JSON.parse(t);else if(t instanceof ArrayBuffer)if(a.decode(new Uint8Array(t,0,4))===aa){try{r[ee.KHR_BINARY_GLTF]=new em(t)}catch(f){o&&o(f);return}i=JSON.parse(r[ee.KHR_BINARY_GLTF].content)}else i=JSON.parse(a.decode(t));else i=t;if(i.asset===void 0||i.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new dm(i,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const f=this.pluginCallbacks[l](u);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[f.name]=f,r[f.name]=!0}if(i.extensionsUsed)for(let l=0;l<i.extensionsUsed.length;++l){const f=i.extensionsUsed[l],p=i.extensionsRequired||[];switch(f){case ee.KHR_MATERIALS_UNLIT:r[f]=new D_;break;case ee.KHR_DRACO_MESH_COMPRESSION:r[f]=new tm(i,this.dracoLoader);break;case ee.KHR_TEXTURE_TRANSFORM:r[f]=new nm;break;case ee.KHR_MESH_QUANTIZATION:r[f]=new sm;break;default:p.indexOf(f)>=0&&c[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(r),u.setPlugins(c),u.parse(s,o)}parseAsync(t,n){const s=this;return new Promise(function(o,i){s.parse(t,n,o,i)})}}function N_(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ee={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class O_{constructor(t){this.parser=t,this.name=ee.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let s=0,o=n.length;s<o;s++){const i=n[s];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const n=this.parser,s="light:"+t;let o=n.cache.get(s);if(o)return o;const i=n.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let u;const l=new bt(16777215);a.color!==void 0&&l.setRGB(a.color[0],a.color[1],a.color[2],ut);const f=a.range!==void 0?a.range:0;switch(a.type){case"directional":u=new xo(l),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new pa(l),u.distance=f;break;case"spot":u=new fa(l),u.distance=f,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,u.angle=a.spot.outerConeAngle,u.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return u.position.set(0,0,0),ct(u,a),a.intensity!==void 0&&(u.intensity=a.intensity),u.name=n.createUniqueName(a.name||"light_"+t),o=Promise.resolve(u),n.cache.add(s,o),o}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,s=this.parser,i=s.json.nodes[t],c=(i.extensions&&i.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(a){return s._getNodeRef(n.cache,c,a)})}}class D_{constructor(){this.name=ee.KHR_MATERIALS_UNLIT}getMaterialType(){return bn}extendParams(t,n,s){const o=[];t.color=new bt(1,1,1),t.opacity=1;const i=n.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const r=i.baseColorFactor;t.color.setRGB(r[0],r[1],r[2],ut),t.opacity=r[3]}i.baseColorTexture!==void 0&&o.push(s.assignTexture(t,"map",i.baseColorTexture,gt))}return Promise.all(o)}}class G_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name].emissiveStrength;return i!==void 0&&(n.emissiveIntensity=i),Promise.resolve()}}class F_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];if(r.clearcoatFactor!==void 0&&(n.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(i.push(s.assignTexture(n,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const c=r.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new lr(c,c)}return Promise.all(i)}}class H_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class U_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.iridescenceFactor!==void 0&&(n.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(n.iridescenceIOR=r.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&i.push(s.assignTexture(n,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(i)}}class j_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[];n.sheenColor=new bt(0,0,0),n.sheenRoughness=0,n.sheen=1;const r=o.extensions[this.name];if(r.sheenColorFactor!==void 0){const c=r.sheenColorFactor;n.sheenColor.setRGB(c[0],c[1],c[2],ut)}return r.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&i.push(s.assignTexture(n,"sheenColorMap",r.sheenColorTexture,gt)),r.sheenRoughnessTexture!==void 0&&i.push(s.assignTexture(n,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(i)}}class B_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.transmissionFactor!==void 0&&(n.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&i.push(s.assignTexture(n,"transmissionMap",r.transmissionTexture)),Promise.all(i)}}class V_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&i.push(s.assignTexture(n,"thicknessMap",r.thicknessTexture)),n.attenuationDistance=r.attenuationDistance||1/0;const c=r.attenuationColor||[1,1,1];return n.attenuationColor=new bt().setRGB(c[0],c[1],c[2],ut),Promise.all(i)}}class K_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const o=this.parser.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class W_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];n.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&i.push(s.assignTexture(n,"specularIntensityMap",r.specularTexture));const c=r.specularColorFactor||[1,1,1];return n.specularColor=new bt().setRGB(c[0],c[1],c[2],ut),r.specularColorTexture!==void 0&&i.push(s.assignTexture(n,"specularColorMap",r.specularColorTexture,gt)),Promise.all(i)}}class q_{constructor(t){this.parser=t,this.name=ee.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return n.bumpScale=r.bumpFactor!==void 0?r.bumpFactor:1,r.bumpTexture!==void 0&&i.push(s.assignTexture(n,"bumpMap",r.bumpTexture)),Promise.all(i)}}class z_{constructor(t){this.parser=t,this.name=ee.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ft}extendMaterialParams(t,n){const s=this.parser,o=s.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],r=o.extensions[this.name];return r.anisotropyStrength!==void 0&&(n.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(n.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&i.push(s.assignTexture(n,"anisotropyMap",r.anisotropyTexture)),Promise.all(i)}}class X_{constructor(t){this.parser=t,this.name=ee.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,s=n.json,o=s.textures[t];if(!o.extensions||!o.extensions[this.name])return null;const i=o.extensions[this.name],r=n.options.ktx2Loader;if(!r){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,i.source,r)}}class J_{constructor(t){this.parser=t,this.name=ee.EXT_TEXTURE_WEBP}loadTexture(t){const n=this.name,s=this.parser,o=s.json,i=o.textures[t];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],c=o.images[r.source];let a=s.textureLoader;if(c.uri){const u=s.options.manager.getHandler(c.uri);u!==null&&(a=u)}return s.loadTextureImage(t,r.source,a)}}class Y_{constructor(t){this.parser=t,this.name=ee.EXT_TEXTURE_AVIF}loadTexture(t){const n=this.name,s=this.parser,o=s.json,i=o.textures[t];if(!i.extensions||!i.extensions[n])return null;const r=i.extensions[n],c=o.images[r.source];let a=s.textureLoader;if(c.uri){const u=s.options.manager.getHandler(c.uri);u!==null&&(a=u)}return s.loadTextureImage(t,r.source,a)}}class Z_{constructor(t){this.name=ee.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,s=n.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const o=s.extensions[this.name],i=this.parser.getDependency("buffer",o.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(c){const a=o.byteOffset||0,u=o.byteLength||0,l=o.count,f=o.byteStride,p=new Uint8Array(c,a,u);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(l,f,p,o.mode,o.filter).then(function($){return $.buffer}):r.ready.then(function(){const $=new ArrayBuffer(l*f);return r.decodeGltfBuffer(new Uint8Array($),l,f,p,o.mode,o.filter),$})})}else return null}}class Q_{constructor(t){this.name=ee.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,s=n.nodes[t];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const o=n.meshes[s.mesh];for(const u of o.primitives)if(u.mode!==Ue.TRIANGLES&&u.mode!==Ue.TRIANGLE_STRIP&&u.mode!==Ue.TRIANGLE_FAN&&u.mode!==void 0)return null;const r=s.extensions[this.name].attributes,c=[],a={};for(const u in r)c.push(this.parser.getDependency("accessor",r[u]).then(l=>(a[u]=l,a[u])));return c.length<1?null:(c.push(this.parser.createNodeMesh(t)),Promise.all(c).then(u=>{const l=u.pop(),f=l.isGroup?l.children:[l],p=u[0].count,$=[];for(const y of f){const x=new as,C=new Je,L=new ur,g=new Je(1,1,1),h=new da(y.geometry,y.material,p);for(let _=0;_<p;_++)a.TRANSLATION&&C.fromBufferAttribute(a.TRANSLATION,_),a.ROTATION&&L.fromBufferAttribute(a.ROTATION,_),a.SCALE&&g.fromBufferAttribute(a.SCALE,_),h.setMatrixAt(_,x.compose(C,L,g));for(const _ in a)if(_==="_COLOR_0"){const w=a[_];h.instanceColor=new $a(w.array,w.itemSize,w.normalized)}else _!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&y.geometry.setAttribute(_,a[_]);fr.prototype.copy.call(h,y),this.parser.assignFinalMaterial(h),$.push(h)}return l.isGroup?(l.clear(),l.add(...$),l):$[0]}))}}const aa="glTF",gn=12,er={JSON:1313821514,BIN:5130562};class em{constructor(t){this.name=ee.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,gn),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==aa)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-gn,i=new DataView(t,gn);let r=0;for(;r<o;){const c=i.getUint32(r,!0);r+=4;const a=i.getUint32(r,!0);if(r+=4,a===er.JSON){const u=new Uint8Array(t,gn+r,c);this.content=s.decode(u)}else if(a===er.BIN){const u=gn+r;this.body=t.slice(u,u+c)}r+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class tm{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ee.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const s=this.json,o=this.dracoLoader,i=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,c={},a={},u={};for(const l in r){const f=vo[l]||l.toLowerCase();c[f]=r[l]}for(const l in t.attributes){const f=vo[l]||l.toLowerCase();if(r[l]!==void 0){const p=s.accessors[t.attributes[l]],$=ln[p.componentType];u[f]=$.name,a[f]=p.normalized===!0}}return n.getDependency("bufferView",i).then(function(l){return new Promise(function(f,p){o.decodeDracoFile(l,function($){for(const y in $.attributes){const x=$.attributes[y],C=a[y];C!==void 0&&(x.normalized=C)}f($)},c,u,ut,p)})})}}class nm{constructor(){this.name=ee.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class sm{constructor(){this.name=ee.KHR_MESH_QUANTIZATION}}class la extends Ha{constructor(t,n,s,o){super(t,n,s,o)}copySampleValue_(t){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,i=t*o*3+o;for(let r=0;r!==o;r++)n[r]=s[i+r];return n}interpolate_(t,n,s,o){const i=this.resultBuffer,r=this.sampleValues,c=this.valueSize,a=c*2,u=c*3,l=o-n,f=(s-n)/l,p=f*f,$=p*f,y=t*u,x=y-u,C=-2*$+3*p,L=$-p,g=1-C,h=L-p+f;for(let _=0;_!==c;_++){const w=r[x+_+c],A=r[x+_+a]*l,T=r[y+_+c],I=r[y+_]*l;i[_]=g*w+h*A+C*T+L*I}return i}}const om=new ur;class im extends la{interpolate_(t,n,s,o){const i=super.interpolate_(t,n,s,o);return om.fromArray(i).normalize().toArray(i),i}}const Ue={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ln={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tr={9728:dr,9729:no,9984:ya,9985:ba,9986:ga,9987:pr},nr={33071:va,33648:wa,10497:so},Ys={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vo={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},St={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rm={CUBICSPLINE:void 0,LINEAR:_r,STEP:Da},Zs={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cm(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new Co({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fa})),e.DefaultMaterial}function Bt(e,t,n){for(const s in n.extensions)e[s]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function ct(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function am(e,t,n){let s=!1,o=!1,i=!1;for(let u=0,l=t.length;u<l;u++){const f=t[u];if(f.POSITION!==void 0&&(s=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(i=!0),s&&o&&i)break}if(!s&&!o&&!i)return Promise.resolve(e);const r=[],c=[],a=[];for(let u=0,l=t.length;u<l;u++){const f=t[u];if(s){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):e.attributes.position;r.push(p)}if(o){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):e.attributes.normal;c.push(p)}if(i){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):e.attributes.color;a.push(p)}}return Promise.all([Promise.all(r),Promise.all(c),Promise.all(a)]).then(function(u){const l=u[0],f=u[1],p=u[2];return s&&(e.morphAttributes.position=l),o&&(e.morphAttributes.normal=f),i&&(e.morphAttributes.color=p),e.morphTargetsRelative=!0,e})}function lm(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let s=0,o=n.length;s<o;s++)e.morphTargetDictionary[n[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function um(e){let t;const n=e.extensions&&e.extensions[ee.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Qs(n.attributes):t=e.indices+":"+Qs(e.attributes)+":"+e.mode,e.targets!==void 0)for(let s=0,o=e.targets.length;s<o;s++)t+=":"+Qs(e.targets[s]);return t}function Qs(e){let t="";const n=Object.keys(e).sort();for(let s=0,o=n.length;s<o;s++)t+=n[s]+":"+e[n[s]]+";";return t}function To(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fm(e){return e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0?"image/jpeg":e.search(/\.webp($|\?)/i)>0||e.search(/^data\:image\/webp/)===0?"image/webp":e.search(/\.ktx2($|\?)/i)>0||e.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const pm=new as;class dm{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new N_,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,o=-1,i=!1,r=-1;if(typeof navigator<"u"){const c=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(c)===!0;const a=c.match(/Version\/(\d+)/);o=s&&a?parseInt(a[1],10):-1,i=c.indexOf("Firefox")>-1,r=i?c.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&o<17||i&&r<98?this.textureLoader=new ha(this.options.manager):this.textureLoader=new _a(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new cs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const s=this,o=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(r){const c={scene:r[0][o.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:o.asset,parser:s,userData:{}};return Bt(i,c,o),ct(c,o),Promise.all(s._invokeAll(function(a){return a.afterRoot&&a.afterRoot(c)})).then(function(){for(const a of c.scenes)a.updateMatrixWorld();t(c)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],s=this.json.meshes||[];for(let o=0,i=n.length;o<i;o++){const r=n[o].joints;for(let c=0,a=r.length;c<a;c++)t[r[c]].isBone=!0}for(let o=0,i=t.length;o<i;o++){const r=t[o];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(s[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,s){if(t.refs[n]<=1)return s;const o=s.clone(),i=(r,c)=>{const a=this.associations.get(r);a!=null&&this.associations.set(c,a);for(const[u,l]of r.children.entries())i(l,c.children[u])};return i(s,o),o.name+="_instance_"+t.uses[n]++,o}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let s=0;s<n.length;s++){const o=t(n[s]);if(o)return o}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const s=[];for(let o=0;o<n.length;o++){const i=t(n[o]);i&&s.push(i)}return s}getDependency(t,n){const s=t+":"+n;let o=this.cache.get(s);if(!o){switch(t){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(i){return i.loadNode&&i.loadNode(n)});break;case"mesh":o=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(t,n)}),!o)throw new Error("Unknown type: "+t);break}this.cache.add(s,o)}return o}getDependencies(t){let n=this.cache.get(t);if(!n){const s=this,o=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(i,r){return s.getDependency(t,r)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],s=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[ee.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(i,r){s.load(wn.resolveURL(n.uri,o.path),i,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(s){const o=n.byteLength||0,i=n.byteOffset||0;return s.slice(i,i+o)})}loadAccessor(t){const n=this,s=this.json,o=this.json.accessors[t];if(o.bufferView===void 0&&o.sparse===void 0){const r=Ys[o.type],c=ln[o.componentType],a=o.normalized===!0,u=new c(o.count*r);return Promise.resolve(new vn(u,r,a))}const i=[];return o.bufferView!==void 0?i.push(this.getDependency("bufferView",o.bufferView)):i.push(null),o.sparse!==void 0&&(i.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(i).then(function(r){const c=r[0],a=Ys[o.type],u=ln[o.componentType],l=u.BYTES_PER_ELEMENT,f=l*a,p=o.byteOffset||0,$=o.bufferView!==void 0?s.bufferViews[o.bufferView].byteStride:void 0,y=o.normalized===!0;let x,C;if($&&$!==f){const L=Math.floor(p/$),g="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+L+":"+o.count;let h=n.cache.get(g);h||(x=new u(c,L*$,o.count*$/l),h=new ma(x,$/l),n.cache.add(g,h)),C=new Ga(h,a,p%$/l,y)}else c===null?x=new u(o.count*a):x=new u(c,p,o.count*a),C=new vn(x,a,y);if(o.sparse!==void 0){const L=Ys.SCALAR,g=ln[o.sparse.indices.componentType],h=o.sparse.indices.byteOffset||0,_=o.sparse.values.byteOffset||0,w=new g(r[1],h,o.sparse.count*L),A=new u(r[2],_,o.sparse.count*a);c!==null&&(C=new vn(C.array.slice(),C.itemSize,C.normalized)),C.normalized=!1;for(let T=0,I=w.length;T<I;T++){const S=w[T];if(C.setX(S,A[T*a]),a>=2&&C.setY(S,A[T*a+1]),a>=3&&C.setZ(S,A[T*a+2]),a>=4&&C.setW(S,A[T*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}C.normalized=y}return C})}loadTexture(t){const n=this.json,s=this.options,i=n.textures[t].source,r=n.images[i];let c=this.textureLoader;if(r.uri){const a=s.manager.getHandler(r.uri);a!==null&&(c=a)}return this.loadTextureImage(t,i,c)}loadTextureImage(t,n,s){const o=this,i=this.json,r=i.textures[t],c=i.images[n],a=(c.uri||c.bufferView)+":"+r.sampler;if(this.textureCache[a])return this.textureCache[a];const u=this.loadImageSource(n,s).then(function(l){l.flipY=!1,l.name=r.name||c.name||"",l.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(l.name=c.uri);const p=(i.samplers||{})[r.sampler]||{};return l.magFilter=tr[p.magFilter]||no,l.minFilter=tr[p.minFilter]||pr,l.wrapS=nr[p.wrapS]||so,l.wrapT=nr[p.wrapT]||so,l.generateMipmaps=!l.isCompressedTexture&&l.minFilter!==dr&&l.minFilter!==no,o.associations.set(l,{textures:t}),l}).catch(function(){return null});return this.textureCache[a]=u,u}loadImageSource(t,n){const s=this,o=this.json,i=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(f=>f.clone());const r=o.images[t],c=self.URL||self.webkitURL;let a=r.uri||"",u=!1;if(r.bufferView!==void 0)a=s.getDependency("bufferView",r.bufferView).then(function(f){u=!0;const p=new Blob([f],{type:r.mimeType});return a=c.createObjectURL(p),a});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(a).then(function(f){return new Promise(function(p,$){let y=p;n.isImageBitmapLoader===!0&&(y=function(x){const C=new Qo(x);C.needsUpdate=!0,p(C)}),n.load(wn.resolveURL(f,i.path),y,void 0,$)})}).then(function(f){return u===!0&&c.revokeObjectURL(a),ct(f,r),f.userData.mimeType=r.mimeType||fm(r.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),f});return this.sourceCache[t]=l,l}assignTexture(t,n,s,o){const i=this;return this.getDependency("texture",s.index).then(function(r){if(!r)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(r=r.clone(),r.channel=s.texCoord),i.extensions[ee.KHR_TEXTURE_TRANSFORM]){const c=s.extensions!==void 0?s.extensions[ee.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const a=i.associations.get(r);r=i.extensions[ee.KHR_TEXTURE_TRANSFORM].extendTexture(r,c),i.associations.set(r,a)}}return o!==void 0&&(r.colorSpace=o),t[n]=r,r})}assignFinalMaterial(t){const n=t.geometry;let s=t.material;const o=n.attributes.tangent===void 0,i=n.attributes.color!==void 0,r=n.attributes.normal===void 0;if(t.isPoints){const c="PointsMaterial:"+s.uuid;let a=this.cache.get(c);a||(a=new Ta,Es.prototype.copy.call(a,s),a.color.copy(s.color),a.map=s.map,a.sizeAttenuation=!1,this.cache.add(c,a)),s=a}else if(t.isLine){const c="LineBasicMaterial:"+s.uuid;let a=this.cache.get(c);a||(a=new Ma,Es.prototype.copy.call(a,s),a.color.copy(s.color),a.map=s.map,this.cache.add(c,a)),s=a}if(o||i||r){let c="ClonedMaterial:"+s.uuid+":";o&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),r&&(c+="flat-shading:");let a=this.cache.get(c);a||(a=s.clone(),i&&(a.vertexColors=!0),r&&(a.flatShading=!0),o&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(c,a),this.associations.set(a,this.associations.get(s))),s=a}t.material=s}getMaterialType(){return Co}loadMaterial(t){const n=this,s=this.json,o=this.extensions,i=s.materials[t];let r;const c={},a=i.extensions||{},u=[];if(a[ee.KHR_MATERIALS_UNLIT]){const f=o[ee.KHR_MATERIALS_UNLIT];r=f.getMaterialType(),u.push(f.extendParams(c,i,n))}else{const f=i.pbrMetallicRoughness||{};if(c.color=new bt(1,1,1),c.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;c.color.setRGB(p[0],p[1],p[2],ut),c.opacity=p[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(c,"map",f.baseColorTexture,gt)),c.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,c.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(c,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(c,"roughnessMap",f.metallicRoughnessTexture))),r=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,c)})))}i.doubleSided===!0&&(c.side=xa);const l=i.alphaMode||Zs.OPAQUE;if(l===Zs.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,l===Zs.MASK&&(c.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&r!==bn&&(u.push(n.assignTexture(c,"normalMap",i.normalTexture)),c.normalScale=new lr(1,1),i.normalTexture.scale!==void 0)){const f=i.normalTexture.scale;c.normalScale.set(f,f)}if(i.occlusionTexture!==void 0&&r!==bn&&(u.push(n.assignTexture(c,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&r!==bn){const f=i.emissiveFactor;c.emissive=new bt().setRGB(f[0],f[1],f[2],ut)}return i.emissiveTexture!==void 0&&r!==bn&&u.push(n.assignTexture(c,"emissiveMap",i.emissiveTexture,gt)),Promise.all(u).then(function(){const f=new r(c);return i.name&&(f.name=i.name),ct(f,i),n.associations.set(f,{materials:t}),i.extensions&&Bt(o,f,i),f})}createUniqueName(t){const n=Ca.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,s=this.extensions,o=this.primitiveCache;function i(c){return s[ee.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,n).then(function(a){return sr(a,c,n)})}const r=[];for(let c=0,a=t.length;c<a;c++){const u=t[c],l=um(u),f=o[l];if(f)r.push(f.promise);else{let p;u.extensions&&u.extensions[ee.KHR_DRACO_MESH_COMPRESSION]?p=i(u):p=sr(new $r,u,n),o[l]={primitive:u,promise:p},r.push(p)}}return Promise.all(r)}loadMesh(t){const n=this,s=this.json,o=this.extensions,i=s.meshes[t],r=i.primitives,c=[];for(let a=0,u=r.length;a<u;a++){const l=r[a].material===void 0?cm(this.cache):this.getDependency("material",r[a].material);c.push(l)}return c.push(n.loadGeometries(r)),Promise.all(c).then(function(a){const u=a.slice(0,a.length-1),l=a[a.length-1],f=[];for(let $=0,y=l.length;$<y;$++){const x=l[$],C=r[$];let L;const g=u[$];if(C.mode===Ue.TRIANGLES||C.mode===Ue.TRIANGLE_STRIP||C.mode===Ue.TRIANGLE_FAN||C.mode===void 0)L=i.isSkinnedMesh===!0?new Sa(x,g):new hr(x,g),L.isSkinnedMesh===!0&&L.normalizeSkinWeights(),C.mode===Ue.TRIANGLE_STRIP?L.geometry=Qi(L.geometry,cr):C.mode===Ue.TRIANGLE_FAN&&(L.geometry=Qi(L.geometry,to));else if(C.mode===Ue.LINES)L=new La(x,g);else if(C.mode===Ue.LINE_STRIP)L=new Aa(x,g);else if(C.mode===Ue.LINE_LOOP)L=new Ia(x,g);else if(C.mode===Ue.POINTS)L=new Ra(x,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(L.geometry.morphAttributes).length>0&&lm(L,i),L.name=n.createUniqueName(i.name||"mesh_"+t),ct(L,i),C.extensions&&Bt(o,L,C),n.assignFinalMaterial(L),f.push(L)}for(let $=0,y=f.length;$<y;$++)n.associations.set(f[$],{meshes:t,primitives:$});if(f.length===1)return i.extensions&&Bt(o,f[0],i),f[0];const p=new ks;i.extensions&&Bt(o,p,i),n.associations.set(p,{meshes:t});for(let $=0,y=f.length;$<y;$++)p.add(f[$]);return p})}loadCamera(t){let n;const s=this.json.cameras[t],o=s[s.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?n=new So(Ea.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):s.type==="orthographic"&&(n=new ka(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),s.name&&(n.name=this.createUniqueName(s.name)),ct(n,s),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],s=[];for(let o=0,i=n.joints.length;o<i;o++)s.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",n.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(o){const i=o.pop(),r=o,c=[],a=[];for(let u=0,l=r.length;u<l;u++){const f=r[u];if(f){c.push(f);const p=new as;i!==null&&p.fromArray(i.array,u*16),a.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new Pa(c,a)})}loadAnimation(t){const n=this.json,s=this,o=n.animations[t],i=o.name?o.name:"animation_"+t,r=[],c=[],a=[],u=[],l=[];for(let f=0,p=o.channels.length;f<p;f++){const $=o.channels[f],y=o.samplers[$.sampler],x=$.target,C=x.node,L=o.parameters!==void 0?o.parameters[y.input]:y.input,g=o.parameters!==void 0?o.parameters[y.output]:y.output;x.node!==void 0&&(r.push(this.getDependency("node",C)),c.push(this.getDependency("accessor",L)),a.push(this.getDependency("accessor",g)),u.push(y),l.push(x))}return Promise.all([Promise.all(r),Promise.all(c),Promise.all(a),Promise.all(u),Promise.all(l)]).then(function(f){const p=f[0],$=f[1],y=f[2],x=f[3],C=f[4],L=[];for(let h=0,_=p.length;h<_;h++){const w=p[h],A=$[h],T=y[h],I=x[h],S=C[h];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const P=s._createAnimationTracks(w,A,T,I,S);if(P)for(let U=0;U<P.length;U++)L.push(P[U])}const g=new Na(i,void 0,L);return ct(g,o),g})}createNodeMesh(t){const n=this.json,s=this,o=n.nodes[t];return o.mesh===void 0?null:s.getDependency("mesh",o.mesh).then(function(i){const r=s._getNodeRef(s.meshCache,o.mesh,i);return o.weights!==void 0&&r.traverse(function(c){if(c.isMesh)for(let a=0,u=o.weights.length;a<u;a++)c.morphTargetInfluences[a]=o.weights[a]}),r})}loadNode(t){const n=this.json,s=this,o=n.nodes[t],i=s._loadNodeShallow(t),r=[],c=o.children||[];for(let u=0,l=c.length;u<l;u++)r.push(s.getDependency("node",c[u]));const a=o.skin===void 0?Promise.resolve(null):s.getDependency("skin",o.skin);return Promise.all([i,Promise.all(r),a]).then(function(u){const l=u[0],f=u[1],p=u[2];p!==null&&l.traverse(function($){$.isSkinnedMesh&&$.bind(p,pm)});for(let $=0,y=f.length;$<y;$++)l.add(f[$]);return l})}_loadNodeShallow(t){const n=this.json,s=this.extensions,o=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const i=n.nodes[t],r=i.name?o.createUniqueName(i.name):"",c=[],a=o._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return a&&c.push(a),i.camera!==void 0&&c.push(o.getDependency("camera",i.camera).then(function(u){return o._getNodeRef(o.cameraCache,i.camera,u)})),o._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){c.push(u)}),this.nodeCache[t]=Promise.all(c).then(function(u){let l;if(i.isBone===!0?l=new Oa:u.length>1?l=new ks:u.length===1?l=u[0]:l=new fr,l!==u[0])for(let f=0,p=u.length;f<p;f++)l.add(u[f]);if(i.name&&(l.userData.name=i.name,l.name=r),ct(l,i),i.extensions&&Bt(s,l,i),i.matrix!==void 0){const f=new as;f.fromArray(i.matrix),l.applyMatrix4(f)}else i.translation!==void 0&&l.position.fromArray(i.translation),i.rotation!==void 0&&l.quaternion.fromArray(i.rotation),i.scale!==void 0&&l.scale.fromArray(i.scale);if(!o.associations.has(l))o.associations.set(l,{});else if(i.mesh!==void 0&&o.meshCache.refs[i.mesh]>1){const f=o.associations.get(l);o.associations.set(l,{...f})}return o.associations.get(l).nodes=t,l}),this.nodeCache[t]}loadScene(t){const n=this.extensions,s=this.json.scenes[t],o=this,i=new ks;s.name&&(i.name=o.createUniqueName(s.name)),ct(i,s),s.extensions&&Bt(n,i,s);const r=s.nodes||[],c=[];for(let a=0,u=r.length;a<u;a++)c.push(o.getDependency("node",r[a]));return Promise.all(c).then(function(a){for(let l=0,f=a.length;l<f;l++)i.add(a[l]);const u=l=>{const f=new Map;for(const[p,$]of o.associations)(p instanceof Es||p instanceof Qo)&&f.set(p,$);return l.traverse(p=>{const $=o.associations.get(p);$!=null&&f.set(p,$)}),f};return o.associations=u(i),i})}_createAnimationTracks(t,n,s,o,i){const r=[],c=t.name?t.name:t.uuid,a=[];St[i.path]===St.weights?t.traverse(function(p){p.morphTargetInfluences&&a.push(p.name?p.name:p.uuid)}):a.push(c);let u;switch(St[i.path]){case St.weights:u=ti;break;case St.rotation:u=ni;break;case St.translation:case St.scale:u=ei;break;default:switch(s.itemSize){case 1:u=ti;break;case 2:case 3:default:u=ei;break}break}const l=o.interpolation!==void 0?rm[o.interpolation]:_r,f=this._getArrayFromAccessor(s);for(let p=0,$=a.length;p<$;p++){const y=new u(a[p]+"."+St[i.path],n.array,f,l);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),r.push(y)}return r}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const s=To(n.constructor),o=new Float32Array(n.length);for(let i=0,r=n.length;i<r;i++)o[i]=n[i]*s;n=o}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){const o=this instanceof ni?im:la;return new o(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function $m(e,t,n){const s=t.attributes,o=new ls;if(s.POSITION!==void 0){const c=n.json.accessors[s.POSITION],a=c.min,u=c.max;if(a!==void 0&&u!==void 0){if(o.set(new Je(a[0],a[1],a[2]),new Je(u[0],u[1],u[2])),c.normalized){const l=To(ln[c.componentType]);o.min.multiplyScalar(l),o.max.multiplyScalar(l)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=t.targets;if(i!==void 0){const c=new Je,a=new Je;for(let u=0,l=i.length;u<l;u++){const f=i[u];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],$=p.min,y=p.max;if($!==void 0&&y!==void 0){if(a.setX(Math.max(Math.abs($[0]),Math.abs(y[0]))),a.setY(Math.max(Math.abs($[1]),Math.abs(y[1]))),a.setZ(Math.max(Math.abs($[2]),Math.abs(y[2]))),p.normalized){const x=To(ln[p.componentType]);a.multiplyScalar(x)}c.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(c)}e.boundingBox=o;const r=new Ua;o.getCenter(r.center),r.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=r}function sr(e,t,n){const s=t.attributes,o=[];function i(r,c){return n.getDependency("accessor",r).then(function(a){e.setAttribute(c,a)})}for(const r in s){const c=vo[r]||r.toLowerCase();c in e.attributes||o.push(i(s[r],c))}if(t.indices!==void 0&&!e.index){const r=n.getDependency("accessor",t.indices).then(function(c){e.setIndex(c)});o.push(r)}return oo.workingColorSpace!==ut&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${oo.workingColorSpace}" not supported.`),ct(e,t),$m(e,t,n),Promise.all(o).then(function(){return t.targets!==void 0?am(e,t.targets,n):e})}const eo=new WeakMap;class Mo extends ar{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,s,o){const i=new cs(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,r=>{this.parse(r,n,o)},s,o)}parse(t,n,s=()=>{}){this.decodeDracoFile(t,n,null,null,gt,s).catch(s)}decodeDracoFile(t,n,s,o,i=ut,r=()=>{}){const c={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:i};return this.decodeGeometry(t,c).then(n).catch(r)}decodeGeometry(t,n){const s=JSON.stringify(n);if(eo.has(t)){const a=eo.get(t);if(a.key===s)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const i=this.workerNextTaskID++,r=t.byteLength,c=this._getWorker(i,r).then(a=>(o=a,new Promise((u,l)=>{o._callbacks[i]={resolve:u,reject:l},o.postMessage({type:"decode",id:i,taskConfig:n,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return c.catch(()=>!0).then(()=>{o&&i&&this._releaseTask(o,i)}),eo.set(t,{key:s,promise:c}),c}_createGeometry(t){const n=new $r;t.index&&n.setIndex(new vn(t.index.array,1));for(let s=0;s<t.attributes.length;s++){const o=t.attributes[s],i=o.name,r=o.array,c=o.itemSize,a=new vn(r,c);i==="color"&&(this._assignVertexColorSpace(a,o.vertexColorSpace),a.normalized=!(r instanceof Float32Array)),n.setAttribute(i,a)}return n}_assignVertexColorSpace(t,n){if(n!==gt)return;const s=new bt;for(let o=0,i=t.count;o<i;o++)s.fromBufferAttribute(t,o),oo.colorSpaceToWorking(s,gt),t.setXYZ(o,s.r,s.g,s.b)}_loadLibrary(t,n){const s=new cs(this.manager);return s.setPath(this.decoderPath),s.setResponseType(n),s.setWithCredentials(this.withCredentials),new Promise((o,i)=>{s.load(t,o,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(s=>{const o=s[0];t||(this.decoderConfig.wasmBinary=s[1]);const i=hm.toString(),r=["/* draco decoder */",o,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(i){const r=i.data;switch(r.type){case"decode":o._callbacks[r.id].resolve(r);break;case"error":o._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,i){return o._taskLoad>i._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[t]=n,s._taskLoad+=n,s})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function hm(){let e,t;onmessage=function(r){const c=r.data;switch(c.type){case"init":e=c.decoderConfig,t=new Promise(function(l){e.onModuleLoaded=function(f){l({draco:f})},DracoDecoderModule(e)});break;case"decode":const a=c.buffer,u=c.taskConfig;t.then(l=>{const f=l.draco,p=new f.Decoder;try{const $=n(f,p,new Int8Array(a),u),y=$.attributes.map(x=>x.array.buffer);$.index&&y.push($.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:$},y)}catch($){console.error($),self.postMessage({type:"error",id:c.id,error:$.message})}finally{f.destroy(p)}});break}};function n(r,c,a,u){const l=u.attributeIDs,f=u.attributeTypes;let p,$;const y=c.GetEncodedGeometryType(a);if(y===r.TRIANGULAR_MESH)p=new r.Mesh,$=c.DecodeArrayToMesh(a,a.byteLength,p);else if(y===r.POINT_CLOUD)p=new r.PointCloud,$=c.DecodeArrayToPointCloud(a,a.byteLength,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!$.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+$.error_msg());const x={index:null,attributes:[]};for(const C in l){const L=self[f[C]];let g,h;if(u.useUniqueIDs)h=l[C],g=c.GetAttributeByUniqueId(p,h);else{if(h=c.GetAttributeId(p,r[l[C]]),h===-1)continue;g=c.GetAttribute(p,h)}const _=o(r,c,p,C,L,g);C==="color"&&(_.vertexColorSpace=u.vertexColorSpace),x.attributes.push(_)}return y===r.TRIANGULAR_MESH&&(x.index=s(r,c,p)),r.destroy(p),x}function s(r,c,a){const l=a.num_faces()*3,f=l*4,p=r._malloc(f);c.GetTrianglesUInt32Array(a,f,p);const $=new Uint32Array(r.HEAPF32.buffer,p,l).slice();return r._free(p),{array:$,itemSize:1}}function o(r,c,a,u,l,f){const p=f.num_components(),y=a.num_points()*p,x=y*l.BYTES_PER_ELEMENT,C=i(r,l),L=r._malloc(x);c.GetAttributeDataArrayForAllPoints(a,f,C,x,L);const g=new l(r.HEAPF32.buffer,L,y).slice();return r._free(L),{name:u,array:g,itemSize:p}}function i(r,c){switch(c){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}const _m={__name:"PuppetModelView",props:{puppet:{type:Object,default:null}},setup(e){const t=e,n=Q(null);let s=null,o=null,i=null,r=0,c=null,a=null,u=new Ba,l=null,f=null,p=0,$=!1;function y(){if($)return;const g=n.value;if(!g){console.log("[PuppetModelView] Container not ready, retrying..."),setTimeout(y,100);return}console.log("[PuppetModelView] Initializing Three.js..."),o=new mr,i=new So(45,1,.1,1e3),i.position.set(0,1,3),s=new gr({antialias:!0,alpha:!0}),s.setPixelRatio(window.devicePixelRatio||1),s.outputColorSpace=gt,f=new Mo,f.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),f.setCrossOrigin("anonymous"),console.log("[PuppetModelView] Draco loader initialized:",!!f),g.innerHTML="",g.appendChild(s.domElement);const h=new br(16777215,.8),_=new xo(16777215,.8);_.position.set(3,5,2),o.add(h,_);const w=()=>{if(!g||!s)return;let T=g.clientWidth,I=g.clientHeight;if(!T||!I){const S=g.getBoundingClientRect();if(T=S.width||200,I=S.height||200,!S.width||!S.height){requestAnimationFrame(w);return}}s.setSize(T,I,!1),i.aspect=T/Math.max(1,I),i.updateProjectionMatrix()};w(),l=new ResizeObserver(w),l.observe(g),requestAnimationFrame(()=>{w(),requestAnimationFrame(()=>{w(),requestAnimationFrame(w)})});const A=()=>{if(!s||!o||!i)return;r=requestAnimationFrame(A);const T=u.getDelta();a&&a.update(T),c&&(c.rotation.y+=T*.6),s.render(o,i)};A(),$=!0,console.log("[PuppetModelView] Three.js initialized successfully, container size:",g.clientWidth,"x",g.clientHeight)}function x(){a&&(a.stopAllAction(),a=null),c&&(o.remove(c),c.traverse(g=>{g.isMesh&&(g.geometry&&g.geometry.dispose(),Array.isArray(g.material)?g.material.forEach(h=>{h.map&&h.map.dispose(),h&&h.dispose&&h.dispose()}):g.material&&(g.material.map&&g.material.map.dispose(),g.material.dispose&&g.material.dispose()))}),c=null)}function C(g){const h=new ls().setFromObject(g),_=new Je,w=new Je;h.getSize(_),h.getCenter(w),g.position.sub(w);const A=-_.x*.3,T=_.y*.2,I=_.z*.4;g.position.add(new Je(A,T,I)),g.scale.multiplyScalar(.4);const P=s==null?void 0:s.domElement,U=P?P.clientWidth||P.width:200,R=P?P.clientHeight||P.height:200,j=Math.max(1e-6,U/Math.max(1,R)),K=i.fov*(Math.PI/180),q=2*Math.atan(Math.tan(K/2)*j),Z=1.15,X=_.y/2/Math.tan(K/2),J=_.x/2/Math.tan(q/2),$e=Z*Math.max(X,J,.1);i.position.set(0,Math.max(_.y*.05,.1),$e),i.lookAt(0,0,0)}async function L(g){var A,T;if(!g)return;console.log("[PuppetModelView] Loading puppet:",g.name),y(),x();const h=++p,_=new wo;_.setCrossOrigin("anonymous"),f||(console.log("[PuppetModelView] Creating Draco loader..."),f=new Mo,f.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),f.setCrossOrigin("anonymous")),_.setDRACOLoader(f),console.log("[PuppetModelView] Draco loader set:",!!f);let w=g.modelUrl||"";if(console.log("[PuppetModelView] Original modelUrl:",w),console.log("[PuppetModelView] Puppet image:",g.image),!w&&g.image&&/.webp($|\?)/i.test(g.image)&&(w=g.image.replace(/\.webp(\?.*)?$/i,".glb"),console.log("[PuppetModelView] Generated modelUrl from image:",w)),w&&!/^https?:\/\//i.test(w)&&!w.startsWith("/assets/")){const I=w;w=ae(w),console.log("[PuppetModelView] Converted URL:",I,"->",w)}if(console.log("[PuppetModelView] Model URL:",w),!w){console.log("[PuppetModelView] No model URL found");return}try{console.log("[PuppetModelView] Starting to load:",w);const I=await _.loadAsync(w);if(console.log("[PuppetModelView] GLTF loaded:",I),h!==p){console.log("[PuppetModelView] Ignoring outdated load result for:",g.name),I&&I.scene&&I.scene.traverse(S=>{S.isMesh&&(S.geometry&&S.geometry.dispose(),Array.isArray(S.material)?S.material.forEach(P=>{P.map&&P.map.dispose(),P.dispose&&P.dispose()}):S.material&&(S.material.map&&S.material.map.dispose(),S.material.dispose&&S.material.dispose()))});return}if(console.log("[PuppetModelView] Applying model for:",g.name),c=I.scene||((A=I.scenes)==null?void 0:A[0]),!c){console.error("[PuppetModelView] No scene found in GLTF");return}o.add(c),I.animations&&I.animations.length&&(a=new si(c),a.clipAction(I.animations[0]).play()),C(c),console.log("[PuppetModelView] Model loaded successfully:",g.name,"Scene children:",o.children.length)}catch(I){if(console.error("[PuppetModelView] Load failed:",I),console.error("[PuppetModelView] Failed URL:",w),console.error("[PuppetModelView] Puppet data:",g),I.message.includes("DRACOLoader")){console.log("[PuppetModelView] Retrying without Draco decoder...");try{const S=new wo;S.setCrossOrigin("anonymous");const P=await S.loadAsync(w);if(h===p&&(c=P.scene||((T=P.scenes)==null?void 0:T[0]),c)){o.add(c),P.animations&&P.animations.length&&(a=new si(c),a.clipAction(P.animations[0]).play()),C(c),console.log("[PuppetModelView] Model loaded successfully without Draco:",g.name);return}}catch(S){console.error("[PuppetModelView] Fallback load also failed:",S)}}if(h===p){const S=new ja(1,1,1),P=new Co({color:8947967});c=new hr(S,P),o.add(c),C(c)}}}return ts(()=>t.puppet,async g=>{await On(),L(g)},{immediate:!0}),qt(()=>{console.log("[PuppetModelView] Component mounted"),On(()=>{n.value&&y()})}),Ls(()=>{console.log("[PuppetModelView] Cleaning up..."),cancelAnimationFrame(r),x(),o&&o.traverse(g=>{g.isMesh&&(g.geometry&&g.geometry.dispose(),Array.isArray(g.material)?g.material.forEach(h=>{h.map&&h.map.dispose(),h.dispose&&h.dispose()}):g.material&&(g.material.map&&g.material.map.dispose(),g.material.dispose&&g.material.dispose()))}),s&&(s.dispose(),s.forceContextLoss&&s.forceContextLoss()),l&&n.value&&l.unobserve(n.value),s=null,o=null,i=null,$=!1,p=0,console.log("[PuppetModelView] Cleanup completed")}),(g,h)=>(ne(),ce("div",{ref_key:"mountEl",ref:n,class:"model-canvas"},null,512))}},mm=Xt(_m,[["__scopeId","data-v-78e92f8f"]]),gm={class:"warehouse"},bm={class:"warehouse__resources"},ym={class:"resource-icon"},wm=["src","alt"],vm={class:"resource-value"},Tm={key:0,class:"warehouse__main"},Mm={class:"warehouse__sidebar"},xm={class:"puppet-list"},Cm=["onClick","onMouseenter"],Sm={class:"puppet-card__quantity"},Lm={class:"puppet-card__image"},Am=["src","alt"],Im={class:"puppet-card__info"},Rm={class:"puppet-card__name"},Em={class:"puppet-card__level"},km={class:"puppet-detail__header"},Pm={class:"puppet-detail__name"},Nm={class:"puppet-detail__content"},Om={class:"puppet-detail__row"},Dm={class:"puppet-detail__model"},Gm={class:"puppet-detail__description"},Fm={class:"puppet-detail__row"},Hm={class:"puppet-detail__stats"},Um={class:"stats-section"},jm={class:"stat-item"},Bm={class:"stat-value"},Vm={class:"stat-item"},Km={class:"stat-value"},Wm={class:"stat-bonus"},qm={class:"stat-item"},zm={class:"stat-value"},Xm={class:"stat-bonus"},Jm={class:"stat-item"},Ym={class:"stat-value"},Zm={class:"stat-bonus"},Qm={class:"stat-item"},eg={class:"stat-value"},tg={class:"equipment-section"},ng={class:"equipment-slots"},sg=["src","alt"],og={key:1,class:"equipment-icon"},ig={class:"skill-section"},rg={class:"skill-info"},cg={class:"skill-text"},ag={class:"skill-name"},lg={class:"skill-cooldown"},ug={class:"skill-effect"},fg={class:"skill-icon"},pg=["src","alt"],dg={key:1},$g={class:"puppet-detail__upgrade"},hg={class:"upgrade-cost"},_g=["src"],mg={class:"cost-amount"},gg={class:"warehouse__placeholder",key:"placeholder"},bg={__name:"Warehouse",setup(e,{expose:t}){function n(g){if(g==null)return g;const h=typeof g=="object"&&"_0"in g&&Object.keys(g).length===1?g._0:g;if(h&&typeof h=="object"&&"_0"in h&&typeof h._0=="number")return h._0;if(Array.isArray(h))return h.map(n);if(h&&typeof h=="object"){if(Array.isArray(h.entries)&&typeof h.size=="number"){const w={};for(const A of h.entries){if(!A)continue;const T=A.key??A._0??A[0],I=A.value??A._1??A[1],S=typeof T=="string"?T:T&&T._0?T._0:String(T);w[S]=n(I)}return w}const _={};for(const w of Object.keys(h)){const A=h[w];_[w]=n(A)}return _}return h}function s(g,h,_=[]){if(!g||typeof g!="object")return null;if(Object.prototype.hasOwnProperty.call(g,h))return[..._,h];if(Array.isArray(g)){for(let w=0;w<g.length;w++){const A=s(g[w],h,[..._,w]);if(A)return A}return null}for(const w of Object.keys(g)){const A=s(g[w],h,[..._,w]);if(A)return A}return null}function o(g,h){return h.reduce((_,w)=>_!=null?_[w]:void 0,g)}const i=Q([]);qt(async()=>{try{const g=kn(),h=await yo(g);console.log("[Warehouse] resource raw:",h);const _=n(h);console.log("[Warehouse] resource plain(unwrapped):",_);const w=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],A={SpiritalSpark:{name:"灵性火花",icon:ae("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:ae("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:ae("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:ae("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:ae("resource/heart_crystal_dust.webp")}},T=w.map(I=>({icon:A[I].icon,name:A[I].name,value:Number((_&&_[I])??0)}));i.value=T}catch{i.value=[{icon:ae("resource/spiritual_spark.webp"),name:"灵性火花",value:0},{icon:ae("resource/recall_gear.webp"),name:"回响齿轮",value:0},{icon:ae("resource/resonant_star_crystal/resonant_star_crystal.webp"),name:"共鸣星晶",value:0},{icon:ae("resource/refined_copper_ingot/refined_copper_ingot.webp"),name:"精炼铜锭",value:0},{icon:ae("resource/heart_crystal_dust.webp"),name:"心晶尘",value:0}]}});const r=Q([]);qt(async()=>{try{const g=kn(),h=await Zi(g);console.log("[Warehouse] copper raw:",h);const _=n(h);console.log("[Warehouse] copper plain(unwrapped):",_);let w=_&&Array.isArray(_.coppers)?_.coppers:[];if(!Array.isArray(w)){const T=s(_,"coppers");if(console.log("[Warehouse] copper key path:",T),T){const I=o(_,T);console.log("[Warehouse] copper found by path:",I),Array.isArray(I)&&(w=I)}!Array.isArray(w)&&_&&_.entries&&console.log("[Warehouse] copper entries sample:",_.entries)}console.log("[Warehouse] copper array length:",Array.isArray(w)?w.length:"not array");const A={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};r.value=(w||[]).map((T,I)=>{var ge,be,et,We,qe,ve;const S=(T==null?void 0:T.copper_info)||{},P=(S==null?void 0:S.skill)||{},U=(T==null?void 0:T.equipment_slot)||{},R=(U==null?void 0:U.slot1)||null,j=(U==null?void 0:U.slot2)||null,K=(T==null?void 0:T.attribute)||{},q=((ge=R==null?void 0:R.equipment_base)==null?void 0:ge.attribute)||{},Z=((be=j==null?void 0:j.equipment_base)==null?void 0:be.attribute)||{},X=Number(q.attack||0)+Number(Z.attack||0),J=Number(q.defense||0)+Number(Z.defense||0),$e=Number(q.dodge||0)+Number(Z.dodge||0),Ae=S==null?void 0:S.copper_type;return{id:I+1,name:(S==null?void 0:S.name)??"未知铜偶",level:(T==null?void 0:T.level)??1,image:(S==null?void 0:S.icon_url)||"",modelUrl:(S==null?void 0:S.model_url)||"",quantity:1,description:(S==null?void 0:S.description)||"",stats:{level:`${(T==null?void 0:T.level)??1}/5`,attack:{base:Number(K.attack||0),bonus:X},defense:{base:Number(K.defense||0),bonus:J},dodge:{base:Number(K.dodge||0),bonus:$e},class:A[Ae]||"未知"},equipment:[R?{name:((et=R.equipment_base)==null?void 0:et.name)||"装备",icon:((We=R.equipment_base)==null?void 0:We.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},U!=null&&U.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:j?{name:((qe=j.equipment_base)==null?void 0:qe.name)||"装备",icon:((ve=j.equipment_base)==null?void 0:ve.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(P==null?void 0:P.name)||"——",cooldown:(P==null?void 0:P.cool_down)!=null?`${P.cool_down}回合`:"——",effect:(P==null?void 0:P.description)||"——",icon:(P==null?void 0:P.resource_url)||""},upgradeCost:10}}),Array.isArray(r.value)&&r.value.length>0&&(c.value=r.value[0]),!c.value&&Array.isArray(r.value)&&r.value.length>0&&(c.value=r.value[0])}catch{r.value=[]}});const c=Q(null),a=Q([]),u=Q(null),l=Q(null),f=Q(null);function p(g,h){g&&(a.value[h]=g)}async function $(g,h){c.value=g,await On();const _=a.value[h];if(_&&typeof _.scrollIntoView=="function"&&_.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),u.value=h,l.value)try{l.value.scrollTo({top:0,behavior:"smooth"})}catch{l.value.scrollTop=0}setTimeout(()=>{u.value===h&&(u.value=null)},320)}const y=Q(!1);function x(){y.value=!0}function C(){return y.value?(y.value=!1,!0):!1}t({handleBack:C});async function L(g){try{const h=kn(),_=await yo(h),w=n(_),A=["SpiritalSpark","RecallGear","ResonantCrystal","RefinedCopper","HeartCrystalDust"],T={SpiritalSpark:{name:"灵性火花",icon:ae("resource/spiritual_spark.webp")},RecallGear:{name:"回响齿轮",icon:ae("resource/recall_gear.webp")},ResonantCrystal:{name:"共鸣星晶",icon:ae("resource/resonant_star_crystal/resonant_star_crystal.webp")},RefinedCopper:{name:"精炼铜锭",icon:ae("resource/refined_copper_ingot/refined_copper_ingot.webp")},HeartCrystalDust:{name:"心晶尘",icon:ae("resource/heart_crystal_dust.webp")}};i.value=A.map(R=>({icon:T[R].icon,name:T[R].name,value:Number((w==null?void 0:w[R])??0)}));const I=await Zi(h),S=n(I),P=Array.isArray(S==null?void 0:S.coppers)?S.coppers:[],U={IronWall:"铁壁",Arcanist:"奥术",CraftsMan:"工匠",Mechanic:"机械",Resonator:"共振"};r.value=(P||[]).map((R,j)=>{var ve,Fe,ze,tt,Pe,Mt;const K=(R==null?void 0:R.copper_info)||{},q=(K==null?void 0:K.skill)||{},Z=(R==null?void 0:R.equipment_slot)||{},X=(Z==null?void 0:Z.slot1)||null,J=(Z==null?void 0:Z.slot2)||null,$e=(R==null?void 0:R.attribute)||{},Ae=((ve=X==null?void 0:X.equipment_base)==null?void 0:ve.attribute)||{},ge=((Fe=J==null?void 0:J.equipment_base)==null?void 0:Fe.attribute)||{},be=Number(Ae.attack||0)+Number(ge.attack||0),et=Number(Ae.defense||0)+Number(ge.defense||0),We=Number(Ae.dodge||0)+Number(ge.dodge||0),qe=K==null?void 0:K.copper_type;return{id:j+1,name:(K==null?void 0:K.name)??"未知铜偶",level:(R==null?void 0:R.level)??1,image:(K==null?void 0:K.icon_url)||"",modelUrl:(K==null?void 0:K.model_url)||"",quantity:1,description:(K==null?void 0:K.description)||"",stats:{level:`${(R==null?void 0:R.level)??1}/5`,attack:{base:Number($e.attack||0),bonus:be},defense:{base:Number($e.defense||0),bonus:et},dodge:{base:Number($e.dodge||0),bonus:We},class:U[qe]||"未知"},equipment:[X?{name:((ze=X.equipment_base)==null?void 0:ze.name)||"装备",icon:((tt=X.equipment_base)==null?void 0:tt.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1},Z!=null&&Z.is_slot2_locked?{name:"未解锁",icon:"🔒",equipped:!1,locked:!0}:J?{name:((Pe=J.equipment_base)==null?void 0:Pe.name)||"装备",icon:((Mt=J.equipment_base)==null?void 0:Mt.resource_url)||"",equipped:!0,locked:!1}:{name:"空槽",icon:"＋",equipped:!1,locked:!1}],skill:{name:(q==null?void 0:q.name)||"——",cooldown:(q==null?void 0:q.cool_down)!=null?`${q.cool_down}回合`:"——",effect:(q==null?void 0:q.description)||"——",icon:(q==null?void 0:q.resource_url)||""},upgradeCost:10}})}catch{}}return(g,h)=>(ne(),ce("div",gm,[v("div",bm,[(ne(!0),ce(De,null,Us(i.value,_=>(ne(),ce("div",{class:"resource-item",key:_.name},[v("div",ym,[v("img",{src:_.icon,alt:_.name},null,8,wm)]),v("div",vm,fe(_.value),1)]))),128))]),y.value?kt("",!0):(ne(),ce("div",Tm,[v("div",Mm,[h[2]||(h[2]=v("div",{class:"warehouse__title"},"铜偶仓库",-1)),v("div",xm,[(ne(!0),ce(De,null,Us(r.value,(_,w)=>{var A;return ne(),ce("div",{class:Nt(["puppet-card",{"puppet-card--selected":((A=c.value)==null?void 0:A.id)===_.id,"puppet-card--pulse":u.value===w,"puppet-card--hover":f.value===w}]),key:_.id,ref_for:!0,ref:T=>p(T,w),onClick:T=>$(_,w),onMouseenter:T=>f.value=w,onMouseleave:h[0]||(h[0]=T=>f.value=null)},[v("div",Sm,fe(_.level),1),v("div",Lm,[v("img",{src:_.image,alt:_.name},null,8,Am)]),v("div",Im,[v("div",Rm,fe(_.name),1),v("div",Em,fe(_.level)+"级",1)])],42,Cm)}),128)),v("div",{class:"puppet-card puppet-card--add",onClick:x},[...h[1]||(h[1]=[v("div",{class:"puppet-card__add-icon"},"+",-1),v("div",{class:"puppet-card__add-text"},"抽取更多",-1)])])])]),v("div",{class:"warehouse__detail",ref_key:"detailWrap",ref:l},[_e(Ku,{name:"fade-slide",mode:"out-in"},{default:Jr(()=>{var _;return[c.value?(ne(),ce("div",{class:"puppet-detail",key:((_=c.value)==null?void 0:_.id)||"none"},[v("div",km,[v("h2",Pm,fe(c.value.name),1)]),v("div",Nm,[v("div",Om,[v("div",Dm,[_e(mm,{puppet:c.value},null,8,["puppet"])]),v("div",Gm,fe(c.value.description),1)]),v("div",Fm,[v("div",Hm,[v("div",Um,[v("div",jm,[h[3]||(h[3]=v("span",{class:"stat-label"},"等级:",-1)),v("span",Bm,fe(c.value.stats.level),1)]),v("div",Vm,[h[4]||(h[4]=v("span",{class:"stat-label"},"攻击力:",-1)),v("span",Km,[os(fe(c.value.stats.attack.base)+" ",1),v("span",Wm,"(+"+fe(c.value.stats.attack.bonus)+")",1)])]),v("div",qm,[h[5]||(h[5]=v("span",{class:"stat-label"},"防御力:",-1)),v("span",zm,[os(fe(c.value.stats.defense.base)+" ",1),v("span",Xm,"(+"+fe(c.value.stats.defense.bonus)+")",1)])]),v("div",Jm,[h[6]||(h[6]=v("span",{class:"stat-label"},"闪避:",-1)),v("span",Ym,[os(fe(c.value.stats.dodge.base)+"% ",1),v("span",Zm,"(+"+fe(c.value.stats.dodge.bonus)+"%)",1)])]),v("div",Qm,[h[7]||(h[7]=v("span",{class:"stat-label"},"职业:",-1)),v("span",eg,fe(c.value.stats.class),1)])])]),v("div",tg,[h[8]||(h[8]=v("h4",{class:"section-title"},"装备",-1)),v("div",ng,[(ne(!0),ce(De,null,Us(c.value.equipment,(w,A)=>(ne(),ce("div",{key:A,class:Nt(["equipment-slot",{"equipment-slot--empty":!w.equipped&&!w.locked,"equipment-slot--locked":w.locked}])},[w.equipped&&w.icon&&w.icon.startsWith("/")?(ne(),ce("img",{key:0,src:w.icon,alt:w.name,class:"equipment-icon"},null,8,sg)):(ne(),ce("span",og,fe(w.locked?"🔒":w.icon),1))],2))),128))])])]),v("div",ig,[h[9]||(h[9]=v("h4",{class:"section-title"},"技能",-1)),v("div",rg,[v("div",cg,[v("div",ag,fe(c.value.skill.name),1),v("div",lg,"冷却: "+fe(c.value.skill.cooldown),1),v("div",ug,fe(c.value.skill.effect),1)]),v("div",fg,[c.value.skill.icon&&c.value.skill.icon.startsWith("/")?(ne(),ce("img",{key:0,src:c.value.skill.icon,alt:c.value.skill.name,class:"skill-icon-img"},null,8,pg)):(ne(),ce("span",dg,fe(c.value.skill.icon),1))])])])]),v("div",$g,[v("div",hg,[v("img",{class:"cost-icon-img",src:Cn(ae)("img/warehouse/goods/ea74bce606c59ac4ab84ab117375c0de813cea49.webp"),alt:"cost"},null,8,_g),v("span",mg,"X "+fe(c.value.upgradeCost),1)]),h[10]||(h[10]=v("button",{class:"upgrade-btn"},[v("span",{class:"upgrade-icon"},"⏫")],-1))])])):(ne(),ce("div",gg,[...h[11]||(h[11]=[v("p",null,"请选择英雄以浏览",-1)])]))]}),_:1})],512)])),y.value?(ne(),Bo(P_,{key:1,onDraw:L})):kt("",!0)]))}},yg=Xt(bg,[["__scopeId","data-v-251b5a67"]]),wg={class:"panel",style:{left:"24px",right:"auto"}},vg={__name:"TopLeftPanel",emits:["back","open-settings"],setup(e,{emit:t}){return(n,s)=>(ne(),ce("div",wg,[v("button",{class:"btn",onClick:s[0]||(s[0]=o=>n.$emit("back")),title:"返回"},[...s[2]||(s[2]=[v("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M15 18L9 12L15 6",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",{class:"sr-only"},"返回",-1)])]),v("button",{class:"btn",onClick:s[1]||(s[1]=o=>n.$emit("open-settings")),title:"设置"},[...s[3]||(s[3]=[v("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M12 15.5C13.933 15.5 15.5 13.933 15.5 12C15.5 10.067 13.933 8.5 12 8.5C10.067 8.5 8.5 10.067 8.5 12C8.5 13.933 10.067 15.5 12 15.5Z",stroke:"#ffffff","stroke-width":"2"}),v("path",{d:"M19.4 15A7.964 7.964 0 0 0 20 12C20 11.49 19.95 10.99 19.86 10.5L22 8.5L20 5.5L17.34 6.07C16.78 5.58 16.14 5.18 15.44 4.9L15 2H9L8.56 4.9C7.86 5.18 7.22 5.58 6.66 6.07L4 5.5L2 8.5L4.14 10.5C4.05 10.99 4 11.49 4 12C4 12.51 4.05 13.01 4.14 13.5L2 15.5L4 18.5L6.66 17.93C7.22 18.42 7.86 18.82 8.56 19.1L9 22H15L15.44 19.1C16.14 18.82 16.78 18.42 17.34 17.93L20 18.5L22 15.5L19.86 13.5C19.95 13.01 20 12.51 20 12",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",{class:"sr-only"},"设置",-1)])])]))}},or=Xt(vg,[["__scopeId","data-v-d9966d11"]]),Tg={class:"startmenu"},Mg={key:0,class:"settings-local"},xg={__name:"StartMenu",emits:["started"],setup(e,{emit:t}){const n=Q(null),s=Q(null);let o=null,i=null,r=null,c=null,a=null,u=1.2;const l=Q(!1),f=Q(!1),p=t;function $(){if(c=requestAnimationFrame($),a){const A=Date.now()*.001;a.position.y=Math.sin(A*.8)*.1,a.rotation.y=Math.sin(A*.6)*.1;const T=u+Math.sin(A*1.2)*.04;a.scale.setScalar(T)}r&&r.render(o,i)}function y(){!r||!i||(i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight))}function x(){c&&(cancelAnimationFrame(c),c=null)}function C(){c||(c=requestAnimationFrame($))}function L(){try{x()}catch{}try{window.removeEventListener("resize",y)}catch{}try{o&&(o.traverse(A=>{if(A.isMesh){A.geometry&&A.geometry.dispose&&A.geometry.dispose();const T=A.material;Array.isArray(T)?T.forEach(I=>I&&I.dispose&&I.dispose()):T&&T.dispose&&T.dispose()}}),o.clear())}catch{}try{if(r){r.clear(!0,!0,!0),r.dispose();const A=r.getContext&&r.getContext(),T=A&&A.getExtension&&A.getExtension("WEBGL_lose_context");T&&T.loseContext&&T.loseContext()}}catch{}o=null,i=null,r=null,a=null}async function g(){try{window.getAssetUrl=ae,window.precacheAllResources=go,window.getCacheStatus=vf,go().catch(()=>{})}catch{}o=new mr,o.background=new bt("#a0a0a0"),i=new So(50,1.333,.1,1e3),i.position.set(-3.655,.2,-.006),i.rotation.set(-1.618275,-1.538307,-1.6183,"XYZ"),r=new gr({antialias:!0,canvas:n.value}),r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio);const A=new br(4210752,.4);o.add(A);const T=new xo(16777215,12.5);T.position.set(-5,-2,1),o.add(T);const I=new Mo;I.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/");const S=new wo;S.setDRACOLoader(I);const P=window.getAssetUrl?window.getAssetUrl("logo.glb"):"./assets/logo.glb",U=()=>new Promise((R,j)=>{S.load(P,K=>R(K),void 0,K=>j(K))});try{if(!(await fetch(P,{method:"HEAD",mode:"cors",credentials:"omit"})).ok)throw new Error("logo not ok");const j=await U();j.scene.position.set(0,0,0),o.add(j.scene);const q=new ls().setFromObject(j.scene).getCenter(new Je);j.scene.position.set(-q.x,-q.y,-q.z);try{j.scene.scale.setScalar(u)}catch{}a=j.scene,l.value=!0}catch{try{const j=await U();j.scene.position.set(0,0,0),o.add(j.scene);const q=new ls().setFromObject(j.scene).getCenter(new Je);j.scene.position.set(-q.x,-q.y,-q.z);try{j.scene.scale.setScalar(u)}catch{}a=j.scene,l.value=!0}catch{}}window.addEventListener("resize",y),$(),window.__START_MENU_PAUSE__=()=>x(),window.__START_MENU_RESUME__=()=>C()}function h(){p("started"),x()}function _(){f.value=!0}function w(){f.value=!1}return qt(()=>{g()}),Ls(()=>{L()}),(A,T)=>(ne(),ce("div",Tg,[v("canvas",{ref_key:"canvasRef",ref:n,class:"startmenu__canvas"},null,512),Yr(v("div",{ref_key:"uiRootRef",ref:s,class:"startmenu-ui"},[v("button",{id:"start-btn",class:"startmenu-btn","aria-label":"开始",onClick:h},"开始"),v("button",{id:"settings-btn",class:"startmenu-btn","aria-label":"设置",onClick:_},"设置")],512),[[Ec,l.value]]),f.value?(ne(),ce("div",Mg,[v("div",{class:"settings-local__card"},[v("div",{class:"settings-local__header"},[T[0]||(T[0]=v("div",{class:"settings-local__title"},"设置",-1)),v("button",{class:"settings-local__close",onClick:w,"aria-label":"关闭"},"✕")]),T[1]||(T[1]=v("div",{class:"settings-local__content"},[v("div",{class:"settings-local__row"},"此处放置开始界面相关设置（占位）。")],-1))])])):kt("",!0)]))}},Cg=Xt(xg,[["__scopeId","data-v-dfe718ef"]]),Sg={class:"stage"},Lg={key:0,style:{position:"relative",width:"100%",height:"100%"}},Ag={key:1,class:"modal"},Ig={class:"modal-title"},Rg={key:2,class:"overlay",style:{"z-index":"30000","align-items":"flex-start","justify-content":"flex-start",background:"rgba(0,0,0,0.25)"}},Eg={class:"settings"},kg={class:"settings__content"},Pg={class:"settings__state"},Ng={__name:"App",setup(e){const t=Q(!1),n=Q(null),s=Q(!1),o=Q(null),i=Q([]);Q(0);const r=Q(!0);function c(g){n.value!==g&&(i.value.push(n.value),n.value=g),window.__START_MENU_PAUSE__&&window.__START_MENU_PAUSE__(),t.value=!0}function a(){n.value=null,i.value=[],window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1}function u(){s.value=!0,t.value=!0}function l(){s.value=!1,n.value||(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1)}function f(){if(s.value){l();return}if(n.value){if(n.value==="warehouse"&&o.value&&o.value.handleBack&&o.value.handleBack())return;const g=i.value.pop()??null;n.value=g,g||(r.value?(window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1):(r.value=!0,t.value=!1));return}if(!r.value){r.value=!0,window.__START_MENU_RESUME__&&window.__START_MENU_RESUME__(),t.value=!1;return}}const p=Q(!0),$=Q(null);function y(){p.value=!p.value}function x(){try{const g={version:1,savedAt:Date.now(),payload:{}},h=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),_=document.createElement("a");_.href=URL.createObjectURL(h),_.download="save.json",_.click(),URL.revokeObjectURL(_.href)}catch{}}function C(){try{$.value&&$.value.click()}catch{}}function L(g){try{const h=g.target&&g.target.files&&g.target.files[0];if(!h)return;const _=new FileReader;_.onload=()=>{try{JSON.parse(String(_.result||"{}"))}catch{}g.target.value=""},_.readAsText(h)}catch{}}return(g,h)=>(ne(),ce("div",Sg,[Yr(_e(Cg,{onStarted:h[0]||(h[0]=_=>r.value=!1)},null,512),[[Ec,r.value]]),r.value?kt("",!0):(ne(),Bo(or,{key:0,onBack:f,onOpenSettings:u})),_e(xf,{onStartGame:h[1]||(h[1]=_=>c("start")),onOpenWarehouse:h[2]||(h[2]=_=>c("warehouse")),onOpenTutorial:h[3]||(h[3]=_=>c("tutorial")),onOpenEncyclopedia:h[4]||(h[4]=_=>c("encyclopedia"))}),n.value?(ne(),ce("div",{key:1,class:Nt(["overlay",{"overlay--warehouse":n.value==="warehouse"}])},[n.value==="warehouse"?(ne(),ce("div",Lg,[_e(or,{onBack:f,onOpenSettings:u}),_e(yg,{ref_key:"warehouseRef",ref:o},null,512)])):(ne(),ce("div",Ag,[v("h2",Ig,fe(n.value==="warehouse"?"铜偶仓库 · Copper Warehouse":n.value==="tutorial"?"新手教程 · Tutorial":n.value==="encyclopedia"?"游戏百科 · Game Encyclopedia":"开始游戏 · Start Game"),1),h[5]||(h[5]=v("p",{class:"modal-body"},"占位内容（后续替换为实际功能界面）。",-1)),v("button",{class:"close-btn",onClick:a},"关闭")]))],2)):kt("",!0),s.value?(ne(),ce("div",Rg,[v("div",Eg,[v("div",{class:"settings__header"},[h[7]||(h[7]=v("div",{class:"settings__title"},"设置",-1)),v("button",{class:"settings__close",onClick:l,"aria-label":"关闭"},[...h[6]||(h[6]=[v("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"#fff","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),v("div",kg,[v("button",{class:"settings__item",onClick:y},[h[8]||(h[8]=Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M9 18V5l10-2v9" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M9 18a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm10-6a3 3 0 1 1-6 0" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>音乐</span>',2)),v("span",Pg,fe(p.value?"开":"关"),1)]),v("button",{class:"settings__item",onClick:x},[...h[9]||(h[9]=[Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M12 3v12m0 0l-4-4m4 4l4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M4 19h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>下载存档</span>',2)])]),v("button",{class:"settings__item",onClick:C},[...h[10]||(h[10]=[Vs('<span class="settings__icon" data-v-29564b82><svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-29564b82><path d="M12 21V9m0 0l4 4m-4-4L8 13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-29564b82></path><path d="M4 5h16" stroke="#fff" stroke-width="2" stroke-linecap="round" data-v-29564b82></path></svg></span><span class="settings__label" data-v-29564b82>上传存档</span>',2)])]),v("input",{ref_key:"fileInput",ref:$,type:"file",accept:".json",onChange:L,style:{display:"none"}},null,544)])])])):kt("",!0)]))}},ir=Xt(Ng,[["__scopeId","data-v-29564b82"]]);function Og(e,t,n){const s=document.getElementById("progress-bar"),o=document.getElementById("progress-text");s&&(s.style.width=n+"%"),o&&(o.textContent=`${e} / ${t} (${n}%)`)}function rr(){const e=document.getElementById("loading-screen");e&&(e.classList.add("fade-out"),setTimeout(()=>{e.style.display="none"},500))}async function Dg(){try{console.log("开始预缓存资源..."),await go(Og),console.log("预缓存完成！"),Di(ir).mount("#app"),setTimeout(()=>{rr()},500)}catch(e){console.error("预缓存失败:",e),Di(ir).mount("#app"),rr()}}Dg();
